!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/chip-player-js/",t(t.s=84)}([function(e,t,n){"use strict";e.exports=n(91)},function(e,t){e.exports="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")()},function(e,t,n){var r=n(46),i=n(5),o=n(47),a=n(10).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(16)("wks"),i=n(40),o=n(1).Symbol,a=n(67);e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(10),i=n(17);e.exports=n(11)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(1),i=n(41).f,o=n(8),a=n(26),s=n(39),u=n(69),c=n(114);e.exports=function(e,t){var n,l,f,h,d,p=e.target,m=e.global,y=e.stat;if(n=m?r:y?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(h=t[l],e.noTargetGet?(d=i(n,l),f=d&&d.value):f=n[l],!c(m?l:p+(y?".":"#")+l,e.forced)&&void 0!==f){if(typeof h===typeof f)continue;u(h,f)}(e.sham||f&&f.sham)&&o(h,"sham",!0),a(n,l,h,e)}}},function(e,t,n){var r=n(11),i=n(65),o=n(12),a=n(23),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(7);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(37),i=n(15);e.exports=function(e){return r(i(e))}},function(e,t,n){e.exports=n(184)()},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(1),i=n(39),o=r["__core-js_shared__"]||i("__core-js_shared__",{});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.0.1",mode:n(24)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(10).f,i=n(5),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(15);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(22),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(7);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=!1},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(1),i=n(8),o=n(5),a=n(39),s=n(68),u=n(27),c=u.get,l=u.enforce,f=String(s).split("toString");n(16)("inspectSource",function(e){return s.call(e)}),(e.exports=function(e,t,n,s){var u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,h=!!s&&!!s.noTargetGet;if("function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),l(n).source=f.join("string"==typeof t?t:"")),e===r)return void(c?e[t]=n:a(t,n));u?!h&&e[t]&&(c=!0):delete e[t],c?e[t]=n:i(e,t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||s.call(this)})},function(e,t,n){var r,i,o,a=n(110),s=n(7),u=n(8),c=n(5),l=n(28),f=n(29),h=n(1).WeakMap,d=function(e){return o(e)?i(e):r(e,{})},p=function(e){return function(t){var n;if(!s(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(a){var m=new h,y=m.get,g=m.has,v=m.set;r=function(e,t){return v.call(m,e,t),t},i=function(e){return y.call(m,e)||{}},o=function(e){return g.call(m,e)}}else{var b=l("state");f[b]=!0,r=function(e,t){return u(e,b,t),t},i=function(e){return c(e,b)?e[b]:{}},o=function(e){return c(e,b)}}e.exports={set:r,get:i,has:o,enforce:d,getterFor:p}},function(e,t,n){var r=n(16)("keys"),i=n(40);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports={}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(70),i=n(43);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(1),i=n(63),o=Function.call;e.exports=function(e,t,n){return i(o,r[e].prototype[t],n)}},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function m(e,t,n){function r(e){l[e]&&(c[e]=function(t){return new Promise(function(n,r){f.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{o(l[e](t))}catch(e){u(f[0][3],e)}}function o(e){e.value instanceof p?Promise.resolve(e.value.v).then(a,s):u(f[0][2],e)}function a(e){i("next",e)}function s(e){i("throw",e)}function u(e,t){e(t),f.shift(),f.length&&i(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(e,t||[]),f=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c}function y(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:p(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function g(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(i,o){r=e[t](r),n(i,o,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"===typeof f?f(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)}function v(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function b(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=r,n.d(t,"__assign",function(){return T}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=f,t.__read=h,t.__spread=d,t.__await=p,t.__asyncGenerator=m,t.__asyncDelegator=y,t.__asyncValues=g,t.__makeTemplateObject=v,t.__importStar=b,t.__importDefault=w;var E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},T.apply(this,arguments)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a});var r="https://gifx.co/chip",i="https://gifx.co/music/",o=64,a=!1},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n}return o(t,e),u(t,[{key:"handleClick",value:function(){this.props.toggleFavorite(this.props.href)}},{key:"render",value:function(){var e=this.props.favorites.includes(this.props.href);return s.a.createElement("button",{onClick:this.handleClick,className:"Favorite-button"+(e?" added":"")},"\xa0\u2665\ufe0e\xa0")}}]),t}(a.PureComponent);t.a=c},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){var r=n(6),i=n(19),o="".split;e.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(19);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(1),i=n(8);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(11),i=n(25),o=n(17),a=n(13),s=n(23),u=n(5),c=n(65),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){var r=n(70),i=n(43).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(3)("unscopables"),i=n(45),o=n(8),a=Array.prototype;void 0==a[r]&&o(a,r,i(null)),e.exports=function(e){a[r][e]=!0}},function(e,t,n){var r=n(12),i=n(115),o=n(43),a=n(116),s=n(66),u=n(28)("IE_PROTO"),c=function(){},l=function(){var e,t=s("iframe"),n=o.length;for(t.style.display="none",a.appendChild(t),t.src=String("javascript:"),e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[o[n]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(c.prototype=r(e),n=new c,c.prototype=null,n[u]=e):n=l(),void 0===t?n:i(n,t)},n(29)[u]=!0},function(e,t,n){e.exports=n(1)},function(e,t,n){t.f=n(3)},function(e,t){e.exports={}},function(e,t,n){"use strict";(function(e){function r(e,t){throw f.create(e,t)}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e){function t(e){u(f[e],"delete"),delete f[e]}function n(e){return e=e||h,i(f,e)||r("no-app",{name:e}),f[e]}function o(t,n){if(void 0===n&&(n={}),"object"!==typeof n||null===n){n={name:n}}var o=n;void 0===o.name&&(o.name=h);var a=o.name;"string"===typeof a&&a||r("bad-app-name",{name:String(a)}),i(f,a)&&r("duplicate-app",{name:a});var s=new e(t,o,m);return f[a]=s,u(s,"create"),s}function a(){return Object.keys(f).map(function(e){return f[e]})}function s(t,i,o,s,u){function l(e){return void 0===e&&(e=n()),"function"!==typeof e[t]&&r("invalid-app-argument",{name:t}),e[t]()}return void 0===u&&(u=!1),d[t]&&r("duplicate-service",{name:t}),d[t]=i,s&&(p[t]=s,a().forEach(function(e){s("create",e)})),void 0!==o&&c.deepExtend(l,o),m[t]=l,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,t).apply(this,u?e:[])},l}function u(e,t){for(var n=0,r=Object.keys(d);n<r.length;n++){var i=r[n],o=l(e,i);if(null===o)return;p[o]&&p[o](t,e)}}function l(e,t){if("serverAuth"===t)return null;var n=t;e.options;return n}var f={},d={},p={},m={__esModule:!0,initializeApp:o,app:n,apps:null,Promise:Promise,SDK_VERSION:"5.11.0",INTERNAL:{registerService:s,removeApp:t,factories:d,useAsService:l}};return c.patchProperty(m,"default",m),Object.defineProperty(m,"apps",{get:a}),c.patchProperty(n,"App",e),m}function a(){function e(e){c.deepExtend(t,e)}var t=o(p);return t.INTERNAL=u.__assign({},t.INTERNAL,{createFirebaseNamespace:a,extendNamespace:e,createSubscribe:c.createSubscribe,ErrorFactory:c.ErrorFactory,deepExtend:c.deepExtend}),t}Object.defineProperty(t,"__esModule",{value:!0});var s,u=n(33),c=n(173),l=(s={},s["no-app"]="No Firebase App '{$name}' has been created - call Firebase App.initializeApp()",s["bad-app-name"]="Illegal App name: '{$name}",s["duplicate-app"]="Firebase App named '{$name}' already exists",s["app-deleted"]="Firebase App named '{$name}' already deleted",s["duplicate-service"]="Firebase service named '{$name}' already registered",s["invalid-app-argument"]="firebase.{$name}() takes either no argument or a Firebase App instance.",s),f=new c.ErrorFactory("app","Firebase",l),h="[DEFAULT]",d=[],p=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=c.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){d.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){d=d.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(e.services_[i]);o<a.length;o++){var s=a[o];t.push(e.services_[i][s])}return Promise.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=h),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==h?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;c.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(d.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),d=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&r("app-deleted",{name:this.name_})},e}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var m=!1;try{m="[object process]"===Object.prototype.toString.call(e.process)}catch(e){}if(m&&console.warn('\nWarning: This is a browser-targeted Firebase bundle but it appears it is being\nrun in a Node environment.  If running in a Node environment, make sure you\nare using the bundle specified by the "main" field in package.json.\n\nIf you are using Webpack, you can specify "main" as the first item in\n"resolve.mainFields":\nhttps://webpack.js.org/configuration/resolve/#resolvemainfields\n\nIf using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\nto false and "main" to true:\nhttps://github.com/rollup/rollup-plugin-node-resolve\n'),self&&"firebase"in self){console.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&console.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=a();t.default=g,t.firebase=g}).call(t,n(4))},function(e,t,n){"use strict";function r(e,t){var n=""+t.end+t.strict+t.sensitive,r=A[n]||(A[n]={});if(r[e])return r[e];var i=[],o=E()(e,i,t),a={regexp:o,keys:i};return C<x&&(r[e]=a,C++),a}function i(e,t){void 0===t&&(t={}),"string"===typeof t&&(t={path:t});var n=t,i=n.path,o=n.exact,a=void 0!==o&&o,s=n.strict,u=void 0!==s&&s,c=n.sensitive,l=void 0!==c&&c;return[].concat(i).reduce(function(t,n){if(t)return t;var i=r(n,{end:a,strict:u,sensitive:l}),o=i.regexp,s=i.keys,c=o.exec(e);if(!c)return null;var f=c[0],h=c.slice(1),d=e===f;return a&&!d?null:{path:n,url:"/"===n&&""===f?"/":f,isExact:d,params:s.reduce(function(e,t,n){return e[t.name]=h[n],e},{})}},null)}function o(e){return 0===y.a.Children.count(e)}function a(e){return"/"===e.charAt(0)?e:"/"+e}function s(e,t){return e?Object(T.a)({},t,{pathname:a(e)+t.pathname}):t}function u(e,t){if(!e)return t;var n=a(e);return 0!==t.pathname.indexOf(n)?t:Object(T.a)({},t,{pathname:t.pathname.substr(n.length)})}function c(e){return"string"===typeof e?e:Object(v.e)(e)}function l(e){return function(){Object(b.a)(!1)}}function f(){}n.d(t,"a",function(){return O}),n.d(t,"b",function(){return N}),n.d(t,"c",function(){return D}),n.d(t,"d",function(){return k});var h=n(182),d=n.n(h),p=n(76),m=n(0),y=n.n(m),g=n(14),v=(n.n(g),n(51),n(77)),b=n(53),w=n(191),E=n.n(w),T=n(52),_=n(78),S=(n.n(_),n(79)),I=n(194),k=(n.n(I),function(e){var t=d()();return t.Provider.displayName=e+".Provider",t.Consumer.displayName=e+".Consumer",t}("Router")),N=function(e){function t(t){var n;return n=e.call(this,t)||this,n.state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen(function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e})),n}Object(p.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return y.a.createElement(k.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(y.a.Component),A=(y.a.Component,y.a.Component,{}),x=1e4,C=0,O=function(e){function t(){return e.apply(this,arguments)||this}return Object(p.a)(t,e),t.prototype.render=function(){var e=this;return y.a.createElement(k.Consumer,null,function(t){t||Object(b.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?i(n.pathname,e.props):t.match,a=Object(T.a)({},t,{location:n,match:r}),s=e.props,u=s.children,c=s.component,l=s.render;return Array.isArray(u)&&0===u.length&&(u=null),"function"===typeof u&&void 0===(u=u(a))&&(u=null),y.a.createElement(k.Provider,{value:a},u&&!o(u)?u:a.match?c?y.a.createElement(c,a):l?l(a):null:null)})},t}(y.a.Component),D=(y.a.Component,function(e){function t(){return e.apply(this,arguments)||this}return Object(p.a)(t,e),t.prototype.render=function(){var e=this;return y.a.createElement(k.Consumer,null,function(t){t||Object(b.a)(!1);var n,r,o=e.props.location||t.location;return y.a.Children.forEach(e.props.children,function(e){if(null==r&&y.a.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?i(o.pathname,Object(T.a)({},e.props,{path:a})):t.match}}),r?y.a.cloneElement(n,{location:o,computedMatch:r}):null})},t}(y.a.Component))},function(e,t,n){"use strict"},function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}t.a=r},function(e,t,n){"use strict";function r(e,t){if(!e)throw i?new Error(o):new Error(o+": "+(t||""))}var i=!0,o="Invariant failed";t.a=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,o){r(this,e),this._outerAudioProcess=this._outerAudioProcess.bind(this),this.paused=!0,this.fileExtensions=[],this.metadata={},this.audioCtx=t,this.destinationNode=n,this.onPlayerStateUpdate=o,this.bufferSize=2048,this._innerAudioProcess=null,this.audioNode=this.audioCtx.createScriptProcessor(this.bufferSize,2,2),this.audioNode.onaudioprocess=this._outerAudioProcess,this.debug=-1!==window.location.search.indexOf("debug=true"),this.timeCount=0,this.renderTime=0,this.perfLoggingInterval=100}return i(e,[{key:"togglePause",value:function(){return this.paused=!this.paused,this.paused}},{key:"isPaused",value:function(){return this.paused}},{key:"resume",value:function(){this.paused=!1}},{key:"canPlay",value:function(e){return-1!==this.fileExtensions.indexOf(e.toLowerCase())}},{key:"loadData",value:function(e,t){throw Error("Player.loadData() must be implemented.")}},{key:"stop",value:function(){throw Error("Player.stop() must be implemented.")}},{key:"restart",value:function(){throw Error("Player.restart() must be implemented.")}},{key:"isPlaying",value:function(){throw Error("Player.isPlaying() must be implemented.")}},{key:"setTempo",value:function(){console.warn("Player.setTempo() not implemented for this player.")}},{key:"setVoices",value:function(){console.warn("Player.setVoices() not implemented for this player.")}},{key:"setFadeout",value:function(e){console.warn("Player.setFadeout() not implemented for this player.")}},{key:"getVoiceName",value:function(e){console.warn("Player.getVoiceName() not implemented for this player.")}},{key:"getNumVoices",value:function(){return 0}},{key:"getNumSubtunes",value:function(){return 1}},{key:"getSubtune",value:function(){return 0}},{key:"getMetadata",value:function(){return{title:null,author:null}}},{key:"getParamDefs",value:function(){return[]}},{key:"connect",value:function(){if(!this._innerAudioProcess)throw Error("Player.setAudioProcess has not been called.");this.audioNode.connect(this.destinationNode)}},{key:"suspend",value:function(){this.stopped=!0,this.paused=!0}},{key:"setOnPlayerStateUpdate",value:function(e){this.onPlayerStateUpdate=e}},{key:"setAudioProcess",value:function(e){if("function"!==typeof e)throw Error("AudioProcess must be a function.");this._innerAudioProcess=e}},{key:"_outerAudioProcess",value:function(e){var t=performance.now();this._innerAudioProcess(e);var n=performance.now();if(this.debug&&(this.renderTime+=n-t,++this.timeCount>=this.perfLoggingInterval)){var r=this.renderTime/this.timeCount,i=1e3*this.bufferSize/this.audioCtx.sampleRate;console.log("[%s] %s ms to render %d frames (%s ms) (%s% utilization)",this.constructor.name,r.toFixed(2),this.bufferSize,i.toFixed(1),(100*r/i).toFixed(1)),this.renderTime=0,this.timeCount=0}}},{key:"muteAudioDuringCall",value:function(e,t){if(e&&"running"===e.context.state&&!1===this.paused){var n=e.onaudioprocess;e.onaudioprocess=function(r){for(var i=0;i<r.outputBuffer.numberOfChannels;i++)r.outputBuffer.getChannelData(i).fill(0);t(),e.onaudioprocess=n}}else t()}}],[{key:"metadataFromFilepath",value:function(e){var t=e.split("/"),n={};return n.title=t.pop(),n.system=t.shift(),"Game MIDI"===n.system?n.game=t.shift():n.artist=t.shift(),n}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e){var t=e.send;return e.send=function(){var n=arguments;return new Promise(function(r,i){e.onload=function(){e.status<200||e.status>=300?i({request:e}):r(e)},e.onerror=function(){i({request:e})},t.apply(e,n)})},e}t.a=r},function(e,t,n){"use strict";function r(e){var t=e.dim?l.linkDim:null,n=e.dim?l.folderImgDim:l.folderImg;return c.a.createElement(i.b,{to:e.to,style:t},c.a.createElement("img",{alt:"folder",style:n,src:a.a}),e.children)}t.a=r;var i=n(75),o=n(217),a=n.n(o),s=n(14),u=(n.n(s),n(0)),c=n.n(u),l={folderImg:{verticalAlign:"bottom"},folderImgDim:{verticalAlign:"bottom",filter:"grayscale() brightness(0.75)"},linkDim:{color:"var(--neutral2)"}};r.propTypes={to:s.string.isRequired,dim:s.bool}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return g=e,v}}function o(e,t){try{return e(t)}catch(e){return g=e,v}}function a(e,t,n){try{e(t,n)}catch(e){return g=e,v}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&m(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var a=new s(r);a.then(i,o),c(e,new p(t,n,a))})}function c(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);l(e,t)}function l(e,t){y(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?f(t.promise,e._18):h(t.promise,e._18));var r=o(n,e._18);r===v?h(t.promise,g):f(t.promise,r)})}function f(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===v)return h(e,g);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void d(e);if("function"===typeof n)return void m(n.bind(t),e)}e._83=1,e._18=t,d(e)}function h(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),d(e)}function d(e){if(1===e._75&&(c(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)c(e,e._38[t]);e._38=null}}function p(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=a(e,function(e){n||(n=!0,f(t,e))},function(e){n||(n=!0,h(t,e))});n||r!==v||(n=!0,h(t,g))}var y=n(87),g=null,v={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return c(this,new p(e,t,n)),n}},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(92)},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),c=n.n(u),l=n(96),f=n.n(l),h=n(97),d=n.n(h),p=n(61),m=n.n(p),y=n(100),g=(n.n(y),n(174),n(176),n(181)),v=n(75),b=n(34),w=n(50),E=n(195),T=n(199),_=n.n(T),S=n(200),I=n(203),k=n(204),N=n(55),A=n(206),x=n(207),C=n(218),O=n(221),D=n(35),M=n(225),P=n(226),R=n(227),L=n(228),F=n(56),U=n(237),j=n.n(U),B=n(238),V=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),q=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onDrop=function(e){var t=new FileReader,r=e[0];t.onload=function(){var e=t.result;n.sequencer.playSongFile(r.name,e)},t.readAsArrayBuffer(r)},n.togglePause=n.togglePause.bind(n),n.toggleSettings=n.toggleSettings.bind(n),n.playContext=n.playContext.bind(n),n.prevSong=n.prevSong.bind(n),n.nextSong=n.nextSong.bind(n),n.prevSubtune=n.prevSubtune.bind(n),n.nextSubtune=n.nextSubtune.bind(n),n.handleTimeSliderChange=n.handleTimeSliderChange.bind(n),n.handleTempoChange=n.handleTempoChange.bind(n),n.handleSetVoices=n.handleSetVoices.bind(n),n.handleSequencerStateUpdate=n.handleSequencerStateUpdate.bind(n),n.handlePlayerError=n.handlePlayerError.bind(n),n.handlePlayRandom=n.handlePlayRandom.bind(n),n.handleSongClick=n.handleSongClick.bind(n),n.handleLogin=n.handleLogin.bind(n),n.handleLogout=n.handleLogout.bind(n),n.handleToggleFavorite=n.handleToggleFavorite.bind(n),n.attachMediaKeyHandlers=n.attachMediaKeyHandlers.bind(n),n.fetchDirectory=n.fetchDirectory.bind(n),n.attachMediaKeyHandlers(),n.contentAreaRef=c.a.createRef(),0===y.apps.length&&y.initializeApp(g.a),y.auth().onAuthStateChanged(function(e){n.setState({user:e,loadingUser:!!e}),e&&n.db.collection("users").doc(e.uid).get().then(function(e){var t=e.data();n.setState({faves:t.faves||[],showPlayerSettings:!!t.settings&&t.settings.showPlayerSettings,loadingUser:!1})}).catch(function(){n.setState({loadingUser:!1})})}),n.db=y.firestore();var r=n.audioCtx=new(window.AudioContext||window.webkitAudioContext),i=r.createGain();i.gain.value=1,i.connect(r.destination);var s=n.playerNode=i;n._unlockAudioContext(r),console.log("Sample rate: %d hz",r.sampleRate),n.state={loading:!0,loadingUser:!0,paused:!0,ejected:!0,playerError:null,currentSongMetadata:{},currentSongNumVoices:0,currentSongNumSubtunes:0,currentSongSubtune:0,currentSongDurationMs:1,currentSongPositionMs:0,tempo:1,voices:Array(b.c).fill(!0),voiceNames:Array(b.c).fill(""),imageUrl:null,showPlayerSettings:!1,user:null,faves:[],songUrl:null,directories:{}};try{var u=n.chipCore=new _.a({locateFile:function(e,t){return e.endsWith(".wasm")||e.endsWith(".wast")?"/chip-player-js/"+e:t+e},onRuntimeInitialized:function(){n.sequencer.setPlayers([new S.a(r,s,u),new I.a(r,s,u),new k.a(r,s,u)]),n.setState({loading:!1});var e=m.a.parse(window.location.search.substr(1));e.play&&setTimeout(function(){n.sequencer.playSonglist([e.play]),e.t&&setTimeout(function(){n.sequencer.getPlayer()&&n.sequencer.getPlayer().seekMs(parseInt(e.t,10))},100)},500)}})}catch(e){Object.assign(n.state,{playerError:"Error loading player engine.",loading:!1})}return n.sequencer=new R.a([],n.handleSequencerStateUpdate,n.handlePlayerError),n}return s(t,e),V(t,[{key:"handleLogin",value:function(){var e=new y.auth.FacebookAuthProvider;y.auth().signInWithPopup(e).then(function(e){console.log("Firebase auth result:",e)}).catch(function(e){console.log("Firebase auth error:",e)})}},{key:"handleLogout",value:function(){var e=this;y.auth().signOut().then(function(){e.setState({user:null,faves:[]})})}},{key:"handleToggleFavorite",value:function(e){var t=this,n=this.state.user;if(n){var r=this.db.collection("users").doc(n.uid),o=void 0,a=void 0,s=this.state.faves;s.includes(e)?(o=s.filter(function(t){return t!==e}),a=y.firestore.FieldValue.arrayRemove(e)):(o=[].concat(i(s),[e]),a=y.firestore.FieldValue.arrayUnion(e)),this.setState({faves:o}),r.update({faves:a}).catch(function(e){t.setState({faves:s}),console.log("Couldn't update favorites in Firebase.",e)})}}}]),V(t,[{key:"_unlockAudioContext",value:function(e){if(console.log("AudioContext initial state is %s.",e.state),"suspended"===e.state){var t=["touchstart","touchend","mousedown","mouseup"],n=function n(){return e.resume().then(function(){return t.forEach(function(e){return document.body.removeEventListener(e,n)})})};t.forEach(function(e){return document.body.addEventListener(e,n,!1)})}}},{key:"attachMediaKeyHandlers",value:function(){var e=this;if("mediaSession"in navigator){console.log("Attaching Media Key event handlers.");var t=document.createElement("audio");t.src="/chip-player-js/5-seconds-of-silence.mp3",t.loop=!0,t.volume=0,t.play(),navigator.mediaSession.setActionHandler("play",function(){console.debug("Media Key: play"),e.togglePause()}),navigator.mediaSession.setActionHandler("pause",function(){console.debug("Media Key: pause"),e.togglePause()}),navigator.mediaSession.setActionHandler("previoustrack",function(){console.debug("Media Key: previoustrack"),e.prevSong()}),navigator.mediaSession.setActionHandler("nexttrack",function(){console.debug("Media Key: nexttrack"),e.nextSong()})}}},{key:"playContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.sequencer.playContext(e,t)}},{key:"prevSong",value:function(){this.sequencer.prevSong()}},{key:"nextSong",value:function(){this.sequencer.nextSong()}},{key:"prevSubtune",value:function(){this.sequencer.prevSubtune()}},{key:"nextSubtune",value:function(){this.sequencer.nextSubtune()}},{key:"handleSequencerStateUpdate",value:function(e){var t=this;if(console.debug("App.handleSequencerStateUpdate(isEjected=%s)",e),e)this.setState({ejected:!0,currentSongSubtune:0,currentSongMetadata:{},currentSongNumVoices:0,currentSongPositionMs:0,currentSongDurationMs:1,currentSongNumSubtunes:0,imageUrl:null,songUrl:null});else{var n=this.sequencer.getPlayer(),r=this.sequencer.getCurrUrl();if(r&&r!==this.state.songUrl){var o=d()(r.replace(b.b,"/")).dir,a=b.a+"/image?path="+encodeURIComponent(o);r.split("/").pop(),this.imageRequest&&this.imageRequest.abort(),this.imageRequest=Object(N.a)(new XMLHttpRequest),this.imageRequest.responseType="json",this.imageRequest.open("GET",a),this.imageRequest.send().then(function(e){if(e.status>=200&&e.status<400){var n=e.response.imageUrl;t.setState({imageUrl:n})}}).catch(function(e){t.setState({imageUrl:null})})}this.setState({ejected:!1,paused:n.isPaused(),currentSongSubtune:n.getSubtune(),currentSongMetadata:n.getMetadata(),currentSongNumVoices:n.getNumVoices(),currentSongPositionMs:n.getPositionMs(),currentSongDurationMs:n.getDurationMs(),currentSongNumSubtunes:n.getNumSubtunes(),tempo:1,voiceNames:[].concat(i(Array(n.getNumVoices()))).map(function(e,t){return n.getVoiceName(t)}),voices:[].concat(i(Array(n.getNumVoices()))).fill(!0),songUrl:r})}}},{key:"handlePlayerError",value:function(e){this.setState({playerError:e})}},{key:"togglePause",value:function(){this.sequencer.getPlayer()&&this.setState({paused:this.sequencer.getPlayer().togglePause()})}},{key:"toggleSettings",value:function(){var e=!this.state.showPlayerSettings;this.setState({showPlayerSettings:e});var t=this.state.user;if(t){this.db.collection("users").doc(t.uid).update({settings:{showPlayerSettings:e}}).catch(function(e){console.log("Couldn't update settings in Firebase.",e)})}}},{key:"handleTimeSliderChange",value:function(e){var t=this;if(this.sequencer.getPlayer()){var n=e.target?e.target.value:e,r=Math.floor(n*this.state.currentSongDurationMs);if(b.d){var i=Object.assign({},m.a.parse(window.location.search.substr(1)),{t:r}),o="?"+m.a.stringify(i).replace(/%20/g,"+").replace(/%2F/g,"/");window.history.replaceState(null,"",o)}this.sequencer.getPlayer().seekMs(r),this.setState({currentSongPositionMs:n*this.state.currentSongDurationMs}),setTimeout(function(){t.sequencer.getPlayer().isPlaying()&&t.setState({currentSongPositionMs:t.sequencer.getPlayer().getPositionMs()})},100)}}},{key:"handleSetVoices",value:function(e){this.sequencer.getPlayer()&&(this.sequencer.getPlayer().setVoices(e),this.setState({voices:[].concat(i(e))}))}},{key:"handleTempoChange",value:function(e){if(this.sequencer.getPlayer()){var t=parseFloat(e.target?e.target.value:e)||1;this.sequencer.getPlayer().setTempo(t),this.setState({tempo:t})}}},{key:"handlePlayRandom",value:function(){var e=this;fetch(b.a+"/random?limit=100").then(function(e){return e.json()}).then(function(t){return e.sequencer.playContext(t.items.map(function(e){return e.file}),10)})}},{key:"handleSongClick",value:function(e,t,n){var r=this;return function(i){i.preventDefault(),t?r.playContext(t,n):r.sequencer.playSonglist([e])}}},{key:"fetchDirectory",value:function(e){var t=this;fetch(b.a+"/browse?path=%2F"+encodeURIComponent(e)).then(function(e){return e.json()}).then(function(n){var i=n.sort(function(e,t){return e.type<t.type?-1:e.type>t.type?1:0}).map(function(e,t){return e.idx=t,e}),o=Object.assign({},t.state.directories,r({},e,i));t.setState({directories:o})})}},{key:"pathToLinks",value:function(e){return e?(e=e.replace(/^https?:\/\/[a-z0-9\-.:]+\/(music|catalog)\//,"/").split("/").slice(0,-1).join("/")+"/",c.a.createElement(F.a,{dim:!0,to:"/browse"+e},decodeURI(e))):null}},{key:"render",value:function(){var e=this,n=t.titlesFromMetadata(this.state.currentSongMetadata),r=n.title,i=n.subtitle,o=this.sequencer.getCurrContext(),a=this.sequencer.getCurrIdx(),s=this.pathToLinks(this.state.songUrl);return c.a.createElement(v.a,{basename:"/chip-player-js"},c.a.createElement(E.a,{disableClick:!0,style:{},onDrop:this.onDrop},function(t){return c.a.createElement("div",{className:"App"},c.a.createElement(B.a,{dropzoneProps:t}),c.a.createElement(M.a,{user:e.state.user,handleLogout:e.handleLogout,handleLogin:e.handleLogin,isPhone:f.a.phone}),c.a.createElement("div",{className:"App-main"},c.a.createElement("div",{className:"App-main-content-area",ref:e.contentAreaRef},c.a.createElement("div",{className:"tab-container"},c.a.createElement(v.c,{className:"tab",activeClassName:"tab-selected",to:"/",exact:!0},"Search"),c.a.createElement(v.c,{className:"tab",activeClassName:"tab-selected",to:"/browse"},"Browse"),c.a.createElement(v.c,{className:"tab",activeClassName:"tab-selected",to:"/favorites"},"Favorites")),c.a.createElement(w.c,null,c.a.createElement(v.d,{path:"/",exact:!0,render:function(){return c.a.createElement(x.a,{currContext:o,currIdx:a,toggleFavorite:e.handleToggleFavorite,favorites:e.state.faves,onSongClick:e.handleSongClick},e.state.loading&&c.a.createElement("p",null,"Loading player engine..."))}}),c.a.createElement(v.d,{path:"/favorites",render:function(){return c.a.createElement(P.a,{user:e.state.user,loadingUser:e.state.loadingUser,handleLogin:e.handleLogin,onSongClick:e.handleSongClick,currContext:o,currIdx:a,toggleFavorite:e.handleToggleFavorite,favorites:e.state.faves})}}),c.a.createElement(v.d,{path:"/browse/:browsePath*",render:function(t){var n=t.match;return e.contentAreaRef.current&&c.a.createElement(L.a,{currContext:o,currIdx:a,browsePath:n.params.browsePath||"",directories:e.state.directories,fetchDirectory:e.fetchDirectory,handleSongClick:e.handleSongClick,scrollContainerRef:e.contentAreaRef,favorites:e.state.faves,toggleFavorite:e.handleToggleFavorite})}}))),!f.a.phone&&!e.state.loading&&c.a.createElement(O.a,{audioCtx:e.audioCtx,sourceNode:e.playerNode,chipCore:e.chipCore,paused:e.state.ejected||e.state.paused})),c.a.createElement("div",{className:"App-footer"},c.a.createElement("div",{className:"App-footer-main"},c.a.createElement("button",{onClick:e.prevSong,className:"box-button",disabled:e.state.ejected},"<")," ",c.a.createElement("button",{onClick:e.togglePause,className:"box-button",disabled:e.state.ejected},e.state.paused?"Resume":"Pause")," ",c.a.createElement("button",{onClick:e.nextSong,className:"box-button",disabled:e.state.ejected},">")," ",e.state.currentSongNumSubtunes>1&&c.a.createElement("span",{style:{whiteSpace:"nowrap"}},"Tune ",e.state.currentSongSubtune+1," of ",e.state.currentSongNumSubtunes," ",c.a.createElement("button",{className:"box-button",disabled:e.state.ejected,onClick:e.prevSubtune},"<")," ",c.a.createElement("button",{className:"box-button",disabled:e.state.ejected,onClick:e.nextSubtune},">")),c.a.createElement("span",{style:{float:"right"}},c.a.createElement("button",{className:"box-button",onClick:e.handlePlayRandom},c.a.createElement("img",{alt:"Roll the dice",src:j.a,style:{verticalAlign:"bottom"}}),"Random")," ",!e.state.showPlayerSettings&&c.a.createElement("button",{className:"box-button",onClick:e.toggleSettings},"Settings >")),e.state.playerError&&c.a.createElement("div",{className:"App-error"},"ERROR: ",e.state.playerError),c.a.createElement(C.a,{currentSongDurationMs:e.state.currentSongDurationMs,getCurrentPositionMs:function(){var t=e.sequencer;return t&&t.getPlayer()?t.getPlayer().getPositionMs():0},onChange:e.handleTimeSliderChange}),!e.state.ejected&&c.a.createElement("div",{className:"SongDetails"},e.state.faves&&e.state.songUrl&&c.a.createElement("div",{style:{float:"left",marginBottom:"58px"}},c.a.createElement(D.a,{favorites:e.state.faves,toggleFavorite:e.handleToggleFavorite,href:e.state.songUrl})),c.a.createElement("div",{className:"SongDetails-title"},r),c.a.createElement("div",{className:"SongDetails-subtitle"},i),c.a.createElement("div",{className:"SongDetails-filepath"},s))),e.state.showPlayerSettings&&c.a.createElement("div",{className:"App-footer-settings"},c.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"19px"}},c.a.createElement("h3",{style:{margin:"0 8px 0 0"}},"Player Settings"),c.a.createElement("button",{className:"box-button",onClick:e.toggleSettings},"Close")),e.sequencer.getPlayer()?c.a.createElement(A.a,{ejected:e.state.ejected,tempo:e.state.tempo,numVoices:e.state.currentSongNumVoices,voices:e.state.voices,voiceNames:e.state.voiceNames,handleTempoChange:e.handleTempoChange,handleSetVoices:e.handleSetVoices,getParameter:e.sequencer.getPlayer().getParameter,setParameter:e.sequencer.getPlayer().setParameter,paramDefs:e.sequencer.getPlayer().getParamDefs()}):c.a.createElement("div",null,"(No active player)")),e.state.imageUrl&&c.a.createElement("div",{className:"App-footer-art",style:{backgroundImage:'url("'+e.state.imageUrl+'")'}})))}))}}],[{key:"titlesFromMetadata",value:function(e){return e.formatted?e.formatted:{title:t.allOrNone(e.artist," - ")+e.title,subtitle:[e.game,e.system].filter(function(e){return e}).join(" - ")+t.allOrNone(" (",e.copyright,")")}}},{key:"allOrNone",value:function(){for(var e="",t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){if(!n[i])return"";e+=n[i]}return e}}]),t}(c.a.Component);t.a=q},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&d&&(m=!1,d.length?p=d.concat(p):y=-1,p.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=p.length;t;){for(d=p,p=[];++y<t;)d&&d[y].run();y=-1,t=p.length}d=null,m=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"===typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"===typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],m=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";t.decode=t.parse=n(98),t.encode=t.stringify=n(99)},function(e,t,n){var r=n(63),i=n(37),o=n(20),a=n(21),s=n(64);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var m,y,g=o(t),v=i(g),b=r(s,p,3),w=a(v.length),E=0,T=n?d(t,w):u?d(t,0):void 0;w>E;E++)if((h||E in v)&&(m=v[E],y=b(m,E,g),e))if(n)T[E]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:T.push(m)}else if(l)return!1;return f?-1:c||l?l:T}}},function(e,t,n){var r=n(109);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(7),i=n(38),o=n(3)("species");e.exports=function(e,t){var n;return i(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){e.exports=!n(11)&&!n(6)(function(){return 7!=Object.defineProperty(n(66)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(7),i=n(1).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){e.exports=!n(6)(function(){return!String(Symbol())})},function(e,t,n){e.exports=n(16)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(5),i=n(111),o=n(41),a=n(10);e.exports=function(e,t){for(var n=i(t),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(e,l)||s(e,l,u(t,l))}}},function(e,t,n){var r=n(5),i=n(13),o=n(112)(!1),a=n(29);e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){n(2)("iterator")},function(e,t,n){"use strict";var r=n(9),i=n(166),o=n(74),a=n(168),s=n(18),u=n(8),c=n(26),l=n(24),f=n(3)("iterator"),h=n(48),d=n(73),p=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,y=function(){return this};e.exports=function(e,t,n,d,g,v,b){i(n,t,d);var w,E,T,_=function(e){if(e===g&&A)return A;if(!m&&e in k)return k[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},S=t+" Iterator",I=!1,k=e.prototype,N=k[f]||k["@@iterator"]||g&&k[g],A=!m&&N||_(g),x="Array"==t?k.entries||N:N;if(x&&(w=o(x.call(new e)),p!==Object.prototype&&w.next&&(l||o(w)===p||(a?a(w,p):"function"!=typeof w[f]&&u(w,f,y)),s(w,S,!0,!0),l&&(h[S]=y))),"values"==g&&N&&"values"!==N.name&&(I=!0,A=function(){return N.call(this)}),l&&!b||k[f]===A||u(k,f,A),h[t]=A,g)if(E={values:_("values"),keys:v?A:_("keys"),entries:_("entries")},b)for(T in E)!m&&!I&&T in k||c(k,T,E[T]);else r({target:t,proto:!0,forced:m||I},E);return E}},function(e,t,n){"use strict";var r,i,o,a=n(74),s=n(8),u=n(5),c=n(24),l=n(3)("iterator"),f=!1,h=function(){return this};[].keys&&(o=[].keys(),"next"in o?(i=a(a(o)))!==Object.prototype&&(r=i):f=!0),void 0==r&&(r={}),c||u(r,l)||s(r,l,h),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var r=n(5),i=n(20),o=n(28)("IE_PROTO"),a=n(167),s=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){"use strict";function r(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}function o(e){var t=e["aria-current"],n=void 0===t?"page":t,r=e.activeClassName,o=void 0===r?"active":r,a=e.activeStyle,s=e.className,l=e.exact,f=e.isActive,p=e.location,m=e.strict,g=e.style,v=e.to,b=Object(d.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to"]),w="object"===typeof v?v.pathname:v,E=w&&w.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1");return u.a.createElement(c.a,{path:E,exact:l,strict:m,location:p,children:function(e){var t=e.location,r=e.match,c=!!(f?f(r,t):r),l=c?i(s,o):s,d=c?Object(h.a)({},g,a):g;return u.a.createElement(y,Object(h.a)({"aria-current":c&&n||null,className:l,style:d,to:v},b))}})}n.d(t,"a",function(){return m}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return o});var a=n(76),s=n(0),u=n.n(s),c=n(50);n.d(t,"d",function(){return c.a});var l=n(77),f=n(14),h=(n.n(f),n(51),n(52)),d=n(79),p=n(53),m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,t.history=Object(l.a)(t.props),t}return Object(a.a)(t,e),t.prototype.render=function(){return u.a.createElement(c.b,{history:this.history,children:this.props.children})},t}(u.a.Component),y=(u.a.Component,function(e){function t(){return e.apply(this,arguments)||this}Object(a.a)(t,e);var n=t.prototype;return n.handleClick=function(e,t){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented&&0===e.button&&(!this.props.target||"_self"===this.props.target)&&!r(e)){e.preventDefault();(this.props.replace?t.replace:t.push)(this.props.to)}},n.render=function(){var e=this,t=this.props,n=t.innerRef,r=(t.replace,t.to),i=Object(d.a)(t,["innerRef","replace","to"]);return u.a.createElement(c.d.Consumer,null,function(t){t||Object(p.a)(!1);var o="string"===typeof r?Object(l.c)(r,null,null,t.location):r,a=o?t.history.createHref(o):"";return u.a.createElement("a",Object(h.a)({},i,{onClick:function(n){return e.handleClick(n,t.history)},href:a,ref:n}))})},t}(u.a.Component))},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t.a=r},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)?e:"/"+e}function i(e){return"/"===e.charAt(0)?e.substr(1):e}function o(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)}function a(e,t){return o(e,t)?e.substr(t.length):e}function s(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function u(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function c(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function l(e,t,n,r){var i;"string"===typeof e?(i=u(e),i.state=t):(i=Object(k.a)({},e),void 0===i.pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Object(N.a)(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function f(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(A.a)(e.state,t.state)}function h(){function e(e){return i=e,function(){i===e&&(i=null)}}function t(e,t,n,r){if(null!=i){var o="function"===typeof i?i(e,t):i;"string"===typeof o?"function"===typeof n?n(o,r):r(!0):r(!1!==o)}else r(!0)}function n(e){function t(){n&&e.apply(void 0,arguments)}var n=!0;return o.push(t),function(){n=!1,o=o.filter(function(e){return e!==t})}}function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.forEach(function(e){return e.apply(void 0,t)})}var i=null,o=[];return{setPrompt:e,confirmTransitionTo:t,appendListener:n,notifyListeners:r}}function d(e,t){t(window.confirm(e))}function p(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function m(){return-1===window.navigator.userAgent.indexOf("Trident")}function y(){return-1===window.navigator.userAgent.indexOf("Firefox")}function g(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")}function v(){try{return window.history.state||{}}catch(e){return{}}}function b(e){function t(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname,s=i.search,u=i.hash,c=o+s+u;return z&&(c=a(c,z)),l(c,r,n)}function n(){return Math.random().toString(36).substr(2,q)}function i(e){Object(k.a)(Y,e),Y.length=M.length,W.notifyListeners(Y.location,Y.action)}function o(e){g(e)||f(t(e.state))}function u(){f(t(v()))}function f(e){if(G)G=!1,i();else{W.confirmTransitionTo(e,"POP",B,function(t){t?i({action:"POP",location:e}):y(e)})}}function y(e){var t=Y.location,n=K.indexOf(t.key);-1===n&&(n=0);var r=K.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(G=!0,T(i))}function b(e){return z+c(e)}function w(e,t){var r=l(e,t,n(),Y.location);W.confirmTransitionTo(r,"PUSH",B,function(e){if(e){var t=b(r),n=r.key,o=r.state;if(P)if(M.pushState({key:n,state:o},null,t),U)window.location.href=t;else{var a=K.indexOf(Y.location.key),s=K.slice(0,-1===a?0:a+1);s.push(r.key),K=s,i({action:"PUSH",location:r})}else window.location.href=t}})}function E(e,t){var r=l(e,t,n(),Y.location);W.confirmTransitionTo(r,"REPLACE",B,function(e){if(e){var t=b(r),n=r.key,o=r.state;if(P)if(M.replaceState({key:n,state:o},null,t),U)window.location.replace(t);else{var a=K.indexOf(Y.location.key);-1!==a&&(K[a]=r.key),i({action:"REPLACE",location:r})}else window.location.replace(t)}})}function T(e){M.go(e)}function _(){T(-1)}function S(){T(1)}function I(e){H+=e,1===H&&1===e?(window.addEventListener(O,o),R&&window.addEventListener(D,u)):0===H&&(window.removeEventListener(O,o),R&&window.removeEventListener(D,u))}function N(e){void 0===e&&(e=!1);var t=W.setPrompt(e);return Q||(I(1),Q=!0),function(){return Q&&(Q=!1,I(-1)),t()}}function A(e){var t=W.appendListener(e);return I(1),function(){I(-1),t()}}void 0===e&&(e={}),C||Object(x.a)(!1);var M=window.history,P=p(),R=!m(),L=e,F=L.forceRefresh,U=void 0!==F&&F,j=L.getUserConfirmation,B=void 0===j?d:j,V=L.keyLength,q=void 0===V?6:V,z=e.basename?s(r(e.basename)):"",W=h(),G=!1,X=t(v()),K=[X.key],H=0,Q=!1,Y={length:M.length,action:"POP",location:X,createHref:b,push:w,replace:E,go:T,goBack:_,goForward:S,block:N,listen:A};return Y}function w(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function E(e){window.location.hash=e}function T(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)}function _(e){function t(){var e=V(w());return U&&(e=a(e,U)),l(e)}function n(e){Object(k.a)(J,e),J.length=A.length,q.notifyListeners(J.location,J.action)}function i(){var e=w(),n=B(e);if(e!==n)T(n);else{var r=t(),i=J.location;if(!z&&f(i,r))return;if(W===c(r))return;W=null,o(r)}}function o(e){if(z)z=!1,n();else{q.confirmTransitionTo(e,"POP",R,function(t){t?n({action:"POP",location:e}):u(e)})}}function u(e){var t=J.location,n=H.lastIndexOf(c(t));-1===n&&(n=0);var r=H.lastIndexOf(c(e));-1===r&&(r=0);var i=n-r;i&&(z=!0,v(i))}function p(e){return"#"+B(U+c(e))}function m(e,t){var r=l(e,void 0,void 0,J.location);q.confirmTransitionTo(r,"PUSH",R,function(e){if(e){var t=c(r),i=B(U+t);if(w()!==i){W=t,E(i);var o=H.lastIndexOf(c(J.location)),a=H.slice(0,-1===o?0:o+1);a.push(t),H=a,n({action:"PUSH",location:r})}else n()}})}function g(e,t){var r=l(e,void 0,void 0,J.location);q.confirmTransitionTo(r,"REPLACE",R,function(e){if(e){var t=c(r),i=B(U+t);w()!==i&&(W=t,T(i));var o=H.indexOf(c(J.location));-1!==o&&(H[o]=t),n({action:"REPLACE",location:r})}})}function v(e){A.go(e)}function b(){v(-1)}function _(){v(1)}function S(e){Q+=e,1===Q&&1===e?window.addEventListener(M,i):0===Q&&window.removeEventListener(M,i)}function I(e){void 0===e&&(e=!1);var t=q.setPrompt(e);return Y||(S(1),Y=!0),function(){return Y&&(Y=!1,S(-1)),t()}}function N(e){var t=q.appendListener(e);return S(1),function(){S(-1),t()}}void 0===e&&(e={}),C||Object(x.a)(!1);var A=window.history,O=(y(),e),D=O.getUserConfirmation,R=void 0===D?d:D,L=O.hashType,F=void 0===L?"slash":L,U=e.basename?s(r(e.basename)):"",j=P[F],B=j.encodePath,V=j.decodePath,q=h(),z=!1,W=null,G=w(),X=B(G);G!==X&&T(X);var K=t(),H=[c(K)],Q=0,Y=!1,J={length:A.length,action:"POP",location:K,createHref:p,push:m,replace:g,go:v,goBack:b,goForward:_,block:I,listen:N};return J}function S(e,t,n){return Math.min(Math.max(e,t),n)}function I(e){function t(e){Object(k.a)(A,e),A.length=A.entries.length,T.notifyListeners(A.location,A.action)}function n(){return Math.random().toString(36).substr(2,E)}function r(e,r){var i=l(e,r,n(),A.location);T.confirmTransitionTo(i,"PUSH",m,function(e){if(e){var n=A.index,r=n+1,o=A.entries.slice(0);o.length>r?o.splice(r,o.length-r,i):o.push(i),t({action:"PUSH",location:i,index:r,entries:o})}})}function i(e,r){var i=l(e,r,n(),A.location);T.confirmTransitionTo(i,"REPLACE",m,function(e){e&&(A.entries[A.index]=i,t({action:"REPLACE",location:i}))})}function o(e){var n=S(A.index+e,0,A.entries.length-1),r=A.entries[n];T.confirmTransitionTo(r,"POP",m,function(e){e?t({action:"POP",location:r,index:n}):t()})}function a(){o(-1)}function s(){o(1)}function u(e){var t=A.index+e;return t>=0&&t<A.entries.length}function f(e){return void 0===e&&(e=!1),T.setPrompt(e)}function d(e){return T.appendListener(e)}void 0===e&&(e={});var p=e,m=p.getUserConfirmation,y=p.initialEntries,g=void 0===y?["/"]:y,v=p.initialIndex,b=void 0===v?0:v,w=p.keyLength,E=void 0===w?6:w,T=h(),_=S(b,0,g.length-1),I=g.map(function(e){return"string"===typeof e?l(e,void 0,n()):l(e,void 0,e.key||n())}),N=c,A={length:I.length,action:"POP",location:I[_],index:_,entries:I,createHref:N,push:r,replace:i,go:o,goBack:a,goForward:s,canGo:u,block:f,listen:d};return A}n.d(t,"a",function(){return b}),n.d(t,"b",function(){return _}),n.d(t,"d",function(){return I}),n.d(t,"c",function(){return l}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return c});var k=n(52),N=n(189),A=n(190),x=(n(51),n(53)),C=!("undefined"===typeof window||!window.document||!window.document.createElement),O="popstate",D="hashchange",M="hashchange",P={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+i(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:i,decodePath:r},slash:{encodePath:r,decodePath:r}}},function(e,t,n){"use strict";e.exports=n(193)},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}t.a=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){var r=n(210),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){var r=n(82),i=r.Symbol;e.exports=i},function(e,t,n){n(85),e.exports=n(90)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(86).enable(),window.Promise=n(88)),n(89),Object.assign=n(36)},function(e,t,n){"use strict";function r(){c=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||a(f[t].error,e.whitelist||u))&&(f[t].displayId=l++,e.onUnhandled?(f[t].logged=!0,e.onUnhandled(f[t].displayId,f[t].error)):(f[t].logged=!0,o(f[t].displayId,f[t].error)))}function n(t){f[t].logged&&(e.onHandled?e.onHandled(f[t].displayId,f[t].error):f[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+f[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+f[t].displayId+".")))}e=e||{},c&&r(),c=!0;var i=0,l=0,f={};s._47=function(e){2===e._83&&f[e._56]&&(f[e._56].logged?n(e._56):clearTimeout(f[e._56].timeout),delete f[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,f[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function o(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(57),u=[ReferenceError,TypeError,RangeError],c=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){a.length||(o(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>c){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var o,a=[],s=!1,u=0,c=1024,l="undefined"!==typeof t?t:self,f=l.MutationObserver||l.WebKitMutationObserver;o="function"===typeof f?function(e){var t=1,n=new f(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(t,n(4))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(57);e.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),c=r(0),l=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return o;if(!1===e)return a;if(0===e)return c;if(""===e)return l;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)r(a,t[a])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&b(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function y(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},f.call(d.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];y.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=d,e.Response=y,e.fetch=function(e,t){return new Promise(function(n,r){var i=new d(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new y(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(58),a=n.n(o),s=n(95),u=(n.n(s),n(59));a.a.render(i.a.createElement(u.a,null),document.getElementById("root"))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;e=Error(t.replace(/%s/g,function(){return u[c++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function o(e,t,n){this.props=e,this.context=t,this.refs=F,this.updater=n||L}function a(){}function s(e,t,n){this.props=e,this.context=t,this.refs=F,this.updater=n||L}function u(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)V.call(t,r)&&!q.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:_,type:e,key:o,ref:a,props:i,_owner:B.current}}function c(e,t){return{$$typeof:_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l(e){return"object"===typeof e&&null!==e&&e.$$typeof===_}function f(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function h(e,t,n,r){if(W.length){var i=W.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function d(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>W.length&&W.push(e)}function p(e,t,n,r){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case _:case S:a=!0}}if(a)return n(r,e,""===t?"."+y(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){o=e[s];var u=t+y(o,s);a+=p(o,u,n,r)}else if(null===e||"object"!==typeof e?u=null:(u=R&&e[R]||e["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(e=u.call(e),s=0;!(o=e.next()).done;)o=o.value,u=t+y(o,s++),a+=p(o,u,n,r);else"object"===o&&(n=""+e,i("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function m(e,t,n){return null==e?0:p(e,"",t,n)}function y(e,t){return"object"===typeof e&&null!==e&&null!=e.key?f(e.key):t.toString(36)}function g(e,t){e.func.call(e.context,t,e.count++)}function v(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?b(e,r,n,function(e){return e}):null!=e&&(l(e)&&(e=c(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(z,"$&/")+"/")+n)),r.push(e))}function b(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(z,"$&/")+"/"),t=h(t,o,r,i),m(e,v,t),d(t)}function w(){var e=j.current;return null===e&&i("321"),e}var E=n(36),T="function"===typeof Symbol&&Symbol.for,_=T?Symbol.for("react.element"):60103,S=T?Symbol.for("react.portal"):60106,I=T?Symbol.for("react.fragment"):60107,k=T?Symbol.for("react.strict_mode"):60108,N=T?Symbol.for("react.profiler"):60114,A=T?Symbol.for("react.provider"):60109,x=T?Symbol.for("react.context"):60110,C=T?Symbol.for("react.concurrent_mode"):60111,O=T?Symbol.for("react.forward_ref"):60112,D=T?Symbol.for("react.suspense"):60113,M=T?Symbol.for("react.memo"):60115,P=T?Symbol.for("react.lazy"):60116,R="function"===typeof Symbol&&Symbol.iterator,L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F={};o.prototype.isReactComponent={},o.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&i("85"),this.updater.enqueueSetState(this,e,t,"setState")},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=o.prototype;var U=s.prototype=new a;U.constructor=s,E(U,o.prototype),U.isPureReactComponent=!0;var j={current:null},B={current:null},V=Object.prototype.hasOwnProperty,q={key:!0,ref:!0,__self:!0,__source:!0},z=/\/+/g,W=[],G={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return b(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=h(null,null,t,n),m(e,g,t),d(t)},count:function(e){return m(e,function(){return null},null)},toArray:function(e){var t=[];return b(e,t,null,function(e){return e}),t},only:function(e){return l(e)||i("143"),e}},createRef:function(){return{current:null}},Component:o,PureComponent:s,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:x,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:A,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:O,render:e}},lazy:function(e){return{$$typeof:P,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:M,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return w().useCallback(e,t)},useContext:function(e,t){return w().useContext(e,t)},useEffect:function(e,t){return w().useEffect(e,t)},useImperativeHandle:function(e,t,n){return w().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return w().useLayoutEffect(e,t)},useMemo:function(e,t){return w().useMemo(e,t)},useReducer:function(e,t,n){return w().useReducer(e,t,n)},useRef:function(e){return w().useRef(e)},useState:function(e){return w().useState(e)},Fragment:I,StrictMode:k,Suspense:D,createElement:u,cloneElement:function(e,t,n){(null===e||void 0===e)&&i("267",e);var r=void 0,o=E({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=B.current),void 0!==t.key&&(a=""+t.key);var c=void 0;e.type&&e.type.defaultProps&&(c=e.type.defaultProps);for(r in t)V.call(t,r)&&!q.hasOwnProperty(r)&&(o[r]=void 0===t[r]&&void 0!==c?c[r]:t[r])}if(1===(r=arguments.length-2))o.children=n;else if(1<r){c=Array(r);for(var l=0;l<r;l++)c[l]=arguments[l+2];o.children=c}return{$$typeof:_,type:e.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(e){var t=u.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.8.6",unstable_ConcurrentMode:C,unstable_Profiler:N,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:j,ReactCurrentOwner:B,assign:E}},X={default:G},K=X&&G||X;e.exports=K.default||K},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;e=Error(t.replace(/%s/g,function(){return u[c++]})),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function i(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function o(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}function a(e,t,n,r,i,a,s,u,c){ci=!1,li=null,o.apply(di,arguments)}function s(e,t,n,r,o,s,u,c,l){if(a.apply(this,arguments),ci){if(ci){var f=li;ci=!1,li=null}else i("198"),f=void 0;fi||(fi=!0,hi=f)}}function u(){if(pi)for(var e in mi){var t=mi[e],n=pi.indexOf(e);if(-1<n||i("96",e),!yi[n]){t.extractEvents||i("97",e),yi[n]=t,n=t.eventTypes;for(var r in n){var o=void 0,a=n[r],s=t,u=r;gi.hasOwnProperty(u)&&i("99",u),gi[u]=a;var l=a.phasedRegistrationNames;if(l){for(o in l)l.hasOwnProperty(o)&&c(l[o],s,u);o=!0}else a.registrationName?(c(a.registrationName,s,u),o=!0):o=!1;o||i("98",r,e)}}}}function c(e,t,n){vi[e]&&i("100",e),vi[e]=t,bi[e]=t.eventTypes[n].dependencies}function l(e,t,n){var r=e.type||"unknown-event";e.currentTarget=Ti(n),s(r,t,void 0,e),e.currentTarget=null}function f(e,t){return null==t&&i("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function h(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function d(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)l(e,t[r],n[r]);else t&&l(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function p(e,t){var n=e.stateNode;if(!n)return null;var r=wi(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(e=e.type,r=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&i("231",t,typeof n),n)}function m(e){if(null!==e&&(_i=f(_i,e)),e=_i,_i=null,e&&(h(e,d),_i&&i("95"),fi))throw e=hi,fi=!1,hi=null,e}function y(e){if(e[ki])return e[ki];for(;!e[ki];){if(!e.parentNode)return null;e=e.parentNode}return e=e[ki],5===e.tag||6===e.tag?e:null}function g(e){return e=e[ki],!e||5!==e.tag&&6!==e.tag?null:e}function v(e){if(5===e.tag||6===e.tag)return e.stateNode;i("33")}function b(e){return e[Ni]||null}function w(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function E(e,t,n){(t=p(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=f(n._dispatchListeners,t),n._dispatchInstances=f(n._dispatchInstances,e))}function T(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=w(t);for(t=n.length;0<t--;)E(n[t],"captured",e);for(t=0;t<n.length;t++)E(n[t],"bubbled",e)}}function _(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=p(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=f(n._dispatchListeners,t),n._dispatchInstances=f(n._dispatchInstances,e))}function S(e){e&&e.dispatchConfig.registrationName&&_(e._targetInst,null,e)}function I(e){h(e,T)}function k(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function N(e){if(Ci[e])return Ci[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Oi)return Ci[e]=n[t];return e}function A(){if(ji)return ji;var e,t,n=Ui,r=n.length,i="value"in Fi?Fi.value:Fi.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ji=i.slice(e,1<t?1-t:void 0)}function x(){return!0}function C(){return!1}function O(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?x:C,this.isPropagationStopped=C,this}function D(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function M(e){e instanceof this||i("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function P(e){e.eventPool=[],e.getPooled=D,e.release=M}function R(e,t){switch(e){case"keyup":return-1!==qi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function L(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function F(e,t){switch(e){case"compositionend":return L(t);case"keypress":return 32!==t.which?null:(Qi=!0,Ki);case"textInput":return e=t.data,e===Ki&&Qi?null:e;default:return null}}function U(e,t){if(Yi)return"compositionend"===e||!zi&&R(e,t)?(e=A(),ji=Ui=Fi=null,Yi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xi&&"ko"!==t.locale?null:t.data;default:return null}}function j(e){if(e=Ei(e)){"function"!==typeof $i&&i("280");var t=wi(e.stateNode);$i(e.stateNode,e.type,t)}}function B(e){Zi?eo?eo.push(e):eo=[e]:Zi=e}function V(){if(Zi){var e=Zi,t=eo;if(eo=Zi=null,j(e),t)for(e=0;e<t.length;e++)j(t[e])}}function q(e,t){return e(t)}function z(e,t,n){return e(t,n)}function W(){}function G(e,t){if(to)return e(t);to=!0;try{return q(e,t)}finally{to=!1,(null!==Zi||null!==eo)&&(W(),V())}}function X(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!no[e.type]:"textarea"===t}function K(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function H(e){if(!Ai)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function J(e){e._valueTracker||(e._valueTracker=Y(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){return null===e||"object"!==typeof e?null:(e=bo&&e[bo]||e["@@iterator"],"function"===typeof e?e:null)}function ee(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case po:return"ConcurrentMode";case uo:return"Fragment";case so:return"Portal";case lo:return"Profiler";case co:return"StrictMode";case yo:return"Suspense"}if("object"===typeof e)switch(e.$$typeof){case ho:return"Context.Consumer";case fo:return"Context.Provider";case mo:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case go:return ee(e.type);case vo:if(e=1===e._status?e._result:null)return ee(e)}return null}function te(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ee(e.type);n=null,r&&(n=ee(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(io,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ne(e){return!!Eo.call(_o,e)||!Eo.call(To,e)&&(wo.test(e)?_o[e]=!0:(To[e]=!0,!1))}function re(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function ie(e,t,n,r){if(null===t||"undefined"===typeof t||re(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function oe(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}function ae(e){return e[1].toUpperCase()}function se(e,t,n,r){var i=So.hasOwnProperty(t)?So[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(ie(t,n,i,r)&&(n=null),r||null===i?ne(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function ue(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ce(e,t){var n=t.checked;return si({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function le(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ue(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function fe(e,t){null!=(t=t.checked)&&se(e,"checked",t,!1)}function he(e,t){fe(e,t);var n=ue(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?pe(e,t.type,n):t.hasOwnProperty("defaultValue")&&pe(e,t.type,ue(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function de(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,""!==n&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function pe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function me(e,t,n){return e=O.getPooled(ko.change,e,t,n),e.type="change",B(n),I(e),e}function ye(e){m(e)}function ge(e){if($(v(e)))return e}function ve(e,t){if("change"===e)return t}function be(){No&&(No.detachEvent("onpropertychange",we),Ao=No=null)}function we(e){"value"===e.propertyName&&ge(Ao)&&(e=me(Ao,e,K(e)),G(ye,e))}function Ee(e,t,n){"focus"===e?(be(),No=t,Ao=n,No.attachEvent("onpropertychange",we)):"blur"===e&&be()}function Te(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ge(Ao)}function _e(e,t){if("click"===e)return ge(t)}function Se(e,t){if("input"===e||"change"===e)return ge(t)}function Ie(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Do[e])&&!!t[e]}function ke(){return Ie}function Ne(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}function Ae(e,t){if(Ne(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Vo.call(t,n[r])||!Ne(e[n[r]],t[n[r]]))return!1;return!0}function xe(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Ce(e){2!==xe(e)&&i("188")}function Oe(e){var t=e.alternate;if(!t)return t=xe(e),3===t&&i("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return Ce(o),e;if(s===r)return Ce(o),t;s=s.sibling}i("188")}if(n.return!==r.return)n=o,r=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}s||i("189")}}n.alternate!==r&&i("190")}return 3!==n.tag&&i("188"),n.stateNode.current===n?e:t}function De(e){if(!(e=Oe(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Me(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Pe(e,t){var n=e[0];e=e[1];var r="on"+(e[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},Zo[e]=t,ea[n]=t}function Re(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=y(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=K(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<yi.length;s++){var u=yi[s];u&&(u=u.extractEvents(r,t,o,i))&&(a=f(a,u))}m(a)}}function Le(e,t){if(!t)return null;var n=(na(e)?Ue:je).bind(null,e);t.addEventListener(e,n,!1)}function Fe(e,t){if(!t)return null;var n=(na(e)?Ue:je).bind(null,e);t.addEventListener(e,n,!0)}function Ue(e,t){z(je,e,t)}function je(e,t){if(ia){var n=K(t);if(n=y(n),null===n||"number"!==typeof n.tag||2===xe(n)||(n=null),ra.length){var r=ra.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{G(Re,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ra.length&&ra.push(e)}}}function Be(e){return Object.prototype.hasOwnProperty.call(e,sa)||(e[sa]=aa++,oa[e[sa]]={}),oa[e[sa]]}function Ve(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function qe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ze(e,t){var n=qe(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qe(n)}}function We(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?We(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ge(){for(var e=window,t=Ve();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;e=t.contentWindow,t=Ve(e.document)}return t}function Xe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Ke(){var e=Ge();if(Xe(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,a=-1,s=-1,u=0,c=0,l=e,f=null;t:for(;;){for(var h;l!==t||0!==r&&3!==l.nodeType||(a=o+r),l!==i||0!==n&&3!==l.nodeType||(s=o+n),3===l.nodeType&&(o+=l.nodeValue.length),null!==(h=l.firstChild);)f=l,l=h;for(;;){if(l===e)break t;if(f===t&&++u===r&&(a=o),f===i&&++c===n&&(s=o),null!==(h=l.nextSibling))break;l=f,f=l.parentNode}l=h}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}function He(e){var t=Ge(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&We(n.ownerDocument.documentElement,n)){if(null!==r&&Xe(n))if(t=r.start,e=r.end,void 0===e&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ze(n,o);var a=ze(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}function Qe(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return da||null==la||la!==Ve(n)?null:(n=la,"selectionStart"in n&&Xe(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ha&&Ae(ha,n)?null:(ha=n,e=O.getPooled(ca.select,fa,e,t),e.type="select",e.target=la,I(e),e))}function Ye(e){var t="";return ai.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function Je(e,t){return e=si({children:void 0},t),(t=Ye(t.children))&&(e.children=t),e}function $e(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ue(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ze(e,t){return null!=t.dangerouslySetInnerHTML&&i("91"),si({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function et(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&i("92"),Array.isArray(t)&&(1>=t.length||i("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:ue(n)}}function tt(e,t){var n=ue(t.value),r=ue(t.defaultValue);null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function nt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function rt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?rt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function ot(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function at(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||va.hasOwnProperty(e)&&va[e]?(""+t).trim():t+"px"}function st(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=at(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function ut(e,t){t&&(wa[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&i("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&i("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||i("61")),null!=t.style&&"object"!==typeof t.style&&i("62",""))}function ct(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function lt(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=Be(e);t=bi[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Fe("scroll",e);break;case"focus":case"blur":Fe("focus",e),Fe("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":H(i)&&Fe(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===Li.indexOf(i)&&Le(i,e)}n[i]=!0}}}function ft(){}function ht(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function dt(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function pt(e,t,n,r,i){e[Ni]=i,"input"===n&&"radio"===i.type&&null!=i.name&&fe(e,i),ct(n,r),r=ct(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?st(e,s):"dangerouslySetInnerHTML"===a?ga(e,s):"children"===a?ot(e,s):se(e,a,s,r)}switch(n){case"input":he(e,i);break;case"textarea":tt(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?$e(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?$e(e,!!i.multiple,i.defaultValue,!0):$e(e,!!i.multiple,i.multiple?[]:"",!1))}}function mt(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function yt(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function gt(e){0>Aa||(e.current=Na[Aa],Na[Aa]=null,Aa--)}function vt(e,t){Aa++,Na[Aa]=e.current,e.current=t}function bt(e,t){var n=e.type.contextTypes;if(!n)return xa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function wt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Et(e){gt(Oa,e),gt(Ca,e)}function Tt(e){gt(Oa,e),gt(Ca,e)}function _t(e,t,n){Ca.current!==xa&&i("168"),vt(Ca,t,e),vt(Oa,n,e)}function St(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;r=r.getChildContext();for(var o in r)o in e||i("108",ee(t)||"Unknown",o);return si({},n,r)}function It(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||xa,Da=Ca.current,vt(Ca,t,e),vt(Oa,Oa.current,e),!0}function kt(e,t,n){var r=e.stateNode;r||i("169"),n?(t=St(e,t,Da),r.__reactInternalMemoizedMergedChildContext=t,gt(Oa,e),gt(Ca,e),vt(Ca,t,e)):gt(Oa,e),vt(Oa,n,e)}function Nt(e){return function(t){try{return e(t)}catch(e){}}}function At(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ma=Nt(function(e){return t.onCommitFiberRoot(n,e)}),Pa=Nt(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function xt(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ct(e,t,n,r){return new xt(e,t,n,r)}function Ot(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dt(e){if("function"===typeof e)return Ot(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===mo)return 11;if(e===go)return 14}return 2}function Mt(e,t){var n=e.alternate;return null===n?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pt(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Ot(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case uo:return Rt(n.children,o,a,t);case po:return Lt(n,3|o,a,t);case co:return Lt(n,2|o,a,t);case lo:return e=Ct(12,n,t,4|o),e.elementType=lo,e.type=lo,e.expirationTime=a,e;case yo:return e=Ct(13,n,t,o),e.elementType=yo,e.type=yo,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case fo:s=10;break e;case ho:s=9;break e;case mo:s=11;break e;case go:s=14;break e;case vo:s=16,r=null;break e}i("130",null==e?e:typeof e,"")}return t=Ct(s,n,t,o),t.elementType=e,t.type=r,t.expirationTime=a,t}function Rt(e,t,n,r){return e=Ct(7,e,r,t),e.expirationTime=n,e}function Lt(e,t,n,r){return e=Ct(8,e,r,t),t=0===(1&t)?co:po,e.elementType=t,e.type=t,e.expirationTime=n,e}function Ft(e,t,n){return e=Ct(6,e,null,t),e.expirationTime=n,e}function Ut(e,t,n){return t=Ct(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jt(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),zt(t,e)}function Bt(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),n=e.earliestSuspendedTime,0===n?jt(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,jt(e,t)):t>n&&jt(e,t)}zt(0,e)}function Vt(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),zt(t,e)}function qt(e,t){var n=e.earliestPendingTime;return e=e.earliestSuspendedTime,n>t&&(t=n),e>t&&(t=e),t}function zt(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;i=0!==i?i:o,0===i&&(0===e||r<e)&&(i=r),e=i,0!==e&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function Wt(e,t){if(e&&e.defaultProps){t=si({},t),e=e.defaultProps;for(var n in e)void 0===t[n]&&(t[n]=e[n])}return t}function Gt(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,t=e._ctor,t=t(),t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}function Xt(e,t,n,r){t=e.memoizedState,n=n(r,t),n=null===n||void 0===n?t:si({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}function Kt(e,t,n,r,i,o,a){return e=e.stateNode,"function"===typeof e.shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Ae(n,r)||!Ae(i,o))}function Ht(e,t,n){var r=!1,i=xa,o=t.contextType;return"object"===typeof o&&null!==o?o=Vn(o):(i=wt(t)?Da:Ca.current,r=t.contextTypes,o=(r=null!==r&&void 0!==r)?bt(e,i):xa),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=La,e.stateNode=t,t._reactInternalFiber=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Qt(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&La.enqueueReplaceState(t,t.state,null)}function Yt(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ra;var o=t.contextType;"object"===typeof o&&null!==o?i.context=Vn(o):(o=wt(t)?Da:Ca.current,i.context=bt(e,o)),o=e.updateQueue,null!==o&&(Yn(e,o,n,i,r),i.state=e.memoizedState),o=t.getDerivedStateFromProps,"function"===typeof o&&(Xt(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&La.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(Yn(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}function Jt(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&i("309"),r=n.stateNode),r||i("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Ra&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}"string"!==typeof e&&i("284"),n._owner||i("290",e)}return e}function $t(e,t){"textarea"!==e.type&&i("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Zt(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return e=Mt(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=Ft(n,e.mode,r),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?(r=o(t,n.props,r),r.ref=Jt(e,t,n),r.return=e,r):(r=Pt(n.type,n.key,n.props,null,e.mode,r),r.ref=Jt(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Ut(n,e.mode,r),t.return=e,t):(t=o(t,n.children||[],r),t.return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?(t=Rt(n,e.mode,r,i),t.return=e,t):(t=o(t,n,r),t.return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return t=Ft(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ao:return n=Pt(t.type,t.key,t.props,null,e.mode,n),n.ref=Jt(e,null,t),n.return=e,n;case so:return t=Ut(t,e.mode,n),t.return=e,t}if(Fa(t)||Z(t))return t=Rt(t,e.mode,n,null),t.return=e,t;$t(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ao:return n.key===i?n.type===uo?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case so:return n.key===i?l(e,t,n,r):null}if(Fa(n)||Z(n))return null!==i?null:f(e,t,n,r,null);$t(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,u(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ao:return e=e.get(null===r.key?n:r.key)||null,r.type===uo?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case so:return e=e.get(null===r.key?n:r.key)||null,l(t,e,r,i)}if(Fa(r)||Z(r))return e=e.get(n)||null,f(t,e,r,i,null);$t(t,r)}return null}function m(i,o,s,u){for(var c=null,l=null,f=o,m=o=0,y=null;null!==f&&m<s.length;m++){f.index>m?(y=f,f=null):y=f.sibling;var g=d(i,f,s[m],u);if(null===g){null===f&&(f=y);break}e&&f&&null===g.alternate&&t(i,f),o=a(g,o,m),null===l?c=g:l.sibling=g,l=g,f=y}if(m===s.length)return n(i,f),c;if(null===f){for(;m<s.length;m++)(f=h(i,s[m],u))&&(o=a(f,o,m),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);m<s.length;m++)(y=p(f,i,m,s[m],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),o=a(y,o,m),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach(function(e){return t(i,e)}),c}function y(o,s,u,c){var l=Z(u);"function"!==typeof l&&i("150"),null==(u=l.call(u))&&i("151");for(var f=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=d(o,m,v.value,c);if(null===b){m||(m=g);break}e&&m&&null===b.alternate&&t(o,m),s=a(b,s,y),null===f?l=b:f.sibling=b,f=b,m=g}if(v.done)return n(o,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=h(o,v.value,c))&&(s=a(v,s,y),null===f?l=v:f.sibling=v,f=v);return l}for(m=r(o,m);!v.done;y++,v=u.next())null!==(v=p(m,o,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=a(v,s,y),null===f?l=v:f.sibling=v,f=v);return e&&m.forEach(function(e){return t(o,e)}),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===uo&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ao:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?a.type===uo:c.elementType===a.type){n(e,c.sibling),r=o(c,a.type===uo?a.props.children:a.props,u),r.ref=Jt(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===uo?(r=Rt(a.props.children,e.mode,u,a.key),r.return=e,e=r):(u=Pt(a.type,a.key,a.props,null,e.mode,u),u.ref=Jt(e,r,a),u.return=e,e=u)}return s(e);case so:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),r=o(r,a.children||[],u),r.return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}r=Ut(a,e.mode,u),r.return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),r=o(r,a,u),r.return=e,e=r):(n(e,r),r=Ft(a,e.mode,u),r.return=e,e=r),s(e);if(Fa(a))return m(e,r,a,u);if(Z(a))return y(e,r,a,u);if(l&&$t(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:u=e.type,i("152",u.displayName||u.name||"Component")}return n(e,r)}}function en(e){return e===Ba&&i("174"),e}function tn(e,t){vt(za,t,e),vt(qa,e,e),vt(Va,Ba,e);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:it(null,"");break;default:n=8===n?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=it(t,n)}gt(Va,e),vt(Va,t,e)}function nn(e){gt(Va,e),gt(qa,e),gt(za,e)}function rn(e){en(za.current);var t=en(Va.current),n=it(t,e.type);t!==n&&(vt(qa,e,e),vt(Va,n,e))}function on(e){qa.current===e&&(gt(Va,e),gt(qa,e))}function an(){i("321")}function sn(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ne(e[n],t[n]))return!1;return!0}function un(e,t,n,r,o,a){if(Za=a,es=t,ns=null!==e?e.memoizedState:null,$a.current=null===ns?ds:ps,t=n(r,o),cs){do{cs=!1,fs+=1,ns=null!==e?e.memoizedState:null,os=rs,ss=is=ts=null,$a.current=ps,t=n(r,o)}while(cs);ls=null,fs=0}return $a.current=hs,e=es,e.memoizedState=rs,e.expirationTime=as,e.updateQueue=ss,e.effectTag|=us,e=null!==ts&&null!==ts.next,Za=0,os=is=rs=ns=ts=es=null,as=0,ss=null,us=0,e&&i("300"),t}function cn(){$a.current=hs,Za=0,os=is=rs=ns=ts=es=null,as=0,ss=null,us=0,cs=!1,ls=null,fs=0}function ln(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===is?rs=is=e:is=is.next=e,is}function fn(){if(null!==os)is=os,os=is.next,ts=ns,ns=null!==ts?ts.next:null;else{null===ns&&i("310"),ts=ns;var e={memoizedState:ts.memoizedState,baseState:ts.baseState,queue:ts.queue,baseUpdate:ts.baseUpdate,next:null};is=null===is?rs=e:is.next=e,ns=ts.next}return is}function hn(e,t){return"function"===typeof t?t(e):t}function dn(e){var t=fn(),n=t.queue;if(null===n&&i("311"),n.lastRenderedReducer=e,0<fs){var r=n.dispatch;if(null!==ls){var o=ls.get(n);if(void 0!==o){ls.delete(n);var a=t.memoizedState;do{a=e(a,o.action),o=o.next}while(null!==o);return Ne(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseUpdate===n.last&&(t.baseState=a),n.lastRenderedState=a,[a,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(a=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=o=null,c=r,l=!1;do{var f=c.expirationTime;f<Za?(l||(l=!0,u=s,o=a),f>as&&(as=f)):a=c.eagerReducer===e?c.eagerState:e(a,c.action),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,o=a),Ne(a,t.memoizedState)||(bs=!0),t.memoizedState=a,t.baseUpdate=u,t.baseState=o,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function pn(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===ss?(ss={lastEffect:null},ss.lastEffect=e.next=e):(t=ss.lastEffect,null===t?ss.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,ss.lastEffect=e)),e}function mn(e,t,n,r){var i=ln();us|=e,i.memoizedState=pn(t,n,void 0,void 0===r?null:r)}function yn(e,t,n,r){var i=fn();r=void 0===r?null:r;var o=void 0;if(null!==ts){var a=ts.memoizedState;if(o=a.destroy,null!==r&&sn(r,a.deps))return void pn(Wa,n,o,r)}us|=e,i.memoizedState=pn(t,n,o,r)}function gn(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function vn(){}function bn(e,t,n){25>fs||i("301");var r=e.alternate;if(e===es||null!==r&&r===es)if(cs=!0,e={expirationTime:Za,action:n,eagerReducer:null,eagerState:null,next:null},null===ls&&(ls=new Map),void 0===(n=ls.get(t)))ls.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{vr();var o=Rr();o=Sr(o,e);var a={expirationTime:o,action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)a.next=a;else{var u=s.next;null!==u&&(a.next=u),s.next=a}if(t.last=a,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(a.eagerReducer=r,a.eagerState=l,Ne(l,c))return}catch(e){}Ar(e,o)}}function wn(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function En(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Tn(e){if(gs){var t=ys;if(t){var n=t;if(!En(e,t)){if(!(t=mt(n))||!En(e,t))return e.effectTag|=2,gs=!1,void(ms=e);wn(ms,n)}ms=e,ys=yt(t)}else e.effectTag|=2,gs=!1,ms=e}}function _n(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ms=e}function Sn(e){if(e!==ms)return!1;if(!gs)return _n(e),gs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!dt(t,e.memoizedProps))for(t=ys;t;)wn(e,t),t=mt(t);return _n(e),ys=ms?mt(e.stateNode):null,!0}function In(){ys=ms=null,gs=!1}function kn(e,t,n,r){t.child=null===e?ja(t,null,n,r):Ua(t,e.child,n,r)}function Nn(e,t,n,r,i){n=n.render;var o=t.ref;return Bn(t,i),r=un(e,t,n,r,o,i),null===e||bs?(t.effectTag|=1,kn(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ln(e,t,i))}function An(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Ot(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?(e=Pt(n.type,null,r,null,t.mode,o),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,xn(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,n=n.compare,(n=null!==n?n:Ae)(i,r)&&e.ref===t.ref)?Ln(e,t,o):(t.effectTag|=1,e=Mt(a,r,o),e.ref=t.ref,e.return=t,t.child=e)}function xn(e,t,n,r,i,o){return null!==e&&Ae(e.memoizedProps,r)&&e.ref===t.ref&&(bs=!1,i<o)?Ln(e,t,o):On(e,t,n,r,o)}function Cn(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function On(e,t,n,r,i){var o=wt(n)?Da:Ca.current;return o=bt(t,o),Bn(t,i),n=un(e,t,n,r,o,i),null===e||bs?(t.effectTag|=1,kn(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ln(e,t,i))}function Dn(e,t,n,r,i){if(wt(n)){var o=!0;It(t)}else o=!1;if(Bn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ht(t,n,r,i),Yt(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Vn(c):(c=wt(n)?Da:Ca.current,c=bt(t,c));var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Qt(t,a,r,c),As=!1;var h=t.memoizedState;u=a.state=h;var d=t.updateQueue;null!==d&&(Yn(t,d,r,a,i),u=t.memoizedState),s!==r||h!==u||Oa.current||As?("function"===typeof l&&(Xt(t,n,l,r),u=t.memoizedState),(s=As||Kt(t,n,s,r,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Wt(t.type,s),u=a.context,c=n.contextType,"object"===typeof c&&null!==c?c=Vn(c):(c=wt(n)?Da:Ca.current,c=bt(t,c)),l=n.getDerivedStateFromProps,(f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Qt(t,a,r,c),As=!1,u=t.memoizedState,h=a.state=u,d=t.updateQueue,null!==d&&(Yn(t,d,r,a,i),h=t.memoizedState),s!==r||u!==h||Oa.current||As?("function"===typeof l&&(Xt(t,n,l,r),h=t.memoizedState),(l=As||Kt(t,n,s,r,u,h,c))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Mn(e,t,n,r,o,i)}function Mn(e,t,n,r,i,o){Cn(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&kt(t,n,!1),Ln(e,t,o);r=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Ua(t,e.child,null,o),t.child=Ua(t,null,s,o)):kn(e,t,s,o),t.memoizedState=r.state,i&&kt(t,n,!0),t.child}function Pn(e){var t=e.stateNode;t.pendingContext?_t(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_t(e,t.context,!1),tn(e,t.containerInfo)}function Rn(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0===(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=Rt(null,r,0,null),0===(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Rt(s,r,n,null),e.sibling=r,n=e,n.return=r.return=t}else n=r=ja(t,null,i.children,n);else null!==e.memoizedState?(r=e.child,s=r.sibling,a?(n=i.fallback,i=Mt(r,r.pendingProps,0),0===(1&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a),r=i.sibling=Mt(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=Ua(t,r.child,i.children,n)):(s=e.child,a?(a=i.fallback,i=Rt(null,r,0,null),i.child=s,0===(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),r=i.sibling=Rt(a,r,n,null),r.effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=Ua(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Ln(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&i("153"),null!==t.child){for(e=t.child,n=Mt(e,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=Mt(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function Fn(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Oa.current)bs=!0;else if(r<n){switch(bs=!1,t.tag){case 3:Pn(t),In();break;case 5:rn(t);break;case 1:wt(t.type)&&It(t);break;case 4:tn(t,t.stateNode.containerInfo);break;case 10:Un(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Rn(e,t,n):(t=Ln(e,t,n),null!==t?t.sibling:null)}return Ln(e,t,n)}}else bs=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var o=bt(t,Ca.current);if(Bn(t,n),o=un(null,t,r,e,o,n),t.effectTag|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){if(t.tag=1,cn(),wt(r)){var a=!0;It(t)}else a=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&Xt(t,r,s,e),o.updater=La,t.stateNode=o,o._reactInternalFiber=t,Yt(t,r,e,n),t=Mn(null,t,r,!0,a,n)}else t.tag=0,kn(null,t,o,n),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),a=t.pendingProps,e=Gt(o),t.type=e,o=t.tag=Dt(e),a=Wt(e,a),s=void 0,o){case 0:s=On(null,t,e,a,n);break;case 1:s=Dn(null,t,e,a,n);break;case 11:s=Nn(null,t,e,a,n);break;case 14:s=An(null,t,e,Wt(e.type,a),r,n);break;default:i("306",e,"")}return s;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),On(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),Dn(e,t,r,o,n);case 3:return Pn(t),r=t.updateQueue,null===r&&i("282"),o=t.memoizedState,o=null!==o?o.element:null,Yn(t,r,t.pendingProps,null,n),r=t.memoizedState.element,r===o?(In(),t=Ln(e,t,n)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(ys=yt(t.stateNode.containerInfo),ms=t,o=gs=!0),o?(t.effectTag|=2,t.child=ja(t,null,r,n)):(kn(e,t,r,n),In()),t=t.child),t;case 5:return rn(t),null===e&&Tn(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,dt(r,o)?s=null:null!==a&&dt(r,a)&&(t.effectTag|=16),Cn(e,t),1!==n&&1&t.mode&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(kn(e,t,s,n),t=t.child),t;case 6:return null===e&&Tn(t),null;case 13:return Rn(e,t,n);case 4:return tn(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ua(t,null,r,n):kn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),Nn(e,t,r,o,n);case 7:return kn(e,t,t.pendingProps,n),t.child;case 8:case 12:return kn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,a=o.value,Un(t,a),null!==s){var u=s.value;if(0===(a=Ne(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===o.children&&!Oa.current){t=Ln(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.contextDependencies;if(null!==c){s=u.child;for(var l=c.first;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&(l=Wn(n),l.tag=ks,Xn(u,l)),u.expirationTime<n&&(u.expirationTime=n),l=u.alternate,null!==l&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var f=u.return;null!==f;){var h=f.alternate;if(f.childExpirationTime<l)f.childExpirationTime=l,null!==h&&h.childExpirationTime<l&&(h.childExpirationTime=l);else{if(!(null!==h&&h.childExpirationTime<l))break;h.childExpirationTime=l}f=f.return}c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}kn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps,r=a.children,Bn(t,n),o=Vn(o,a.unstable_observedBits),r=r(o),t.effectTag|=1,kn(e,t,r,n),t.child;case 14:return o=t.type,a=Wt(o,t.pendingProps),a=Wt(o.type,a),An(e,t,o,a,r,n);case 15:return xn(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wt(r)?(e=!0,It(t)):e=!1,Bn(t,n),Ht(t,r,o,n),Yt(t,r,o,n),Mn(null,t,r,!0,e,n)}i("156")}function Un(e,t){var n=e.type._context;vt(ws,n._currentValue,e),n._currentValue=t}function jn(e){var t=ws.current;gt(ws,e),e.type._context._currentValue=t}function Bn(e,t){Es=e,_s=Ts=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(bs=!0),e.contextDependencies=null}function Vn(e,t){return _s!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(_s=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ts?(null===Es&&i("308"),Ts=t,Es.contextDependencies={first:t,expirationTime:0}):Ts=Ts.next=t),e._currentValue}function qn(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function zn(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Wn(e){return{expirationTime:e,tag:Ss,payload:null,callback:null,next:null,nextEffect:null}}function Gn(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Xn(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=qn(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=qn(e.memoizedState),i=n.updateQueue=qn(n.memoizedState)):r=e.updateQueue=zn(i):null===i&&(i=n.updateQueue=zn(r));null===i||r===i?Gn(r,t):null===r.lastUpdate||null===i.lastUpdate?(Gn(r,t),Gn(i,t)):(Gn(r,t),i.lastUpdate=t)}function Kn(e,t){var n=e.updateQueue;n=null===n?e.updateQueue=qn(e.memoizedState):Hn(e,n),null===n.lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Hn(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=zn(t)),t}function Qn(e,t,n,r,i,o){switch(n.tag){case Is:return e=n.payload,"function"===typeof e?e.call(o,r,i):e;case Ns:e.effectTag=-2049&e.effectTag|64;case Ss:if(e=n.payload,null===(i="function"===typeof e?e.call(o,r,i):e)||void 0===i)break;return si({},r,i);case ks:As=!0}return r}function Yn(e,t,n,r,i){As=!1,t=Hn(e,t);for(var o=t.baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(c=Qn(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<i?(null===l&&(l=u,null===a&&(o=c)),s<f&&(s=f)):(c=Qn(e,t,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,e.expirationTime=s,e.memoizedState=c}function Jn(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),$n(t.firstEffect,n),t.firstEffect=t.lastEffect=null,$n(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function $n(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!==typeof n&&i("191",n),n.call(r)}e=e.nextEffect}}function Zn(e,t){return{value:e,source:t,stack:te(t)}}function er(e){e.effectTag|=4}function tr(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=te(n)),null!==n&&ee(n.type),t=t.value,null!==e&&1===e.tag&&ee(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function nr(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(t){_r(e,t)}else t.current=null}function rr(e,t,n){if(n=n.updateQueue,null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Wa){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==Wa&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ir(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=at("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){r=n.child.sibling,r.return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function or(e){switch("function"===typeof Pa&&Pa(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){_r(i,e)}}n=n.next}while(n!==t)}break;case 1:if(nr(e),t=e.stateNode,"function"===typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){_r(e,t)}break;case 5:nr(e);break;case 4:ur(e)}}function ar(e){return 5===e.tag||3===e.tag||4===e.tag}function sr(e){e:{for(var t=e.return;null!==t;){if(ar(t)){var n=t;break e}t=t.return}i("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:i("161")}16&n.effectTag&&(ot(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ar(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(n)if(r){var a=t,s=o.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(s,u):a.insertBefore(s,u)}else t.insertBefore(o.stateNode,n);else r?(s=t,u=o.stateNode,8===s.nodeType?(a=s.parentNode,a.insertBefore(u,s)):(a=s,a.appendChild(u)),null!==(s=s._reactRootContainer)&&void 0!==s||null!==a.onclick||(a.onclick=ft)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function ur(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&i("160"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var a=t,s=a;;)if(or(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o?(a=r,s=t.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(or(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function cr(e,t){switch(t.tag){case 0:case 11:case 14:case 15:rr(Xa,Ka,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&pt(n,a,o,e,r,t)}break;case 6:null===t.stateNode&&i("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Rr())),null!==e&&ir(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new Ms),n.forEach(function(e){var n=kr.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:i("163")}}function lr(e,t,n){n=Wn(n),n.tag=Ns,n.payload={element:null};var r=t.value;return n.callback=function(){Wr(r),tr(e,t)},n}function fr(e,t,n){n=Wn(n),n.tag=Ns;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this));var n=t.value,i=t.stack;tr(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function hr(e){switch(e.tag){case 1:wt(e.type)&&Et(e);var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return nn(e),Tt(e),t=e.effectTag,0!==(64&t)&&i("285"),e.effectTag=-2049&t|64,e;case 5:return on(e),null;case 13:return t=e.effectTag,2048&t?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return nn(e),null;case 10:return jn(e),null;default:return null}}function dr(){if(null!==js)for(var e=js.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!==n&&void 0!==n&&Et(t);break;case 3:nn(t),Tt(t);break;case 5:on(t);break;case 4:nn(t);break;case 10:jn(t)}e=e.return}Bs=null,Vs=0,qs=-1,zs=!1,js=null}function pr(){for(;null!==Ws;){var e=Ws.effectTag;if(16&e&&ot(Ws.stateNode,""),128&e){var t=Ws.alternate;null!==t&&null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null)}switch(14&e){case 2:sr(Ws),Ws.effectTag&=-3;break;case 6:sr(Ws),Ws.effectTag&=-3,cr(Ws.alternate,Ws);break;case 4:cr(Ws.alternate,Ws);break;case 8:e=Ws,ur(e),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Ws=Ws.nextEffect}}function mr(){for(;null!==Ws;){if(256&Ws.effectTag)e:{var e=Ws.alternate,t=Ws;switch(t.tag){case 0:case 11:case 15:rr(Ga,Wa,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:Wt(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:i("163")}}Ws=Ws.nextEffect}}function yr(e,t){for(;null!==Ws;){var n=Ws.effectTag;if(36&n){var r=Ws.alternate,o=Ws,a=t;switch(o.tag){case 0:case 11:case 15:rr(Ha,Qa,o);break;case 1:var s=o.stateNode;if(4&o.effectTag)if(null===r)s.componentDidMount();else{var u=o.elementType===o.type?r.memoizedProps:Wt(o.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}r=o.updateQueue,null!==r&&Jn(o,r,s,a);break;case 3:if(null!==(r=o.updateQueue)){if(s=null,null!==o.child)switch(o.child.tag){case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}Jn(o,r,s,a)}break;case 5:a=o.stateNode,null===r&&4&o.effectTag&&ht(o.type,o.memoizedProps)&&a.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:i("163")}}128&n&&null!==(o=Ws.ref)&&(a=Ws.stateNode,"function"===typeof o?o(a):o.current=a),512&n&&(Xs=e),Ws=Ws.nextEffect}}function gr(e,t){Hs=Ks=Xs=null;var n=eu;eu=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;rr(Ja,Wa,o),rr(Wa,Ya,o)}catch(e){r=!0,i=e}r&&_r(t,i)}t=t.nextEffect}while(null!==t);eu=n,n=e.expirationTime,0!==n&&Lr(e,n),au||eu||Br(1073741823,!1)}function vr(){null!==Ks&&ka(Ks),null!==Hs&&Hs()}function br(e,t){Gs=Us=!0,e.current===t&&i("177");var n=e.pendingCommitExpirationTime;0===n&&i("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,o=t.childExpirationTime;for(Bt(e,o>r?o:r),Ls.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,Ea=ia,Ta=Ke(),ia=!1,Ws=r;null!==Ws;){o=!1;var a=void 0;try{mr()}catch(e){o=!0,a=e}o&&(null===Ws&&i("178"),_r(Ws,a),null!==Ws&&(Ws=Ws.nextEffect))}for(Ws=r;null!==Ws;){o=!1,a=void 0;try{pr()}catch(e){o=!0,a=e}o&&(null===Ws&&i("178"),_r(Ws,a),null!==Ws&&(Ws=Ws.nextEffect))}for(He(Ta),Ta=null,ia=!!Ea,Ea=null,e.current=t,Ws=r;null!==Ws;){o=!1,a=void 0;try{yr(e,n)}catch(e){o=!0,a=e}o&&(null===Ws&&i("178"),_r(Ws,a),null!==Ws&&(Ws=Ws.nextEffect))}if(null!==r&&null!==Xs){var s=gr.bind(null,e,r);Ks=ui.unstable_runWithPriority(ui.unstable_NormalPriority,function(){return Ia(s)}),Hs=s}Us=Gs=!1,"function"===typeof Ma&&Ma(t.stateNode),n=t.expirationTime,t=t.childExpirationTime,t=t>n?t:n,0===t&&(Qs=null),Pr(e,t)}function wr(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(1024&e.effectTag)){js=e;e:{var o=t;t=e;var a=Vs,s=t.pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:wt(t.type)&&Et(t);break;case 3:nn(t),Tt(t),s=t.stateNode,s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==o&&null!==o.child||(Sn(t),t.effectTag&=-3),Cs(t);break;case 5:on(t);var u=en(za.current);if(a=t.type,null!==o&&null!=t.stateNode)Os(o,t,a,s,u),o.ref!==t.ref&&(t.effectTag|=128);else if(s){var c=en(Va.current);if(Sn(t)){s=t,o=s.stateNode;var l=s.type,f=s.memoizedProps,h=u;switch(o[ki]=s,o[Ni]=f,a=void 0,u=l){case"iframe":case"object":Le("load",o);break;case"video":case"audio":for(l=0;l<Li.length;l++)Le(Li[l],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"form":Le("reset",o),Le("submit",o);break;case"details":Le("toggle",o);break;case"input":le(o,f),Le("invalid",o),lt(h,"onChange");break;case"select":o._wrapperState={wasMultiple:!!f.multiple},Le("invalid",o),lt(h,"onChange");break;case"textarea":et(o,f),Le("invalid",o),lt(h,"onChange")}ut(u,f),l=null;for(a in f)f.hasOwnProperty(a)&&(c=f[a],"children"===a?"string"===typeof c?o.textContent!==c&&(l=["children",c]):"number"===typeof c&&o.textContent!==""+c&&(l=["children",""+c]):vi.hasOwnProperty(a)&&null!=c&&lt(h,a));switch(u){case"input":J(o),de(o,f,!0);break;case"textarea":J(o),nt(o,f);break;case"select":case"option":break;default:"function"===typeof f.onClick&&(o.onclick=ft)}a=l,s.updateQueue=a,s=null!==a,s&&er(t)}else{f=t,h=a,o=s,l=9===u.nodeType?u:u.ownerDocument,c===ma.html&&(c=rt(h)),c===ma.html?"script"===h?(o=l.createElement("div"),o.innerHTML="<script><\/script>",l=o.removeChild(o.firstChild)):"string"===typeof o.is?l=l.createElement(h,{is:o.is}):(l=l.createElement(h),"select"===h&&(h=l,o.multiple?h.multiple=!0:o.size&&(h.size=o.size))):l=l.createElementNS(c,h),o=l,o[ki]=f,o[Ni]=s,xs(o,t,!1,!1),h=o,l=a,f=s;var d=u,p=ct(l,f);switch(l){case"iframe":case"object":Le("load",h),u=f;break;case"video":case"audio":for(u=0;u<Li.length;u++)Le(Li[u],h);u=f;break;case"source":Le("error",h),u=f;break;case"img":case"image":case"link":Le("error",h),Le("load",h),u=f;break;case"form":Le("reset",h),Le("submit",h),u=f;break;case"details":Le("toggle",h),u=f;break;case"input":le(h,f),u=ce(h,f),Le("invalid",h),lt(d,"onChange");break;case"option":u=Je(h,f);break;case"select":h._wrapperState={wasMultiple:!!f.multiple},u=si({},f,{value:void 0}),Le("invalid",h),lt(d,"onChange");break;case"textarea":et(h,f),u=Ze(h,f),Le("invalid",h),lt(d,"onChange");break;default:u=f}ut(l,u),c=void 0;var m=l,y=h,g=u;for(c in g)if(g.hasOwnProperty(c)){var v=g[c];"style"===c?st(y,v):"dangerouslySetInnerHTML"===c?null!=(v=v?v.__html:void 0)&&ga(y,v):"children"===c?"string"===typeof v?("textarea"!==m||""!==v)&&ot(y,v):"number"===typeof v&&ot(y,""+v):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(vi.hasOwnProperty(c)?null!=v&&lt(d,c):null!=v&&se(y,c,v,p))}switch(l){case"input":J(h),de(h,f,!1);break;case"textarea":J(h),nt(h,f);break;case"option":null!=f.value&&h.setAttribute("value",""+ue(f.value));break;case"select":u=h,u.multiple=!!f.multiple,h=f.value,null!=h?$e(u,!!f.multiple,h,!1):null!=f.defaultValue&&$e(u,!!f.multiple,f.defaultValue,!0);break;default:"function"===typeof u.onClick&&(h.onclick=ft)}(s=ht(a,s))&&er(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&i("166");break;case 6:o&&null!=t.stateNode?Ds(o,t,o.memoizedProps,s):("string"!==typeof s&&(null===t.stateNode&&i("166")),o=en(za.current),en(Va.current),Sn(t)?(s=t,a=s.stateNode,o=s.memoizedProps,a[ki]=s,(s=a.nodeValue!==o)&&er(t)):(a=t,s=(9===o.nodeType?o:o.ownerDocument).createTextNode(s),s[ki]=t,a.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=a,js=t;break e}s=null!==s,a=null!==o&&null!==o.memoizedState,null!==o&&!s&&a&&null!==(o=o.child.sibling)&&(u=t.firstEffect,null!==u?(t.firstEffect=o,o.nextEffect=u):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8),(s||a)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:nn(t),Cs(t);break;case 10:jn(t);break;case 9:case 14:break;case 17:wt(t.type)&&Et(t);break;case 18:break;default:i("156")}js=null}if(t=e,1===Vs||1!==t.childExpirationTime){for(s=0,a=t.child;null!==a;)o=a.expirationTime,u=a.childExpirationTime,o>s&&(s=o),u>s&&(s=u),a=a.sibling;t.childExpirationTime=s}if(null!==js)return js;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=hr(e,Vs)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Er(e){var t=Fn(e.alternate,e,Vs);return e.memoizedProps=e.pendingProps,null===t&&(t=wr(e)),Ls.current=null,t}function Tr(e,t){Us&&i("243"),vr(),Us=!0;var n=Rs.current;Rs.current=hs;var r=e.nextExpirationTimeToWorkOn;r===Vs&&e===Bs&&null!==js||(dr(),Bs=e,Vs=r,js=Mt(Bs.current,null,Vs),e.pendingCommitExpirationTime=0);for(var o=!1;;){try{if(t)for(;null!==js&&!Ur();)js=Er(js);else for(;null!==js;)js=Er(js)}catch(t){if(_s=Ts=Es=null,cn(),null===js)o=!0,Wr(t);else{null===js&&i("271");var a=js,s=a.return;if(null!==s){e:{var u=e,c=s,l=a,f=t;if(s=Vs,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==f&&"object"===typeof f&&"function"===typeof f.then){var h=f;f=c;var d=-1,p=-1;do{if(13===f.tag){var m=f.alternate;if(null!==m&&null!==(m=m.memoizedState)){p=10*(1073741822-m.timedOutAt);break}m=f.pendingProps.maxDuration,"number"===typeof m&&(0>=m?d=0:(-1===d||m<d)&&(d=m))}f=f.return}while(null!==f);f=c;do{if((m=13===f.tag)&&(m=void 0!==f.memoizedProps.fallback&&null===f.memoizedState),m){if(c=f.updateQueue,null===c?(c=new Set,c.add(h),f.updateQueue=c):c.add(h),0===(1&f.mode)){f.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:(s=Wn(1073741823),s.tag=ks,Xn(l,s))),l.expirationTime=1073741823;break e}l=u,c=s;var y=l.pingCache;null===y?(y=l.pingCache=new Ps,m=new Set,y.set(h,m)):void 0===(m=y.get(h))&&(m=new Set,y.set(h,m)),m.has(c)||(m.add(c),l=Ir.bind(null,l,h,c),h.then(l,l)),-1===d?u=1073741823:(-1===p&&(p=10*(1073741822-qt(u,s))-5e3),u=p+d),0<=u&&qs<u&&(qs=u),f.effectTag|=2048,f.expirationTime=s;break e}f=f.return}while(null!==f);f=Error((ee(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+te(l))}zs=!0,f=Zn(f,l),u=c;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=s,s=lr(u,f,s),Kn(u,s);break e;case 1:if(d=f,p=u.type,l=u.stateNode,0===(64&u.effectTag)&&("function"===typeof p.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Qs||!Qs.has(l)))){u.effectTag|=2048,u.expirationTime=s,s=fr(u,d,s),Kn(u,s);break e}}u=u.return}while(null!==u)}js=wr(a);continue}o=!0,Wr(t)}}break}if(Us=!1,Rs.current=n,_s=Ts=Es=null,cn(),o)Bs=null,e.finishedWork=null;else if(null!==js)e.finishedWork=null;else{if(n=e.current.alternate,null===n&&i("281"),Bs=null,zs){if(o=e.latestPendingTime,a=e.latestSuspendedTime,s=e.latestPingedTime,0!==o&&o<r||0!==a&&a<r||0!==s&&s<r)return Vt(e,r),void Dr(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void Dr(e,n,r,t,-1)}t&&-1!==qs?(Vt(e,r),t=10*(1073741822-qt(e,r)),t<qs&&(qs=t),t=10*(1073741822-Rr()),t=qs-t,Dr(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function _r(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r)))return e=Zn(t,e),e=fr(n,e,1073741823),Xn(n,e),void Ar(n,1073741823);break;case 3:return e=Zn(t,e),e=lr(n,e,1073741823),Xn(n,e),void Ar(n,1073741823)}n=n.return}3===e.tag&&(n=Zn(t,e),n=lr(e,n,1073741823),Xn(e,n),Ar(e,1073741823))}function Sr(e,t){var n=ui.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&t.mode))r=1073741823;else if(Us&&!Gs)r=Vs;else{switch(n){case ui.unstable_ImmediatePriority:r=1073741823;break;case ui.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case ui.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case ui.unstable_LowPriority:case ui.unstable_IdlePriority:r=1;break;default:i("313")}null!==Bs&&r===Vs&&--r}return n===ui.unstable_UserBlockingPriority&&(0===ru||r<ru)&&(ru=r),r}function Ir(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Bs&&Vs===n?Bs=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,t=e.latestPingedTime,(0===t||t>n)&&(e.latestPingedTime=n),zt(n,e),0!==(n=e.expirationTime)&&Lr(e,n)))}function kr(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Rr(),t=Sr(t,e),null!==(e=Nr(e,t))&&(jt(e,t),0!==(t=e.expirationTime)&&Lr(e,t))}function Nr(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Ar(e,t){null!==(e=Nr(e,t))&&(!Us&&0!==Vs&&t>Vs&&dr(),jt(e,t),Us&&!Gs&&Bs===e||Lr(e,e.expirationTime),du>hu&&(du=0,i("185")))}function xr(e,t,n,r,i){return ui.unstable_runWithPriority(ui.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}function Cr(){lu=1073741822-((ui.unstable_now()-cu)/10|0)}function Or(e,t){if(0!==$s){if(t<$s)return;null!==Zs&&ui.unstable_cancelCallback(Zs)}$s=t,e=ui.unstable_now()-cu,Zs=ui.unstable_scheduleCallback(jr,{timeout:10*(1073741822-t)-e})}function Dr(e,t,n,r,i){e.expirationTime=r,0!==i||Ur()?0<i&&(e.timeoutHandle=_a(Mr.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Mr(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,Cr(),fu=lu,Vr(e,n)}function Pr(e,t){e.expirationTime=t,e.finishedWork=null}function Rr(){return eu?fu:(Fr(),0!==nu&&1!==nu||(Cr(),fu=lu),fu)}function Lr(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===Js?(Ys=Js=e,e.nextScheduledRoot=e):(Js=Js.nextScheduledRoot=e,Js.nextScheduledRoot=Ys)):t>e.expirationTime&&(e.expirationTime=t),eu||(au?su&&(tu=e,nu=1073741823,qr(e,1073741823,!1)):1073741823===t?Br(1073741823,!1):Or(e,t))}function Fr(){var e=0,t=null;if(null!==Js)for(var n=Js,r=Ys;null!==r;){var o=r.expirationTime;if(0===o){if((null===n||null===Js)&&i("244"),r===r.nextScheduledRoot){Ys=Js=r.nextScheduledRoot=null;break}if(r===Ys)Ys=o=r.nextScheduledRoot,Js.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===Js){Js=n,Js.nextScheduledRoot=Ys,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(o>e&&(e=o,t=r),r===Js)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}tu=t,nu=e}function Ur(){return!!mu||!!ui.unstable_shouldYield()&&(mu=!0)}function jr(){try{if(!Ur()&&null!==Ys){Cr();var e=Ys;do{var t=e.expirationTime;0!==t&&lu<=t&&(e.nextExpirationTimeToWorkOn=lu),e=e.nextScheduledRoot}while(e!==Ys)}Br(0,!0)}finally{mu=!1}}function Br(e,t){if(Fr(),t)for(Cr(),fu=lu;null!==tu&&0!==nu&&e<=nu&&!(mu&&lu>nu);)qr(tu,nu,lu>nu),Fr(),Cr(),fu=lu;else for(;null!==tu&&0!==nu&&e<=nu;)qr(tu,nu,!1),Fr();if(t&&($s=0,Zs=null),0!==nu&&Or(tu,nu),du=0,pu=null,null!==uu)for(e=uu,uu=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){iu||(iu=!0,ou=e)}}if(iu)throw e=ou,ou=null,iu=!1,e}function Vr(e,t){eu&&i("253"),tu=e,nu=t,qr(e,t,!1),Br(1073741823,!1)}function qr(e,t,n){if(eu&&i("245"),eu=!0,n){var r=e.finishedWork;null!==r?zr(e,r,t):(e.finishedWork=null,r=e.timeoutHandle,-1!==r&&(e.timeoutHandle=-1,Sa(r)),Tr(e,n),null!==(r=e.finishedWork)&&(Ur()?e.finishedWork=r:zr(e,r,t)))}else r=e.finishedWork,null!==r?zr(e,r,t):(e.finishedWork=null,r=e.timeoutHandle,-1!==r&&(e.timeoutHandle=-1,Sa(r)),Tr(e,n),null!==(r=e.finishedWork)&&zr(e,r,t));eu=!1}function zr(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===uu?uu=[r]:uu.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===pu?du++:(pu=e,du=0),ui.unstable_runWithPriority(ui.unstable_ImmediatePriority,function(){br(e,t)})}function Wr(e){null===tu&&i("246"),tu.expirationTime=0,iu||(iu=!0,ou=e)}function Gr(e,t){var n=au;au=!0;try{return e(t)}finally{(au=n)||eu||Br(1073741823,!1)}}function Xr(e,t){if(au&&!su){su=!0;try{return e(t)}finally{su=!1}}return e(t)}function Kr(e,t,n){au||eu||0===ru||(Br(ru,!1),ru=0);var r=au;au=!0;try{return ui.unstable_runWithPriority(ui.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(au=r)||eu||Br(1073741823,!1)}}function Hr(e,t,n,r,o){var a=t.current;e:if(n){n=n._reactInternalFiber;t:{2===xe(n)&&1===n.tag||i("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(wt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);i("171"),s=void 0}if(1===n.tag){var u=n.type;if(wt(u)){n=St(n,u,s);break e}}n=s}else n=xa;return null===t.context?t.context=n:t.pendingContext=n,t=o,o=Wn(r),o.payload={element:e},t=void 0===t?null:t,null!==t&&(o.callback=t),vr(),Xn(a,o),Ar(a,r),r}function Qr(e,t,n,r){var i=t.current;return i=Sr(Rr(),i),Hr(e,t,n,i,r)}function Yr(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Jr(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:so,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function $r(e){var t=1073741822-25*(1+((1073741822-Rr()+500)/25|0));t>=Fs&&(t=Fs-1),this._expirationTime=Fs=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Zr(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ei(e,t,n){t=Ct(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function ti(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ni(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ei(e,!1,t)}function ri(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"===typeof i){var a=i;i=function(){var e=Yr(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=ni(n,r),"function"===typeof i){var s=i;i=function(){var e=Yr(o._internalRoot);s.call(e)}}Xr(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Yr(o._internalRoot)}function ii(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return ti(t)||i("200"),Jr(e,t,null,n)}function oi(e,t){return ti(e)||i("299","unstable_createRoot"),new ei(e,!0,null!=t&&!0===t.hydrate)}var ai=n(0),si=n(36),ui=n(93);ai||i("227");var ci=!1,li=null,fi=!1,hi=null,di={onError:function(e){ci=!0,li=e}},pi=null,mi={},yi=[],gi={},vi={},bi={},wi=null,Ei=null,Ti=null,_i=null,Si={injectEventPluginOrder:function(e){pi&&i("101"),pi=Array.prototype.slice.call(e),u()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];mi.hasOwnProperty(t)&&mi[t]===r||(mi[t]&&i("102",t),mi[t]=r,n=!0)}n&&u()}},Ii=Math.random().toString(36).slice(2),ki="__reactInternalInstance$"+Ii,Ni="__reactEventHandlers$"+Ii,Ai=!("undefined"===typeof window||!window.document||!window.document.createElement),xi={animationend:k("Animation","AnimationEnd"),animationiteration:k("Animation","AnimationIteration"),animationstart:k("Animation","AnimationStart"),transitionend:k("Transition","TransitionEnd")},Ci={},Oi={};Ai&&(Oi=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Di=N("animationend"),Mi=N("animationiteration"),Pi=N("animationstart"),Ri=N("transitionend"),Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fi=null,Ui=null,ji=null;si(O.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=x)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=x)},persist:function(){this.isPersistent=x},isPersistent:C,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=C,this._dispatchInstances=this._dispatchListeners=null}}),O.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},O.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return si(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=si({},r.Interface,e),n.extend=r.extend,P(n),n},P(O);var Bi=O.extend({data:null}),Vi=O.extend({data:null}),qi=[9,13,27,32],zi=Ai&&"CompositionEvent"in window,Wi=null;Ai&&"documentMode"in document&&(Wi=document.documentMode);var Gi=Ai&&"TextEvent"in window&&!Wi,Xi=Ai&&(!zi||Wi&&8<Wi&&11>=Wi),Ki=String.fromCharCode(32),Hi={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Qi=!1,Yi=!1,Ji={eventTypes:Hi,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(zi)e:{switch(e){case"compositionstart":i=Hi.compositionStart;break e;case"compositionend":i=Hi.compositionEnd;break e;case"compositionupdate":i=Hi.compositionUpdate;break e}i=void 0}else Yi?R(e,n)&&(i=Hi.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Hi.compositionStart);return i?(Xi&&"ko"!==n.locale&&(Yi||i!==Hi.compositionStart?i===Hi.compositionEnd&&Yi&&(o=A()):(Fi=r,Ui="value"in Fi?Fi.value:Fi.textContent,Yi=!0)),i=Bi.getPooled(i,t,n,r),o?i.data=o:null!==(o=L(n))&&(i.data=o),I(i),o=i):o=null,(e=Gi?F(e,n):U(e,n))?(t=Vi.getPooled(Hi.beforeInput,t,n,r),t.data=e,I(t)):t=null,null===o?t:null===t?o:[o,t]}},$i=null,Zi=null,eo=null,to=!1,no={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ro=ai.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;ro.hasOwnProperty("ReactCurrentDispatcher")||(ro.ReactCurrentDispatcher={current:null});var io=/^(.*)[\\\/]/,oo="function"===typeof Symbol&&Symbol.for,ao=oo?Symbol.for("react.element"):60103,so=oo?Symbol.for("react.portal"):60106,uo=oo?Symbol.for("react.fragment"):60107,co=oo?Symbol.for("react.strict_mode"):60108,lo=oo?Symbol.for("react.profiler"):60114,fo=oo?Symbol.for("react.provider"):60109,ho=oo?Symbol.for("react.context"):60110,po=oo?Symbol.for("react.concurrent_mode"):60111,mo=oo?Symbol.for("react.forward_ref"):60112,yo=oo?Symbol.for("react.suspense"):60113,go=oo?Symbol.for("react.memo"):60115,vo=oo?Symbol.for("react.lazy"):60116,bo="function"===typeof Symbol&&Symbol.iterator,wo=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Eo=Object.prototype.hasOwnProperty,To={},_o={},So={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){So[e]=new oe(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];So[t]=new oe(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){So[e]=new oe(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){So[e]=new oe(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){So[e]=new oe(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){So[e]=new oe(e,3,!0,e,null)}),["capture","download"].forEach(function(e){So[e]=new oe(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){So[e]=new oe(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){So[e]=new oe(e,5,!1,e.toLowerCase(),null)});var Io=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Io,ae);So[t]=new oe(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Io,ae);So[t]=new oe(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Io,ae);So[t]=new oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){So[e]=new oe(e,1,!1,e.toLowerCase(),null)});var ko={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},No=null,Ao=null,xo=!1;Ai&&(xo=H("input")&&(!document.documentMode||9<document.documentMode));var Co={eventTypes:ko,_isInputEventSupported:xo,extractEvents:function(e,t,n,r){var i=t?v(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=ve:X(i)?xo?o=Se:(o=Te,a=Ee):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=_e),o&&(o=o(e,t)))return me(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&pe(i,"number",i.value)}},Oo=O.extend({view:null,detail:null}),Do={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Mo=0,Po=0,Ro=!1,Lo=!1,Fo=Oo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ke,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Mo;return Mo=e.screenX,Ro?"mousemove"===e.type?e.screenX-t:0:(Ro=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Po;return Po=e.screenY,Lo?"mousemove"===e.type?e.screenY-t:0:(Lo=!0,0)}}),Uo=Fo.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),jo={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Bo={eventTypes:jo,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?y(t):null):o=null,o===t)return null;var a=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=Fo,s=jo.mouseLeave,u=jo.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Uo,s=jo.pointerLeave,u=jo.pointerEnter,c="pointer");var l=null==o?i:v(o);if(i=null==t?i:v(t),e=a.getPooled(s,o,n,r),e.type=c+"leave",e.target=l,e.relatedTarget=i,n=a.getPooled(u,t,n,r),n.type=c+"enter",n.target=i,n.relatedTarget=l,r=t,o&&r)e:{for(t=o,i=r,c=0,a=t;a;a=w(a))c++;for(a=0,u=i;u;u=w(u))a++;for(;0<c-a;)t=w(t),c--;for(;0<a-c;)i=w(i),a--;for(;c--;){if(t===i||t===i.alternate)break e;t=w(t),i=w(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)t.push(o),o=w(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=w(r);for(r=0;r<t.length;r++)_(t[r],"bubbled",e);for(r=o.length;0<r--;)_(o[r],"captured",n);return[e,n]}},Vo=Object.prototype.hasOwnProperty,qo=O.extend({animationName:null,elapsedTime:null,pseudoElement:null}),zo=O.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wo=Oo.extend({relatedTarget:null}),Go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ko=Oo.extend({key:function(e){if(e.key){var t=Go[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Me(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Xo[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ke,charCode:function(e){return"keypress"===e.type?Me(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Me(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ho=Fo.extend({dataTransfer:null}),Qo=Oo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ke}),Yo=O.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Jo=Fo.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),$o=[["abort","abort"],[Di,"animationEnd"],[Mi,"animationIteration"],[Pi,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[Ri,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],Zo={},ea={};[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Pe(e,!0)}),$o.forEach(function(e){Pe(e,!1)});var ta={eventTypes:Zo,isInteractiveTopLevelEventType:function(e){return void 0!==(e=ea[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=ea[e];if(!i)return null;switch(e){case"keypress":if(0===Me(n))return null;case"keydown":case"keyup":e=Ko;break;case"blur":case"focus":e=Wo;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=Ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=Qo;break;case Di:case Mi:case Pi:e=qo;break;case Ri:e=Yo;break;case"scroll":e=Oo;break;case"wheel":e=Jo;break;case"copy":case"cut":case"paste":e=zo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Uo;break;default:e=O}return t=e.getPooled(i,t,n,r),I(t),t}},na=ta.isInteractiveTopLevelEventType,ra=[],ia=!0,oa={},aa=0,sa="_reactListenersID"+(""+Math.random()).slice(2),ua=Ai&&"documentMode"in document&&11>=document.documentMode,ca={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},la=null,fa=null,ha=null,da=!1,pa={eventTypes:ca,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Be(o),i=bi.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?v(t):window,e){case"focus":(X(o)||"true"===o.contentEditable)&&(la=o,fa=t,ha=null);break;case"blur":ha=fa=la=null;break;case"mousedown":da=!0;break;case"contextmenu":case"mouseup":case"dragend":return da=!1,Qe(n,r);case"selectionchange":if(ua)break;case"keydown":case"keyup":return Qe(n,r)}return null}};Si.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),wi=b,Ei=g,Ti=v,Si.injectEventPluginsByName({SimpleEventPlugin:ta,EnterLeaveEventPlugin:Bo,ChangeEventPlugin:Co,SelectEventPlugin:pa,BeforeInputEventPlugin:Ji});var ma={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},ya=void 0,ga=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==ma.svg||"innerHTML"in e)e.innerHTML=t;else{for(ya=ya||document.createElement("div"),ya.innerHTML="<svg>"+t+"</svg>",t=ya.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),va={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ba=["Webkit","ms","Moz","O"];Object.keys(va).forEach(function(e){ba.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),va[t]=va[e]})});var wa=si({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Ea=null,Ta=null,_a="function"===typeof setTimeout?setTimeout:void 0,Sa="function"===typeof clearTimeout?clearTimeout:void 0,Ia=ui.unstable_scheduleCallback,ka=ui.unstable_cancelCallback;new Set;var Na=[],Aa=-1,xa={},Ca={current:xa},Oa={current:!1},Da=xa,Ma=null,Pa=null,Ra=(new ai.Component).refs,La={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===xe(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Rr();r=Sr(r,e);var i=Wn(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),vr(),Xn(e,i),Ar(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Rr();r=Sr(r,e);var i=Wn(r);i.tag=Is,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),vr(),Xn(e,i),Ar(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Rr();n=Sr(n,e);var r=Wn(n);r.tag=ks,void 0!==t&&null!==t&&(r.callback=t),vr(),Xn(e,r),Ar(e,n)}},Fa=Array.isArray,Ua=Zt(!0),ja=Zt(!1),Ba={},Va={current:Ba},qa={current:Ba},za={current:Ba},Wa=0,Ga=2,Xa=4,Ka=8,Ha=16,Qa=32,Ya=64,Ja=128,$a=ro.ReactCurrentDispatcher,Za=0,es=null,ts=null,ns=null,rs=null,is=null,os=null,as=0,ss=null,us=0,cs=!1,ls=null,fs=0,hs={readContext:Vn,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an},ds={readContext:Vn,useCallback:function(e,t){return ln().memoizedState=[e,void 0===t?null:t],e},useContext:Vn,useEffect:function(e,t){return mn(516,Ja|Ya,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,mn(4,Xa|Qa,gn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mn(4,Xa|Qa,e,t)},useMemo:function(e,t){var n=ln();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=bn.bind(null,es,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:function(e){var t=ln();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={last:null,dispatch:null,lastRenderedReducer:hn,lastRenderedState:e},e=e.dispatch=bn.bind(null,es,e),[t.memoizedState,e]},useDebugValue:vn},ps={readContext:Vn,useCallback:function(e,t){var n=fn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&sn(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Vn,useEffect:function(e,t){return yn(516,Ja|Ya,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,yn(4,Xa|Qa,gn.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yn(4,Xa|Qa,e,t)},useMemo:function(e,t){var n=fn();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&sn(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:dn,useRef:function(){return fn().memoizedState},useState:function(e){return dn(hn)},useDebugValue:vn},ms=null,ys=null,gs=!1,vs=ro.ReactCurrentOwner,bs=!1,ws={current:null},Es=null,Ts=null,_s=null,Ss=0,Is=1,ks=2,Ns=3,As=!1,xs=void 0,Cs=void 0,Os=void 0,Ds=void 0;xs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Cs=function(){},Os=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a=t.stateNode;switch(en(Va.current),e=null,n){case"input":o=ce(a,o),r=ce(a,r),e=[];break;case"option":o=Je(a,o),r=Je(a,r),e=[];break;case"select":o=si({},o,{value:void 0}),r=si({},r,{value:void 0}),e=[];break;case"textarea":o=Ze(a,o),r=Ze(a,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(a.onclick=ft)}ut(n,r),a=n=void 0;var s=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(a in u)u.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(vi.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(e||(e=[]),e.push(n,s)),s=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(n,""+c)):"children"===n?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(vi.hasOwnProperty(n)?(null!=c&&lt(i,n),e||u===c||(e=[])):(e=e||[]).push(n,c))}s&&(e=e||[]).push("style",s),i=e,(t.updateQueue=i)&&er(t)}},Ds=function(e,t,n,r){n!==r&&er(t)};var Ms="function"===typeof WeakSet?WeakSet:Set,Ps="function"===typeof WeakMap?WeakMap:Map,Rs=ro.ReactCurrentDispatcher,Ls=ro.ReactCurrentOwner,Fs=1073741822,Us=!1,js=null,Bs=null,Vs=0,qs=-1,zs=!1,Ws=null,Gs=!1,Xs=null,Ks=null,Hs=null,Qs=null,Ys=null,Js=null,$s=0,Zs=void 0,eu=!1,tu=null,nu=0,ru=0,iu=!1,ou=null,au=!1,su=!1,uu=null,cu=ui.unstable_now(),lu=1073741822-(cu/10|0),fu=lu,hu=50,du=0,pu=null,mu=!1;$i=function(e,t,n){switch(t){case"input":if(he(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=b(r);o||i("90"),$(r),he(r,o)}}}break;case"textarea":tt(e,n);break;case"select":null!=(t=n.value)&&$e(e,!!n.multiple,t,!1)}},$r.prototype.render=function(e){this._defer||i("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Zr;return Hr(e,t,null,n,r._onCommit),r},$r.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},$r.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||i("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)r=o,o=o._next;null===r&&i("251"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Vr(e,n),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},$r.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Zr.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Zr.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&i("191",n),n()}}},ei.prototype.render=function(e,t){var n=this._internalRoot,r=new Zr;return t=void 0===t?null:t,null!==t&&r.then(t),Qr(e,n,null,r._onCommit),r},ei.prototype.unmount=function(e){var t=this._internalRoot,n=new Zr;return e=void 0===e?null:e,null!==e&&n.then(e),Qr(null,t,null,n._onCommit),n},ei.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Zr;return n=void 0===n?null:n,null!==n&&i.then(n),Qr(t,r,e,i._onCommit),i},ei.prototype.createBatch=function(){var e=new $r(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},q=Gr,z=Kr,W=function(){eu||0===ru||(Br(ru,!1),ru=0)};var yu={createPortal:ii,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?i("188"):i("268",Object.keys(e))),e=De(t),e=null===e?null:e.stateNode},hydrate:function(e,t,n){return ti(t)||i("200"),ri(null,e,t,!0,n)},render:function(e,t,n){return ti(t)||i("200"),ri(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return ti(n)||i("200"),(null==e||void 0===e._reactInternalFiber)&&i("38"),ri(e,t,n,!1,r)},unmountComponentAtNode:function(e){return ti(e)||i("40"),!!e._reactRootContainer&&(Xr(function(){ri(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return ii.apply(void 0,arguments)},unstable_batchedUpdates:Gr,unstable_interactiveUpdates:Kr,flushSync:function(e,t){eu&&i("187");var n=au;au=!0;try{return xr(e,t)}finally{au=n,Br(1073741823,!1)}},unstable_createRoot:oi,unstable_flushControlled:function(e){var t=au;au=!0;try{xr(e)}finally{(au=t)||eu||Br(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[g,v,b,Si.injectEventPluginsByName,gi,I,function(e){h(e,S)},B,V,je,m]}};!function(e){var t=e.findFiberByHostInstance;At(si({},e,{overrideProps:null,currentDispatcherRef:ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=De(e),null===e?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:y,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var gu={default:yu},vu=gu&&yu||gu;e.exports=vu.default||vu},function(e,t,n){"use strict";e.exports=n(94)},function(e,t,n){"use strict";(function(e){function n(){if(!p){var e=c.expirationTime;m?_():m=!0,T(o,e)}}function r(){var e=c,t=c.next;if(c===t)c=null;else{var r=c.previous;c=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=f,o=d;f=e,d=t;try{var a=r()}finally{f=i,d=o}if("function"===typeof a)if(a={callback:a,priorityLevel:e,expirationTime:t,next:null,previous:null},null===c)c=a.next=a.previous=a;else{r=null,e=c;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==c);null===r?r=c:r===c&&(c=a,n()),t=r.previous,t.next=r.previous=a,a.next=r,a.previous=t}}function i(){if(-1===h&&null!==c&&1===c.priorityLevel){p=!0;try{do{r()}while(null!==c&&1===c.priorityLevel)}finally{p=!1,null!==c?n():m=!1}}}function o(e){p=!0;var o=l;l=e;try{if(e)for(;null!==c;){var a=t.unstable_now();if(!(c.expirationTime<=a))break;do{r()}while(null!==c&&c.expirationTime<=a)}else if(null!==c)do{r()}while(null!==c&&!S())}finally{p=!1,l=o,null!==c?n():m=!1,i()}}function a(e){s=b(function(t){v(u),e(t)}),u=g(function(){w(s),e(t.unstable_now())},100)}Object.defineProperty(t,"__esModule",{value:!0});var s,u,c=null,l=!1,f=3,h=-1,d=-1,p=!1,m=!1,y=Date,g="function"===typeof setTimeout?setTimeout:void 0,v="function"===typeof clearTimeout?clearTimeout:void 0,b="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,w="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;if("object"===typeof performance&&"function"===typeof performance.now){var E=performance;t.unstable_now=function(){return E.now()}}else t.unstable_now=function(){return y.now()};var T,_,S,I=null;if("undefined"!==typeof window?I=window:"undefined"!==typeof e&&(I=e),I&&I._schedMock){var k=I._schedMock;T=k[0],_=k[1],S=k[2],t.unstable_now=k[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var N=null,A=function(e){if(null!==N)try{N(e)}finally{N=null}};T=function(e){null!==N?setTimeout(T,0,e):(N=e,setTimeout(A,0,!1))},_=function(){N=null},S=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof b&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof w&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var x=null,C=!1,O=-1,D=!1,M=!1,P=0,R=33,L=33;S=function(){return P<=t.unstable_now()};var F=new MessageChannel,U=F.port2;F.port1.onmessage=function(){C=!1;var e=x,n=O;x=null,O=-1;var r=t.unstable_now(),i=!1;if(0>=P-r){if(!(-1!==n&&n<=r))return D||(D=!0,a(j)),x=e,void(O=n);i=!0}if(null!==e){M=!0;try{e(i)}finally{M=!1}}};var j=function(e){if(null!==x){a(j);var t=e-P+L;t<L&&R<L?(8>t&&(t=8),L=t<R?R:t):R=t,P=e+L,C||(C=!0,U.postMessage(void 0))}else D=!1};T=function(e,t){x=e,O=t,M||0>t?U.postMessage(void 0):D||(D=!0,a(j))},_=function(){x=null,C=!1,O=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f,o=h;f=e,h=t.unstable_now();try{return n()}finally{f=r,h=o,i()}},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var n=3;break;default:n=f}var r=f,o=h;f=n,h=t.unstable_now();try{return e()}finally{f=r,h=o,i()}},t.unstable_scheduleCallback=function(e,r){var i=-1!==h?h:t.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=i+r.timeout;else switch(f){case 1:r=i+-1;break;case 2:r=i+250;break;case 5:r=i+1073741823;break;case 4:r=i+1e4;break;default:r=i+5e3}if(e={callback:e,priorityLevel:f,expirationTime:r,next:null,previous:null},null===c)c=e.next=e.previous=e,n();else{i=null;var o=c;do{if(o.expirationTime>r){i=o;break}o=o.next}while(o!==c);null===i?i=c:i===c&&(c=e,n()),r=i.previous,r.next=i.previous=e,e.next=i,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)c=null;else{e===c&&(c=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=f;return function(){var r=f,o=h;f=n,h=t.unstable_now();try{return e.apply(this,arguments)}finally{f=r,h=o,i()}}},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_shouldYield=function(){return!l&&(null!==c&&c.expirationTime<d||S())},t.unstable_continueExecution=function(){null!==c&&n()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return c}}).call(t,n(4))},function(e,t){},function(e,t,n){var r,i,o;!function(n){var a=/iPhone/i,s=/iPod/i,u=/iPad/i,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,f=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,h=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,d=/Windows Phone/i,p=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,y=/BB10/i,g=/Opera Mini/i,v=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,w=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),E=function(e,t){return e.test(t)},T=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if("undefined"!==typeof n[1]&&(t=n[0]),n=t.split("Twitter"),"undefined"!==typeof n[1]&&(t=n[0]),this.apple={phone:E(a,t),ipod:E(s,t),tablet:!E(a,t)&&E(u,t),device:E(a,t)||E(s,t)||E(u,t)},this.amazon={phone:E(f,t),tablet:!E(f,t)&&E(h,t),device:E(f,t)||E(h,t)},this.android={phone:E(f,t)||E(c,t),tablet:!E(f,t)&&!E(c,t)&&(E(h,t)||E(l,t)),device:E(f,t)||E(h,t)||E(c,t)||E(l,t)},this.windows={phone:E(d,t),tablet:E(p,t),device:E(d,t)||E(p,t)},this.other={blackberry:E(m,t),blackberry10:E(y,t),opera:E(g,t),firefox:E(b,t),chrome:E(v,t),device:E(m,t)||E(y,t)||E(g,t)||E(b,t)||E(v,t)},this.seven_inch=E(w,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"===typeof window)return this},_=function(){var e=new T;return e.Class=T,e};"undefined"!==typeof e&&e.exports&&"undefined"===typeof window?e.exports=T:"undefined"!==typeof e&&e.exports&&"undefined"!==typeof window?e.exports=_():(i=[],r=n.isMobile=_(),void 0!==(o="function"===typeof r?r.apply(t,i):r)&&(e.exports=o))}(this)},function(e,t,n){"use strict";(function(t){function n(e){var t=o.exec(e),n=(t[1]||"")+(t[2]||""),r=t[3]||"",i=a.exec(r);return[n,i[1],i[2],i[3]]}function r(e){return u.exec(e).slice(1)}var i="win32"===t.platform,o=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,a=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,s={};s.parse=function(e){if("string"!==typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=n(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}};var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,c={};c.parse=function(e){if("string"!==typeof e)throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=r(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},e.exports=i?s.parse:c.parse,e.exports.posix=c.parse,e.exports.win32=s.parse}).call(t,n(60))},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!==typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"===typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,d,p,m=e[l].replace(s,"%20"),y=m.indexOf(n);y>=0?(f=m.substr(0,y),h=m.substr(y+1)):(f=m,h=""),d=decodeURIComponent(f),p=decodeURIComponent(h),r(a,d)?i(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?r(a(e),function(a){var s=encodeURIComponent(i(a))+n;return o(e[a])?r(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";n(101);var r=function(e){return e&&"object"===typeof e&&"default"in e?e.default:e}(n(49));e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(102),i=(n.n(r),n(103)),o=(n.n(i),n(106)),a=(n.n(o),n(117)),s=(n.n(a),n(120)),u=(n.n(s),n(124)),c=(n.n(u),n(130)),l=(n.n(c),n(134)),f=(n.n(l),n(162));n.n(f)},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(g.arrayBuffer&&g.blob&&b(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(e instanceof d){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=h(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},f.call(d.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var T=[301,302,303,307,308];y.redirect=function(e,t){if(-1===T.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=d,e.Response=y,e.fetch=function(e,t){return new Promise(function(n,r){var i=new d(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:m(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new y(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&g.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";(function(e,t){function n(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function a(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:u)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,r)})}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"===typeof n)return void f(i(n,t),e)}e._state=1,e._value=t,c(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}var h=setTimeout;o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new l(e,t,n)),n},o.prototype.finally=n,o.all=function(e){return new o(function(t,n){function r(e,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,function(t){r(e,t)},n)}i[e]=a,0===--o&&t(i)}catch(e){n(e)}}if(!e||"undefined"===typeof e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])})},o.resolve=function(e){return e&&"object"===typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},o._immediateFn="function"===typeof e&&function(t){e(t)}||function(e){h(e,0)},o._unhandledRejectionFn=function(e){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var d=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("unable to locate global object")}();"Promise"in d?d.Promise.prototype.finally||(d.Promise.prototype.finally=n):d.Promise=o}).call(t,n(104).setImmediate,n(4))},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(105),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(4))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[u]=r,s(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{o(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var s,u=1,c={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;s=function(t){var n=f.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),h.setImmediate=r,h.clearImmediate=i}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(t,n(4),n(60))},function(e,t,n){e.exports=n(107)},function(e,t,n){n(108),e.exports=n(32)("Array","find")},function(e,t,n){"use strict";var r=n(62)(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),n(9)({target:"Array",proto:!0,forced:i},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(44)("find")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(68),i=n(1).WeakMap;e.exports="function"===typeof i&&/native code/.test(r.call(i))},function(e,t,n){var r=n(42),i=n(30),o=n(12),a=n(1).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(13),i=n(21),o=n(113);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(22),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(6),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==c||n!=u&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,t,n){var r=n(11),i=n(10),o=n(12),a=n(31);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,u=0;s>u;)i.f(e,n=r[u++],t[n]);return e}},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){e.exports=n(118)},function(e,t,n){n(119),e.exports=n(32)("Array","findIndex")},function(e,t,n){"use strict";var r=n(62)(6),i=!0;"findIndex"in[]&&Array(1).findIndex(function(){i=!1}),n(9)({target:"Array",proto:!0,forced:i},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n(44)("findIndex")},function(e,t,n){e.exports=n(121)},function(e,t,n){n(122),e.exports=n(46).Object.assign},function(e,t,n){var r=n(123);n(9)({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(e,t,n){"use strict";var r=n(31),i=n(30),o=n(25),a=n(20),s=n(37),u=Object.assign;e.exports=!u||n(6)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||r(u({},t)).join("")!=i})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),m=p.length,y=0;m>y;)f.call(d,h=p[y++])&&(n[h]=d[h]);return n}:u},function(e,t,n){e.exports=n(125)},function(e,t,n){n(126),e.exports=n(32)("String","startsWith")},function(e,t,n){"use strict";var r=n(21),i=n(127),o=n(129)("startsWith"),a="".startsWith;n(9)({target:"String",proto:!0,forced:!o},{startsWith:function(e){var t=i(this,e,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),o=String(e);return a?a.call(t,o,n):t.slice(n,n+o.length)===o}})},function(e,t,n){var r=n(128),i=n(15);e.exports=function(e,t,n){if(r(t))throw TypeError("String.prototype."+n+" doesn't accept regex");return String(i(e))}},function(e,t,n){var r=n(7),i=n(19),o=n(3)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(3)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){e.exports=n(131)},function(e,t,n){n(132),e.exports=n(32)("String","repeat")},function(e,t,n){n(9)({target:"String",proto:!0},{repeat:n(133)})},function(e,t,n){"use strict";var r=n(22),i=n(15);e.exports="".repeat||function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){e.exports=n(135),n(159),n(160),n(161)},function(e,t,n){n(136),n(139),n(142),n(145),n(146),n(147),n(148),n(71),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),e.exports=n(46).Symbol},function(e,t,n){"use strict";var r=n(38),i=n(7),o=n(20),a=n(21),s=n(137),u=n(64),c=n(3)("isConcatSpreadable"),l=!n(6)(function(){var e=[];return e[c]=!1,e.concat()[0]!==e}),f=n(138)("concat"),h=function(e){if(!i(e))return!1;var t=e[c];return void 0!==t?!!t:r(e)},d=!l||!f;n(9)({target:"Array",proto:!0,forced:d},{concat:function(e){var t,n,r,i,c,l=o(this),f=u(l,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(c=-1===t?l:arguments[t],h(c)){if(i=a(c.length),d+i>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,d++)n in c&&s(f,d,c[n])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");s(f,d++,c)}return f.length=d,f}})},function(e,t,n){"use strict";var r=n(23),i=n(10),o=n(17);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},function(e,t,n){var r=n(6),i=n(3)("species");e.exports=function(e){return!r(function(){var t=[],n=t.constructor={};return n[i]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},function(e,t,n){var r=n(140),i=Object.prototype;r!==i.toString&&n(26)(i,"toString",r,{unsafe:!0})},function(e,t,n){"use strict";var r=n(141),i=n(3)("toStringTag"),o={};o[i]="z",e.exports="[object z]"!==String(o)?function(){return"[object "+r(this)+"]"}:o.toString},function(e,t,n){var r=n(19),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var r=n(1),i=n(5),o=n(11),a=n(24),s=n(9),u=n(26),c=n(29),l=n(6),f=n(16),h=n(18),d=n(40),p=n(3),m=n(47),y=n(2),g=n(143),v=n(38),b=n(12),w=n(7),E=n(13),T=n(23),_=n(17),S=n(45),I=n(144),k=n(41),N=n(10),A=n(25),x=n(8),C=n(31),O=n(28)("hidden"),D=n(27),M=D.set,P=D.getterFor("Symbol"),R=k.f,L=N.f,F=I.f,U=r.Symbol,j=r.JSON,B=j&&j.stringify,V=p("toPrimitive"),q=A.f,z=f("symbol-registry"),W=f("symbols"),G=f("op-symbols"),X=f("wks"),K=Object.prototype,H=r.QObject,Q=n(67),Y=!H||!H.prototype||!H.prototype.findChild,J=o&&l(function(){return 7!=S(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=R(K,t);r&&delete K[t],L(e,t,n),r&&e!==K&&L(K,t,r)}:L,$=function(e,t){var n=W[e]=S(U.prototype);return M(n,{type:"Symbol",tag:e,description:t}),o||(n.description=t),n},Z=Q&&"symbol"==typeof U.iterator?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof U},ee=function(e,t,n){return e===K&&ee(G,t,n),b(e),t=T(t,!0),b(n),i(W,t)?(n.enumerable?(i(e,O)&&e[O][t]&&(e[O][t]=!1),n=S(n,{enumerable:_(0,!1)})):(i(e,O)||L(e,O,_(1,{})),e[O][t]=!0),J(e,t,n)):L(e,t,n)},te=function(e,t){b(e);for(var n,r=g(t=E(t)),i=0,o=r.length;o>i;)ee(e,n=r[i++],t[n]);return e},ne=function(e,t){return void 0===t?S(e):te(S(e),t)},re=function(e){var t=q.call(this,e=T(e,!0));return!(this===K&&i(W,e)&&!i(G,e))&&(!(t||!i(this,e)||!i(W,e)||i(this,O)&&this[O][e])||t)},ie=function(e,t){if(e=E(e),t=T(t,!0),e!==K||!i(W,t)||i(G,t)){var n=R(e,t);return!n||!i(W,t)||i(e,O)&&e[O][t]||(n.enumerable=!0),n}},oe=function(e){for(var t,n=F(E(e)),r=[],o=0;n.length>o;)i(W,t=n[o++])||i(c,t)||r.push(t);return r},ae=function(e){for(var t,n=e===K,r=F(n?G:E(e)),o=[],a=0;r.length>a;)!i(W,t=r[a++])||n&&!i(K,t)||o.push(W[t]);return o};Q||(U=function(){if(this instanceof U)throw TypeError("Symbol is not a constructor");var e=void 0===arguments[0]?void 0:String(arguments[0]),t=d(e),n=function(e){this===K&&n.call(G,e),i(this,O)&&i(this[O],t)&&(this[O][t]=!1),J(this,t,_(1,e))};return o&&Y&&J(K,t,{configurable:!0,set:n}),$(t,e)},u(U.prototype,"toString",function(){return P(this).tag}),A.f=re,N.f=ee,k.f=ie,n(42).f=I.f=oe,n(30).f=ae,o&&(L(U.prototype,"description",{configurable:!0,get:function(){return P(this).description}}),a||u(K,"propertyIsEnumerable",re,{unsafe:!0})),m.f=function(e){return $(p(e),e)}),s({global:!0,wrap:!0,forced:!Q,sham:!Q},{Symbol:U});for(var se=C(X),ue=0;se.length>ue;)y(se[ue++]);s({target:"Symbol",stat:!0,forced:!Q},{for:function(e){return i(z,e+="")?z[e]:z[e]=U(e)},keyFor:function(e){if(!Z(e))throw TypeError(e+" is not a symbol");for(var t in z)if(z[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s({target:"Object",stat:!0,forced:!Q,sham:!o},{create:ne,defineProperty:ee,defineProperties:te,getOwnPropertyDescriptor:ie}),s({target:"Object",stat:!0,forced:!Q},{getOwnPropertyNames:oe,getOwnPropertySymbols:ae}),j&&s({target:"JSON",stat:!0,forced:!Q||l(function(){var e=U();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))})},{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(w(t)||void 0!==e)&&!Z(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Z(t))return t}),r[1]=t,B.apply(j,r)}}),U.prototype[V]||x(U.prototype,V,U.prototype.valueOf),h(U,"Symbol"),c[O]=!0},function(e,t,n){var r=n(31),i=n(30),o=n(25);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(13),i=n(42).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){n(2)("asyncIterator")},function(e,t,n){"use strict";var r=n(11),i=n(5),o=n(7),a=n(10).f,s=n(69),u=n(1).Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var c={},l=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof l?new u(e):void 0===e?u():u(e);return""===e&&(c[t]=!0),t};s(l,u);var f=l.prototype=u.prototype;f.constructor=l;var h=f.toString,d="Symbol(test)"==String(u("test")),p=/^Symbol\((.*)\)[^)]+$/;a(f,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=h.call(e);if(i(c,e))return"";var n=d?t.slice(7,-1):t.replace(p,"$1");return""===n?void 0:n}}),n(9)({global:!0,forced:!0},{Symbol:l})}},function(e,t,n){n(2)("hasInstance")},function(e,t,n){n(2)("isConcatSpreadable")},function(e,t,n){n(2)("match")},function(e,t,n){n(2)("replace")},function(e,t,n){n(2)("search")},function(e,t,n){n(2)("species")},function(e,t,n){n(2)("split")},function(e,t,n){n(2)("toPrimitive")},function(e,t,n){n(2)("toStringTag")},function(e,t,n){n(2)("unscopables")},function(e,t,n){n(18)(Math,"Math",!0)},function(e,t,n){n(18)(n(1).JSON,"JSON",!0)},function(e,t,n){n(2)("dispose")},function(e,t,n){n(2)("observable")},function(e,t,n){n(2)("patternMatch")},function(e,t,n){e.exports=n(163)},function(e,t,n){n(71),n(164),n(170),e.exports=n(47).f("iterator")},function(e,t,n){"use strict";var r=n(165),i=n(27),o=n(72),a=i.set,s=i.getterFor("String Iterator");o(String,"String",function(e){a(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=s(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i,!0),t.index+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(22),i=n(15);e.exports=function(e,t,n){var o,a,s=String(i(e)),u=r(t),c=s.length;return u<0||u>=c?n?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?n?s.charAt(u):o:n?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}},function(e,t,n){"use strict";var r=n(73).IteratorPrototype,i=n(45),o=n(17),a=n(18),s=n(48),u=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,c,!1,!0),s[c]=u,e}},function(e,t,n){e.exports=!n(6)(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var r=n(169);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n,i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){var r=n(7),i=n(12);e.exports=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}},function(e,t,n){var r=n(171),i=n(172),o=n(1),a=n(8),s=n(3),u=s("iterator"),c=s("toStringTag"),l=i.values;for(var f in r){var h=o[f],d=h&&h.prototype;if(d){if(d[u]!==l)try{a(d,u,l)}catch(e){d[u]=l}if(d[c]||a(d,c,f),r[f])for(var p in i)if(d[p]!==i[p])try{a(d,p,i[p])}catch(e){d[p]=i[p]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){"use strict";var r=n(13),i=n(44),o=n(48),a=n(27),s=n(72),u=a.set,c=a.getterFor("Array Iterator");e.exports=s(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:r(e),index:0,kind:t})},function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){"use strict";function r(e){return i(void 0,e)}function i(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=i(e[r],t[r]));return e}function o(e,t,n){e[t]=n}function a(e,t){return e.replace(P,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}function s(e){return JSON.parse(e)}function u(e){return JSON.stringify(e)}function c(e,t){var n=new re(e,t);return n.subscribe.bind(n)}function l(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function f(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}function h(){}function d(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function p(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(d(e,t,r)+"must be a valid firebase namespace.")}function m(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(d(e,t,r)+"must be a valid function.")}function y(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(d(e,t,r)+"must be a valid context object.")}Object.defineProperty(t,"__esModule",{value:!0});var g=n(33),v={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},b=function(e,t){if(!e)throw w(t)},w=function(e){return new Error("Firebase Database ("+v.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},E=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},T=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=e[n++],a=e[n++],s=e[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{var o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,f=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(E(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):T(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i;var u=i<e.length,c=u?n[e.charAt(i)]:64;++i;var l=i<e.length,f=l?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==f)throw Error();var h=o<<2|s>>4;if(r.push(h),64!=c){var d=s<<4&240|c>>2;if(r.push(d),64!=f){var p=c<<6&192|f;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},S=function(e){var t=E(e);return _.encodeByteArray(t,!0)},I=function(e){try{return _.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},k=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}(),N=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""},A=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N())},x=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},C=function(){return!0===v.NODE_CLIENT||!0===v.NODE_ADMIN},O="FirebaseError",D=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=O,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,M.prototype.create),i}return g.__extends(t,e),t}(Error),M=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e,t){void 0===t&&(t={});for(var n=this.service+"/"+e,r=this.errors[e],i=r?a(r,t):"Error",o=this.serviceName+": "+i+" ("+n+").",s=new D(n,o),u=0,c=Object.keys(t);u<c.length;u++){var l=c[u];"_"!==l.slice(-1)&&(l in s&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),s[l]=t[l])}return s},e}(),P=/\{\$([^}]+)}/g,R=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=s(I(o[0])||""),n=s(I(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},L=function(e){var t,n,r=R(e).claims,i=Math.floor((new Date).getTime()/1e3);return"object"===typeof r&&(r.hasOwnProperty("nbf")?t=r.nbf:r.hasOwnProperty("iat")&&(t=r.iat),n=r.hasOwnProperty("exp")?r.exp:t+86400),i&&t&&n&&i>=t&&i<=n},F=function(e){var t=R(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},U=function(e){var t=R(e),n=t.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},j=function(e){var t=R(e).claims;return"object"===typeof t&&!0===t.admin},B=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},V=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},q=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},z=function(e,t){return q(t,function(t,n){e[t]=n}),e},W=function(e){return z({},e)},G=function(e){return"object"===typeof e&&null!==e},X=function(e){for(var t in e)return!1;return!0},K=function(e){var t=0;for(var n in e)t++;return t},H=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r},Q=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},Y=function(e,t,n){var r=Q(e,t,n);return r&&e[r]},J=function(e){for(var t in e)return t},$=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},Z=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0},ee=function(e){var t=[];return q(e,function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},te=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},ne=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);var i=(s<<5|s>>>27)+o+f+a+n[r]&4294967295;f=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),re=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=f(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=h),void 0===r.error&&(r.error=h),void 0===r.complete&&(r.complete=h);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}(),ie=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){var o=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},oe=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,b(r<e.length,"Surrogate pair missing trail surrogate.");i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ae=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};t.CONSTANTS=v,t.Deferred=k,t.ErrorFactory=M,t.FirebaseError=D,t.Sha1=ne,t.assert=b,t.assertionError=w,t.async=l,t.base64=_,t.base64Decode=I,t.base64Encode=S,t.clone=W,t.contains=B,t.createSubscribe=c,t.decode=R,t.deepCopy=r,t.deepExtend=i,t.errorPrefix=d,t.every=Z,t.extend=z,t.findKey=Q,t.findValue=Y,t.forEach=q,t.getAnyKey=J,t.getCount=K,t.getUA=N,t.getValues=$,t.isAdmin=j,t.isEmpty=X,t.isMobileCordova=A,t.isNodeSdk=C,t.isNonNullObject=G,t.isReactNative=x,t.isValidFormat=U,t.isValidTimestamp=L,t.issuedAtTime=F,t.jsonEval=s,t.map=H,t.patchProperty=o,t.querystring=ee,t.querystringDecode=te,t.safeGet=V,t.stringLength=ae,t.stringToByteArray=oe,t.stringify=u,t.validateArgCount=ie,t.validateCallback=m,t.validateContextObject=y,t.validateNamespace=p},function(e,t,n){"use strict";n(175)},function(e,t,n){"use strict";(function(e){var t=n(49),r=n.n(t);(function(){function e(e){return"string"==typeof e}function t(e){return"boolean"==typeof e}function n(){}function i(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function o(e){return null===e}function a(e){return"array"==i(e)}function s(e){var t=i(e);return"array"==t||"object"==t&&"number"==typeof e.length}function u(e){return"function"==i(e)}function c(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e,t,n){return e.call.apply(e.bind,arguments)}function f(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function h(e,t,n){return h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?l:f,h.apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function p(e,t){function n(){}n.prototype=t.prototype,e.pb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.gd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function m(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function y(e){if(Error.captureStackTrace)Error.captureStackTrace(this,y);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function g(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");y.call(this,n+e[r])}function v(e,t){throw new g("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function b(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function w(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function E(){this.b=this.a=null}function T(){var e=gc,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function _(){this.next=this.b=this.a=null}function S(t,n){for(var r=e(t)?t.split(""):t,i=t.length-1;0<=i;--i)i in r&&n.call(void 0,r[i],i,t)}function I(t){e:{for(var n=ri,r=t.length,i=e(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&n.call(void 0,i[o],o,t)){n=o;break e}n=-1}return 0>n?null:e(t)?t.charAt(n):t[n]}function k(e,t){return 0<=Zu(e,t)}function N(e,t){t=Zu(e,t);var n;return(n=0<=t)&&Array.prototype.splice.call(e,t,1),n}function A(e,t){var n=0;S(e,function(r,i){t.call(void 0,r,i,e)&&1==Array.prototype.splice.call(e,i,1).length&&n++})}function x(e){return Array.prototype.concat.apply([],arguments)}function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function O(e,t){return-1!=e.indexOf(t)}function D(e,t){return e<t?-1:e>t?1:0}function M(e){return O($u,e)}function P(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function R(e){for(var t in e)return!1;return!0}function L(e){var t,n={};for(t in e)n[t]=e[t];return n}function F(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<mc.length;o++)n=mc[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function j(e){return lc.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ic,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(oc,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ac,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(sc,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(uc,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(cc,"&#0;"))),e}function B(e){Gu.setTimeout(function(){throw e},0)}function V(){var e=Gu.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!M("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=h(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!M("Trident")&&!M("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.xb;n.xb=null,e()}},function(e){r.next={xb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){Gu.setTimeout(e,0)}}function q(e,t){pc||z(),yc||(pc(),yc=!0),gc.add(e,t)}function z(){if(Gu.Promise&&Gu.Promise.resolve){var e=Gu.Promise.resolve(void 0);pc=function(){e.then(W)}}else pc=function(){var e=W;!u(Gu.setImmediate)||Gu.Window&&Gu.Window.prototype&&!M("Edge")&&Gu.Window.prototype.setImmediate==Gu.setImmediate?(dc||(dc=V()),dc(e)):Gu.setImmediate(e)}}function W(){for(var e;e=T();){try{e.a.call(e.b)}catch(e){B(e)}w(Ju,e)}yc=!1}function G(e,t){if(this.a=vc,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=n)try{var r=this;e.call(t,function(e){ne(r,bc,e)},function(e){if(!(e instanceof le))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}ne(r,wc,e)})}catch(e){ne(this,wc,e)}}function X(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}function K(e,t,n){var r=Ec.get();return r.g=e,r.b=t,r.f=n,r}function H(e){if(e instanceof G)return e;var t=new G(n);return ne(t,bc,e),t}function Q(e){return new G(function(t,n){n(e)})}function Y(e,t,n){re(e,t,n,null)||q(d(t,e))}function J(e){return new G(function(t,n){var r=e.length,i=[];if(r)for(var o,a=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},u=0;u<e.length;u++)o=e[u],Y(o,d(a,u),s);else t(i)})}function $(e){return new G(function(t){var n=e.length,r=[];if(n)for(var i,o=function(e,i,o){n--,r[e]=i?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&t(r)},a=0;a<e.length;a++)i=e[a],Y(i,d(o,a,!0),d(o,a,!1));else t(r)})}function Z(e,t){if(e.a==vc)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==vc&&1==r?Z(n,t):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):ae(n),se(n,i,wc,t)))}e.c=null}else ne(e,wc,t)}function ee(e,t){e.b||e.a!=bc&&e.a!=wc||oe(e),e.f?e.f.next=t:e.b=t,e.f=t}function te(e,t,n,r){var i=K(null,null,null);return i.a=new G(function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof le?o(t):e(i)}catch(e){o(e)}}:o}),i.a.c=e,ee(e,i),i.a}function ne(e,t,n){e.a==vc&&(e===n&&(t=wc,n=new TypeError("Promise cannot resolve to itself")),e.a=1,re(n,e.Pc,e.Qc,e)||(e.i=n,e.a=t,e.c=null,oe(e),t!=wc||n instanceof le||ce(e,n)))}function re(e,t,r,i){if(e instanceof G)return ee(e,K(t||n,r||null,i)),!0;if(m(e))return e.then(t,r,i),!0;if(c(e))try{var o=e.then;if(u(o))return ie(e,o,t,r,i),!0}catch(e){return r.call(i,e),!0}return!1}function ie(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(e){o(e)}}function oe(e){e.h||(e.h=!0,q(e.Yb,e))}function ae(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function se(e,t,n,r){if(n==wc&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,ue(t,n,r);else try{t.c?t.g.call(t.f):ue(t,n,r)}catch(e){Tc.call(null,e)}w(Ec,t)}function ue(e,t,n){t==bc?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function ce(e,t){e.g=!0,q(function(){e.g&&Tc.call(null,t)})}function le(e){y.call(this,e)}function fe(){0!=_c&&(Sc[this[Hu]||(this[Hu]=++Qu)]=this),this.qa=this.qa,this.ja=this.ja}function he(e){if(!e.qa&&(e.qa=!0,e.va(),0!=_c)){var t=e[Hu]||(e[Hu]=++Qu);if(0!=_c&&e.ja&&0<e.ja.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Sc[t]}}function de(e){return de[" "](e),e}function pe(e,t){var n=Lc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function me(){var e=Gu.document;return e?e.documentMode:void 0}function ye(e){return pe(e,function(){for(var t=0,n=rc(String(Ic)).split("."),r=rc(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function ge(e,t){this.type=e,this.b=this.target=t,this.Kb=!0}function ve(t,n){if(ge.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var r=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=n,n=t.relatedTarget){if(Cc){e:{try{de(n.nodeName);var o=!0;break e}catch(e){}o=!1}o||(n=null)}}else"mouseover"==r?n=t.fromElement:"mouseout"==r&&(n=t.toElement);this.relatedTarget=n,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=e(t.pointerType)?t.pointerType:qc[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}function be(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Ma=i,this.key=++Wc,this.oa=this.Ia=!1}function we(e){e.oa=!0,e.listener=null,e.proxy=null,e.src=null,e.Ma=null}function Ee(e){this.src=e,this.a={},this.b=0}function Te(e,t){var n=t.type;n in e.a&&N(e.a[n],t)&&(we(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function _e(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.oa&&o.listener==t&&o.capture==!!n&&o.Ma==r)return i}return-1}function Se(e,t,n,r,i){if(r&&r.once)Ne(e,t,n,r,i);else if(a(t))for(var o=0;o<t.length;o++)Se(e,t[o],n,r,i);else n=Re(n),e&&e[zc]?Fe(e,t,n,c(r)?!!r.capture:!!r,i):Ie(e,t,n,!1,r,i)}function Ie(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=c(i)?!!i.capture:!!i,s=Pe(e);if(s||(e[Gc]=s=new Ee(e)),n=s.add(t,n,r,a,o),!n.proxy){if(r=ke(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Vc||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ce(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}Kc++}}function ke(){var e=Me,t=jc?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}function Ne(e,t,n,r,i){if(a(t))for(var o=0;o<t.length;o++)Ne(e,t[o],n,r,i);else n=Re(n),e&&e[zc]?Ue(e,t,n,c(r)?!!r.capture:!!r,i):Ie(e,t,n,!0,r,i)}function Ae(e,t,n,r,i){if(a(t))for(var o=0;o<t.length;o++)Ae(e,t[o],n,r,i);else r=c(r)?!!r.capture:!!r,n=Re(n),e&&e[zc]?(e=e.o,(t=String(t).toString())in e.a&&(o=e.a[t],-1<(n=_e(o,n,r,i))&&(we(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=Pe(e))&&(t=e.a[t.toString()],e=-1,t&&(e=_e(t,n,r,i)),(n=-1<e?t[e]:null)&&xe(n))}function xe(e){if("number"!=typeof e&&e&&!e.oa){var t=e.src;if(t&&t[zc])Te(t.o,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),Kc--,(n=Pe(t))?(Te(n,e),0==n.b&&(n.src=null,t[Gc]=null)):we(e)}}}function Ce(e){return e in Xc?Xc[e]:Xc[e]="on"+e}function Oe(e,t,n,r){var i=!0;if((e=Pe(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.oa&&(o=De(o,r),i=i&&!1!==o)}return i}function De(e,t){var n=e.listener,r=e.Ma||e.src;return e.Ia&&xe(e),n.call(r,t)}function Me(e,t){if(e.oa)return!0;if(!jc){if(!t)e:{t=["window","event"];for(var n=Gu,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(r=t,t=new ve(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Oe(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Oe(r[i],e,!1,t),n=n&&o}return n}return De(e,new ve(t,this))}function Pe(e){return e=e[Gc],e instanceof Ee?e:null}function Re(e){return u(e)?e:(e[Hc]||(e[Hc]=function(t){return e.handleEvent(t)}),e[Hc])}function Le(){fe.call(this),this.o=new Ee(this),this.Rb=this,this.Wa=null}function Fe(e,t,n,r,i){e.o.add(String(t),n,!1,r,i)}function Ue(e,t,n,r,i){e.o.add(String(t),n,!0,r,i)}function je(e,t,n,r){if(!(t=e.o.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.Ma||a.src;a.Ia&&Te(e.o,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function Be(e,t,n){if(u(e))n&&(e=h(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=h(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gu.setTimeout(e,t||0)}function Ve(e){var t=null;return new G(function(n,r){-1==(t=Be(function(){n(void 0)},e))&&r(Error("Failed to schedule timer."))}).s(function(e){throw Gu.clearTimeout(t),e})}function qe(t){if(t.S&&"function"==typeof t.S)return t.S();if(e(t))return t.split("");if(s(t)){for(var n=[],r=t.length,i=0;i<r;i++)n.push(t[i]);return n}n=[],r=0;for(i in t)n[r++]=t[i];return n}function ze(t){if(t.U&&"function"==typeof t.U)return t.U();if(!t.S||"function"!=typeof t.S){if(s(t)||e(t)){var n=[];t=t.length;for(var r=0;r<t;r++)n.push(r);return n}n=[],r=0;for(var i in t)n[r++]=i;return n}}function We(t,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(n,void 0);else if(s(t)||e(t))ec(t,n,void 0);else for(var r=ze(t),i=qe(t),o=i.length,a=0;a<o;a++)n.call(void 0,i[a],r&&r[a],t)}function Ge(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ge)for(n=e.U(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Xe(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ke(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Ke(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ke(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function He(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Qe(e,t){if(this.b=this.o=this.c="",this.i=null,this.h=this.g="",this.f=!1,e instanceof Qe){this.f=void 0!==t?t:e.f,Ye(this,e.c),this.o=e.o,this.b=e.b,Je(this,e.i),this.g=e.g,t=e.a;var n=new at;n.c=t.c,t.a&&(n.a=new Ge(t.a),n.b=t.b),$e(this,n),this.h=e.h}else e&&(n=String(e).match(Qc))?(this.f=!!t,Ye(this,n[1]||"",!0),this.o=rt(n[2]||""),this.b=rt(n[3]||"",!0),Je(this,n[4]),this.g=rt(n[5]||"",!0),$e(this,n[6]||"",!0),this.h=rt(n[7]||"")):(this.f=!!t,this.a=new at(null,this.f))}function Ye(e,t,n){e.c=n?rt(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Je(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function $e(e,t,n){t instanceof at?(e.a=t,dt(e.a,e.f)):(n||(t=it(t,Zc)),e.a=new at(t,e.f))}function Ze(e,t,n){e.a.set(t,n)}function et(e,t){return e.a.get(t)}function tt(e){return e instanceof Qe?new Qe(e):new Qe(e,void 0)}function nt(e,t){var n=new Qe(null,void 0);return Ye(n,"https"),e&&(n.b=e),t&&(n.g=t),n}function rt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function it(t,n,r){return e(t)?(t=encodeURI(t).replace(n,ot),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ot(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function at(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function st(e){e.a||(e.a=new Ge,e.b=0,e.c&&He(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function ut(e){var t=ze(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new at(null,void 0);e=qe(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];a(o)?ft(n,i,o):n.add(i,o)}return n}function ct(e,t){st(e),t=ht(e,t),Ke(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,Ke(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Xe(e)))}function lt(e,t){return st(e),t=ht(e,t),Ke(e.a.b,t)}function ft(e,t,n){ct(e,t),0<n.length&&(e.c=null,e.a.set(ht(e,t),C(n)),e.b+=n.length)}function ht(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function dt(e,t){t&&!e.f&&(st(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(ct(this,t),ft(this,n,e))},e)),e.f=t}function pt(e,t){this.a=e===rl&&t||"",this.b=nl}function mt(e){return e instanceof pt&&e.constructor===pt&&e.b===nl?e.a:(v("expected object of type Const, got '"+e+"'"),"type_error:Const")}function yt(){this.a="",this.b=al}function gt(e){return e instanceof yt&&e.constructor===yt&&e.b===al?e.a:(v("expected object of type TrustedResourceUrl, got '"+e+"' of type "+i(e)),"type_error:TrustedResourceUrl")}function vt(e,t){var n=mt(e);if(!ol.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(il,function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return e=t[r],e instanceof pt?mt(e):encodeURIComponent(String(e))}),bt(e)}function bt(e){var t=new yt;return t.a=e,t}function wt(){this.a="",this.b=ul}function Et(e){return e instanceof wt&&e.constructor===wt&&e.b===ul?e.a:(v("expected object of type SafeUrl, got '"+e+"' of type "+i(e)),"type_error:SafeUrl")}function Tt(e){return e instanceof wt?e:(e="object"==typeof e&&e.na?e.ma():String(e),sl.test(e)||(e="about:invalid#zClosurez"),_t(e))}function _t(e){var t=new wt;return t.a=e,t}function St(){this.a="",this.b=cl}function It(e){return e instanceof St&&e.constructor===St&&e.b===cl?e.a:(v("expected object of type SafeHtml, got '"+e+"' of type "+i(e)),"type_error:SafeHtml")}function kt(e){var t=new St;return t.a=e,t}function Nt(e,t){e.src=gt(t),null===Ku&&(t=Gu.document,Ku=(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&Xu.test(t)?t:""),(t=Ku)&&e.setAttribute("nonce",t)}function At(t){var n=document;return e(t)?n.getElementById(t):t}function xt(e,t){P(t,function(t,n){t&&"object"==typeof t&&t.na&&(t=t.ma()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:ll.hasOwnProperty(n)?e.setAttribute(ll[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t})}function Ct(t,n,r){var i=arguments,o=document,s=String(i[0]),u=i[1];if(!tl&&u&&(u.name||u.type)){if(s=["<",s],u.name&&s.push(' name="',j(u.name),'"'),u.type){s.push(' type="',j(u.type),'"');var c={};F(c,u),delete c.type,u=c}s.push(">"),s=s.join("")}return s=o.createElement(s),u&&(e(u)?s.className=u:a(u)?s.className=u.join(" "):xt(s,u)),2<i.length&&Ot(o,s,i),s}function Ot(t,n,r){function i(r){r&&n.appendChild(e(r)?t.createTextNode(r):r)}for(var o=2;o<r.length;o++){var a=r[o];!s(a)||c(a)&&0<a.nodeType?i(a):ec(Dt(a)?C(a):a,i)}}function Dt(e){if(e&&"number"==typeof e.length){if(c(e))return"function"==typeof e.item||"string"==typeof e.item;if(u(e))return"function"==typeof e.item}return!1}function Mt(e){var t=[];return Rt(new Pt,e,t),t.join("")}function Pt(){}function Rt(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(a(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),Rt(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){n.push("{"),i="";for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(o=t[r])&&(n.push(i),Lt(r,n),n.push(":"),Rt(e,o,n),i=",");return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Lt(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}function Lt(e,t){t.push('"',e.replace(hl,function(e){var t=fl[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),fl[e]=t),t}),'"')}function Ft(){var e=nn();return Nc&&!!Rc&&11==Rc||/Edge\/\d+/.test(e)}function Ut(){return Gu.window&&Gu.window.location.href||self&&self.location&&self.location.href||""}function jt(e,t){t=t||Gu.window;var n="about:blank";e&&(n=Et(Tt(e)).toString()),t.location.href=n}function Bt(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<Bt(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function Vt(){var e=nn();return!((e=en(e)!=yl?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Nc||!Rc||9<Rc)}function qt(e){return e=(e||nn()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function zt(e){e=e||Gu.window;try{e.close()}catch(e){}}function Wt(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=nn().toLowerCase(),r&&(t.target=r,O(n,"crios/")&&(t.target="_blank")),en(nn())==ml&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof wt?n:Tt("undefined"!=typeof n.href?n.href:String(n)),n=e.target||n.target,i=[];for(a in e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((M("iPhone")&&!M("iPod")&&!M("iPad")||M("iPad")||M("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),t instanceof wt||t instanceof wt||(t="object"==typeof t&&t.na?t.ma():String(t),sl.test(t)||(t="about:invalid#zClosurez"),t=_t(t)),a.href=Et(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=Et(t).toString(),a&&(xc&&O(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=kt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+j(e)+'">'),a.document.write(It(e)),a.document.close())):(a=r.open(Et(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}function Gt(e){return new G(function(t){function n(){Ve(2e3).then(function(){if(e&&!e.closed)return n();t()})}return n()})}function Xt(){var e=null;return new G(function(t){"complete"==Gu.document.readyState?t():(e=function(){t()},Ne(window,"load",e))}).s(function(t){throw Ae(window,"load",e),t})}function Kt(){return Ht(void 0)?Xt().then(function(){return new G(function(e,t){var n=Gu.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):Q(Error("Cordova must run in an Android or iOS file scheme."))}function Ht(e){return e=e||nn(),!("file:"!==un()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qt(){var e=Gu.window;try{return!(!e||e==e.top)}catch(e){return!1}}function Yt(){return"undefined"!==typeof Gu.WorkerGlobalScope&&"function"===typeof Gu.importScripts}function Jt(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":Yt()?"Worker":"Browser"}function $t(){var e=Jt();return"ReactNative"===e||"Node"===e}function Zt(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function en(e){var t=e.toLowerCase();return O(t,"opera/")||O(t,"opr/")||O(t,"opios/")?"Opera":O(t,"iemobile")?"IEMobile":O(t,"msie")||O(t,"trident/")?"IE":O(t,"edge/")?"Edge":O(t,"firefox/")?ml:O(t,"silk/")?"Silk":O(t,"blackberry")?"Blackberry":O(t,"webos")?"Webos":!O(t,"safari/")||O(t,"chrome/")||O(t,"crios/")||O(t,"android")?!O(t,"chrome/")&&!O(t,"crios/")||O(t,"edge/")?O(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":yl:"Safari"}function tn(e,t){t=t||[];var n,r=[],i={};for(n in gl)i[gl[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),t=r,t.length||(t=["FirebaseCore-web"]),r=Jt(),"Browser"===r?(i=nn(),r=en(i)):"Worker"===r&&(i=nn(),r=en(i)+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function nn(){return Gu.navigator&&Gu.navigator.userAgent||""}function rn(e,t){e=e.split("."),t=t||Gu;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function on(){try{var e=Gu.localStorage,t=dn();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ft()||!!Gu.indexedDB}catch(e){return Yt()&&!!Gu.indexedDB}return!1}function an(){return(sn()||"chrome-extension:"===un()||Ht())&&!$t()&&on()&&!Yt()}function sn(){return"http:"===un()||"https:"===un()}function un(){return Gu.location&&Gu.location.protocol||null}function cn(e){return e=e||nn(),!qt(e)&&en(e)!=ml}function ln(e){return"undefined"===typeof e?null:Mt(e)}function fn(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function hn(e){if(null!==e)return JSON.parse(e)}function dn(e){return e||Math.floor(1e9*Math.random()).toString()}function pn(e){return e=e||nn(),"Safari"!=en(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function mn(){var e=Gu.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function yn(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=nn(),t=Jt(),this.b=qt(e)||"ReactNative"===t}function gn(){var e=Gu.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function vn(){var e=Gu.document,t=null;return gn()||!e?H():new G(function(n){t=function(){gn()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)}).s(function(n){throw e.removeEventListener("visibilitychange",t,!1),n})}function bn(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function wn(){return!(!rn("fireauth.oauthhelper",Gu)&&!rn("fireauth.iframe",Gu))}function En(){var e=Gu.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function Tn(){var e=Gu.navigator;return e&&e.serviceWorker?H().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):H(null)}function _n(e){bl[e]||(bl[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}function Sn(e,t,n){vl?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function In(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Sn(e,n,t[n])}function kn(e){var t={};return In(t,e),t}function Nn(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function An(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}function xn(e){var t=e;if("object"==typeof e&&null!=e){t="length"in e?[]:{};for(var n in e)Sn(t,n,xn(e[n]))}return t}function Cn(e){var t={},n=e[Tl],r=e[_l];if(!(e=e[Sl])||e!=El&&!n)throw Error("Invalid provider user info!");t[kl]=r||null,t[Il]=n||null,Sn(this,Al,e),Sn(this,Nl,xn(t))}function On(e,t){this.code=xl+e,this.message=t||Cl[e]||""}function Dn(e){var t=e&&e.code;return t?new On(t.substring(xl.length),e.message):null}function Mn(e){var t=e[Rl];if("undefined"===typeof t)throw new On("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new On("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Ol];if(n&&"object"===typeof n){t=n[Ul];var r=n[Ll];if(n=n[Fl],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new On("argument-error",Ll+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new On("argument-error",Fl+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new On("argument-error",Ul+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new On("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new On("argument-error",Ol+" property must be a non null object when specified.");if(this.f=null,(t=e[Pl])&&"object"===typeof t){if("string"===typeof(t=t[jl])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new On("argument-error",jl+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new On("argument-error",Pl+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Ml])&&"boolean"!==typeof t)throw new On("argument-error",Ml+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Dl])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new On("argument-error",Dl+" property must be a non empty string when specified.");this.i=e||null}function Pn(e){var t={};t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i;for(var n in t)null===t[n]&&delete t[n];return t}function Rn(e){return tc(e,function(e){return e=e.toString(16),1<e.length?e:"0"+e}).join("")}function Ln(e){var t="";return Fn(e,function(e){t+=String.fromCharCode(e)}),t}function Fn(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Vl[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}Un();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}function Un(){if(!Bl){Bl={},Vl={};for(var e=0;65>e;e++)Bl[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Vl[Bl[e]]=e,62<=e&&(Vl["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}function jn(e){this.c=e.sub,Yu(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Bn(e){return(e=Vn(e))&&e.sub&&e.iss&&e.aud&&e.exp?new jn(e):null}function Vn(e){if(!e)return null;if(e=e.split("."),3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(Ln(e))}catch(e){}return null}function qn(e){for(var t in zl)if(zl[t].id===e)return e=zl[t],{firebaseEndpoint:e.bb,secureTokenEndpoint:e.jb};return null}function zn(e){for(var t in Xl)if(Xl[t].Oa==e)return Xl[t];return null}function Wn(e){var t={};t["facebook.com"]=Kn,t["google.com"]=Qn,t["github.com"]=Hn,t["twitter.com"]=Yn;var n=e&&e[Hl];try{if(n)return t[n]?new t[n](e):new Xn(e);if("undefined"!==typeof e[Kl])return new Gn(e)}catch(e){}return null}function Gn(e){var t=e[Hl];if(!t&&e[Kl]){var n=Bn(e[Kl]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Sn(this,"providerId",t),Sn(this,"isNewUser",n)}function Xn(e){Gn.call(this,e),e=hn(e.rawUserInfo||"{}"),Sn(this,"profile",xn(e||{}))}function Kn(e){if(Xn.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hn(e){if(Xn.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Sn(this,"username",this.profile&&this.profile.login||null)}function Qn(e){if(Xn.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yn(e){if(Xn.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Sn(this,"username",e.screenName||null)}function Jn(e){this.a=tt(e)}function $n(e){var t=tt(e),n=et(t,"link"),r=et(tt(n),"link");return t=et(t,"deep_link_id"),et(tt(t),"link")||t||r||n||e}function Zn(){}function er(e,t){return e.then(function(e){if(e[df]){var n=Bn(e[df]);if(!n||t!=n.c)throw new On("user-mismatch");return e}throw new On("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==xl+"user-not-found"?new On("user-mismatch"):e})}function tr(e,t){if(!t)throw new On("internal-error","failed to construct a credential");this.a=t,Sn(this,"providerId",e),Sn(this,"signInMethod",e)}function nr(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function rr(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new tr(e.providerId,e.pendingToken)}catch(e){}return null}function ir(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Sn(this,"idToken",t.idToken),t.accessToken&&Sn(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Sn(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new On("internal-error","failed to construct a credential");Sn(this,"accessToken",t.oauthToken),Sn(this,"secret",t.oauthTokenSecret)}Sn(this,"providerId",e),Sn(this,"signInMethod",n)}function or(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:ut(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function ar(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new ir(e.providerId,t,e.signInMethod)}catch(e){}}return null}function sr(e,t){this.Fc=t||[],In(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(zn(e)||{}).Na||null,this.ab=null}function ur(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new On("argument-error",'SAML provider IDs must be prefixed with "saml."');sr.call(this,e,[])}function cr(e){sr.call(this,e,Gl),this.a=[]}function lr(){cr.call(this,"facebook.com")}function fr(e){if(!e)throw new On("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return c(e)&&(t=e.accessToken),(new lr).credential({accessToken:t})}function hr(){cr.call(this,"github.com")}function dr(e){if(!e)throw new On("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return c(e)&&(t=e.accessToken),(new hr).credential({accessToken:t})}function pr(){cr.call(this,"google.com"),this.ua("profile")}function mr(e,t){var n=e;return c(e)&&(n=e.idToken,t=e.accessToken),(new pr).credential({idToken:n,accessToken:t})}function yr(){sr.call(this,"twitter.com",Wl)}function gr(e,t){var n=e;if(c(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new On("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ir("twitter.com",n,"twitter.com")}function vr(e,t,n){this.a=e,this.c=t,Sn(this,"providerId","password"),Sn(this,"signInMethod",n===wr.EMAIL_LINK_SIGN_IN_METHOD?wr.EMAIL_LINK_SIGN_IN_METHOD:wr.EMAIL_PASSWORD_SIGN_IN_METHOD)}function br(e){return e&&e.email&&e.password?new vr(e.email,e.password,e.signInMethod):null}function wr(){In(this,{providerId:"password",isOAuthProvider:!1})}function Er(e,t){if(!(t=Tr(t)))throw new On("argument-error","Invalid email link!");return new vr(e,t,wr.EMAIL_LINK_SIGN_IN_METHOD)}function Tr(e){e=$n(e),e=new Jn(e);var t=et(e.a,"oobCode")||null;return"signIn"===(et(e.a,"mode")||null)&&t?t:null}function _r(e){if(!(e.Ua&&e.Ta||e.Fa&&e.$))throw new On("internal-error");this.a=e,Sn(this,"providerId","phone"),Sn(this,"signInMethod","phone")}function Sr(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return ec(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){e[n]&&(t[n]=e[n])}),new _r(t)}return null}function Ir(e){return e.a.Fa&&e.a.$?{temporaryProof:e.a.Fa,phoneNumber:e.a.$}:{sessionInfo:e.a.Ua,code:e.a.Ta}}function kr(e){try{this.a=e||r.a.auth()}catch(e){throw new On("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}In(this,{providerId:"phone",isOAuthProvider:!1})}function Nr(e,t){if(!e)throw new On("missing-verification-id");if(!t)throw new On("missing-verification-code");return new _r({Ua:e,Ta:t})}function Ar(e){if(e.temporaryProof&&e.phoneNumber)return new _r({Fa:e.temporaryProof,$:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return mr(o,n);case"facebook.com":return fr(n);case"github.com":return dr(n);case"twitter.com":return gr(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new tr(t,a):new ir(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new cr(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function xr(e){if(!e.isOAuthProvider)throw new On("invalid-oauth-provider")}function Cr(e,t,n,r,i,o){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.h=o||null,this.a=i||null,!this.g&&!this.a)throw new On("invalid-auth-event");if(this.g&&this.a)throw new On("invalid-auth-event");if(this.g&&!this.f)throw new On("invalid-auth-event")}function Or(e){return e=e||{},e.type?new Cr(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Dn(e.error),e.postBody):null}function Dr(){this.b=null,this.a=[]}function Mr(e){var t="unauthorized-domain",n=void 0,r=tt(e);e=r.b,r=r.c,"chrome-extension"==r?n=U("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=U("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",On.call(this,t,n)}function Pr(e,t,n){On.call(this,e,n),e=t||{},e.Ab&&Sn(this,"email",e.Ab),e.$&&Sn(this,"phoneNumber",e.$),e.credential&&Sn(this,"credential",e.credential)}function Rr(e){if(e.code){var t=e.code||"";0==t.indexOf(xl)&&(t=t.substring(xl.length));var n={credential:Ar(e)};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.$=e.phoneNumber;else if(!n.credential)return new On(t,e.message||void 0);return new Pr(t,n,e.message)}return null}function Lr(){}function Fr(e){return e.c||(e.c=e.b())}function Ur(){}function jr(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Br(){}function Vr(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=h(this.fc,this),this.a.onerror=h(this.Gb,this),this.a.onprogress=h(this.gc,this),this.a.ontimeout=h(this.kc,this)}function qr(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function zr(e,t,n){this.reset(e,t,n,void 0,void 0)}function Wr(e){this.f=e,this.b=this.c=this.a=null}function Gr(e,t){this.name=e,this.value=t}function Xr(e){return e.c?e.c:e.a?Xr(e.a):(v("Root logger has no level set."),null)}function Kr(e){rf||(rf=new Wr(""),nf[""]=rf,rf.c=ef);var t;if(!(t=nf[e])){t=new Wr(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=Kr(e.substr(0,n)),n.b||(n.b={}),n.b[r]=t,t.a=n,nf[e]=t}return t}function Hr(e,t){e&&e.log(tf,t,void 0)}function Qr(e){this.f=e}function Yr(e){Le.call(this),this.u=e,this.readyState=of,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Kr("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}function Jr(e){e.c.read().then(e.ec.bind(e)).catch(e.La.bind(e))}function $r(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Zr(e)}function Zr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ei(e){Le.call(this),this.headers=new Ge,this.D=e||null,this.c=!1,this.A=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.m=af,this.v=this.O=!1}function ti(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.N=n,e.G=!1,e.c=!0,e.a=e.D?e.D.a():Yl.a(),e.A=Fr(e.D?e.D:Yl),e.a.onreadystatechange=h(e.Jb,e);try{Hr(e.b,hi(e,"Opening Xhr")),e.I=!0,e.a.open(n,String(t),!0),e.I=!1}catch(t){return Hr(e.b,hi(e,"Error opening Xhr: "+t.message)),void ii(e,t)}t=r||"";var o=new Ge(e.headers);i&&We(i,function(e,t){o.set(t,e)}),i=I(o.U()),r=Gu.FormData&&t instanceof Gu.FormData,!k(uf,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{ui(e),0<e.g&&(e.v=ni(e.a),Hr(e.b,hi(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=h(e.Ga,e)):e.u=Be(e.Ga,e.g,e)),Hr(e.b,hi(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){Hr(e.b,hi(e,"Send error: "+t.message)),ii(e,t)}}function ni(e){return Nc&&ye(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}function ri(e){return"content-type"==e.toLowerCase()}function ii(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,oi(e),si(e)}function oi(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function ai(e){if(e.c&&"undefined"!=typeof Wu)if(e.A[1]&&4==ci(e)&&2==li(e))Hr(e.b,hi(e,"Local request error detected and ignored"));else if(e.i&&4==ci(e))Be(e.Jb,0,e);else if(e.dispatchEvent("readystatechange"),4==ci(e)){Hr(e.b,hi(e,"Request complete")),e.c=!1;try{var t=li(e);e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=0===t){var o=String(e.l).match(Qc)[1]||null;if(!o&&Gu.self&&Gu.self.location){var a=Gu.self.location.protocol;o=a.substr(0,a.length-1)}i=!sf.test(o?o.toLowerCase():"")}r=i}if(r)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<ci(e)?e.a.statusText:""}catch(t){Hr(e.b,"Can not get status: "+t.message),s=""}e.h=s+" ["+li(e)+"]",oi(e)}}finally{si(e)}}}function si(e,t){if(e.a){ui(e);var r=e.a,i=e.A[0]?n:null;e.a=null,e.A=null,t||e.dispatchEvent("ready");try{r.onreadystatechange=i}catch(t){(e=e.b)&&e.log($l,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ui(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(Gu.clearTimeout(e.u),e.u=null)}function ci(e){return e.a?e.a.readyState:0}function li(e){try{return 2<ci(e)?e.a.status:-1}catch(e){return-1}}function fi(e){try{return e.a?e.a.responseText:""}catch(t){return Hr(e.b,"Can not get responseText: "+t.message),""}}function hi(e,t){return t+" ["+e.N+" "+e.l+" "+li(e)+"]"}function di(e){var t=Ii;this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.A=this.i=!1,this.h=0,this.b=null,this.o=0}function pi(e,t,n){e.a=!0,e.c=n,e.f=!t,bi(e)}function mi(e){if(e.a){if(!e.l)throw new wi(e);e.l=!1}}function yi(e,t){gi(e,null,t,void 0)}function gi(e,t,n,r){e.g.push([t,n,r]),e.a&&bi(e)}function vi(e){return nc(e.g,function(e){return u(e[1])})}function bi(e){if(e.h&&e.a&&vi(e)){var t=e.h,n=cf[t];n&&(Gu.clearTimeout(n.a),delete cf[t]),e.h=0}e.b&&(e.b.o--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.u,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(m(t)||"function"===typeof Gu.Promise&&t instanceof Gu.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,vi(e)||(n=!0)}}e.c=t,r&&(s=h(e.m,e,!0),r=h(e.m,e,!1),t instanceof di?(gi(t,s,r),t.A=!0):t.then(s,r)),n&&(t=new Ti(t),cf[t.a]=t,e.h=t.a)}function wi(){y.call(this)}function Ei(){y.call(this)}function Ti(e){this.a=Gu.setTimeout(h(this.c,this),0),this.b=e}function _i(e){var t={},n=t.document||document,r=gt(e).toString(),i=document.createElement("SCRIPT"),o={Lb:i,Ga:void 0},a=new di(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){ki(i,!0);var e=new Ni(ff,"Timeout reached for loading script "+r);mi(a),pi(a,!1,e)},u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(ki(i,t.hd||!1,s),mi(a),pi(a,!0,null))},i.onerror=function(){ki(i,!0,s);var e=new Ni(lf,"Error while loading script "+r);mi(a),pi(a,!1,e)},o=t.attributes||{},F(o,{type:"text/javascript",charset:"UTF-8"}),xt(i,o),Nt(i,e),Si(n).appendChild(i),a}function Si(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function Ii(){if(this&&this.Lb){var e=this.Lb;e&&"SCRIPT"==e.tagName&&ki(e,!0,this.Ga)}}function ki(e,t,r){null!=r&&Gu.clearTimeout(r),e.onload=n,e.onerror=n,e.onreadystatechange=n,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}function Ni(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),y.call(this,n),this.code=e}function Ai(e){this.f=e}function xi(e,t,n){if(this.b=e,e=t||{},this.i=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.o=e.secureTokenTimeout||pf,this.f=L(e.secureTokenHeaders||mf),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||yf,this.a=L(e.firebaseHeaders||gf),n&&(this.a["X-Client-Version"]=n,this.f["X-Client-Version"]=n),n="Node"==Jt(),!(n=Gu.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!Yt())throw new On("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,Yt()?this.c=new Qr(self):$t()?this.c=new Ai(n):this.c=new Br}function Ci(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Oi(e,t){t?(e.a["X-Client-Version"]=t,e.f["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.f["X-Client-Version"])}function Di(e,t,n,r,i,o,a){Vt()||Yt()?e=h(e.m,e):(hf||(hf=new G(function(e,t){Mi(e,t)})),e=h(e.l,e)),e(t,n,r,i,o,a)}function Mi(e,t){if(((window.gapi||{}).client||{}).request)e();else{Gu[bf]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};yi(_i(vt(vf,{onload:bf})),function(){t(Error("CORS_UNSUPPORTED"))})}}function Pi(e,t){return new G(function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Di(e,e.i+"?key="+encodeURIComponent(e.b),function(e){e?e.error?r(eo(e)):e.access_token&&e.refresh_token?n(e):r(new On("internal-error")):r(new On("network-request-failed"))},"POST",ut(t).toString(),e.f,e.o.get()):r(new On("internal-error"))})}function Ri(e,t,n,r,i,o){var a=tt(e.g+t);Ze(a,"key",e.b),o&&Ze(a,"cb",Yu().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Ze(a,u,r[u]);return new G(function(t,o){Di(e,a.toString(),function(e){e?e.error?o(eo(e,i||{})):t(e):o(new On("network-request-failed"))},n,s?void 0:Mt(fn(r)),e.a,e.h.get())})}function Li(t){if(t=t.email,!e(t)||!pl.test(t))throw new On("invalid-email")}function Fi(e){"email"in e&&Li(e)}function Ui(e,t){return $i(e,Sf,{identifier:t,continueUri:sn()?Ut():"http://localhost"}).then(function(e){return e.allProviders||[]})}function ji(e,t){return $i(e,Sf,{identifier:t,continueUri:sn()?Ut():"http://localhost"}).then(function(e){return e.signinMethods||[]})}function Bi(e){return $i(e,Mf,{}).then(function(e){return e.authorizedDomains||[]})}function Vi(e){if(!e[df])throw new On("internal-error")}function qi(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new On("internal-error")}else{if(!e.sessionInfo)throw new On("missing-verification-id");if(!e.code)throw new On("missing-verification-code")}}function zi(e,t){return $i(e,Lf,t)}function Wi(e,t,n){return $i(e,kf,{idToken:t,deleteProvider:n})}function Gi(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new On("internal-error")}function Xi(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(e=new at(e.postBody),lt(e,"nonce")&&(t.nonce=e.get("nonce")))),t}function Ki(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Rr(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Rr(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Rr(e)):e.errorMessage&&(t=Zi(e.errorMessage)),t)throw t;if(!e[df])throw new On("internal-error")}function Hi(e,t){return t.returnIdpCredential=!0,$i(e,Bf,t)}function Qi(e,t){return t.returnIdpCredential=!0,$i(e,qf,t)}function Yi(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,$i(e,Vf,t)}function Ji(e){if(!e.oobCode)throw new On("invalid-action-code")}function $i(e,t,n){if(!An(n,t.T))return Q(new On("internal-error"));var r,i=t.Ib||"POST";return H(n).then(t.C).then(function(){return t.R&&(n.returnSecureToken=!0),Ri(e,t.endpoint,i,n,t.Xb,t.vb||!1)}).then(function(e){return r=e,t.Pa?t.Pa(n,r):r}).then(t.J).then(function(){if(!t.da)return r;if(!(t.da in r))throw new On("internal-error");return r[t.da]})}function Zi(e){return eo({error:{errors:[{message:e}],code:400,message:e}})}function eo(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new On(r[n]):null)return n;n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},F(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0;for(var i in r)if(0===n.indexOf(i))return new On(r[i],t);return!t&&e&&(t=ln(e)),new On("internal-error",t)}function to(e){this.b=e,this.a=null,this.gb=no(this)}function no(e){return oo().then(function(){return new G(function(t,n){rn("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:rn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},Yf.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}function ro(e,t){return e.gb.then(function(){return new G(function(n){e.a.send(t.type,t,n,rn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function io(e,t){e.gb.then(function(){e.a.register("authEvent",t,rn("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}function oo(){return Jf||(Jf=new G(function(e,t){function n(){mn(),rn("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){mn(),t(Error("Network Error"))},timeout:Qf.get()})}if(rn("gapi.iframes.Iframe"))e();else if(rn("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();Gu[r]=function(){rn("gapi.load")?n():t(Error("Network Error"))},r=vt(Hf,{onload:r}),H(_i(r)).s(function(){t(Error("Network Error"))})}}).s(function(e){throw Jf=null,e}))}function ao(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=nt(this.i,"/__/auth/iframe"),Ze(this.a,"apiKey",this.g),Ze(this.a,"appName",this.h),this.b=null,this.c=[]}function so(e,t,n,r,i){this.m=e,this.l=t,this.c=n,this.o=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function uo(e){try{return r.a.app(e).auth().ya()}catch(e){return[]}}function co(e,t,n,r,i){this.l=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.u=this.v=null,this.g=[],this.o=this.a=null}function lo(e){var t=Ut();return Bi(e).then(function(e){e:{var n=tt(t),r=n.c;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=tt(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:dl.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Mr(Ut())})}function fo(e){return e.o?e.o:(e.o=Xt().then(function(){if(!e.u){var t=e.c,n=e.h,r=uo(e.b),i=new ao(e.l,e.f,e.b);i.f=t,i.b=n,i.c=C(r||[]),e.u=i.toString()}e.i=new to(e.u),mo(e)}),e.o)}function ho(e){return e.m||(e.v=e.c?tn(e.c,uo(e.b)):null,e.m=new xi(e.f,qn(e.h),e.v)),e.m}function po(e,t,n,r,i,o,a,s,u,c){return e=new so(e,t,n,r,i),e.i=o,e.g=a,e.h=s,e.b=L(u||null),e.f=c,e.toString()}function mo(e){if(!e.i)throw Error("IfcHandler must be initialized!");io(e.i,function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Or(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return n={},n.status=r?"ACK":"ERROR",H(n)}return n.status="ERROR",H(n)})}function yo(e){var t={type:"webStorageSupport"};return fo(e).then(function(){return ro(e.i,t)}).then(function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})}function go(e){if(this.a=e||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new On("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vo(e){this.b=e,this.a={},this.c=h(this.f,this)}function bo(){var e=Yt()?self:null;if(ec($f,function(n){n.b==e&&(t=n)}),!t){var t=new vo(e);$f.push(t)}return t}function wo(e){this.a=e}function Eo(e){this.c=e,this.b=!1,this.a=[]}function To(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Q(Error("connection_unavailable"));var l=r?800:50,f="undefined"!==typeof MessageChannel?new MessageChannel:null;return new G(function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:f,onMessage:o},e.a.push(c),f.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))}).then(function(t){return _o(e,c),t}).s(function(t){throw _o(e,c),t})}function _o(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),A(e.a,function(e){return e==t})}}function So(){if(!Ao())throw new On("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=Gu.indexedDB,this.type="indexedDB",this.g=this.o=this.f=this.i=null,this.u=!1,this.h=null;var e=this;Yt()&&self?(this.o=bo(),this.o.subscribe("keyChanged",function(t,n){return Mo(e).then(function(t){return 0<t.length&&ec(e.a,function(e){e(t)}),{keyProcessed:k(t,n.key)}})}),this.o.subscribe("ping",function(){return H(["keyChanged"])})):Tn().then(function(t){(e.h=t)&&(e.g=new Eo(new wo(t)),To(e.g,"ping",null,!0).then(function(t){t[0].fulfilled&&k(t[0].value,"keyChanged")&&(e.u=!0)}).s(function(){}))})}function Io(e){return new G(function(t,n){var r=e.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}})}function ko(e){return new G(function(t,n){var r=e.l.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?t(r):Io(e).then(function(){return ko(e)}).then(function(e){t(e)}).s(function(e){n(e)})}})}function No(e){return e.m||(e.m=ko(e)),e.m}function Ao(){try{return!!Gu.indexedDB}catch(e){return!1}}function xo(e){return e.objectStore("firebaseLocalStorage")}function Co(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Oo(e){return new G(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function Do(e,t){return e.g&&e.h&&En()===e.h?To(e.g,"keyChanged",{key:t},e.u).then(function(){}).s(function(){}):H()}function Mo(e){return No(e).then(function(e){var t=xo(Co(e,!1));return t.getAll?Oo(t.getAll()):new G(function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}})}).then(function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=Bt(e.c,n),e.c=n}return r})}function Po(e){function t(){e.f=setTimeout(function(){e.i=Mo(e).then(function(t){0<t.length&&ec(e.a,function(e){e(t)})}).then(function(){t()}).s(function(e){"STOP_EVENT"!=e.message&&t()})},800)}Ro(e),t()}function Ro(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Lo(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=H().then(function(){if(Ao()){var e=dn(),r="__sak"+e;return Zf||(Zf=new So),n=Zf,n.set(r,e).then(function(){return n.get(r)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return n.P(r)}).then(function(){return n}).s(function(){return t.c})}return t.c}).then(function(e){return t.type=e.type,e.Y(function(e){ec(t.a,function(t){t(e)})}),e})}function Fo(){this.a={},this.type="inMemory"}function Uo(){if(!Bo()){if("Node"==Jt())throw new On("internal-error","The LocalStorage compatibility library was not found.");throw new On("web-storage-unsupported")}this.a=jo()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function jo(){try{var e=Gu.localStorage,t=dn();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Bo(){var e="Node"==Jt();if(!(e=jo()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function Vo(){this.type="nullStorage"}function qo(){if(!Wo()){if("Node"==Jt())throw new On("internal-error","The SessionStorage compatibility library was not found.");throw new On("web-storage-unsupported")}this.a=zo()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function zo(){try{var e=Gu.sessionStorage,t=dn();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Wo(){var e="Node"==Jt();if(!(e=zo()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}function Go(){var e={};e.Browser=nh,e.Node=rh,e.ReactNative=ih,e.Worker=oh,this.a=e[Jt()]}function Xo(e){var t=new On("invalid-persistence-type"),n=new On("unsupported-persistence-type");e:{for(r in ah)if(ah[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Jt()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!on()&&"none"!==e)throw n}}function Ko(){var e=!(pn(nn())||!Qt()),t=cn(),n=on();this.m=e,this.h=t,this.o=n,this.a={},eh||(eh=new Go),e=eh;try{this.g=!Ft()&&wn()||!Gu.indexedDB?new e.a.B:new Lo(Yt()?new Fo:new e.a.B)}catch(e){this.g=new Fo,this.h=!0}try{this.i=new e.a.Sa}catch(e){this.i=new Fo}this.l=new Fo,this.f=h(this.Pb,this),this.b={}}function Ho(){return th||(th=new Ko),th}function Qo(e,t){switch(t){case"session":return e.i;case"none":return e.l;default:return e.g}}function Yo(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Jo(e,t,n){var r=Yo(t,n),i=Qo(e,t.B);return e.get(t,n).then(function(o){var a=null;try{a=hn(Gu.localStorage.getItem(r))}catch(e){}if(a&&!o)return Gu.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&Gu.localStorage.removeItem(r)})}function $o(e,t,n){return n=Yo(t,n),"local"==t.B&&(e.b[n]=null),Qo(e,t.B).P(n)}function Zo(e){ea(e),e.c=setInterval(function(){for(var t in e.a){var n=Gu.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new ve({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Pb(n))}},1e3)}function ea(e){e.c&&(clearInterval(e.c),e.c=null)}function ta(e){this.a=e,this.b=Ho()}function na(e){return e.b.get(uh,e.a).then(function(e){return Or(e)})}function ra(){this.a=Ho()}function ia(){this.b=-1}function oa(e,t){this.b=ch,this.f=Gu.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.o=Gu.Int32Array?new Int32Array(64):Array(64),void 0!==sh||(sh=Gu.Int32Array?new Int32Array(ph):ph),this.reset()}function aa(e){for(var t=e.f,n=e.o,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],f=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var h=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&f,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|sh[t])|0,a=o+(a+(0|n[t])|0)|0,o=f,f=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+h|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+f|0,e.a[7]=e.a[7]+o|0}function sa(t,n,r){void 0===r&&(r=n.length);var i=0,o=t.c;if(e(n))for(;i<r;)t.f[o++]=n.charCodeAt(i++),o==t.b&&(aa(t),o=0);else{if(!s(n))throw Error("message must be string or array");for(;i<r;){var a=n[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");t.f[o++]=a,o==t.b&&(aa(t),o=0)}}t.c=o,t.g+=r}function ua(){oa.call(this,8,mh)}function ca(e,t,n,r,i){this.l=e,this.i=t,this.o=n,this.m=r||null,this.u=i||null,this.h=t+":"+n,this.v=new ra,this.g=new ta(this.h),this.f=null,this.b=[],this.a=this.c=null}function la(e){return new On("invalid-cordova-configuration",e)}function fa(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function ha(e){var t=new ua;sa(t,e),e=[];var n=8*t.g;56>t.c?sa(t,dh,56-t.c):sa(t,dh,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(aa(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return Rn(e)}function da(e,t,n,r){var i=fa(),o=new Cr(t,r,null,i,new On("no-auth-event")),a=rn("BuildInfo.packageName",Gu);if("string"!==typeof a)throw new On("invalid-cordova-configuration");var s=rn("BuildInfo.displayName",Gu),u={};if(nn().toLowerCase().match(/iphone|ipad|ipod/))u.ibi=a;else{if(!nn().toLowerCase().match(/android/))return Q(new On("operation-not-supported-in-this-environment"));u.apn=a}s&&(u.appDisplayName=s),i=ha(i),u.sessionId=i;var c=po(e.l,e.i,e.o,t,n,null,r,e.m,u,e.u);return e.ga().then(function(){var t=e.h;return e.v.a.set(uh,o.w(),t)}).then(function(){var t=rn("cordova.plugins.browsertab.isAvailable",Gu);if("function"!==typeof t)throw new On("invalid-cordova-configuration");var n=null;t(function(t){if(t){if("function"!==typeof(n=rn("cordova.plugins.browsertab.openUrl",Gu)))throw new On("invalid-cordova-configuration");n(c)}else{if("function"!==typeof(n=rn("cordova.InAppBrowser.open",Gu)))throw new On("invalid-cordova-configuration");t=nn(),e.a=n(c,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function pa(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function ma(e){return e.f||(e.f=e.ga().then(function(){return new G(function(t){function n(r){return t(r),e.Ka(n),!1}e.wa(n),ga(e)})})),e.f}function ya(e){var t=null;return na(e.g).then(function(n){return t=n,n=e.g,$o(n.b,uh,n.a)}).then(function(){return t})}function ga(e){function t(t){r=!0,i&&i.cancel(),ya(e).then(function(r){var i=n;if(r&&t&&t.url){var o=null;i=$n(t.url),-1!=i.indexOf("/__/auth/callback")&&(o=tt(i),o=hn(et(o,"firebaseError")||null),o=(o="object"===typeof o?Dn(o):null)?new Cr(r.c,r.b,null,null,o):new Cr(r.c,r.b,i,r.f)),i=o||n}pa(e,i)})}var n=new Cr("unknown",null,null,null,new On("no-auth-event")),r=!1,i=Ve(500).then(function(){return ya(e).then(function(){r||pa(e,n)})}),o=Gu.handleOpenURL;Gu.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(rn("BuildInfo.packageName",Gu).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(e){console.error(e)}},Ql||(Ql=new Dr),Ql.subscribe(t)}function va(e){this.a=e,this.b=Ho()}function ba(e){return e.b.set(yh,"pending",e.a)}function wa(e){return $o(e.b,yh,e.a)}function Ea(e){return e.b.get(yh,e.a).then(function(e){return"pending"==e})}function Ta(e,t,n){this.i={},this.u=0,this.A=e,this.l=t,this.m=n,this.h=[],this.f=!1,this.o=h(this.cb,this),this.b=new xa,this.v=new La,this.g=new va(this.l+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.v,this.c.linkViaPopup=this.v,this.c.reauthViaPopup=this.v,this.a=_a(this.A,this.l,this.m,ql)}function _a(e,t,n,i){var o=r.a.SDK_VERSION||null;return Ht()?new ca(e,t,n,o,i):new co(e,t,n,o,i)}function Sa(e){e.f||(e.f=!0,e.a.wa(e.o));var t=e.a;return e.a.ga().s(function(n){throw e.a==t&&e.reset(),n})}function Ia(e){e.a.Mb()&&Sa(e).s(function(t){var n=new Cr("unknown",null,null,null,new On("operation-not-supported-in-this-environment"));Na(t)&&e.cb(n)}),e.a.Hb()||Ca(e.b)}function ka(e,t,n,r,i,o){return e.a.Db(t,n,r,function(){e.f||(e.f=!0,e.a.wa(e.o))},function(){e.reset()},i,o)}function Na(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Aa(e,t,n){var r=t+":"+n;return bh[r]||(bh[r]=new Ta(e,t,n)),bh[r]}function xa(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ca(e){e.g||(e.g=!0,Pa(e,!1,null,null))}function Oa(e,t,n){n=n.xa(t.c,t.b);var r=t.g,i=t.f,o=t.h,a=!!t.c.match(/Redirect$/);n(r,i,o).then(function(t){Pa(e,a,t,null)}).s(function(t){Pa(e,a,null,t)})}function Da(e,t){if(e.b=function(){return Q(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function Ma(e,t){if(e.b=function(){return H(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Pa(e,t,n,r){t?r?Da(e,r):Ma(e,n):Ma(e,{user:null}),e.f=[],e.c=[]}function Ra(e){var t=new On("timeout");e.a&&e.a.cancel(),e.a=Ve(vh.get()).then(function(){e.b||(e.g=!0,Pa(e,!0,null,t))})}function La(){}function Fa(e,t){var n=e.b,r=e.c;t.xa(r,n)(e.g,e.f,e.h).then(function(e){t.ha(r,e,null,n)}).s(function(e){t.ha(r,null,e,n)})}function Ua(){this.tb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.tb},set:function(e){this.tb=e},enumerable:!1})}function ja(e,t){this.a=t,Sn(this,"verificationId",e)}function Ba(e,t,n,r){return new kr(e).Va(t,n).then(function(e){return new ja(e,r)})}function Va(e){var t=Vn(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new On("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");In(this,{token:e,expirationTime:bn(1e3*t.exp),authTime:bn(1e3*t.auth_time),issuedAtTime:bn(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function qa(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function za(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function Wa(e,t){e.stop(),e.b=Ve(za(e,t)).then(function(){return vn()}).then(function(){return e.h()}).then(function(){Wa(e,!0)}).s(function(t){e.i(t)&&Wa(e,!1)})}function Ga(e){this.f=e,this.b=this.a=null,this.c=0}function Xa(e,t){var n=t[df],r=t.refreshToken;t=Ha(t.expiresIn),e.b=n,e.c=t,e.a=r}function Ka(e,t){e.b=t.b,e.a=t.a,e.c=t.c}function Ha(e){return Yu()+1e3*parseInt(e,10)}function Qa(e,t){return Pi(e.f,t).then(function(t){return e.b=t.access_token,e.c=Ha(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}function Ya(e,t){this.a=e||null,this.b=t||null,In(this,{lastSignInTime:bn(t||null),creationTime:bn(e||null)})}function Ja(e){return new Ya(e.a,e.b)}function $a(e,t,n,r,i,o){In(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Za(e,t){ge.call(this,e);for(var n in t)this[n]=t[n]}function es(e,t,n){this.G=[],this.l=e.apiKey,this.m=e.appName,this.u=e.authDomain||null,e=r.a.SDK_VERSION?tn(r.a.SDK_VERSION):null,this.b=new xi(this.l,qn(ql),e),this.h=new Ga(this.b),us(this,t[df]),Xa(this.h,t),Sn(this,"refreshToken",this.h.a),hs(this,n||{}),Le.call(this),this.I=!1,this.u&&an()&&(this.a=Aa(this.u,this.l,this.m)),this.N=[],this.i=null,this.A=os(this),this.V=h(this.Ha,this);var i=this;this.ka=null,this.ta=function(e){i.pa(e.g)},this.X=null,this.O=[],this.sa=function(e){ns(i,e.c)},this.W=null}function ts(e,t){e.X&&Ae(e.X,"languageCodeChanged",e.ta),(e.X=t)&&Se(t,"languageCodeChanged",e.ta)}function ns(e,t){e.O=t,Oi(e.b,r.a.SDK_VERSION?tn(r.a.SDK_VERSION,e.O):null)}function rs(e,t){e.W&&Ae(e.W,"frameworkChanged",e.sa),(e.W=t)&&Se(t,"frameworkChanged",e.sa)}function is(e){try{return r.a.app(e.m).auth()}catch(t){throw new On("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function os(e){return new qa(function(){return e.F(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var t=e.h.c-Yu()-3e5;return 0<t?t:0})}function as(e){e.D||e.A.b||(e.A.start(),Ae(e,"tokenChanged",e.V),Se(e,"tokenChanged",e.V))}function ss(e){Ae(e,"tokenChanged",e.V),e.A.stop()}function us(e,t){e.ra=t,Sn(e,"_lat",t)}function cs(e,t){A(e.N,function(e){return e==t})}function ls(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return $(t).then(function(){return e})}function fs(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function hs(e,t){In(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new Ya(t.createdAt,t.lastLoginAt),providerData:[]})}function ds(){}function ps(e){return H().then(function(){if(e.D)throw new On("app-deleted")})}function ms(e){return tc(e.providerData,function(e){return e.providerId})}function ys(e,t){t&&(gs(e,t.providerId),e.providerData.push(t))}function gs(e,t){A(e.providerData,function(e){return e.providerId==t})}function vs(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Sn(e,t,n)}function bs(e,t){e!=t&&(In(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),t.metadata?Sn(e,"metadata",Ja(t.metadata)):Sn(e,"metadata",new Ya),ec(t.providerData,function(t){ys(e,t)}),Ka(e.h,t.h),Sn(e,"refreshToken",e.h.a))}function ws(e){return e.F().then(function(t){var n=e.isAnonymous;return Ts(e,t).then(function(){return n||vs(e,"isAnonymous",!1),t})})}function Es(e,t){t[df]&&e.ra!=t[df]&&(Xa(e.h,t),e.dispatchEvent(new Za("tokenChanged")),us(e,t[df]),vs(e,"refreshToken",e.h.a))}function Ts(e,t){return $i(e.b,xf,{idToken:t}).then(h(e.zc,e))}function _s(e){return(e=e.providerUserInfo)&&e.length?tc(e,function(e){return new $a(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}function Ss(e,t){return ws(e).then(function(){if(k(ms(e),t))return ls(e).then(function(){throw new On("provider-already-linked")})})}function Is(e,t,n){var r=Ar(t);return t=Wn(t),kn({user:e,credential:r,additionalUserInfo:t,operationType:n})}function ks(e,t){return Es(e,t),e.reload().then(function(){return e})}function Ns(e,t,n,i,o){if(!an())return Q(new On("operation-not-supported-in-this-environment"));if(e.i&&!o)return Q(e.i);var a=zn(n.providerId),s=dn(e.uid+":::"),u=null;(!cn()||Qt())&&e.u&&n.isOAuthProvider&&(u=po(e.u,e.l,e.m,t,n,null,s,r.a.SDK_VERSION||null));var c=Wt(u,a&&a.Ba,a&&a.Aa);return i=i().then(function(){if(xs(e),!o)return e.F().then(function(){})}).then(function(){return ka(e.a,c,t,n,s,!!u)}).then(function(){return new G(function(n,r){e.ha(t,null,new On("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=s,e.c=e.a.Ea(e,t,c,s)})}).then(function(e){return c&&zt(c),e?kn(e):null}).s(function(e){throw c&&zt(c),e}),Cs(e,i,o)}function As(e,t,n,r,i){if(!an())return Q(new On("operation-not-supported-in-this-environment"));if(e.i&&!i)return Q(e.i);var o=null,a=dn(e.uid+":::");return r=r().then(function(){if(xs(e),!i)return e.F().then(function(){})}).then(function(){return e.aa=a,ls(e)}).then(function(t){return e.ba&&(t=e.ba,t=t.b.set(wh,e.w(),t.a)),t}).then(function(){return e.a.Ca(t,n,a)}).s(function(t){if(o=t,e.ba)return Ls(e.ba);throw o}).then(function(){if(o)throw o}),Cs(e,r,i)}function xs(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new On("internal-error");throw new On("auth-domain-config-required")}}function Cs(e,t,n){var r=Os(e,t,n);return e.G.push(r),r.ia(function(){N(e.G,r)}),r}function Os(e,t,n){return e.i&&!n?(t.cancel(),Q(e.i)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new Za("userInvalidated")),e.i=t),t})}function Ds(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[df]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-Yu())/1e3;var r=new es(t,n,e);return e.providerData&&ec(e.providerData,function(e){e&&ys(r,kn(e))}),e.redirectEventId&&(r.aa=e.redirectEventId),r}function Ms(e,t,n,r){var i=new es(e,t);return n&&(i.ba=n),r&&ns(i,r),i.reload().then(function(){return i})}function Ps(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.u,appName:e.m};var i=e.h,o={};return o[df]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-Yu())/1e3,t=new es(t,o),n&&(t.ba=n),r&&ns(t,r),bs(t,e),t}function Rs(e){this.a=e,this.b=Ho()}function Ls(e){return $o(e.b,wh,e.a)}function Fs(e,t){return e.b.get(wh,e.a).then(function(e){return e&&t&&(e.authDomain=t),Ds(e||{})})}function Us(e){this.a=e,this.b=Ho(),this.c=null,this.f=Bs(this),this.b.addListener(Vs("local"),this.a,h(this.g,this))}function js(e,t){var n,r=[];for(n in ah)ah[n]!==t&&r.push($o(e.b,Vs(ah[n]),e.a));return r.push($o(e.b,Eh,e.a)),J(r)}function Bs(e){var t=Vs("local"),n=Vs("session"),r=Vs("none");return Jo(e.b,t,e.a).then(function(){return e.b.get(n,e.a)}).then(function(i){return i?n:e.b.get(r,e.a).then(function(n){return n?r:e.b.get(t,e.a).then(function(n){return n?t:e.b.get(Eh,e.a).then(function(e){return e?Vs(e):t})})})}).then(function(t){return e.c=t,js(e,t.B)}).s(function(){e.c||(e.c=t)})}function Vs(e){return{name:"authUser",B:e}}function qs(e){return Xs(e,function(){return e.b.set(Eh,e.c.B,e.a)})}function zs(e,t){return Xs(e,function(){return e.b.set(e.c,t.w(),e.a)})}function Ws(e){return Xs(e,function(){return $o(e.b,e.c,e.a)})}function Gs(e,t){return Xs(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),Ds(e||{})})})}function Xs(e,t){return e.f=e.f.then(t,t),e.f}function Ks(e){if(this.l=!1,Sn(this,"settings",new Ua),Sn(this,"app",e),!ou(this).options||!ou(this).options.apiKey)throw new On("invalid-api-key");e=r.a.SDK_VERSION?tn(r.a.SDK_VERSION):null,this.b=new xi(ou(this).options&&ou(this).options.apiKey,qn(ql),e),this.N=[],this.m=[],this.I=[],this.Tb=r.a.INTERNAL.createSubscribe(h(this.oc,this)),this.O=void 0,this.Ub=r.a.INTERNAL.createSubscribe(h(this.pc,this)),eu(this,null),this.h=new Us(ou(this).options.apiKey+":"+ou(this).name),this.A=new Rs(ou(this).options.apiKey+":"+ou(this).name),this.V=lu(this,nu(this)),this.i=lu(this,ru(this)),this.X=!1,this.ka=h(this.Oc,this),this.Ha=h(this.Z,this),this.ra=h(this.bc,this),this.sa=h(this.mc,this),this.ta=h(this.nc,this),$s(this),this.INTERNAL={},this.INTERNAL.delete=h(this.delete,this),this.INTERNAL.logFramework=h(this.vc,this),this.u=0,Le.call(this),Ys(this),this.G=[]}function Hs(e){ge.call(this,"languageCodeChanged"),this.g=e}function Qs(e){ge.call(this,"frameworkChanged"),this.c=e}function Ys(e){Object.defineProperty(e,"lc",{get:function(){return this.ea()},set:function(e){this.pa(e)},enumerable:!1}),e.W=null}function Js(e){return e.Sb||Q(new On("auth-domain-config-required"))}function $s(e){var t=ou(e).options.authDomain,n=ou(e).options.apiKey;t&&an()&&(e.Sb=e.V.then(function(){if(!e.l){if(e.a=Aa(t,n,ou(e).name),e.a.subscribe(e),au(e)&&fs(au(e)),e.D){fs(e.D);var r=e.D;r.pa(e.ea()),ts(r,e),r=e.D,ns(r,e.G),rs(r,e),e.D=null}return e.a}}))}function Zs(e,t){var n={};return n.apiKey=ou(e).options.apiKey,n.authDomain=ou(e).options.authDomain,n.appName=ou(e).name,e.V.then(function(){return Ms(n,t,e.A,e.ya())}).then(function(t){return au(e)&&t.uid==au(e).uid?(bs(au(e),t),e.Z(t)):(eu(e,t),fs(t),e.Z(t))}).then(function(){uu(e)})}function eu(e,t){au(e)&&(cs(au(e),e.Ha),Ae(au(e),"tokenChanged",e.ra),Ae(au(e),"userDeleted",e.sa),Ae(au(e),"userInvalidated",e.ta),ss(au(e))),t&&(t.N.push(e.Ha),Se(t,"tokenChanged",e.ra),Se(t,"userDeleted",e.sa),Se(t,"userInvalidated",e.ta),0<e.u&&as(t)),Sn(e,"currentUser",t),t&&(t.pa(e.ea()),ts(t,e),ns(t,e.G),rs(t,e))}function tu(e){var t=Fs(e.A,ou(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ba=e.A),Ls(e.A)});return lu(e,t)}function nu(e){var t=ou(e).options.authDomain,n=tu(e).then(function(){return Gs(e.h,t)}).then(function(t){return t?(t.ba=e.A,e.D&&(e.D.aa||null)==(t.aa||null)?t:t.reload().then(function(){return zs(e.h,t).then(function(){return t})}).s(function(n){return"auth/network-request-failed"==n.code?t:Ws(e.h)})):null}).then(function(t){eu(e,t||null)});return lu(e,n)}function ru(e){return e.V.then(function(){return e.fa()}).s(function(){}).then(function(){if(!e.l)return e.ka()}).s(function(){}).then(function(){if(!e.l){e.X=!0;var t=e.h;t.b.addListener(Vs("local"),t.a,e.ka)}})}function iu(e,t){var n=null,r=null;return lu(e,t.then(function(t){return n=Ar(t),r=Wn(t),Zs(e,t)}).then(function(){return kn({user:au(e),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ou(e){return e.app}function au(e){return e.currentUser}function su(e){return au(e)&&au(e)._lat||null}function uu(e){if(e.X){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](su(e));if(e.O!==e.getUid()&&e.I.length)for(e.O=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](su(e))}}function cu(e,t){e.I.push(t),lu(e,e.i.then(function(){!e.l&&k(e.I,t)&&e.O!==e.getUid()&&(e.O=e.getUid(),t(su(e)))}))}function lu(e,t){return e.N.push(t),t.ia(function(){N(e.N,t)}),t}function fu(){}function hu(){this.a={},this.b=1e12}function du(e,t){return(t=pu(t))?e.a[t]||null:null}function pu(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function mu(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=At(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Se(this.f,"click",this.i)}function yu(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function gu(){}function vu(){this.b=Gu.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}function bu(e,t,n,r,i,o,a){if(Sn(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=t,this.g=null,a?(_h||(_h=new gu),a=_h):(kh||(kh=new vu),a=kh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xh])throw new On("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ch],!Gu.document)throw new On("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!At(t)||!this.i&&At(t).hasChildNodes())throw new On("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new xi(e,o||null,i||null),this.v=r||function(){return null};var s=this;this.o=[];var u=this.a[Nh];this.a[Nh]=function(e){if(wu(s,e),"function"===typeof u)u(e);else if("string"===typeof u){var t=rn(u,Gu);"function"===typeof t&&t(e)}};var c=this.a[Ah];this.a[Ah]=function(){if(wu(s,null),"function"===typeof c)c();else if("string"===typeof c){var e=rn(c,Gu);"function"===typeof e&&e()}}}function wu(e,t){for(var n=0;n<e.o.length;n++)try{e.o[n](t)}catch(e){}}function Eu(e,t){A(e.o,function(e){return e==t})}function Tu(e,t){return e.h.push(t),t.ia(function(){N(e.h,t)}),t}function _u(e){if(e.D)throw new On("internal-error","RecaptchaVerifier instance has been destroyed.")}function Su(e,t,n){var i=!1;try{this.b=n||r.a.app()}catch(e){throw new On("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new On("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().ya()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}a=r.a.SDK_VERSION?tn(r.a.SDK_VERSION,a):null,bu.call(this,n,e,t,function(){try{var e=o.b.auth().ea()}catch(t){e=null}return e},a,qn(ql),i)}function Iu(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new On("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Oh.length)throw new On("internal-error","Argument validator received an unsupported number of arguments.");n=Oh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new On("argument-error",e+" failed: "+r)}function ku(t,n){return{name:t||"",K:"a valid string",optional:!!n,M:e}}function Nu(e,n){return{name:e||"",K:"a boolean",optional:!!n,M:t}}function Au(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:c}}function xu(e,t){return{name:e||"",K:"a function",optional:!!t,M:u}}function Cu(e,t){return{name:e||"",K:"null",optional:!!t,M:o}}function Ou(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function Du(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof Ks)}}}function Mu(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof r.a.app.App)}}}function Pu(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.la||!n)}}}function Ru(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function Lu(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!!(t&&e(t.type)&&u(t.verify))}}}function Fu(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function Uu(e,t){for(var n in t){var r=t[n].name;e[r]=Vu(r,e[n],t[n].j)}}function ju(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:d(function(e){return this[e]},n),set:d(function(e,t,n,r){Iu(e,[n],[r],!0),this[t]=r},r,n,t[n].ub),enumerable:!0})}}function Bu(e,t,n,r){e[t]=Vu(t,n,r)}function Vu(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Iu(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=qu(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}function qu(e){return e=e.split("."),e[e.length-1]}var zu,Wu=Wu||{},Gu=this,Xu=/^[\w+\/_-]+[=]{0,2}$/,Ku=null,Hu="closure_uid_"+(1e9*Math.random()>>>0),Qu=0,Yu=Date.now||function(){return+new Date};p(y,Error),y.prototype.name="CustomError",p(g,y),g.prototype.name="AssertionError",b.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Ju=new b(function(){return new _},function(e){e.reset()});E.prototype.add=function(e,t){var n=Ju.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},_.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},_.prototype.reset=function(){this.next=this.b=this.a=null};var $u,Zu=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(t,n){if(e(t))return e(n)&&1==n.length?t.indexOf(n,0):-1;for(var r=0;r<t.length;r++)if(r in t&&t[r]===n)return r;return-1},ec=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(t,n,r){for(var i=t.length,o=e(t)?t.split(""):t,a=0;a<i;a++)a in o&&n.call(r,o[a],a,t)},tc=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(t,n){for(var r=t.length,i=Array(r),o=e(t)?t.split(""):t,a=0;a<r;a++)a in o&&(i[a]=n.call(void 0,o[a],a,t));return i},nc=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(t,n){for(var r=t.length,i=e(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&n.call(void 0,i[o],o,t))return!0;return!1},rc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ic=/&/g,oc=/</g,ac=/>/g,sc=/"/g,uc=/'/g,cc=/\x00/g,lc=/[\x00&<>"']/;e:{var fc=Gu.navigator;if(fc){var hc=fc.userAgent;if(hc){$u=hc;break e}}$u=""}var dc,pc,mc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),yc=!1,gc=new E,vc=0,bc=2,wc=3;X.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ec=new b(function(){return new X},function(e){e.reset()});G.prototype.then=function(e,t,n){return te(this,u(e)?e:null,u(t)?t:null,n)},G.prototype.$goog_Thenable=!0,zu=G.prototype,zu.ia=function(e,t){return e=K(e,e,t),e.c=!0,ee(this,e),this},zu.s=function(e,t){return te(this,null,e,t)},zu.cancel=function(e){this.a==vc&&q(function(){Z(this,new le(e))},this)},zu.Pc=function(e){this.a=vc,ne(this,bc,e)},zu.Qc=function(e){this.a=vc,ne(this,wc,e)},zu.Yb=function(){for(var e;e=ae(this);)se(this,e,this.a,this.i);this.h=!1};var Tc=B;p(le,y),le.prototype.name="cancel";var _c=0,Sc={};fe.prototype.qa=!1,fe.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},de[" "]=n;var Ic,kc=M("Opera"),Nc=M("Trident")||M("MSIE"),Ac=M("Edge"),xc=Ac||Nc,Cc=M("Gecko")&&!(O($u.toLowerCase(),"webkit")&&!M("Edge"))&&!(M("Trident")||M("MSIE"))&&!M("Edge"),Oc=O($u.toLowerCase(),"webkit")&&!M("Edge");e:{var Dc="",Mc=function(){var e=$u;return Cc?/rv:([^\);]+)(\)|;)/.exec(e):Ac?/Edge\/([\d\.]+)/.exec(e):Nc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Oc?/WebKit\/(\S+)/.exec(e):kc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Mc&&(Dc=Mc?Mc[1]:""),Nc){var Pc=me();if(null!=Pc&&Pc>parseFloat(Dc)){Ic=String(Pc);break e}}Ic=Dc}var Rc,Lc={},Fc=Gu.document;Rc=Fc&&Nc?me()||("CSS1Compat"==Fc.compatMode?parseInt(Ic,10):5):void 0;var Uc=Object.freeze||function(e){return e},jc=!Nc||9<=Number(Rc),Bc=Nc&&!ye("9"),Vc=function(){if(!Gu.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gu.addEventListener("test",n,t),Gu.removeEventListener("test",n,t)}catch(e){}return e}();ge.prototype.preventDefault=function(){this.Kb=!1},p(ve,ge);var qc=Uc({2:"touch",3:"pen",4:"mouse"});ve.prototype.preventDefault=function(){ve.pb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Bc)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},ve.prototype.f=function(){return this.a};var zc="closure_listenable_"+(1e6*Math.random()|0),Wc=0;Ee.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=_e(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):(t=new be(t,this.src,o,!!r,i),t.Ia=n,e.push(t)),t};var Gc="closure_lm_"+(1e6*Math.random()|0),Xc={},Kc=0,Hc="__closure_events_fn_"+(1e9*Math.random()>>>0);p(Le,fe),Le.prototype[zc]=!0,Le.prototype.addEventListener=function(e,t,n,r){Se(this,e,t,n,r)},Le.prototype.removeEventListener=function(e,t,n,r){Ae(this,e,t,n,r)},Le.prototype.dispatchEvent=function(t){var n,r=this.Wa;if(r)for(n=[];r;r=r.Wa)n.push(r);r=this.Rb;var i=t.type||t;if(e(t))t=new ge(t,r);else if(t instanceof ge)t.target=t.target||r;else{var o=t;t=new ge(i,r),F(t,o)}if(o=!0,n)for(var a=n.length-1;0<=a;a--){var s=t.b=n[a];o=je(s,i,!0,t)&&o}if(s=t.b=r,o=je(s,i,!0,t)&&o,o=je(s,i,!1,t)&&o,n)for(a=0;a<n.length;a++)s=t.b=n[a],o=je(s,i,!1,t)&&o;return o},Le.prototype.va=function(){if(Le.pb.va.call(this),this.o){var e,t=this.o,n=0;for(e in t.a){for(var r=t.a[e],i=0;i<r.length;i++)++n,we(r[i]);delete t.a[e],t.b--}}this.Wa=null},zu=Ge.prototype,zu.S=function(){Xe(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},zu.U=function(){return Xe(this),this.a.concat()},zu.clear=function(){this.b={},this.c=this.a.length=0},zu.get=function(e,t){return Ke(this.b,e)?this.b[e]:t},zu.set=function(e,t){Ke(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},zu.forEach=function(e,t){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Qc=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Qe.prototype.toString=function(){var e=[],t=this.c;t&&e.push(it(t,Yc,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(it(t,Yc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(it(n,"/"==n.charAt(0)?$c:Jc,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.h)&&e.push("#",it(n,el)),e.join("")};var Yc=/[#\/\?@]/g,Jc=/[#\?:]/g,$c=/[#\?]/g,Zc=/[#\?@]/g,el=/#/g;zu=at.prototype,zu.add=function(e,t){st(this),this.c=null,e=ht(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},zu.clear=function(){this.a=this.c=null,this.b=0},zu.forEach=function(e,t){st(this),this.a.forEach(function(n,r){ec(n,function(n){e.call(t,n,r,this)},this)},this)},zu.U=function(){st(this);for(var e=this.a.S(),t=this.a.U(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},zu.S=function(t){st(this);var n=[];if(e(t))lt(this,t)&&(n=x(n,this.a.get(ht(this,t))));else{t=this.a.S();for(var r=0;r<t.length;r++)n=x(n,t[r])}return n},zu.set=function(e,t){return st(this),this.c=null,e=ht(this,e),lt(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},zu.get=function(e,t){return e?(e=this.S(e),0<e.length?String(e[0]):t):t},zu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.U(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var tl=!Nc||9<=Number(Rc);pt.prototype.na=!0,pt.prototype.ma=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var nl={},rl={};yt.prototype.na=!0,yt.prototype.ma=function(){return this.a.toString()},yt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var il=/%{(\w+)}/g,ol=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,al={};wt.prototype.na=!0,wt.prototype.ma=function(){return this.a.toString()},wt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var sl=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,ul={};_t("about:blank"),St.prototype.na=!0,St.prototype.ma=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var cl={};kt("<!DOCTYPE html>"),kt(""),kt("<br>");var ll={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},fl={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hl=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g,dl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pl=/^[^@]+@[^@]+$/,ml="Firefox",yl="Chrome",gl={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};yn.prototype.get=function(){var e=Gu.navigator;return(e&&"boolean"===typeof e.onLine&&(sn()||"chrome-extension:"===un()||"undefined"!==typeof e.connection)?e.onLine:1)?this.b?this.c:this.a:Math.min(5e3,this.a)};var vl,bl={};try{var wl={};Object.defineProperty(wl,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(wl,"abcd",{configurable:!0,enumerable:!0,value:2}),vl=2==wl.abcd}catch(e){vl=!1}var El="EMAIL_SIGNIN",Tl="email",_l="newEmail",Sl="requestType",Il="email",kl="fromEmail",Nl="data",Al="operation";p(On,Error),On.prototype.w=function(){return{code:this.code,message:this.message}},On.prototype.toJSON=function(){return this.w()};var xl="auth/",Cl={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},Ol="android",Dl="dynamicLinkDomain",Ml="handleCodeInApp",Pl="iOS",Rl="url",Ll="installApp",Fl="minimumVersion",Ul="packageName",jl="bundleId",Bl=null,Vl=null;jn.prototype.f=function(){return this.b};var ql,zl={bd:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",jb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};ql=qn("__EID__")?"__EID__":void 0;var Wl="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gl=["client_id","response_type","scope","redirect_uri","state"],Xl={Xc:{Na:"locale",Ba:500,Aa:600,Oa:"facebook.com",ib:Gl},Zc:{Na:null,Ba:500,Aa:620,Oa:"github.com",ib:Gl},$c:{Na:"hl",Ba:515,Aa:680,Oa:"google.com",ib:Gl},fd:{Na:"lang",Ba:485,Aa:705,Oa:"twitter.com",ib:Wl}},Kl="idToken",Hl="providerId";p(Xn,Gn),p(Kn,Xn),p(Hn,Xn),p(Qn,Xn),p(Yn,Xn),tr.prototype.la=function(e){return Hi(e,nr(this))},tr.prototype.b=function(e,t){var n=nr(this);return n.idToken=t,Qi(e,n)},tr.prototype.f=function(e,t){return er(Yi(e,nr(this)),t)},tr.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ir.prototype.la=function(e){return Hi(e,or(this))},ir.prototype.b=function(e,t){var n=or(this);return n.idToken=t,Qi(e,n)},ir.prototype.f=function(e,t){return er(Yi(e,or(this)),t)},ir.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},sr.prototype.Da=function(e){return this.zb=L(e),this},p(ur,sr),p(cr,sr),cr.prototype.ua=function(e){return k(this.a,e)||this.a.push(e),this},cr.prototype.Fb=function(){return C(this.a)},cr.prototype.credential=function(e,t){var n;if(n=c(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null},!n.idToken&&!n.accessToken)throw new On("argument-error","credential failed: must provide the ID token and/or the access token.");return new ir(this.providerId,n,this.providerId)},p(lr,cr),Sn(lr,"PROVIDER_ID","facebook.com"),Sn(lr,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),p(hr,cr),Sn(hr,"PROVIDER_ID","github.com"),Sn(hr,"GITHUB_SIGN_IN_METHOD","github.com"),p(pr,cr),Sn(pr,"PROVIDER_ID","google.com"),Sn(pr,"GOOGLE_SIGN_IN_METHOD","google.com"),p(yr,sr),Sn(yr,"PROVIDER_ID","twitter.com"),Sn(yr,"TWITTER_SIGN_IN_METHOD","twitter.com"),vr.prototype.la=function(e){return this.signInMethod==wr.EMAIL_LINK_SIGN_IN_METHOD?$i(e,Nf,{email:this.a,oobCode:this.c}):$i(e,Wf,{email:this.a,password:this.c})},vr.prototype.b=function(e,t){return this.signInMethod==wr.EMAIL_LINK_SIGN_IN_METHOD?$i(e,Af,{idToken:t,email:this.a,oobCode:this.c}):$i(e,Uf,{idToken:t,email:this.a,password:this.c})},vr.prototype.f=function(e,t){return er(this.la(e),t)},vr.prototype.w=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},In(wr,{PROVIDER_ID:"password"}),In(wr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),In(wr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),_r.prototype.la=function(e){return e.Va(Ir(this))},_r.prototype.b=function(e,t){var n=Ir(this);return n.idToken=t,$i(e,Xf,n)},_r.prototype.f=function(e,t){var n=Ir(this);return n.operation="REAUTH",e=$i(e,Kf,n),er(e,t)},_r.prototype.w=function(){var e={providerId:"phone"};return this.a.Ua&&(e.verificationId=this.a.Ua),this.a.Ta&&(e.verificationCode=this.a.Ta),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.$&&(e.phoneNumber=this.a.$),e},kr.prototype.Va=function(t,n){var r=this.a.b;return H(n.verify()).then(function(i){if(!e(i))throw new On("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return zi(r,{phoneNumber:t,recaptchaToken:i}).then(function(e){return"function"===typeof n.reset&&n.reset(),e},function(e){throw"function"===typeof n.reset&&n.reset(),e});default:throw new On("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},In(kr,{PROVIDER_ID:"phone"}),In(kr,{PHONE_SIGN_IN_METHOD:"phone"}),Cr.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.i&&e.push(this.i),e.join("-")},Cr.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,error:this.a&&this.a.w()}};var Ql=null;Dr.prototype.subscribe=function(e){var t=this;this.a.push(e),this.b||(this.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=rn("universalLinks.subscribe",Gu))&&e(null,this.b))},Dr.prototype.unsubscribe=function(e){A(this.a,function(t){return t==e})},p(Mr,On),p(Pr,On),Pr.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.w();return t&&F(e,t),e},Pr.prototype.toJSON=function(){return this.w()},Lr.prototype.c=null;var Yl;p(Ur,Lr),Ur.prototype.a=function(){var e=jr(this);return e?new ActiveXObject(e):new XMLHttpRequest},Ur.prototype.b=function(){var e={};return jr(this)&&(e[0]=!0,e[1]=!0),e},Yl=new Ur,p(Br,Lr),Br.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Vr;throw Error("Unsupported browser")},Br.prototype.b=function(){return{}},zu=Vr.prototype,zu.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},zu.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},zu.abort=function(){this.a.abort()},zu.setRequestHeader=function(){},zu.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},zu.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,qr(this,4)},zu.Gb=function(){this.status=500,this.response=this.responseText="",qr(this,4)},zu.kc=function(){this.Gb()},zu.gc=function(){this.status=200,qr(this,1)},zu.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},zr.prototype.a=null;var Jl=0;zr.prototype.reset=function(e,t,n,r,i){"number"==typeof i||Jl++,r||Yu(),delete this.a},Gr.prototype.toString=function(){return this.name};var $l=new Gr("SEVERE",1e3),Zl=new Gr("WARNING",900),ef=new Gr("CONFIG",700),tf=new Gr("FINE",500);Wr.prototype.log=function(e,t,n){if(e.value>=Xr(this).value)for(u(t)&&(t=t()),e=new zr(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var nf={},rf=null;p(Qr,Lr),Qr.prototype.a=function(){return new Yr(this.f)},Qr.prototype.b=function(e){return function(){return e}}({}),p(Yr,Le);var of=0;zu=Yr.prototype,zu.open=function(e,t){if(this.readyState!=of)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Zr(this)},zu.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.La.bind(this))},zu.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,$r(this,!1)),this.readyState=of},zu.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Zr(this)),this.a&&(this.readyState=3,Zr(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.La.bind(this)):"undefined"!==typeof Gu.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,Jr(this)):e.text().then(this.ic.bind(this),this.La.bind(this)))))},zu.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?$r(this,!0):Zr(this),3==this.readyState&&Jr(this)}},zu.ic=function(e){this.a&&(this.response=this.responseText=e,$r(this,!0))},zu.hc=function(e){this.a&&(this.response=e,$r(this,!0))},zu.La=function(e){var t=this.h;t&&t.log(Zl,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&$r(this,!0)},zu.setRequestHeader=function(e,t){this.i.append(e,t)},zu.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Zl,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},zu.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Zl,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},p(ei,Le);var af="";ei.prototype.b=Kr("goog.net.XhrIo");var sf=/^https?$/i,uf=["POST","PUT"];zu=ei.prototype,zu.Ga=function(){"undefined"!=typeof Wu&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Hr(this.b,hi(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},zu.abort=function(){this.a&&this.c&&(Hr(this.b,hi(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),si(this))},zu.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),si(this,!0)),ei.pb.va.call(this)},zu.Jb=function(){this.qa||(this.I||this.i||this.f?ai(this):this.yc())},zu.yc=function(){ai(this)},zu.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case af:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log($l,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Hr(this.b,"Can not get response: "+e.message),null}},di.prototype.cancel=function(e){if(this.a)this.c instanceof di&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):0>=--t.o&&t.cancel()}this.v?this.v.call(this.u,this):this.l=!0,this.a||(e=new Ei(this),mi(this),pi(this,!1,e))}},di.prototype.m=function(e,t){this.i=!1,pi(this,e,t)},di.prototype.then=function(e,t,n){var r,i,o=new G(function(e,t){r=e,i=t});return gi(this,r,function(e){e instanceof Ei?o.cancel():i(e)}),o.then(e,t,n)},di.prototype.$goog_Thenable=!0,p(wi,y),wi.prototype.message="Deferred has already fired",wi.prototype.name="AlreadyCalledError",p(Ei,y),Ei.prototype.message="Deferred was canceled",Ei.prototype.name="CanceledError",Ti.prototype.c=function(){throw delete cf[this.a],this.b};var cf={},lf=0,ff=1;p(Ni,y),p(Ai,Lr),Ai.prototype.a=function(){return new this.f},Ai.prototype.b=function(){return{}};var hf,df="idToken",pf=new yn(3e4,6e4),mf={"Content-Type":"application/x-www-form-urlencoded"},yf=new yn(3e4,6e4),gf={"Content-Type":"application/json"};xi.prototype.m=function(e,t,n,r,i,o){if(Yt()&&("undefined"===typeof Gu.fetch||"undefined"===typeof Gu.Headers||"undefined"===typeof Gu.Request))throw new On("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ei(this.c);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}Fe(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(fi(this))||null}catch(t){e=null}t&&t(e)}),Ue(a,"ready",function(){s&&clearTimeout(s),he(this)}),Ue(a,"timeout",function(){s&&clearTimeout(s),he(this),t&&t(null)}),ti(a,e,n,r,i)};var vf=new pt(rl,"https://apis.google.com/js/client.js?onload=%{onload}"),bf="__fcb"+Math.floor(1e6*Math.random()).toString();xi.prototype.l=function(e,t,n,r,i){var o=this;hf.then(function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})}).s(function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},xi.prototype.Ra=function(){return $i(this,jf,{})},xi.prototype.qb=function(e,t){return $i(this,Ff,{idToken:e,email:t})},xi.prototype.rb=function(e,t){return $i(this,Uf,{idToken:e,password:t})};var wf={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};zu=xi.prototype,zu.sb=function(e,t){var n={idToken:e},r=[];return P(wf,function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),$i(this,Ff,n)},zu.lb=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},F(e,t),$i(this,Df,e)},zu.mb=function(e,t){return e={requestType:"EMAIL_SIGNIN",email:e},F(e,t),$i(this,Cf,e)},zu.kb=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},F(e,t),$i(this,Of,e)},zu.Va=function(e){return $i(this,Gf,e)},zu.$a=function(e,t){return $i(this,Rf,{oobCode:e,newPassword:t})},zu.Ja=function(e){return $i(this,Tf,{oobCode:e})},zu.Xa=function(e){return $i(this,Ef,{oobCode:e})};var Ef={endpoint:"setAccountInfo",C:Ji,da:"email"},Tf={endpoint:"resetPassword",C:Ji,J:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new On("internal-error")}},_f={endpoint:"signupNewUser",C:function(e){if(Li(e),!e.password)throw new On("weak-password")},J:Vi,R:!0},Sf={endpoint:"createAuthUri"},If={endpoint:"deleteAccount",T:["idToken"]},kf={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],C:function(e){if(!a(e.deleteProvider))throw new On("internal-error")}},Nf={endpoint:"emailLinkSignin",T:["email","oobCode"],C:Li,J:Vi,R:!0},Af={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],C:Li,J:Vi,R:!0},xf={endpoint:"getAccountInfo"},Cf={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new On("internal-error");Li(e)},da:"email"},Of={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],C:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new On("internal-error")},da:"email"},Df={endpoint:"getOobConfirmationCode",T:["requestType"],C:function(e){if("PASSWORD_RESET"!=e.requestType)throw new On("internal-error");Li(e)},da:"email"},Mf={vb:!0,endpoint:"getProjectConfig",Ib:"GET"},Pf={vb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new On("internal-error")}},Rf={endpoint:"resetPassword",C:Ji,da:"email"},Lf={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Ff={endpoint:"setAccountInfo",T:["idToken"],C:Fi,R:!0},Uf={endpoint:"setAccountInfo",T:["idToken"],C:function(e){if(Fi(e),!e.password)throw new On("weak-password")},J:Vi,R:!0},jf={endpoint:"signupNewUser",J:Vi,R:!0},Bf={endpoint:"verifyAssertion",C:Gi,Pa:Xi,J:Ki,R:!0},Vf={endpoint:"verifyAssertion",C:Gi,Pa:Xi,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new On("user-not-found");if(e.errorMessage)throw Zi(e.errorMessage);if(!e[df])throw new On("internal-error")},R:!0},qf={endpoint:"verifyAssertion",C:function(e){if(Gi(e),!e.idToken)throw new On("internal-error")},Pa:Xi,J:Ki,R:!0},zf={endpoint:"verifyCustomToken",C:function(e){if(!e.token)throw new On("invalid-custom-token")},J:Vi,R:!0},Wf={endpoint:"verifyPassword",C:function(e){if(Li(e),!e.password)throw new On("wrong-password")},J:Vi,R:!0},Gf={endpoint:"verifyPhoneNumber",C:qi,J:Vi},Xf={endpoint:"verifyPhoneNumber",C:function(e){if(!e.idToken)throw new On("internal-error");qi(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Rr(e);Vi(e)}},Kf={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",C:qi,J:Vi},Hf=new pt(rl,"https://apis.google.com/js/api.js?onload=%{onload}"),Qf=new yn(3e4,6e4),Yf=new yn(5e3,15e3),Jf=null;ao.prototype.toString=function(){return this.f?Ze(this.a,"v",this.f):ct(this.a.a,"v"),this.b?Ze(this.a,"eid",this.b):ct(this.a.a,"eid"),this.c.length?Ze(this.a,"fw",this.c.join(",")):ct(this.a.a,"fw"),this.a.toString()},so.prototype.toString=function(){var e=nt(this.m,"/__/auth/handler");if(Ze(e,"apiKey",this.l),Ze(e,"appName",this.c),Ze(e,"authType",this.o),this.a.isOAuthProvider){var t=this.a;try{var n=r.a.app(this.c).auth().ea()}catch(e){n=null}t.ab=n,Ze(e,"providerId",this.a.providerId),t=this.a,n=fn(t.zb);for(var i in n)n[i]=n[i].toString();i=t.Fc,n=L(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}t.eb&&t.ab&&!n[t.eb]&&(n[t.eb]=t.ab),R(n)||Ze(e,"customParameters",ln(n))}if("function"===typeof this.a.Fb&&(t=this.a.Fb(),t.length&&Ze(e,"scopes",t.join(","))),this.i?Ze(e,"redirectUrl",this.i):ct(e.a,"redirectUrl"),this.g?Ze(e,"eventId",this.g):ct(e.a,"eventId"),this.h?Ze(e,"v",this.h):ct(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!et(e,s)&&Ze(e,s,this.b[s]);return this.f?Ze(e,"eid",this.f):ct(e.a,"eid"),s=uo(this.c),s.length&&Ze(e,"fw",s.join(",")),e.toString()},zu=co.prototype,zu.Ea=function(e,t,n){var r=new On("popup-closed-by-user"),i=new On("web-storage-unsupported"),o=this,a=!1;return this.ga().then(function(){yo(o).then(function(n){n||(e&&zt(e),t(i),a=!0)})}).s(function(){}).then(function(){if(!a)return Gt(e)}).then(function(){if(!a)return Ve(n).then(function(){t(r)})})},zu.Mb=function(){var e=nn();return!cn(e)&&!pn(e)},zu.Hb=function(){return!1},zu.Db=function(e,t,n,r,i,o,a){if(!e)return Q(new On("popup-blocked"));if(a&&!cn())return this.ga().s(function(t){zt(e),i(t)}),r(),H();this.a||(this.a=lo(ho(this)));var s=this;return this.a.then(function(){var t=s.ga().s(function(t){throw zt(e),i(t),t});return r(),t}).then(function(){if(xr(n),!a){jt(po(s.l,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)}}).s(function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e})},zu.Ca=function(e,t,n){this.a||(this.a=lo(ho(this)));var r=this;return this.a.then(function(){xr(t),jt(po(r.l,r.f,r.b,e,t,Ut(),n,r.c,void 0,r.h))}).s(function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e})},zu.ga=function(){var e=this;return fo(this).then(function(){return e.i.gb}).s(function(){throw e.a=null,new On("network-request-failed")})},zu.Qb=function(){return!0},zu.wa=function(e){this.g.push(e)},zu.Ka=function(e){A(this.g,function(t){return t==e})},zu=go.prototype,zu.get=function(e){return H(this.a.getItem(e)).then(function(e){return e&&hn(e)})},zu.set=function(e,t){return H(this.a.setItem(e,ln(t)))},zu.P=function(e){return H(this.a.removeItem(e))},zu.Y=function(){},zu.ca=function(){};var $f=[];vo.prototype.f=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];ec(r,function(t){i.push(H().then(function(){return t(e.origin,e.data.data)}))}),$(i).then(function(r){var i=[];ec(r,function(e){i.push({fulfilled:e.Eb,value:e.value,reason:e.reason?e.reason.message:void 0})}),ec(i,function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]}),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})})}},vo.prototype.subscribe=function(e,t){R(this.a)&&this.b.addEventListener("message",this.c),"undefined"===typeof this.a[e]&&(this.a[e]=[]),this.a[e].push(t)},vo.prototype.unsubscribe=function(e,t){"undefined"!==typeof this.a[e]&&t?(A(this.a[e],function(e){return e==t}),0==this.a[e].length&&delete this.a[e]):t||delete this.a[e],R(this.a)&&this.b.removeEventListener("message",this.c)},wo.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Eo.prototype.close=function(){for(;0<this.a.length;)_o(this,this.a[0]);this.b=!0};var Zf;zu=So.prototype,zu.set=function(e,t){var n,r=!1,i=this;return No(this).then(function(t){return n=t,t=xo(Co(n,!0)),Oo(t.get(e))}).then(function(o){var a=xo(Co(n,!0));return o?(o.value=t,Oo(a.put(o))):(i.b++,r=!0,o={},o.fbase_key=e,o.value=t,Oo(a.add(o)))}).then(function(){return i.c[e]=t,Do(i,e)}).ia(function(){r&&i.b--})},zu.get=function(e){return No(this).then(function(t){return Oo(xo(Co(t,!1)).get(e))}).then(function(e){return e&&e.value})},zu.P=function(e){var t=!1,n=this;return No(this).then(function(r){return t=!0,n.b++,Oo(xo(Co(r,!0)).delete(e))}).then(function(){return delete n.c[e],Do(n,e)}).ia(function(){t&&n.b--})},zu.Y=function(e){0==this.a.length&&Po(this),this.a.push(e)},zu.ca=function(e){A(this.a,function(t){return t==e}),0==this.a.length&&Ro(this)},zu=Lo.prototype,zu.get=function(e){return this.b.then(function(t){return t.get(e)})},zu.set=function(e,t){return this.b.then(function(n){return n.set(e,t)})},zu.P=function(e){return this.b.then(function(t){return t.P(e)})},zu.Y=function(e){this.a.push(e)},zu.ca=function(e){A(this.a,function(t){return t==e})},zu=Fo.prototype,zu.get=function(e){return H(this.a[e])},zu.set=function(e,t){return this.a[e]=t,H()},zu.P=function(e){return delete this.a[e],H()},zu.Y=function(){},zu.ca=function(){},zu=Uo.prototype,zu.get=function(e){var t=this;return H().then(function(){return hn(t.a.getItem(e))})},zu.set=function(e,t){var n=this;return H().then(function(){var r=ln(t);null===r?n.P(e):n.a.setItem(e,r)})},zu.P=function(e){var t=this;return H().then(function(){t.a.removeItem(e)})},zu.Y=function(e){Gu.window&&Se(Gu.window,"storage",e)},zu.ca=function(e){Gu.window&&Ae(Gu.window,"storage",e)},zu=Vo.prototype,zu.get=function(){return H(null)},zu.set=function(){return H()},zu.P=function(){return H()},zu.Y=function(){},zu.ca=function(){},zu=qo.prototype,zu.get=function(e){var t=this;return H().then(function(){return hn(t.a.getItem(e))})},zu.set=function(e,t){var n=this;return H().then(function(){var r=ln(t);null===r?n.P(e):n.a.setItem(e,r)})},zu.P=function(e){var t=this;return H().then(function(){t.a.removeItem(e)})},zu.Y=function(){},zu.ca=function(){};var eh,th,nh={B:Uo,Sa:qo},rh={B:Uo,Sa:qo},ih={B:go,Sa:Vo},oh={B:Uo,Sa:Vo},ah={ad:"local",NONE:"none",cd:"session"};zu=Ko.prototype,zu.get=function(e,t){return Qo(this,e.B).get(Yo(e,t))},zu.set=function(e,t,n){var r=Yo(e,n),i=this,o=Qo(this,e.B);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.B&&(i.b[r]=t)})},zu.addListener=function(e,t,n){e=Yo(e,t),this.o&&(this.b[e]=Gu.localStorage.getItem(e)),R(this.a)&&(Qo(this,"local").Y(this.f),this.h||(Ft()||!wn())&&Gu.indexedDB||!this.o||Zo(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},zu.removeListener=function(e,t,n){e=Yo(e,t),this.a[e]&&(A(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),R(this.a)&&(Qo(this,"local").ca(this.f),ea(this))},zu.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=Gu.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Ya(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?Qo(this,"local").ca(this.f):ea(this),this.m)if(n=Gu.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?Gu.localStorage.setItem(t,r):Gu.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===Gu.localStorage.getItem(t)||(o.b[t]=Gu.localStorage.getItem(t),o.Ya(t))},Nc&&Rc&&10==Rc&&Gu.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else ec(e,h(this.Ya,this))},zu.Ya=function(e){this.a[e]&&ec(this.a[e],function(e){e()})};var sh,uh={name:"authEvent",B:"local"};p(oa,ia);for(var ch=64,lh=ch-1,fh=[],hh=0;hh<lh;hh++)fh[hh]=0;var dh=x(128,fh);oa.prototype.reset=function(){this.g=this.c=0,this.a=Gu.Int32Array?new Int32Array(this.h):C(this.h)};var ph=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];p(ua,oa);var mh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];zu=ca.prototype,zu.ga=function(){return this.za?this.za:this.za=Kt().then(function(){if("function"!==typeof rn("universalLinks.subscribe",Gu))throw la("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof rn("BuildInfo.packageName",Gu))throw la("cordova-plugin-buildinfo is not installed");if("function"!==typeof rn("cordova.plugins.browsertab.openUrl",Gu))throw la("cordova-plugin-browsertab is not installed");if("function"!==typeof rn("cordova.InAppBrowser.open",Gu))throw la("cordova-plugin-inappbrowser is not installed")},function(){throw new On("cordova-not-ready")})},zu.Ea=function(e,t){return t(new On("operation-not-supported-in-this-environment")),H()},zu.Db=function(){return Q(new On("operation-not-supported-in-this-environment"))},zu.Qb=function(){return!1},zu.Mb=function(){return!0},zu.Hb=function(){return!0},zu.Ca=function(e,t,n){if(this.c)return Q(new On("redirect-operation-pending"));var r=this,i=Gu.document,o=null,a=null,s=null,u=null;return this.c=H().then(function(){return xr(t),ma(r)}).then(function(){return da(r,e,t,n)}).then(function(){return new G(function(e,t){a=function(){var t=rn("cordova.plugins.browsertab.close",Gu);return e(),"function"===typeof t&&t(),r.a&&"function"===typeof r.a.close&&(r.a.close(),r.a=null),!1},r.wa(a),s=function(){o||(o=Ve(2e3).then(function(){t(new On("redirect-cancelled-by-user"))}))},u=function(){gn()&&s()},i.addEventListener("resume",s,!1),nn().toLowerCase().match(/android/)||i.addEventListener("visibilitychange",u,!1)}).s(function(e){return ya(r).then(function(){throw e})})}).ia(function(){s&&i.removeEventListener("resume",s,!1),u&&i.removeEventListener("visibilitychange",u,!1),o&&o.cancel(),a&&r.Ka(a),r.c=null})},zu.wa=function(e){this.b.push(e),ma(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Cr("unknown",null,null,null,new On("no-auth-event")),e(t))})},zu.Ka=function(e){A(this.b,function(t){return t==e})};var yh={name:"pendingRedirect",B:"session"};zu=Ta.prototype,zu.reset=function(){this.f=!1,this.a.Ka(this.o),this.a=_a(this.A,this.l,this.m),this.i={}},zu.Za=function(){this.b.Za()},zu.subscribe=function(e){if(k(this.h,e)||this.h.push(e),!this.f){var t=this;Ea(this.g).then(function(e){e?wa(t.g).then(function(){Sa(t).s(function(e){var n=new Cr("unknown",null,null,null,new On("operation-not-supported-in-this-environment"));Na(e)&&t.cb(n)})}):Ia(t)}).s(function(){Ia(t)})}},zu.unsubscribe=function(e){A(this.h,function(t){return t==e})},zu.cb=function(e){if(!e)throw new On("invalid-auth-event");if(6e5<=Yu()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.wb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Yu())),t=!0;break}}return Ca(this.b),t};var gh=new yn(2e3,1e4),vh=new yn(3e4,6e4);Ta.prototype.fa=function(){return this.b.fa()},Ta.prototype.Ca=function(e,t,n){var r,i=this;return ba(this.g).then(function(){return i.a.Ca(e,t,n).s(function(e){if(Na(e))throw new On("operation-not-supported-in-this-environment");return r=e,wa(i.g).then(function(){throw r})}).then(function(){return i.a.Qb()?new G(function(){}):wa(i.g).then(function(){return i.fa()}).then(function(){}).s(function(){})})})},Ta.prototype.Ea=function(e,t,n,r){return this.a.Ea(n,function(n){e.ha(t,null,n,r)},gh.get())};var bh={};xa.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},xa.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Pa(this,!0,null,e.a),H()):t.xa(n,r)?Oa(this,e,t):Q(new On("invalid-auth-event")):(Pa(this,!1,null,null),H())}else Q(new On("invalid-auth-event"))},xa.prototype.Za=function(){this.g&&!this.i&&Pa(this,!1,null,null)},xa.prototype.fa=function(){var e=this;return new G(function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),Ra(e))})},La.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ha(e.c,null,e.a,e.b),H()):t.xa(n,r)?Fa(e,t):Q(new On("invalid-auth-event"))}else Q(new On("invalid-auth-event"))},ja.prototype.confirm=function(e){return e=Nr(this.verificationId,e),this.a(e)},qa.prototype.start=function(){this.a=this.c,Wa(this,!0)},qa.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ga.prototype.w=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Ga.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Q(new On("user-token-expired")):e||!this.b||Yu()>this.c-3e4?this.a?Qa(this,{grant_type:"refresh_token",refresh_token:this.a}):H(null):H({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Ya.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},p(Za,ge),p(es,Le),es.prototype.pa=function(e){this.ka=e,Ci(this.b,e)},es.prototype.ea=function(){return this.ka},es.prototype.ya=function(){return C(this.O)},es.prototype.Ha=function(){this.A.b&&(this.A.stop(),this.A.start())},Sn(es.prototype,"providerId","firebase"),zu=es.prototype,zu.reload=function(){var e=this;return Cs(this,ps(this).then(function(){return ws(e).then(function(){return ls(e)}).then(ds)}))},zu.dc=function(e){return this.F(e).then(function(e){return new Va(e)})},zu.F=function(e){var t=this;return Cs(this,ps(this).then(function(){return t.h.getToken(e)}).then(function(e){if(!e)throw new On("internal-error");return e.accessToken!=t.ra&&(us(t,e.accessToken),t.dispatchEvent(new Za("tokenChanged"))),vs(t,"refreshToken",e.refreshToken),e.accessToken}))},zu.zc=function(e){if(!(e=e.users)||!e.length)throw new On("internal-error");e=e[0],hs(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=_s(e),n=0;n<t.length;n++)ys(this,t[n]);vs(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length))},zu.hb=function(e){var t=this,n=null;return Cs(this,e.f(this.b,this.uid).then(function(e){return Es(t,e),n=Is(t,e,"reauthenticate"),t.i=null,t.reload()}).then(function(){return n}),!0)},zu.Ac=function(e){return _n("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.hb(e).then(function(){})},zu.fb=function(e){var t=this,n=null;return Cs(this,Ss(this,e.providerId).then(function(){return t.F()}).then(function(n){return e.b(t.b,n)}).then(function(e){return n=Is(t,e,"link"),ks(t,e)}).then(function(){return n}))},zu.rc=function(e){return _n("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.fb(e).then(function(e){return e.user})},zu.sc=function(e,t){var n=this;return Cs(this,Ss(this,"phone").then(function(){return Ba(is(n),e,t,h(n.fb,n))}))},zu.Bc=function(e,t){var n=this;return Cs(this,H().then(function(){return Ba(is(n),e,t,h(n.hb,n))}),!0)},zu.qb=function(e){var t=this;return Cs(this,this.F().then(function(n){return t.b.qb(n,e)}).then(function(e){return Es(t,e),t.reload()}))},zu.Tc=function(e){var t=this;return Cs(this,this.F().then(function(n){return e.b(t.b,n)}).then(function(e){return Es(t,e),t.reload()}))},zu.rb=function(e){var t=this;return Cs(this,this.F().then(function(n){return t.b.rb(n,e)}).then(function(e){return Es(t,e),t.reload()}))},zu.sb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return ps(this);var t=this;return Cs(this,this.F().then(function(n){return t.b.sb(n,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(e){return Es(t,e),vs(t,"displayName",e.displayName||null),vs(t,"photoURL",e.photoUrl||null),ec(t.providerData,function(e){"password"===e.providerId&&(Sn(e,"displayName",t.displayName),Sn(e,"photoURL",t.photoURL))}),ls(t)}).then(ds))},zu.Rc=function(e){var t=this;return Cs(this,ws(this).then(function(n){return k(ms(t),e)?Wi(t.b,n,[e]).then(function(e){var n={};return ec(e.providerUserInfo||[],function(e){n[e.providerId]=!0}),ec(ms(t),function(e){n[e]||gs(t,e)}),n[kr.PROVIDER_ID]||Sn(t,"phoneNumber",null),ls(t)}):ls(t).then(function(){throw new On("no-such-provider")})}))},zu.delete=function(){var e=this;return Cs(this,this.F().then(function(t){return $i(e.b,If,{idToken:t})}).then(function(){e.dispatchEvent(new Za("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");ts(e,null),rs(e,null),e.G=[],e.D=!0,ss(e),Sn(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)})},zu.wb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.aa||null)==t||"reauthViaRedirect"==e&&(this.aa||null)==t)},zu.ha=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},zu.xa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?h(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?h(this.Cb,this):"linkViaRedirect"==e&&(this.aa||null)==t?h(this.Bb,this):"reauthViaRedirect"==e&&(this.aa||null)==t?h(this.Cb,this):null},zu.tc=function(e){var t=this;return Ns(this,"linkViaPopup",e,function(){return Ss(t,e.providerId).then(function(){return ls(t)})},!1)},zu.Cc=function(e){return Ns(this,"reauthViaPopup",e,function(){return H()},!0)},zu.uc=function(e){var t=this;return As(this,"linkViaRedirect",e,function(){return Ss(t,e.providerId)},!1)},zu.Dc=function(e){return As(this,"reauthViaRedirect",e,function(){return H()},!0)},zu.Bb=function(e,t,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Cs(this,this.F().then(function(i){return Qi(r.b,{requestUri:e,postBody:n,sessionId:t,idToken:i})}).then(function(e){return i=Is(r,e,"link"),ks(r,e)}).then(function(){return i}))},zu.Cb=function(e,t,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Cs(this,H().then(function(){return er(Yi(r.b,{requestUri:e,sessionId:t,postBody:n}),r.uid)}).then(function(e){return i=Is(r,e,"reauthenticate"),Es(r,e),r.i=null,r.reload()}).then(function(){return i}),!0)},zu.kb=function(e){var t=this,n=null;return Cs(this,this.F().then(function(t){return n=t,"undefined"===typeof e||R(e)?{}:Pn(new Mn(e))}).then(function(e){return t.b.kb(n,e)}).then(function(e){if(t.email!=e)return t.reload()}).then(function(){}))},zu.toJSON=function(){return this.w()},zu.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.u,stsTokenManager:this.h.w(),redirectEventId:this.aa||null};return this.metadata&&F(e,this.metadata.w()),ec(this.providerData,function(t){e.providerData.push(Nn(t))}),e};var wh={name:"redirectUser",B:"session"};Us.prototype.g=function(){var e=this,t=Vs("local");Xs(this,function(){return H().then(function(){return e.c&&"local"!=e.c.B?e.b.get(t,e.a):null}).then(function(n){if(n)return js(e,"local").then(function(){e.c=t})})})};var Eh={name:"persistence",B:"session"};Us.prototype.nb=function(e){var t=null,n=this;return Xo(e),Xs(this,function(){return e!=n.c.B?n.b.get(n.c,n.a).then(function(r){return t=r,js(n,e)}).then(function(){if(n.c=Vs(e),t)return n.b.set(n.c,t,n.a)}):H()})},p(Ks,Le),p(Hs,ge),p(Qs,ge),zu=Ks.prototype,zu.nb=function(e){return e=this.h.nb(e),lu(this,e)},zu.pa=function(e){this.W===e||this.l||(this.W=e,Ci(this.b,this.W),this.dispatchEvent(new Hs(this.ea())))},zu.ea=function(){return this.W},zu.Uc=function(){var e=Gu.navigator;this.pa(e?e.languages&&e.languages[0]||e.language||e.userLanguage||null:null)},zu.vc=function(e){this.G.push(e),Oi(this.b,r.a.SDK_VERSION?tn(r.a.SDK_VERSION,this.G):null),this.dispatchEvent(new Qs(this.G))},zu.ya=function(){return C(this.G)},zu.toJSON=function(){return{apiKey:ou(this).options.apiKey,authDomain:ou(this).options.authDomain,appName:ou(this).name,currentUser:au(this)&&au(this).w()}},zu.wb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},zu.ha=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},zu.xa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?h(this.ac,this):null},zu.ac=function(e,t,n){var r=this;e={requestUri:e,postBody:n,sessionId:t},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,a=Hi(r.b,e).then(function(e){return i=Ar(e),o=Wn(e),e});return e=r.V.then(function(){return a}).then(function(e){return Zs(r,e)}).then(function(){return kn({user:au(r),credential:i,additionalUserInfo:o,operationType:"signIn"})}),lu(this,e)},zu.Mc=function(e){if(!an())return Q(new On("operation-not-supported-in-this-environment"));var t=this,n=zn(e.providerId),i=dn(),o=null;(!cn()||Qt())&&ou(this).options.authDomain&&e.isOAuthProvider&&(o=po(ou(this).options.authDomain,ou(this).options.apiKey,ou(this).name,"signInViaPopup",e,null,i,r.a.SDK_VERSION||null));var a=Wt(o,n&&n.Ba,n&&n.Aa);return n=Js(this).then(function(t){return ka(t,a,"signInViaPopup",e,i,!!o)}).then(function(){return new G(function(e,n){t.ha("signInViaPopup",null,new On("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=i,t.c=t.a.Ea(t,"signInViaPopup",a,i)})}).then(function(e){return a&&zt(a),e?kn(e):null}).s(function(e){throw a&&zt(a),e}),lu(this,n)},zu.Nc=function(e){if(!an())return Q(new On("operation-not-supported-in-this-environment"));var t=this;return lu(this,Js(this).then(function(){return qs(t.h)}).then(function(){return t.a.Ca("signInViaRedirect",e)}))},zu.fa=function(){if(!an())return Q(new On("operation-not-supported-in-this-environment"));var e=this;return lu(this,Js(this).then(function(){return e.a.fa()}).then(function(e){return e?kn(e):null}))},zu.Sc=function(e){if(!e)return Q(new On("null-user"));var t=this,n={};n.apiKey=ou(this).options.apiKey,n.authDomain=ou(this).options.authDomain,n.appName=ou(this).name;var r=Ps(e,n,t.A,t.ya());return lu(this,this.i.then(function(){if(ou(t).options.apiKey!=e.l)return r.reload()}).then(function(){return au(t)&&e.uid==au(t).uid?(bs(au(t),e),t.Z(e)):(eu(t,r),fs(r),t.Z(r))}).then(function(){uu(t)}))},zu.ob=function(){var e=this;return lu(this,this.i.then(function(){return au(e)?(eu(e,null),Ws(e.h).then(function(){uu(e)})):H()}))},zu.Oc=function(){var e=this;return Gs(this.h,ou(this).options.authDomain).then(function(t){if(!e.l){var n;if(n=au(e)&&t){n=au(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return bs(au(e),t),au(e).F();(au(e)||t)&&(eu(e,t),t&&(fs(t),t.ba=e.A),e.a&&e.a.subscribe(e),uu(e))}})},zu.Z=function(e){return zs(this.h,e)},zu.bc=function(){uu(this),this.Z(au(this))},zu.mc=function(){this.ob()},zu.nc=function(){this.ob()},zu.oc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(au(t))})},zu.pc=function(e){var t=this;cu(this,function(){e.next(au(t))})},zu.xc=function(e,t,n){var i=this;return this.X&&r.a.Promise.resolve().then(function(){u(e)?e(au(i)):u(e.next)&&e.next(au(i))}),this.Tb(e,t,n)},zu.wc=function(e,t,n){var i=this;return this.X&&r.a.Promise.resolve().then(function(){i.O=i.getUid(),u(e)?e(au(i)):u(e.next)&&e.next(au(i))}),this.Ub(e,t,n)},zu.cc=function(e){var t=this;return lu(this,this.i.then(function(){return au(t)?au(t).F(e).then(function(e){return{accessToken:e}}):null}))},zu.Nb=function(e){var t=this;return this.i.then(function(){return iu(t,$i(t.b,zf,{token:e}))}).then(function(e){var n=e.user;return vs(n,"isAnonymous",!1),t.Z(n),e})},zu.Gc=function(e){return _n("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(e)},zu.Hc=function(e,t){return _n("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(e,t)},zu.Ob=function(e,t){var n=this;return this.i.then(function(){return iu(n,$i(n.b,Wf,{email:e,password:t}))})},zu.yb=function(e,t){var n=this;return this.i.then(function(){return iu(n,$i(n.b,_f,{email:e,password:t}))})},zu.Wb=function(e,t){return _n("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.yb(e,t)},zu.Jc=function(e){return _n("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Qa(e).then(function(e){return e.user})},zu.Qa=function(e){var t=this;return this.i.then(function(){return iu(t,e.la(t.b))})},zu.Ra=function(){var e=this;return this.i.then(function(){var t=au(e);if(t&&t.isAnonymous){return kn({user:t,credential:null,additionalUserInfo:kn({providerId:null,isNewUser:!1}),operationType:"signIn"})}return iu(e,e.b.Ra()).then(function(t){var n=t.user;return vs(n,"isAnonymous",!0),e.Z(n),t})})},zu.Ic=function(){return _n("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Ra()},zu.getUid=function(){return au(this)&&au(this).uid||null},zu.Vb=function(e){this.addAuthTokenListener(e),0<++this.u&&au(this)&&as(au(this))},zu.Ec=function(e){var t=this;ec(this.m,function(n){n==e&&t.u--}),0>this.u&&(this.u=0),0==this.u&&au(this)&&ss(au(this)),this.removeAuthTokenListener(e)},zu.addAuthTokenListener=function(e){var t=this;this.m.push(e),lu(this,this.i.then(function(){t.l||k(t.m,e)&&e(su(t))}))},zu.removeAuthTokenListener=function(e){A(this.m,function(t){return t==e})},zu.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h,e.b.removeListener(Vs("local"),e.a,this.ka)),this.a&&(this.a.unsubscribe(this),this.a.Za()),r.a.Promise.resolve()},zu.Zb=function(e){return _n("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),lu(this,Ui(this.b,e))},zu.$b=function(e){return lu(this,ji(this.b,e))},zu.qc=function(e){return!!Tr(e)},zu.mb=function(e,t){var n=this;return lu(this,H().then(function(){var e=new Mn(t);if(!e.c)throw new On("argument-error",Ml+" must be true when sending sign in link to email");return Pn(e)}).then(function(t){return n.b.mb(e,t)}).then(function(){}))},zu.Vc=function(e){return this.Ja(e).then(function(e){return e.data.email})},zu.$a=function(e,t){return lu(this,this.b.$a(e,t).then(function(){}))},zu.Ja=function(e){return lu(this,this.b.Ja(e).then(function(e){return new Cn(e)}))},zu.Xa=function(e){return lu(this,this.b.Xa(e).then(function(){}))},zu.lb=function(e,t){var n=this;return lu(this,H().then(function(){return"undefined"===typeof t||R(t)?{}:Pn(new Mn(t))}).then(function(t){return n.b.lb(e,t)}).then(function(){}))},zu.Lc=function(e,t){return lu(this,Ba(this,e,t,h(this.Qa,this)))},zu.Kc=function(e,t){var n=this;return lu(this,H().then(function(){var r=Er(e,t||Ut());return n.Qa(r)}))},fu.prototype.render=function(){},fu.prototype.reset=function(){},fu.prototype.getResponse=function(){},fu.prototype.execute=function(){};var Th=null;hu.prototype.render=function(e,t){return this.a[this.b.toString()]=new mu(e,t),this.b++},hu.prototype.reset=function(e){var t=du(this,e);e=pu(e),t&&e&&(t.delete(),delete this.a[e])},hu.prototype.getResponse=function(e){return(e=du(this,e))?e.getResponse():null},hu.prototype.execute=function(e){(e=du(this,e))&&e.execute()},mu.prototype.getResponse=function(){return yu(this),this.b},mu.prototype.execute=function(){yu(this);var e=this;this.a||(this.a=setTimeout(function(){e.b=Zt();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout(function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()},6e4)},500))},mu.prototype.delete=function(){yu(this),this.g=!0,clearTimeout(this.a),this.a=null,Ae(this.f,"click",this.i)},gu.prototype.g=function(){return Th||(Th=new hu),H(Th)},gu.prototype.c=function(){};var _h=null,Sh=new pt(rl,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ih=new yn(3e4,6e4);vu.prototype.g=function(e){var t=this;return new G(function(n,r){var i=setTimeout(function(){r(new On("network-request-failed"))},Ih.get());if(!Gu.grecaptcha||e!==t.f&&!t.b){Gu[t.a]=function(){if(Gu.grecaptcha){t.f=e;var o=Gu.grecaptcha.render;Gu.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(Gu.grecaptcha)}else clearTimeout(i),r(new On("internal-error"));delete Gu[t.a]};H(_i(vt(Sh,{onload:t.a,hl:e||""}))).s(function(){clearTimeout(i),r(new On("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(i),n(Gu.grecaptcha)})},vu.prototype.c=function(){this.b--};var kh=null,Nh="callback",Ah="expired-callback",xh="sitekey",Ch="size";zu=bu.prototype,zu.za=function(){var e=this;return this.f?this.f:this.f=Tu(this,H().then(function(){if(sn()&&!Yt())return Xt();throw new On("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.v())}).then(function(t){return e.g=t,$i(e.u,Pf,{})}).then(function(t){e.a[xh]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},zu.render=function(){_u(this);var e=this;return Tu(this,this.za().then(function(){if(null===e.c){var t=e.l;if(!e.i){var n=At(t);t=Ct("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c}))},zu.verify=function(){_u(this);var e=this;return Tu(this,this.render().then(function(t){return new G(function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(Eu(e,i),n(t))};e.o.push(i),e.i&&e.g.execute(e.c)}})}))},zu.reset=function(){_u(this),null!==this.c&&this.g.reset(this.c)},zu.clear=function(){_u(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=At(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}},p(Su,bu);var Oh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");Uu(Ks.prototype,{Xa:{name:"applyActionCode",j:[ku("code")]},Ja:{name:"checkActionCode",j:[ku("code")]},$a:{name:"confirmPasswordReset",j:[ku("code"),ku("newPassword")]},yb:{name:"createUserWithEmailAndPassword",j:[ku("email"),ku("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[ku("email"),ku("password")]},Zb:{name:"fetchProvidersForEmail",j:[ku("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[ku("email")]},fa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[ku("emailLink")]},wc:{name:"onAuthStateChanged",j:[Fu(Au(),xu(),"nextOrObserver"),xu("opt_error",!0),xu("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[Fu(Au(),xu(),"nextOrObserver"),xu("opt_error",!0),xu("opt_completed",!0)]},lb:{name:"sendPasswordResetEmail",j:[ku("email"),Fu(Au("opt_actionCodeSettings",!0),Cu(null,!0),"opt_actionCodeSettings",!0)]},mb:{name:"sendSignInLinkToEmail",j:[ku("email"),Au("actionCodeSettings")]},nb:{name:"setPersistence",j:[ku("persistence")]},Qa:{name:"signInAndRetrieveDataWithCredential",j:[Pu()]},Ra:{name:"signInAnonymously",j:[]},Ic:{name:"signInAnonymouslyAndRetrieveData",j:[]},Jc:{name:"signInWithCredential",j:[Pu()]},Nb:{name:"signInWithCustomToken",j:[ku("token")]},Gc:{name:"signInAndRetrieveDataWithCustomToken",j:[ku("token")]},Ob:{name:"signInWithEmailAndPassword",j:[ku("email"),ku("password")]},Kc:{name:"signInWithEmailLink",j:[ku("email"),ku("emailLink",!0)]},Hc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[ku("email"),ku("password")]},Lc:{name:"signInWithPhoneNumber",j:[ku("phoneNumber"),Lu()]},Mc:{name:"signInWithPopup",j:[Ru()]},Nc:{name:"signInWithRedirect",j:[Ru()]},Sc:{name:"updateCurrentUser",j:[Fu(function(e){return{name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof es)}}}(),Cu(),"user")]},ob:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[ku(null,!0)]},Uc:{name:"useDeviceLanguage",j:[]},Vc:{name:"verifyPasswordResetCode",j:[ku("code")]}}),ju(Ks.prototype,{lc:{name:"languageCode",ub:Fu(ku(),Cu(),"languageCode")}}),Ks.Persistence=ah,Ks.Persistence.LOCAL="local",Ks.Persistence.SESSION="session",Ks.Persistence.NONE="none",Uu(es.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Nu("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[Nu("opt_forceRefresh",!0)]},fb:{name:"linkAndRetrieveDataWithCredential",j:[Pu()]},rc:{name:"linkWithCredential",j:[Pu()]},sc:{name:"linkWithPhoneNumber",j:[ku("phoneNumber"),Lu()]},tc:{name:"linkWithPopup",j:[Ru()]},uc:{name:"linkWithRedirect",j:[Ru()]},hb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Pu()]},Ac:{name:"reauthenticateWithCredential",j:[Pu()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[ku("phoneNumber"),Lu()]},Cc:{name:"reauthenticateWithPopup",j:[Ru()]},Dc:{name:"reauthenticateWithRedirect",j:[Ru()]},reload:{name:"reload",j:[]},kb:{name:"sendEmailVerification",j:[Fu(Au("opt_actionCodeSettings",!0),Cu(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[ku(null,!0)]},Rc:{name:"unlink",j:[ku("provider")]},qb:{name:"updateEmail",j:[ku("email")]},rb:{name:"updatePassword",j:[ku("password")]},Tc:{name:"updatePhoneNumber",j:[Pu("phone")]},sb:{name:"updateProfile",j:[Au("profile")]}}),Uu(hu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Uu(fu.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Uu(G.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),ju(Ua.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",ub:Nu("appVerificationDisabledForTesting")}}),Uu(ja.prototype,{confirm:{name:"confirm",j:[ku("verificationCode")]}}),Bu(Zn,"fromJSON",function(t){t=e(t)?JSON.parse(t):t;for(var n,r=[ar,br,Sr,rr],i=0;i<r.length;i++)if(n=r[i](t))return n;return null},[Fu(ku(),Au(),"json")]),Bu(wr,"credential",function(e,t){return new vr(e,t)},[ku("email"),ku("password")]),Uu(vr.prototype,{w:{name:"toJSON",j:[ku(null,!0)]}}),Uu(lr.prototype,{ua:{name:"addScope",j:[ku("scope")]},Da:{name:"setCustomParameters",j:[Au("customOAuthParameters")]}}),Bu(lr,"credential",fr,[Fu(ku(),Au(),"token")]),Bu(wr,"credentialWithLink",Er,[ku("email"),ku("emailLink")]),Uu(hr.prototype,{ua:{name:"addScope",j:[ku("scope")]},Da:{name:"setCustomParameters",j:[Au("customOAuthParameters")]}}),Bu(hr,"credential",dr,[Fu(ku(),Au(),"token")]),Uu(pr.prototype,{ua:{name:"addScope",j:[ku("scope")]},Da:{name:"setCustomParameters",j:[Au("customOAuthParameters")]}}),Bu(pr,"credential",mr,[Fu(ku(),Fu(Au(),Cu()),"idToken"),Fu(ku(),Cu(),"accessToken",!0)]),Uu(yr.prototype,{Da:{name:"setCustomParameters",j:[Au("customOAuthParameters")]}}),Bu(yr,"credential",gr,[Fu(ku(),Au(),"token"),ku("secret",!0)]),Uu(cr.prototype,{ua:{name:"addScope",j:[ku("scope")]},credential:{name:"credential",j:[Fu(ku(),Fu(Au(),Cu()),"optionsOrIdToken"),Fu(ku(),Cu(),"accessToken",!0)]},Da:{name:"setCustomParameters",j:[Au("customOAuthParameters")]}}),Uu(ir.prototype,{w:{name:"toJSON",j:[ku(null,!0)]}}),Uu(tr.prototype,{w:{name:"toJSON",j:[ku(null,!0)]}}),Bu(kr,"credential",Nr,[ku("verificationId"),ku("verificationCode")]),Uu(kr.prototype,{Va:{name:"verifyPhoneNumber",j:[ku("phoneNumber"),Lu()]}}),Uu(_r.prototype,{w:{name:"toJSON",j:[ku(null,!0)]}}),Uu(On.prototype,{toJSON:{name:"toJSON",j:[ku(null,!0)]}}),Uu(Pr.prototype,{toJSON:{name:"toJSON",j:[ku(null,!0)]}}),Uu(Mr.prototype,{toJSON:{name:"toJSON",j:[ku(null,!0)]}}),Uu(Su.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if("undefined"===typeof r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:Ks,AuthCredential:Zn,Error:On};Bu(e,"EmailAuthProvider",wr,[]),Bu(e,"FacebookAuthProvider",lr,[]),Bu(e,"GithubAuthProvider",hr,[]),Bu(e,"GoogleAuthProvider",pr,[]),Bu(e,"TwitterAuthProvider",yr,[]),Bu(e,"OAuthProvider",cr,[ku("providerId")]),Bu(e,"SAMLAuthProvider",ur,[ku("providerId")]),Bu(e,"PhoneAuthProvider",kr,[Du()]),Bu(e,"RecaptchaVerifier",Su,[Fu(ku(),Ou(),"recaptchaContainer"),Au("recaptchaParameters",!0),Mu()]),r.a.INTERNAL.registerService("auth",function(e,t){return e=new Ks(e),t({INTERNAL:{getUid:h(e.getUid,e),getToken:h(e.cc,e),addAuthTokenListener:h(e.Vb,e),removeAuthTokenListener:h(e.Ec,e)}}),e},e,function(e,t){if("create"===e)try{t.auth()}catch(e){}}),r.a.INTERNAL.extendNamespace({User:es})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(t,n(4))},function(e,t,n){"use strict";var r=n(177);n.n(r)},function(e,t,n){"use strict";function r(){return Rt.logLevel===Ct.LogLevel.DEBUG?At.DEBUG:Rt.logLevel===Ct.LogLevel.SILENT?At.SILENT:At.ERROR}function i(e){switch(e){case At.DEBUG:Rt.logLevel=Ct.LogLevel.DEBUG;break;case At.ERROR:Rt.logLevel=Ct.LogLevel.ERROR;break;case At.SILENT:Rt.logLevel=Ct.LogLevel.SILENT;break;default:Rt.error("Firestore ("+Pt+"): Invalid value passed to `setLogLevel`")}}function o(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Rt.logLevel<=Ct.LogLevel.DEBUG){var i=n.map(s);Rt.debug.apply(Rt,["Firestore ("+Pt+") ["+e+"]: "+t].concat(i))}}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Rt.logLevel<=Ct.LogLevel.ERROR){var r=t.map(s);Rt.error.apply(Rt,["Firestore ("+Pt+"): "+e].concat(r))}}function s(e){if("string"===typeof e)return e;var t=Lt.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function u(e){var t="FIRESTORE ("+Pt+") INTERNAL ASSERTION FAILED: "+e;throw a(t),new Error(t)}function c(e,t){e||u(t)}function l(){return Lt.getPlatform().emptyByteString}function f(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Ut(Ft.INVALID_ARGUMENT,e)}n.prototype=e.prototype;for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){return void 0!==e?e:t}function p(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function m(e){var t=[];return y(e,function(e,n){return t.push(n)}),t}function y(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function g(e){c(null!=e&&"object"===typeof e,"isEmpty() expects object parameter.");for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function v(e){c(e&&"object"===typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function b(e,t){if(0!==t.length)throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+V(t.length,"argument")+".")}function w(e,t,n){if(t.length!==n)throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires "+V(n,"argument")+", but was called with "+V(t.length,"argument")+".")}function E(e,t,n){if(t.length<n)throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires at least "+V(n,"argument")+", but was called with "+V(t.length,"argument")+".")}function T(e,t,n,r){if(t.length<n||t.length>r)throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+V(t.length,"argument")+".")}function _(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+V(r,"element")+".")}function S(e,t,n,r){M(e,t,B(n)+" argument",r)}function I(e,t,n,r){void 0!==r&&S(e,t,n,r)}function k(e,t,n,r){M(e,t,n+" option",r)}function N(e,t,n,r){void 0!==r&&k(e,t,n,r)}function A(e,t,n,r,i){if(!(r instanceof Array))throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+R(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+R(r[o]))}function x(e,t,n,r,i){void 0!==r&&A(e,t,n,r,i)}function C(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(R(u))}var c=R(r);throw new Ut(Ft.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}function O(e,t,n,r,i){void 0!==r&&C(e,t,n,r,i)}function D(e,t,n,r){if(!t.some(function(e){return e===r}))throw new Ut(Ft.INVALID_ARGUMENT,"Invalid value "+R(r)+" provided to function "+e+"() for its "+B(n)+" argument. Acceptable values: "+t.join(", "))}function M(e,t,n,r){if(!("object"===t?P(r):"non-empty string"===t?"string"===typeof r&&""!==r:typeof r===t)){var i=R(r);throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function P(e){return"object"===typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function R(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"===typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"===typeof e||"boolean"===typeof e)return""+e;if("object"===typeof e){if(e instanceof Array)return"an array";var t=L(e);return t?"a custom "+t+" object":"an object"}return"function"===typeof e?"a function":u("Unknown wrong type: "+typeof e)}function L(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/,n=t.exec(e.constructor.toString());if(n&&n.length>1)return n[1]}return null}function F(e,t,n){if(void 0===n)throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+B(t)+" argument, but it was undefined.")}function U(e,t,n){y(t,function(t,r){if(n.indexOf(t)<0)throw new Ut(Ft.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function j(e,t,n,r){var i=R(r);return new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() requires its "+B(n)+" argument to be a "+t+", but it was: "+i)}function B(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function V(e,t){return e+" "+t+(1===e?"":"s")}function q(e,t){return e<t?-1:e>t?1:0}function z(e,t){return null!==e&&void 0!==e?!(!t||!e.isEqual(t)):e===t}function W(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function G(e){return e+"\0"}function X(){if("undefined"===typeof Uint8Array)throw new Ut(Ft.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function K(){if(!Lt.getPlatform().base64Available)throw new Ut(Ft.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function H(e,t){return e<t?-1:e>t?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}function Q(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function Y(e){return null===e||void 0===e}function J(e){return An(e)&&e<=Nn&&e>=kn}function $(e){return e instanceof Sn?e.internalValue.slice():[]}function Z(e){switch(e){case Ft.OK:return u("Treated status OK as error");case Ft.CANCELLED:case Ft.UNKNOWN:case Ft.DEADLINE_EXCEEDED:case Ft.RESOURCE_EXHAUSTED:case Ft.INTERNAL:case Ft.UNAVAILABLE:case Ft.UNAUTHENTICATED:return!1;case Ft.INVALID_ARGUMENT:case Ft.NOT_FOUND:case Ft.ALREADY_EXISTS:case Ft.PERMISSION_DENIED:case Ft.FAILED_PRECONDITION:case Ft.ABORTED:case Ft.OUT_OF_RANGE:case Ft.UNIMPLEMENTED:case Ft.DATA_LOSS:return!0;default:return u("Unknown status code: "+e)}}function ee(e){return Z(e)&&e!==Ft.ABORTED}function te(e){var t=Hn[e];if(void 0!==t)return ne(t)}function ne(e){if(void 0===e)return a("GRPC error has no .code"),Ft.UNKNOWN;switch(e){case Hn.OK:return Ft.OK;case Hn.CANCELLED:return Ft.CANCELLED;case Hn.UNKNOWN:return Ft.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return Ft.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return Ft.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return Ft.INTERNAL;case Hn.UNAVAILABLE:return Ft.UNAVAILABLE;case Hn.UNAUTHENTICATED:return Ft.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return Ft.INVALID_ARGUMENT;case Hn.NOT_FOUND:return Ft.NOT_FOUND;case Hn.ALREADY_EXISTS:return Ft.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return Ft.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return Ft.FAILED_PRECONDITION;case Hn.ABORTED:return Ft.ABORTED;case Hn.OUT_OF_RANGE:return Ft.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return Ft.UNIMPLEMENTED;case Hn.DATA_LOSS:return Ft.DATA_LOSS;default:return u("Unknown status code: "+e)}}function re(e){if(void 0===e)return Hn.OK;switch(e){case Ft.OK:return Hn.OK;case Ft.CANCELLED:return Hn.CANCELLED;case Ft.UNKNOWN:return Hn.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return Hn.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return Hn.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return Hn.INTERNAL;case Ft.UNAVAILABLE:return Hn.UNAVAILABLE;case Ft.UNAUTHENTICATED:return Hn.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return Hn.INVALID_ARGUMENT;case Ft.NOT_FOUND:return Hn.NOT_FOUND;case Ft.ALREADY_EXISTS:return Hn.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return Hn.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return Hn.FAILED_PRECONDITION;case Ft.ABORTED:return Hn.ABORTED;case Ft.OUT_OF_RANGE:return Hn.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return Hn.UNIMPLEMENTED;case Ft.DATA_LOSS:return Hn.DATA_LOSS;default:return u("Unknown status code: "+e)}}function ie(e){switch(e){case 200:return Ft.OK;case 400:return Ft.INVALID_ARGUMENT;case 401:return Ft.UNAUTHENTICATED;case 403:return Ft.PERMISSION_DENIED;case 404:return Ft.NOT_FOUND;case 409:return Ft.ABORTED;case 416:return Ft.OUT_OF_RANGE;case 429:return Ft.RESOURCE_EXHAUSTED;case 499:return Ft.CANCELLED;case 500:return Ft.UNKNOWN;case 501:return Ft.UNIMPLEMENTED;case 503:return Ft.UNAVAILABLE;case 504:return Ft.DEADLINE_EXCEEDED;default:return e>=200&&e<300?Ft.OK:e>=400&&e<500?Ft.FAILED_PRECONDITION:e>=500&&e<600?Ft.INTERNAL:Ft.UNKNOWN}}function oe(){return sr}function ae(){return oe()}function se(){return ur}function ue(){return cr}function ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=lr,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}function le(){return fr}function fe(){return new nn(Jt.comparator)}function he(){return new nn(Jt.comparator)}function de(e,t){c(!Y(e),t+" is missing")}function pe(e){return"number"===typeof e?e:"string"===typeof e?Number(e):u("can't parse "+e)}function me(e,t,n){return t===n||!t&&n in e}function ye(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ve(t)),t=ge(e.get(n),t);return ve(t)}function ge(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=Br+qr;break;case Br:n+=Br+zr;break;default:n+=o}}return n}function ve(e){return e+Br+Vr}function be(e){var t=e.length;if(c(t>=2,"Invalid path "+e),2===t)return c(e.charAt(0)===Br&&e.charAt(1)===Vr,"Non-empty path "+e+" had length 2"),Ht.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(Br,o);(a<0||a>n)&&u('Invalid encoded resource path: "'+e+'"');switch(e.charAt(a+1)){case Vr:var s=e.substring(o,a),l=void 0;0===i.length?l=s:(i+=s,l=i,i=""),r.push(l);break;case qr:i+=e.substring(o,a),i+="\0";break;case zr:i+=e.substring(o,a+1);break;default:u('Invalid encoded resource path: "'+e+'"')}o=a+2}return new Ht(r)}function we(e,t,n){var r=mi.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Ie(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function Ee(e,t){var n=!1;return ke(e).iterateSerial(function(r){return we(e,r,t).next(function(e){return e&&(n=!0),Xr.resolve(!e)})}).next(function(){return n})}function Te(e,t,n){var r=e.store(pi.store),i=e.store(mi.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){c(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var l=[],f=0,h=n.mutations;f<h.length;f++){var d=h[f],p=mi.key(t,d.key.path,n.batchId);o.push(i.delete(p)),l.push(d.key)}return Xr.waitFor(o).next(function(){return l})}function _e(e){return e instanceof Uint8Array?(c("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/chip-player-js"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Se(e){return Gi.getStore(e,pi.store)}function Ie(e){return Gi.getStore(e,mi.store)}function ke(e){return Gi.getStore(e,di.store)}function Ne(e){return new Xr(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){n(e.target.error)}})}function Ae(e){return Gi.getStore(e,wi.store)}function xe(e){return Gi.getStore(e,Ti.store)}function Ce(e){return Jr.getStore(e,Ti.store).get(Ti.key).next(function(e){return c(null!==e,"Missing metadata row."),e})}function Oe(e){return Ce(e).next(function(e){return e.highestListenSequenceNumber})}function De(e){return Gi.getStore(e,Ei.store)}function Me(e){return Gi.getStore(e,bi.store)}function Pe(e){return e.code===Ft.DATA_LOSS&&e.message===ii}function Re(e){return Gi.getStore(e,vi.store)}function Le(e){return Gi.getStore(e,Si.store)}function Fe(e){return e.path.toArray()}function Ue(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw u("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}function je(e){return[0,ye(e)]}function Be(e){e.createObjectStore(hi.store)}function Ve(e){e.createObjectStore(di.store,{keyPath:di.keyPath}),e.createObjectStore(pi.store,{keyPath:pi.keyPath,autoIncrement:!0}).createIndex(pi.userMutationsIndex,pi.userMutationsKeyPath,{unique:!0}),e.createObjectStore(mi.store)}function qe(e,t){return t.store(pi.store).loadAll().next(function(n){e.deleteObjectStore(pi.store),e.createObjectStore(pi.store,{keyPath:pi.keyPath,autoIncrement:!0}).createIndex(pi.userMutationsIndex,pi.userMutationsKeyPath,{unique:!0});var r=t.store(pi.store),i=n.map(function(e){return r.put(e)});return Xr.waitFor(i)})}function ze(e){e.createObjectStore(vi.store)}function We(e){e.createObjectStore(bi.store)}function Ge(e){e.createObjectStore(Ei.store,{keyPath:Ei.keyPath}).createIndex(Ei.documentTargetsIndex,Ei.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(wi.store,{keyPath:wi.keyPath}).createIndex(wi.queryTargetsIndexName,wi.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ti.store)}function Xe(e){e.deleteObjectStore(Ei.store),e.deleteObjectStore(wi.store),e.deleteObjectStore(Ti.store)}function Ke(e){var t=e.store(Ti.store),n=new Ti(0,0,Bn.MIN.toTimestamp(),0);return t.put(Ti.key,n)}function He(e){e.createObjectStore(Si.store,{keyPath:"id",autoIncrement:!0})}function Qe(e){e.createObjectStore(Ii.store,{keyPath:Ii.keyPath})}function Ye(e){return Gi.getStore(e,_i.store)}function Je(e){return void 0!==e.documents}function $e(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=q(n,i);return 0===a?q(r,o):a}function Ze(e){return e.code===Ft.FAILED_PRECONDITION&&e.message===Vi}function et(e){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(t){if(!Ze(e))throw e;return o(Bi,"Unexpectedly lost primary lease"),[2]})})}function tt(e){return e.store(hi.store)}function nt(e){return e.store(Ii.store)}function rt(e){return[0,ye(e.path)]}function it(e,t){return new Ei(0,ye(e.path),t)}function ot(e,t){return De(e).put(it(t,e.currentSequenceNumber))}function at(){return new nn(Jt.comparator)}function st(e,t){var n=function(e){switch(e){case ar.Added:return 1;case ar.Modified:case ar.Metadata:return 2;case ar.Removed:return 0;default:return u("Unknown ChangeType: "+e)}};return n(e)-n(t)}function ut(e){var t=Rr.INVALID;if(null!=e)try{var n=JSON.parse(e);c("number"===typeof n,"Found non-numeric sequence number"),t=n}catch(e){a(Oo,"Failed to read sequence number from WebStorage",e)}return t}function ct(e){if(e.search(Qo)>=0)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ho.bind.apply(Ho,[void 0].concat(e.split("."))))}catch(t){throw new Ut(Ft.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}function lt(e){if(!e)return new Jo;switch(e.type){case"gapi":var t=e.client;return c(!("object"!==typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new ea(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new Ut(Ft.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function ft(e){return ht(e,["next","error","complete"])}function ht(e,t){if("object"!==typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"===typeof n[o])return!0}return!1}function dt(e){switch(e){case go.Set:case go.MergeSet:case go.Update:return!0;case go.Argument:return!1;default:throw u("Unexpected case for UserDataSource: "+e)}}function pt(e){return"object"===typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof zt)&&!(e instanceof qt)&&!(e instanceof Bt)&&!(e instanceof ha)&&!(e instanceof ta)}function mt(e,t,n){if(!pt(n)||!P(n)){var r=R(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function yt(e,t){if(t instanceof Ho)return t._internalPath;if("string"===typeof t)return gt(e,t);throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function gt(e,t){try{return ct(t)._internalPath}catch(t){var n=vt(t);throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function vt(e){return e instanceof Error?e.message:e.toString()}function bt(){throw new Ut(Ft.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}function wt(e,t){if(void 0===t)return{merge:!1};if(U(e,t,["merge","mergeFields"]),N(e,"boolean","merge",t.merge),x(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"===typeof e||e instanceof Ho}),void 0!==t.mergeFields&&void 0!==t.merge)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Et(e,t){return void 0===t?{}:(U(e,t,["serverTimestamps"]),O(e,"options","serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Tt(e,t){I(e,"object",1,t),t&&(U(e,t,["source"]),O(e,"options","source",t.source,["default","server","cache"]))}function _t(e,t,n){if(t instanceof Sa){if(t.firestore!==n)throw new Ut(Ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw j(e,"DocumentReference",1,t)}function St(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new Na(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return c(t.type===ar.Added,"Invalid event type for first snapshot"),c(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==ar.Metadata}).map(function(t){var r=new Na(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==ar.Added&&(i=o.indexOf(t.doc.key),c(i>=0,"Index for document not found"),o=o.delete(t.doc.key)),t.type!==ar.Removed&&(o=o.add(t.doc),a=o.indexOf(t.doc.key)),{type:It(t.type),doc:r,oldIndex:i,newIndex:a}})}function It(e){switch(e){case ar.Added:return"added";case ar.Modified:case ar.Metadata:return"modified";case ar.Removed:return"removed";default:return u("Unknown change type: "+e)}}function kt(e){e.INTERNAL.registerService("firestore",function(e){return new Ea(e)},v(Ba))}function Nt(e){kt(e)}Object.defineProperty(t,"__esModule",{value:!0});var At,xt=function(e){return e&&"object"===typeof e&&"default"in e?e.default:e}(n(49)),Ct=n(178),Ot=n(33),Dt=n(179),Mt=n(180),Pt=xt.SDK_VERSION,Rt=new Ct.Logger("@firebase/firestore");!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(At||(At={}));var Lt=function(){function e(){}return e.setPlatform=function(t){e.platform&&u("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||u("Platform not set"),e.platform},e}(),Ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ut=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Ot.__extends(t,e),t}(Error),jt=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return c(20===t.length,"Invalid auto ID: "+t),t},e}(),Bt=function(){function e(e){K(),this._binaryString=e}return e.fromBase64String=function(t){w("Blob.fromBase64String",arguments,1),S("Blob.fromBase64String","string",1,t),K();try{return new e(Lt.getPlatform().atob(t))}catch(e){throw new Ut(Ft.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(w("Blob.fromUint8Array",arguments,1),X(),!(t instanceof Uint8Array))throw j("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(""))},e.prototype.toBase64=function(){return w("Blob.toBase64",arguments,0),K(),Lt.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){w("Blob.toUint8Array",arguments,0),X();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return q(this._binaryString,e._binaryString)},e}(),Vt=f(Bt,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),qt=function(){function e(e,t){if(w("GeoPoint",arguments,2),S("GeoPoint","number",1,e),S("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new Ut(Ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ut(Ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return q(this._lat,e._lat)||q(this._long,e._long)},e}(),zt=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ut(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ut(Ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ut(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ut(Ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?q(this.nanoseconds,e.nanoseconds):q(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Wt=function(){function e(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i}return e}(),Gt="(default)",Xt=function(){function e(e,t){this.projectId=e,this.database=t||Gt}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===Gt},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return q(this.projectId,e.projectId)||q(this.database,e.database)},e}(),Kt=function(){function e(e,t,n){this.init(e,t,n)}return e.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&u("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&u("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},e.prototype.construct=function(e,t,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(e,t,n),r},Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):"string"===typeof t?n.push(t):u("Unknown parameter type for Path.child(): "+t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,c(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return c(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return c(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return c(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ot.__extends(t,e),t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter(function(e){return e.length>0}))},t.EMPTY_PATH=new t([]),t}(Kt),Qt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ot.__extends(t,e),t.isValidIdentifier=function(e){return Qt.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Ut(Ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ut(Ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Ut(Ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(Kt),Jt=function(){function e(t){this.path=t,c(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===Ht.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return Ht.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2===0},e.fromSegments=function(t){return new e(new Ht(t.slice()))},e.fromPathString=function(t){return new e(Ht.fromString(t))},e.EMPTY=new e(new Ht([])),e}(),$t=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return Jt.comparator(e.key,t.key)},e}(),Zt=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return Ot.__extends(t,e),t.prototype.field=function(e){return this.data.field(e)},t.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return void 0!==r&&void 0!==i?r.compareTo(i):u("Trying to compare documents on fields that don't exist")},t}($t),en=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Ot.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}($t),tn=function(e){function t(t,n){return e.call(this,t,n)||this}return Ot.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}($t),nn=function(){function e(e,t){this.comparator=e,this.root=t||on.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,on.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,on.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new rn(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new rn(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new rn(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new rn(this.root,e,this.comparator,!0)},e}(),rn=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){c(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),on=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw u("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw u("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw u("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),an=function(){function e(){this.size=0}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new on(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();on.EMPTY=new an;var sn;!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(sn||(sn={}));var un;!function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(un||(un={}));var cn,ln=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(un.Estimate,n);case"previous":return new e(un.Previous,n);case"none":case void 0:return new e(un.Default,n);default:return u("fromSnapshotOptions() called with invalid options.")}},e}(),fn=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return c(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),q(this.typeOrder,e.typeOrder)},e}(),hn=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=sn.NullValue,t.internalValue=null,t}return Ot.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(fn),dn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.BooleanValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?q(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(fn),pn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.NumberValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?H(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(fn),mn=function(e){function t(t){return e.call(this,t)||this}return Ot.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Q(this.internalValue,e.internalValue)},t}(pn),yn=function(e){function t(t){var n=e.call(this,t)||this;return n.internalValue=t,n}return Ot.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Q(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(pn),gn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.StringValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?q(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(fn),vn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.TimestampValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof bn?-1:this.defaultCompareTo(e)},t}(fn),bn=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=sn.TimestampValue,r}return Ot.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===un.Estimate?new vn(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===un.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof vn?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(fn),wn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.BlobValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(fn),En=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=sn.RefValue,r}return Ot.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:Jt.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(fn),Tn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.GeoPointValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(fn),_n=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.ObjectValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=q(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(c(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(c(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return void 0!==this.field(e)},t.prototype.field=function(e){c(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t?n.internalValue.get(e)||void 0:void 0}),n},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new nn(q)),t}(fn),Sn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=sn.ArrayValue,n}return Ot.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return q(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},t}(fn),In=Number,kn=In.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Nn=In.MAX_SAFE_INTEGER||Math.pow(2,53)-1,An=In.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},xn=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Un]:this.memoizedOrderBy=[new Fn(e),Un];else{c(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Rn.ASCENDING;this.memoizedOrderBy.push(a===Rn.ASCENDING?Un:jn)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){c(null==this.getInequalityFilterField()||!(t instanceof Dn)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),c(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){c(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}Y(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Y(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(var t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return c(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!Y(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Dn&&n.isInequality())return n.field}return null},e.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(e){return e instanceof Dn&&e.op===On.ARRAY_CONTAINS})},e.prototype.isDocumentQuery=function(){return Jt.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Jt.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&void 0===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){c(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Cn=function(){function e(){}return e.create=function(e,t,n){if(n.isEqual(hn.INSTANCE)){if(t!==On.EQUAL)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Mn(e)}if(n.isEqual(yn.NAN)){if(t!==On.EQUAL)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Pn(e)}return new Dn(e,t,n)},e}(),On=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;default:return u("Unknown relation: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e}(),Dn=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return Ot.__extends(t,e),t.prototype.matches=function(e){if(this.field.isKeyField()){c(this.value instanceof En,"Comparing on key, but filter value not a RefValue"),c(this.op!==On.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var t=this.value,n=Jt.comparator(e.key,t.key);return this.matchesComparison(n)}var r=e.field(this.field);return void 0!==r&&this.matchesValue(r)},t.prototype.matchesValue=function(e){var t=this;return this.op===On.ARRAY_CONTAINS?e instanceof Sn&&void 0!==e.internalValue.find(function(e){return e.isEqual(t.value)}):this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case On.LESS_THAN:return e<0;case On.LESS_THAN_OR_EQUAL:return e<=0;case On.EQUAL:return 0===e;case On.GREATER_THAN:return e>0;case On.GREATER_THAN_OR_EQUAL:return e>=0;default:return u("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==On.EQUAL&&this.op!==On.ARRAY_CONTAINS},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(Cn),Mn=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return Ot.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return void 0!==t&&null===t.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(Cn),Pn=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return Ot.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field),n=t&&t.value();return"number"===typeof n&&isNaN(n)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(Cn),Rn=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),Ln=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){c(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())c(o instanceof En,"Bound has a non-key value where the key path is being used."),n=Jt.comparator(o.key,t.key);else{var a=t.field(i.field);c(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Rn.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];return n.isEqual(r)}return!0},e}(),Fn=function(){function e(e,t){this.field=e,void 0===t&&(t=Rn.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Zt.compareByKey(e,t):Zt.compareByField(this.field,e,t);switch(this.dir){case Rn.ASCENDING:return n;case Rn.DESCENDING:return-1*n;default:return u("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Un=new Fn(Yt.keyField(),Rn.ASCENDING),jn=new Fn(Yt.keyField(),Rn.DESCENDING),Bn=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new zt(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new zt(0,0)),e}();!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(cn||(cn={}));var Vn,qn=function(){function e(e,t,n,r,i,o){void 0===i&&(i=Bn.MIN),void 0===o&&(o=l()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),zn=function(){function e(e){this.comparator=e,this.data=new nn(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Wn(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Wn(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Wn=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Gn=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new zn(Yt.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.applyTo=function(e){var t=_n.EMPTY;return this.fields.forEach(function(n){if(n.isEmpty())return e;var r=e.field(n);void 0!==r&&(t=t.set(n,r))}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),Xn=function(){function e(e,t){this.field=e,this.transform=t}return Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),Kn=function(){function e(e,t){this.version=e,this.transformResults=t}return e}();!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(Vn||(Vn={}));var Hn,Qn=function(){function e(e,t){this.updateTime=e,this.exists=t,c(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Zt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Zt:(c(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return z(this.updateTime,e.updateTime)&&this.exists===e.exists},e.NONE=new e,e}(),Yn=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&c(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Zt?e.version:Bn.MIN},e}(),Jn=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=Vn.Set,i}return Ot.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),c(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Zt(this.key,n,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Yn.getPostMutationVersion(e);return new Zt(this.key,r,this.value,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(Yn),$n=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=Vn.Patch,o}return Ot.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),c(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new tn(this.key,t.version);var n=this.patchDocument(e);return new Zt(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Yn.getPostMutationVersion(e),i=this.patchDocument(e);return new Zt(this.key,r,i,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Zt?e.data:_n.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=void 0!==r?e.set(n,r):e.delete(n)}}),e},t}(Yn),Zn=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=Vn.Transform,r.precondition=Qn.exists(!0),r}return Ot.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),c(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new tn(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data,r);return new Zt(this.key,i,o,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,t),o=this.transformObject(r.data,i);return new Zt(this.key,r.version,o,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){for(var e=0,t=this.fieldTransforms;e<t.length;e++){if(!t[e].isIdempotent)return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){var e=new zn(Yt.comparator);return this.fieldTransforms.forEach(function(t){return e=e.add(t.field)}),new Gn(e)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&W(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){c(e instanceof Zt,"Unknown MaybeDocument type "+e);var t=e;return c(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];c(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Zt&&(a=e.field(i.field)||null),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;t instanceof Zt&&(s=t.field(o.field)||null),n.push(a.applyToLocalView(s,e))}return n},t.prototype.transformObject=function(e,t){c(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n],i=r.field;e=e.set(i,t[n])}return e},t}(Yn),er=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=Vn.Delete,r}return Ot.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),c(null==t.transformResults,"Transform results received by DeleteMutation."),new en(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&c(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new en(this.key,Bn.forDeletedDoc())):e},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),t}(Yn),tr=function(){function e(){this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return new bn(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),nr=function(){function e(e){this.elements=e,this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=$(e),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)}(i)}return new Sn(t)},e.prototype.isEqual=function(t){return t instanceof e&&W(t.elements,this.elements)},e}(),rr=function(){function e(e){this.elements=e,this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=$(e),n=0,r=this.elements;n<r.length;n++){var i=r[n];!function(e){t=t.filter(function(t){return!t.isEqual(e)})}(i)}return new Sn(t)},e.prototype.isEqual=function(t){return t instanceof e&&W(t.elements,this.elements)},e}(),ir=function(){function e(e){this.operand=e,this.isIdempotent=!1}return e.prototype.applyToLocalView=function(e,t){if(e instanceof mn&&this.operand instanceof mn){var n=e.internalValue+this.operand.internalValue;return new mn(n)}if(e instanceof pn){var n=e.internalValue+this.operand.internalValue;return new yn(n)}return this.operand},e.prototype.applyToRemoteDocument=function(e,t){return c(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}(),or=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}();!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Hn||(Hn={}));var ar,sr=new nn(Jt.comparator),ur=new nn(Jt.comparator),cr=new nn(Jt.comparator),lr=new zn(Jt.comparator),fr=new zn(q),hr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||Jt.comparator(t.key,n.key)}:function(e,t){return Jt.comparator(e.key,t.key)},this.keyedMap=se(),this.sortedSet=new nn(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(ar||(ar={}));var dr;!function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(dr||(dr={}));var pr,mr=function(){function e(){this.changeMap=new nn(Jt.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);if(!n)return void(this.changeMap=this.changeMap.insert(t,e));e.type!==ar.Added&&n.type===ar.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===ar.Metadata&&n.type!==ar.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===ar.Modified&&n.type===ar.Modified?this.changeMap=this.changeMap.insert(t,{type:ar.Modified,doc:e.doc}):e.type===ar.Modified&&n.type===ar.Added?this.changeMap=this.changeMap.insert(t,{type:ar.Added,doc:e.doc}):e.type===ar.Removed&&n.type===ar.Added?this.changeMap=this.changeMap.remove(t):e.type===ar.Removed&&n.type===ar.Modified?this.changeMap=this.changeMap.insert(t,{type:ar.Removed,doc:n.doc}):e.type===ar.Added&&n.type===ar.Removed?this.changeMap=this.changeMap.insert(t,{type:ar.Modified,doc:e.doc}):u("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n))},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),yr=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:ar.Added,doc:e})}),new e(t,n,hr.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(this.fromCache!==e.fromCache||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!this.query.isEqual(e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),gr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=(r={},r[t]=vr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Bn.MIN,i,le(),oe(),ce())},e}(),vr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(l(),n,ce(),ce(),ce())},e}(),br=function(){function e(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r}return e}(),wr=function(){function e(e,t){this.targetId=e,this.existenceFilter=t}return e}();!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(pr||(pr={}));var Er=function(){function e(e,t,n,r){void 0===n&&(n=l()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}return e}(),Tr=function(){function e(){this.pendingResponses=0,this.documentChanges=he(),this._resumeToken=l(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=ce(),t=ce(),n=ce();return this.documentChanges.forEach(function(r,i){switch(i){case ar.Added:e=e.add(r);break;case ar.Modified:t=t.add(r);break;case ar.Removed:n=n.add(r);break;default:u("Encountered invalid change type: "+i)}}),new vr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=he()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),_r=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=oe(),this.pendingDocumentTargetMapping=fe(),this.pendingTargetResets=new zn(q)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Zt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof en&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){var r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case pr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case pr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case pr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),c(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case pr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case pr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:u("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):p(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new Jt(i.path);this.removeDocumentFromTarget(t,o,new en(o,Bn.forDeletedDoc()))}else c(1===n,"Single document existence filter with count: "+n);else{this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}}},e.prototype.createRemoteEvent=function(e){var t=this,n={};p(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new Jt(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new en(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=ce();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===cn.LimboResolution||(i=!1,!1)}),i&&(r=r.add(e))});var i=new gr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=oe(),this.pendingDocumentTargetMapping=fe(),this.pendingTargetResets=new zn(q),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?ar.Modified:ar.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,ar.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e),n=t.toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Tr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new zn(q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;c(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Tr,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}(),Sr=function(){var e={};return e[Rn.ASCENDING.name]="ASCENDING",e[Rn.DESCENDING.name]="DESCENDING",e}(),Ir=function(){var e={};return e[On.LESS_THAN.name]="LESS_THAN",e[On.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",e[On.GREATER_THAN.name]="GREATER_THAN",e[On.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",e[On.EQUAL.name]="EQUAL",e[On.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",e}(),kr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/),Nr=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Ft.UNKNOWN:ne(e.code);return new Ut(t,e.message||"")},e.prototype.toInt32Value=function(e){return Y(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return t="object"===typeof e?e.value:e,Y(t)?null:t},e.prototype.toTimestamp=function(e){return{seconds:e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"===typeof e)return this.fromIso8601String(e);c(!!e,"Cannot deserialize null or undefined timestamp.");var t=pe(e.seconds||"0"),n=e.nanos||0;return new zt(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=kr.exec(e);if(c(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new zt(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"===typeof e?(c(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Bt.fromBase64String(e)):(c(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Bt.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return c(!!e,"Trying to deserialize version that isn't set"),Bn.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=Ht.fromString(e);return c(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return c(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),c(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Jt(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?Ht.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new Ht(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new Ht(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return c(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof hn)return{nullValue:"NULL_VALUE"};if(e instanceof dn)return{booleanValue:e.value()};if(e instanceof mn)return{integerValue:""+e.value()};if(e instanceof yn){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof gn?{stringValue:e.value()}:e instanceof _n?{mapValue:this.toMapValue(e)}:e instanceof Sn?{arrayValue:this.toArrayValue(e)}:e instanceof vn?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Tn?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof wn?{bytesValue:this.toBytes(e.value())}:e instanceof En?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:u("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this,n=e.value_type;if(me(e,n,"nullValue"))return hn.INSTANCE;if(me(e,n,"booleanValue"))return dn.of(e.booleanValue);if(me(e,n,"integerValue"))return new mn(pe(e.integerValue));if(me(e,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return yn.NAN;if("Infinity"===e.doubleValue)return yn.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return yn.NEGATIVE_INFINITY}return new yn(e.doubleValue)}if(me(e,n,"stringValue"))return new gn(e.stringValue);if(me(e,n,"mapValue"))return this.fromFields(e.mapValue.fields||{});if(me(e,n,"arrayValue")){de(e.arrayValue,"arrayValue");var r=e.arrayValue.values||[];return new Sn(r.map(function(e){return t.fromValue(e)}))}if(me(e,n,"timestampValue"))return de(e.timestampValue,"timestampValue"),new vn(this.fromTimestamp(e.timestampValue));if(me(e,n,"geoPointValue")){de(e.geoPointValue,"geoPointValue");var i=e.geoPointValue.latitude||0,o=e.geoPointValue.longitude||0;return new Tn(new qt(i,o))}if(me(e,n,"bytesValue")){de(e.bytesValue,"bytesValue");var a=this.fromBlob(e.bytesValue);return new wn(a)}if(me(e,n,"referenceValue")){de(e.referenceValue,"referenceValue");var s=this.fromResourceName(e.referenceValue),c=new Xt(s.get(1),s.get(3)),l=new Jt(this.extractLocalPathFromResourceName(s));return new En(c,l)}return u("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return c(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new Zt(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=e,r=_n.EMPTY;return y(n,function(e,n){r=r.set(new Yt([e]),t.fromValue(n))}),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){c(!!e.found,"Tried to deserialize a found document from a missing document."),de(e.found.name,"doc.found.name"),de(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new Zt(t,n,r,{},e.found)},e.prototype.fromMissing=function(e){c(!!e.missing,"Tried to deserialize a missing document from a found document."),c(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new en(t,n)},e.prototype.fromMaybeDocument=function(e){var t=e.result;return me(e,t,"found")?this.fromFound(e):me(e,t,"missing")?this.fromMissing(e):u("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case pr.Added:return"ADD";case pr.Current:return"CURRENT";case pr.NoChange:return"NO_CHANGE";case pr.Removed:return"REMOVE";case pr.Reset:return"RESET";default:return u("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof wr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof br){if(e.newDoc instanceof Zt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof en){var t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Er){var n=void 0;return e.cause&&(n={code:re(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return u("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=e.response_type;if(me(e,n,"targetChange")){de(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new Er(r,i,o,s||null)}else if(me(e,n,"documentChange")){de(e.documentChange,"documentChange"),de(e.documentChange.document,"documentChange.name"),de(e.documentChange.document.name,"documentChange.document.name"),de(e.documentChange.document.updateTime,"documentChange.document.updateTime");var c=e.documentChange,l=this.fromName(c.document.name),f=this.fromVersion(c.document.updateTime),h=this.fromFields(c.document.fields||{}),d=new Zt(l,f,h,{},c.document),p=c.targetIds||[],m=c.removedTargetIds||[];t=new br(p,m,d.key,d)}else if(me(e,n,"documentDelete")){de(e.documentDelete,"documentDelete"),de(e.documentDelete.document,"documentDelete.document");var y=e.documentDelete,l=this.fromName(y.document),f=y.readTime?this.fromVersion(y.readTime):Bn.forDeletedDoc(),d=new en(l,f),m=y.removedTargetIds||[];t=new br([],m,d.key,d)}else if(me(e,n,"documentRemove")){de(e.documentRemove,"documentRemove"),de(e.documentRemove.document,"documentRemove");var g=e.documentRemove,l=this.fromName(g.document),m=g.removedTargetIds||[];t=new br([],m,l,null)}else{if(!me(e,n,"filter"))return u("Unknown change type "+JSON.stringify(e));de(e.filter,"filter"),de(e.filter.targetId,"filter.targetId");var v=e.filter,b=v.count||0,w=new or(b),E=v.targetId;t=new wr(E,w)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?pr.NoChange:"ADD"===e?pr.Added:"REMOVE"===e?pr.Removed:"CURRENT"===e?pr.Current:"RESET"===e?pr.Reset:u("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!me(e,e.response_type,"targetChange"))return Bn.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Bn.MIN:t.readTime?this.fromVersion(t.readTime):Bn.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Jn)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof er)t={delete:this.toName(e.key)};else if(e instanceof $n)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Zn))return u("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Qn.NONE;if(e.update){de(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new $n(r,i,o,n)}return new Jn(r,i,n)}if(e.delete){var r=this.fromName(e.delete);return new er(r,n)}if(e.transform){var r=this.fromName(e.transform.document),a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return c(!0===n.exists,'Transforms only support precondition "exists == true"'),new Zn(r,a)}return u("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return c(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:u("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Qn.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Qn.exists(e.exists):Qn.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new Kn(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(c(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof tr)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof nr)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof rr)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof ir)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw u("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=e.transform_type,r=null;if(me(e,n,"setToServerValue"))c("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),r=tr.instance;else if(me(e,n,"appendMissingElements")){var i=e.appendMissingElements.values||[];r=new nr(i.map(function(e){return t.fromValue(e)}))}else if(me(e,n,"removeAllFromArray")){var i=e.removeAllFromArray.values||[];r=new rr(i.map(function(e){return t.fromValue(e)}))}else if(me(e,n,"increment")){var o=this.fromValue(e.increment);c(o instanceof pn,"NUMERIC_ADD transform requires a NumberValue"),r=new ir(o)}else u("Unknown transform proto: "+JSON.stringify(e));var a=Yt.fromServerFormat(e.fieldPath);return new Xn(a,r)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;c(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return xn.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(c(n.length%2===0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c(n.length%2!==0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){c(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var l=null;n.startAt&&(l=this.fromCursor(n.startAt));var f=null;return n.endAt&&(f=this.fromCursor(n.endAt)),new xn(t,i,s,a,u,l,f)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case cn.Listen:return null;case cn.ExistenceFilterMismatch:return"existence-filter-mismatch";case cn.LimboResolution:return"limbo-document";default:return u("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)},t.targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof Dn?t.toRelationFilter(e):t.toUnaryFilter(e)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromRelationFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):u("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Ln(r,n)},e.prototype.toDirection=function(e){return Sr[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Rn.ASCENDING;case"DESCENDING":return Rn.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return Ir[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return On.EQUAL;case"GREATER_THAN":return On.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return On.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return On.LESS_THAN;case"LESS_THAN_OR_EQUAL":return On.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return On.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return u("Unspecified relation");default:return u("Unknown relation")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return Yt.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new Fn(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.toRelationFilter=function(e){return e instanceof Dn?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:u("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromRelationFilter=function(e){return new Dn(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryFilter=function(e){return e instanceof Pn?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof Mn?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:u("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return new Pn(t);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return new Mn(n);case"OPERATOR_UNSPECIFIED":return u("Unspecified filter");default:return u("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=e.fieldPaths||[],n=t.map(function(e){return Yt.fromServerFormat(e)});return Gn.fromArray(n)},e}(),Ar=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){c(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){c(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){c(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){c(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){c(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){c(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),xr="Connection",Cr={BatchGetDocuments:"batchGet",Commit:"commit"},Or="gl-js/ fire/"+Pt,Dr=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Or},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(a,s){var c=new Dt.XhrIo;c.listenOnce(Dt.EventType.COMPLETE,function(){try{switch(c.getLastErrorCode()){case Dt.ErrorCode.NO_ERROR:var t=c.getResponseJson();o(xr,"XHR received:",JSON.stringify(t)),a(t);break;case Dt.ErrorCode.TIMEOUT:o(xr,'RPC "'+e+'" timed out'),s(new Ut(Ft.DEADLINE_EXCEEDED,"Request time out"));break;case Dt.ErrorCode.HTTP_ERROR:var n=c.getStatus();o(xr,'RPC "'+e+'" failed with status:',n,"response text:",c.getResponseText()),n>0?s(new Ut(ie(n),"Server responded with status "+c.getStatusText())):(o(xr,'RPC "'+e+'" failed'),s(new Ut(Ft.UNAVAILABLE,"Connection failed.")));break;default:u('RPC "'+e+'" failed with unanticipated webchannel error '+c.getLastErrorCode()+": "+c.getLastError()+", giving up.")}}finally{o(xr,'RPC "'+e+'" completed.')}});var l=JSON.stringify(t);o(xr,"XHR sending: ",i+" "+l);var f={"Content-Type":"text/plain"};r.modifyHeadersForRequest(f,n),c.send(i,"POST",l,f,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Dt.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),Mt.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");o(xr,"Creating WebChannel: "+a+" "+i);var s=r.createWebChannel(a,i),u=!1,l=!1,f=new Ar({sendFn:function(e){l?o(xr,"Not sending because WebChannel is closed:",e):(u||(o(xr,"Opening WebChannel transport."),s.open(),u=!0),o(xr,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}}),h=function(e,t){s.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return h(Dt.WebChannel.EventType.OPEN,function(){l||o(xr,"WebChannel transport opened.")}),h(Dt.WebChannel.EventType.CLOSE,function(){l||(l=!0,o(xr,"WebChannel transport closed"),f.callOnClose())}),h(Dt.WebChannel.EventType.ERROR,function(e){l||(l=!0,o(xr,"WebChannel transport errored:",e),f.callOnClose(new Ut(Ft.UNAVAILABLE,"The operation could not be completed")))}),h(Dt.WebChannel.EventType.MESSAGE,function(e){if(!l){var t=e.data[0];c(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){o(xr,"WebChannel received error:",n);var r=n.status,i=te(r),a=n.message;void 0===i&&(i=Ft.INTERNAL,a="Unknown error status: "+r+" with message "+n.message),l=!0,f.callOnClose(new Ut(i,a)),s.close()}else o(xr,"WebChannel received:",t),f.callOnMessage(t)}}),setTimeout(function(){f.callOnOpen()},0),f},e.prototype.makeUrl=function(e){var t=Cr[e];c(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),Mr=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!==typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!==typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!==typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new Dr(e))},e.prototype.newSerializer=function(e){return new Nr(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();Lt.setPlatform(new Mr);var Pr,Rr=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),Lr=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e}();!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection"}(Pr||(Pr={}));var Fr,Ur=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=Date.now()+r,s=new e(t,n,a,i,o);return s.start(r),s},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ut(Ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),jr=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueue=function(e){var t=this;this.verifyNotFailed();var n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw a("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),c(t>=0,"Attempted to schedule an operation with a negative delay of "+t),c(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var i=Ur.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&u("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){c(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){c(e===Pr.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Pr.All&&i.timerId===e)break}return t.drain()})},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);c(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),Br="\x01",Vr="\x01",qr="\x10",zr="\x11",Wr=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,c(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&c(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;c(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&c(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(e)&&(t=i.applyToLocalView(t,t,this.localWriteTime))}for(var o=t,a=0,s=this.mutations;a<s.length;a++){var i=s[a];i.key.isEqual(e)&&(t=i.applyToLocalView(t,o,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},ce())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&W(this.mutations,e.mutations)&&W(this.baseMutations,e.baseMutations)},e}(),Gr=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){c(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=ue(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Xr=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&u("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=0,i=t;r<i.length;r++){var o=i[r];!function(t){n=n.next(function(n){return n?e.resolve(n):t()})}(o)}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),Kr=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return c(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Se(e).iterate({index:pi.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=_e(n),ke(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=_e(t),ke(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Ie(e),a=Se(e);return a.add({}).next(function(s){c("number"===typeof s,"Auto-generated key is not a number");var u=new Wr(s,t,n,r),l=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var f=[],h=0,d=r;h<d.length;h++){var p=d[h],m=mi.key(i.userId,p.key.path,s);f.push(a.put(l)),f.push(o.put(m,mi.PLACEHOLDER)),f.push(i.indexManager.addToCollectionParentIndex(e,p.key.path.popLast()))}return Xr.waitFor(f).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Se(e).get(t).next(function(e){return e?(c(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Xr.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this;return this.getMutationQueueMetadata(e).next(function(r){var i=t+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return Se(e).iterate({index:pi.userMutationsIndex,range:o},function(e,t,r){t.userId===n.userId&&(c(t.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(t)),r.done()}).next(function(){return a})})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Se(e).loadAll(pi.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=mi.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ie(e).iterate({range:i},function(r,i,a){var s=r[0],l=r[1],f=r[2],h=be(l);return s===n.userId&&t.path.isEqual(h)?Se(e).get(f).next(function(e){if(!e)throw u("Dangling document-mutation reference found: "+r+" which points to "+f);c(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+f),o.push(n.serializer.fromDbMutationBatch(e))}):void a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new zn(q),i=[];return t.forEach(function(t){var o=mi.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Ie(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=be(s);if(a!==n.userId||!t.path.isEqual(c))return void o.done();r=r.add(u)});i.push(s)}),Xr.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;c(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=mi.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new zn(q);return Ie(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=be(u);if(a!==n.userId||!r.isPrefixOf(l))return void o.done();l.length===i&&(s=s.add(c))}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Se(e).get(t).next(function(e){if(null===e)throw u("Dangling document-mutation reference found, which points to "+t);c(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),Xr.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return Te(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),Xr.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Xr.resolve();var r=IDBKeyRange.lowerBound(mi.prefixForUser(t.userId)),i=[];return Ie(e).iterate({range:r},function(e,n,r){if(e[0]!==t.userId)return void r.done();var o=be(e[1]);i.push(o)}).next(function(){c(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return we(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return ke(e).get(this.userId).next(function(e){return e||new di(t.userId,-1,"")})},e}(),Hr=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(Fr||(Fr={}));var Qr,Yr=function(){function e(e,t){this.generatorId=e,c((e&Hr)===e,"Generator ID "+e+" contains more than "+Hr+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<Hr,e},e.prototype.after=function(e){return this.seek(e+(1<<Hr)),this.next()},e.prototype.seek=function(e){c((e&Hr)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(Fr.QueryCache,2)},e.forSyncEngine=function(){return new e(Fr.SyncEngine)},e}(),Jr=function(){function e(e){this.db=e}return e.openOrCreate=function(t,n,r){return c(e.isAvailable(),"IndexedDB not supported in current environment."),o("SimpleDb","Opening database:",t),new Xr(function(i,a){var s=window.indexedDB.open(t,n);s.onsuccess=function(t){var n=t.target.result;i(new e(n))},s.onblocked=function(){a(new Ut(Ft.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(e){var t=e.target.error;a("VersionError"===t.name?new Ut(Ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},s.onupgradeneeded=function(e){o("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new Zr(s.transaction);r.createOrUpgrade(n,i,e.oldVersion,ci).next(function(){o("SimpleDb","Database upgrade to version "+ci+" complete")})}}).toPromise()},e.delete=function(e){return o("SimpleDb","Removing database:",e),Ne(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"===typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/chip-player-js"}).USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent,n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.getStore=function(e,t){return e.store(t)},e.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_")[0]:"-1";return Number(n)},e.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.runTransaction=function(e,t,n){var r=Zr.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),Xr.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),$r=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return Ne(this.dbCursor.delete())},e}(),Zr=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Lr,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){t.completionDeferred.reject(e.target.error)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(o("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return c(!!t,"Object store not part of transaction: "+e),new ei(t)},e}(),ei=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(o("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(o("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ne(n)},e.prototype.add=function(e){return o("SimpleDb","ADD",this.store.name,e,e),Ne(this.store.add(e))},e.prototype.get=function(e){var t=this;return Ne(this.store.get(e)).next(function(n){return void 0===n&&(n=null),o("SimpleDb","GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return o("SimpleDb","DELETE",this.store.name,e),Ne(this.store.delete(e))},e.prototype.count=function(){return o("SimpleDb","COUNT",this.store.name),Ne(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){o("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Xr(function(n,r){t.onerror=function(e){r(e.target.error)},t.onsuccess=function(t){var r=t.target.result;if(!r)return void n();e(r.primaryKey,r.value).next(function(e){e?r.continue():n()})}})},e.prototype.iterateCursor=function(e,t){var n=[];return new Xr(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(!i)return void r();var o=new $r(i),a=t(i.primaryKey,i.value,o);if(a instanceof Xr){var s=a.catch(function(e){return o.done(),Xr.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}}).next(function(){return Xr.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"===typeof e?n=e:(c(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}(),ti=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Yr.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Bn.fromTimestamp(new zt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return Oe(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Ae(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return c(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Ae(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return Xr.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return Ae(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return Ce(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return xe(e).put(Ti.key,t)},e.prototype.saveQueryData=function(e,t){return Ae(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ae(e).iterate({range:i,index:wi.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=De(e);return t.forEach(function(t){var a=ye(t.path);i.push(o.put(new Ei(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),Xr.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=De(e);return Xr.forEach(t,function(t){var o=ye(t.path);return Xr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=De(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=De(e),i=ce();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=be(e[1]),o=new Jt(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=ye(t.path),r=IDBKeyRange.bound([n],[G(n)],!1,!0),i=0;return De(e).iterate({index:Ei.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())}).next(function(){return i>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return Ae(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}(),ni=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return void(this.inner[n]=[[e,t]]);for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){y(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},e.prototype.isEmpty=function(){return g(this.inner)},e}(),ri=function(){function e(){this.changes=oe(),this.documentSizes=new ni(function(e){return e.toString()})}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this,r=this.assertChanges(),i=r.get(t);return i?Xr.resolve(i):this.getFromCache(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},e.prototype.getEntries=function(e,t){var n=this;return this.getAllFromCache(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},e.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},e.prototype.assertChanges=function(){return c(null!==this.changes,"Changes have already been applied."),this.changes},e}(),ii="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",oi=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=Jr.getStore(e,Si.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(e,t,n){var r=[];if(t.length>0){for(var i=Re(e),o=ce(),a=0,s=t;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(Fe(c),l)),o=o.add(c),r.push(this.indexManager.addToCollectionParentIndex(e,c.path.popLast()))}this.keepDocumentChangeLog&&r.push(Le(e).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(e,n))}return Xr.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=Re(e),r=Fe(t);return n.get(r).next(function(e){return e?n.delete(r).next(function(){return Ue(e)}):Xr.resolve(0)})},e.prototype.getEntry=function(e,t){var n=this;return Re(e).get(Fe(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return Re(e).get(Fe(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Ue(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=ae();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=ae(),i=new nn(Jt.comparator);return this.forEachDbEntry(e,t,function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i=i.insert(e,Ue(t))):(r=r.insert(e,null),i=i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Xr.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Re(e).iterate({range:r},function(e,t,r){for(var a=Jt.fromSegments(e);o&&Jt.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=se(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return Re(e).iterate({range:a},function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof Zt&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;c(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=ce(),r=oe(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Le(e);return a.iterate({range:i},function(e,r){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(a).next(function(){return Xr.reject(new Ut(Ft.DATA_LOSS,ii))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new en(n,Bn.forDeletedDoc());r=r.insert(n,t)}))}),Xr.waitFor(i)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Le(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new ai(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Me(e).get(bi.key).next(function(e){return c(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return Me(e).put(bi.key,t)},e.prototype.updateSize=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.setMetadata(e,r)})},e}(),ai=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return Ot.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var o=t.documentCache.serializer.toDbRemoteDocument(n),a=t.documentSizes.get(e);c(void 0!==a,"Attempting to change document "+e.toString()+" without having read it first");var s=Ue(o);r+=s-a,i.push({key:e,doc:o})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(ri),si=function(){function e(){this.collectionParentIndex=new ui}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Xr.resolve()},e.prototype.getCollectionParents=function(e,t){return Xr.resolve(this.collectionParentIndex.getEntries(t))},e}(),ui=function(){function e(){this.index={}}return e.prototype.add=function(e){c(e.length%2===1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zn(Ht.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.getEntries=function(e){return(this.index[e]||new zn(Ht.comparator)).toArray()},e}(),ci=8,li=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;c(n<r&&n>=0&&r<=ci,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(Be(e),Ve(e),Ge(e),ze(e));var o=Xr.resolve();return n<3&&r>=3&&(0!==n&&(Xe(e),Ge(e)),o=o.next(function(){return Ke(t)})),n<4&&r>=4&&(0!==n&&(o=o.next(function(){return qe(e,t)})),o=o.next(function(){Qe(e),He(e)})),n<5&&r>=5&&(o=o.next(function(){return i.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(o=o.next(function(){return We(e),i.addDocumentGlobal(t)})),n<7&&r>=7&&(o=o.next(function(){return i.ensureSequenceNumbers(t)})),n<8&&r>=8&&(o=o.next(function(){return i.createCollectionParentIndex(e,t)})),o},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(vi.store).iterate(function(e,n){t+=Ue(n)}).next(function(){var n=new bi(t);return e.store(bi.store).put(bi.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(di.store),r=e.store(pi.store);return n.loadAll().next(function(n){return Xr.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(pi.userMutationsIndex,i).next(function(r){return Xr.forEach(r,function(r){c(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Te(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(Ei.store),n=e.store(vi.store);return Oe(e).next(function(e){var r=function(n){return t.put(new Ei(0,ye(n),e))},i=[];return n.iterate(function(e,n){var o=new Ht(e),a=je(o);i.push(t.get(a).next(function(e){return e?Xr.resolve():r(o)}))}).next(function(){return Xr.waitFor(i)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(_i.store,{keyPath:_i.keyPath});var n=t.store(_i.store),r=new ui,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ye(i)})}};return t.store(vi.store).iterate({keysOnly:!0},function(e,t){var n=new Ht(e);return i(n.popLast())}).next(function(){return t.store(mi.store).iterate({keysOnly:!0},function(e,t){var n=(e[0],e[1]),r=(e[2],be(n));return i(r.popLast())})})},e}(),fi=function(){function e(e,t){this.seconds=e,this.nanoseconds=t}return e}(),hi=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),di=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),pi=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),mi=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,ye(t)]},e.key=function(e,t,n){return[e,ye(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),yi=function(){function e(e,t){this.path=e,this.readTime=t}return e}(),gi=function(){function e(e,t){this.path=e,this.version=t}return e}(),vi=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),bi=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),wi=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),Ei=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,c(0===e===(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),Ti=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),_i=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}(),Si=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),Ii=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store="clientMetadata",e.keyPath="clientId",e}(),ki=[di.store,pi.store,mi.store,vi.store,wi.store,hi.store,Ti.store,Ei.store],Ni=ki,Ai=Ni.concat([Ii.store,Si.store]),xi=Ai.concat([bi.store]),Ci=xi.concat([_i.store]),Oi=Ci,Di=function(){function e(){this.collectionParentsCache=new ui}return e.prototype.addToCollectionParentIndex=function(e,t){if(c(t.length%2===1,"Expected a collection path."),this.collectionParentsCache.add(t)){c(t.length>=1,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return Ye(e).put({collectionId:n,parent:ye(r)})}return Xr.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[G(t),""],!1,!0);return Ye(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(be(o.parent))}return n})},e}(),Mi=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Jt.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new en(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var t=Jt.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new tn(t,n)}return u("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof Zt){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new vi(null,null,t,n)}if(e instanceof en){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version),n=e.hasCommittedMutations;return new vi(null,new yi(r,i),null,n)}if(e instanceof tn){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return new vi(new gi(r,i),null,null,!0)}return u("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new fi(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new zt(e.seconds,e.nanoseconds);return Bn.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new pi(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=zt.fromMillis(e.localWriteTimeMs);return new Wr(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(ye(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=ce(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Jt(be(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=Je(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new qn(t,e.targetId,cn.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){c(cn.Listen===e.purpose,"Only queries with purpose "+cn.Listen+" may be stored, got "+e.purpose);var t,n=this.toDbTimestamp(e.snapshotVersion);t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query);var r;return e.resumeToken instanceof Uint8Array?(c("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/chip-player-js"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),r=e.resumeToken.toString()):r=e.resumeToken,new wi(e.targetId,e.query.canonicalId(),n,r,e.sequenceNumber,t)},e}(),Pi=function(){function e(e){this.maxElements=e,this.buffer=new zn($e),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();$e(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Ri={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Li=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Fi=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.gcTask=null}return e.prototype.start=function(){c(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Li.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;c(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;o("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Pr.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(et)})},e}(),Ui=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Xr.resolve(Rr.INVALID);var r=new Pi(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Li.COLLECTION_DISABLED?(o("LruGarbageCollector","Garbage collection skipped; disabled"),Xr.resolve(Ri)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(o("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ri):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,i,a,s,u,c,l,f,h=this;return s=Date.now(),this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>h.params.maximumSequenceNumbersToCollect?(o("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),i=h.params.maximumSequenceNumbersToCollect):i=t,u=Date.now(),h.nthSequenceNumber(e,i)}).next(function(r){return n=r,c=Date.now(),h.removeTargets(e,n,t)}).next(function(t){return a=t,l=Date.now(),h.removeOrphanedDocuments(e,n)}).next(function(e){if(f=Date.now(),r()<=At.DEBUG){o("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(u-s)+"ms\n\tDetermined least recently used "+i+" in "+(c-u)+"ms\n\tRemoved "+a+" targets in "+(l-c)+"ms\n\tRemoved "+e+" documents in "+(f-l)+"ms\nTotal Duration: "+(f-s)+"ms")}return Xr.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:e})})},e}(),ji=function(){function e(){}return e}(),Bi="IndexedDbPersistence",Vi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qi="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",zi="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Wi=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return Ot.__extends(t,e),t}(ji),Gi=function(){function e(t,n,r,i,o,a,s){if(this.persistenceKey=t,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new Ut(Ft.UNIMPLEMENTED,zi);if(this.referenceDelegate=new Xi(this,a),this.dbName=t+e.MAIN_DATABASE,this.serializer=new Mi(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new ti(this.referenceDelegate,this.serializer),this.indexManager=new Di,this.remoteDocumentCache=new oi(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new Ut(Ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Wi)return Jr.getStore(e.simpleDbTransaction,t);throw u("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,r,i,o,a){return Ot.__awaiter(this,void 0,void 0,function(){var s;return Ot.__generator(this,function(u){switch(u.label){case 0:return s=new e(t,n,r,i,o,a),[4,s.start()];case 1:return u.sent(),[2,s]}})})},e.createMultiClientIndexedDbPersistence=function(t,n,r,i,o,a,s){return Ot.__awaiter(this,void 0,void 0,function(){var u;return Ot.__generator(this,function(c){switch(c.label){case 0:return u=new e(t,n,r,i,o,a,s),[4,u.start()];case 1:return c.sent(),[2,u]}})})},e.prototype.start=function(){var e=this;return c(!this.started,"IndexedDbPersistence double-started!"),c(null!==this.window,"Expected 'window' to be defined"),Jr.openOrCreate(this.dbName,ci,new li(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[Ti.store],function(t){return Oe(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new Rr(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",Oi,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return Ot.__awaiter(t,void 0,void 0,function(){return Ot.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return Ot.__awaiter(t,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",Oi,function(t){return nt(t).put(new Ii(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return tt(e).get(hi.key).next(function(e){return Xr.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return nt(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return Ot.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Ot.__generator(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=e.getStore(i,Ii.store);return o.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return Xr.forEach(n,function(e){return o.delete(e.clientId)})}).next(function(){if(t=t.filter(function(e){return e.clientId!==r.clientId}),t.length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),i.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Pr.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return tt(e).get(hi.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Ut(Ft.FAILED_PRECONDITION,qi);return!1}}return!(!t.networkEnabled||!t.inForeground)||nt(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&o(Bi,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return Ot.__awaiter(this,void 0,void 0,function(){var e=this;return Ot.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[hi.store,Ii.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[Ii.store],function(t){return nt(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return Ot.__awaiter(this,void 0,void 0,function(){var n;return Ot.__generator(this,function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,Jr.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return c(this.started,"Cannot initialize MutationQueue before persistence is started."),Kr.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return c(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return c(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return c(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return o(Bi,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",Oi,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw a("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new Ut(Ft.FAILED_PRECONDITION,Vi);return n(new Wi(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Wi(i,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return tt(e).get(hi.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Ut(Ft.FAILED_PRECONDITION,qi)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new hi(this.clientId,this.allowTabSynchronization,Date.now());return tt(e).put(hi.key,t)},e.isAvailable=function(){return Jr.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=tt(e);return n.get(hi.key).next(function(e){return t.isLocalClient(e)?(o(Bi,"Releasing primary lease."),n.delete(hi.key)):Xr.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now(),r=n-t,i=n;return!(e<r)&&(!(e>i)||(a("Detected an update time that is in the future: "+e+" > "+i),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"===typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(c(null!==this.document&&"function"===typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"===typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(c("function"===typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return o(Bi,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return a(Bi,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){a("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}(),Xi=function(){function e(e,t){this.db=e,this.garbageCollector=new Ui(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return ot(e,t)},e.prototype.removeReference=function(e,t){return ot(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return ot(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Xr.resolve(!0):Ee(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return r++,n.removeOrphanedDocument(e,a).next(function(e){i+=e})});o.push(u)}}).next(function(){return Xr.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(e,-i)}).next(function(){return r})},e.prototype.removeOrphanedDocument=function(e,t){var n=0,r=this.db.getRemoteDocumentCache();return Xr.waitFor([De(e).delete(rt(t)),r.removeEntry(e,t).next(function(e){n+=e})]).next(function(){return n})},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return ot(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=De(e),i=Rr.INVALID;return r.iterate({index:Ei.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Rr.INVALID&&t(new Jt(be(n)),i),i=s,n=a):i=Rr.INVALID}).next(function(){i!==Rr.INVALID&&t(new Jt(be(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}(),Ki=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=ae();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=oe();return i.forEach(function(e,t){t||(t=new en(e,Bn.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Jt(t)).next(function(e){var t=se();return e instanceof Zt&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;c(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=se();return this.indexManager.getCollectionParents(e,r).next(function(o){return Xr.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(t.path.isImmediateParentOf(c.path)){var l=n.get(c),f=u.applyToLocalView(l,l,o.localWriteTime);n=f instanceof Zt?n.insert(c,f):n.remove(c)}}}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e}(),Hi=function(){function e(){this.refsByKey=new zn(Qi.compareByKey),this.refsByTarget=new zn(Qi.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Qi(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new Qi(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=Jt.EMPTY,r=new Qi(n,e),i=new Qi(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=Jt.EMPTY,n=new Qi(t,e),r=new Qi(t,e+1),i=ce();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new Qi(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Qi=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return Jt.comparator(e.key,t.key)||q(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return q(e.targetOrBatchId,t.targetOrBatchId)||Jt.comparator(e.key,t.key)},e}(),Yi=function(){function e(e,t){this.persistence=e,this.localViewReferences=new Hi,this.queryDataByTarget={},c(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Ki(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new Ki(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],a=ce(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,f=c.mutations;l<f.length;l++){var h=f[l];a=a.add(h.key)}}for(var d=0,p=e;d<p.length;d++){var c=p[d];o.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++){var h=y[m];a=a.add(h.key)}}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},e.prototype.localWrite=function(e){var t=this,n=zt.now(),r=e.reduce(function(e,t){return e.add(t.key)},ce());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=r.get(u.key);if(!u.isIdempotent){var l=u.fieldMask;if(l){var f=c instanceof Zt?l.applyTo(c.data):_n.EMPTY;o.push(new $n(u.key,f,l,Qn.exists(!0)))}}}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):Xr.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return c(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var a=[],s=ce();p(t.targetChanges,function(r,o){var u=n.queryDataByTarget[r];if(u){o.addedDocuments.forEach(function(e){s=s.add(e)}),o.modifiedDocuments.forEach(function(e){s=s.add(e)}),a.push(n.queryCache.removeMatchingKeys(i,o.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,o.addedDocuments,r)}));var c=o.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:t.snapshotVersion}),n.queryDataByTarget[r]=u,e.shouldPersistQueryData(l,u,o)&&a.push(n.queryCache.updateQueryData(i,u))}}});var u=oe(),l=ce();t.documentUpdates.forEach(function(e,t){l=l.add(e)}),a.push(r.getEntries(i,l).next(function(e){t.documentUpdates.forEach(function(c,l){var f=e.get(c);null==f||l.version.isEqual(Bn.MIN)||s.has(l.key)&&!f.hasPendingWrites||l.version.compareTo(f.version)>=0?(r.addEntry(l),u=u.insert(c,l)):o("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",l.version),t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))})}));var f=t.snapshotVersion;if(!f.isEqual(Bn.MIN)){var h=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(e){return c(f.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+f+" < "+e),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,f)});a.push(h)}return Xr.waitFor(a).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,u)})})},e.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Xr.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),Xr.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,Xr.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new qn(e,i,cn.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return c(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){c(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?Xr.resolve():Xr.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Xr.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);c(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(r,o,t),o?n.addEntry(o):c(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),Ji=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=l(),this.batchesByDocumentKey=new zn(Qi.compareByKey)}return e.prototype.checkEmpty=function(e){return Xr.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");c(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return c(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Xr.resolve()},e.prototype.getLastStreamToken=function(e){return Xr.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Xr.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){c(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;if(this.nextBatchId++,this.mutationQueue.length>0){c(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order")}var o=new Wr(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Qi(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Xr.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Xr.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return c(null!=n,"Failed to find local mutation batch."),Xr.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Xr.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getAllMutationBatches=function(e){return Xr.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Qi(t,0),i=new Qi(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){c(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);c(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Xr.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new zn(q);return t.forEach(function(e){var t=new Qi(e,0),i=new Qi(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){c(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),Xr.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Jt.isDocumentKey(i)||(i=i.child(""));var o=new Qi(new Jt(i),0),a=new zn(q);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),Xr.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;c(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Xr.forEach(t.mutations,function(i){var o=new Qi(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new Qi(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Xr.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&c(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Xr.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return c(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return c(n.batchId===e,"If found batch must match"),n},e}(),$i=function(){function e(e){this.persistence=e,this.queries=new ni(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Bn.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Hi,this.targetCount=0,this.targetIdGenerator=Yr.forQueryCache()}return e.prototype.getTargetCount=function(e){return Xr.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),Xr.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Xr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Xr.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Xr.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Xr.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return c(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Xr.resolve()},e.prototype.updateQueryData=function(e,t){return c(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Xr.resolve()},e.prototype.removeQueryData=function(e,t){return c(this.targetCount>0,"Removing a target from an empty cache"),c(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Xr.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Xr.waitFor(o).next(function(){return i})},e.prototype.getQueryCount=function(e){return Xr.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Xr.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return u("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),Xr.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),Xr.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Xr.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Xr.resolve(n)},e.prototype.containsKey=function(e,t){return Xr.resolve(this.references.containsKey(t))},e}(),Zi=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=at(),this.newDocumentChanges=ce(),this.size=0}return e.prototype.addEntries=function(e,t,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(e,s.path.popLast()))}return this.size+=n,Xr.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,Xr.resolve(n.size)):Xr.resolve(0)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Xr.resolve(n?n.maybeDocument:null)},e.prototype.getSizedEntry=function(e,t){return Xr.resolve(this.docs.get(t))},e.prototype.getEntries=function(e,t){var n=this,r=ae();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),Xr.resolve(r)},e.prototype.getSizedEntries=function(e,t){var n=this,r=ae(),i=new nn(Jt.comparator);return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null),i=i.insert(e,t?t.size:0)}),Xr.resolve({maybeDocuments:r,sizeMap:i})},e.prototype.getDocumentsMatchingQuery=function(e,t){c(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=se(),r=new Jt(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof Zt&&t.matches(s)&&(n=n.insert(s.key,s))}return Xr.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return Xr.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=oe();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new en(e,Bn.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=ce(),Xr.resolve(n)},e.prototype.newChangeBuffer=function(){return new eo(this.sizer,this)},e.prototype.getSize=function(e){return Xr.resolve(this.size)},e}(),eo=function(e){function t(t,n){var r=e.call(this)||this;return r.sizer=t,r.documentCache=n,r}return Ot.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var o=t.documentSizes.get(e);c(void 0!==o,"Attempting to change document "+e.toString()+" without having read it first");var a=t.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(ri),to=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Rr(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new $i(this);var r=function(e){return n.referenceDelegate.documentSize(e)};this.indexManager=new si,this.remoteDocumentCache=new Zi(this.indexManager,r)}return e.createLruPersistence=function(t,n,r){return new e(t,function(e){return new io(e,new Mi(n),r)})},e.createEagerPersistence=function(t){return new e(t,function(e){return new ro(e)})},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new Ji(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;o("MemoryPersistence","Starting transaction:",e);var i=new no(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return Xr.or(m(this.mutationQueues).map(function(n){return function(){return n.containsKey(e,t)}}))},e}(),no=function(){function e(e){this.currentSequenceNumber=e}return e}(),ro=function(){function e(e){this.persistence=e}return e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Xr.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Xr.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Xr.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache();return Xr.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(t){return t?Xr.resolve():n.removeEntry(e,r).next(function(){})})})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Xr.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Xr.resolve(n.inMemoryPins.containsKey(t))}])},e}(),io=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.orphanedSequenceNumbers=new ni(function(e){return ye(e.path)}),this.garbageCollector=new Ui(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Xr.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Xr.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?Xr.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(e,function(o){return n.isPinned(e,o,t).next(function(t){return t?Xr.resolve():(r++,i.removeEntry(e,o).next())})}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Xr.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Xr.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Xr.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Xr.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw u("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Xr.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Xr.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Xr.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),oo=function(){function e(e,t,n,r,i){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&o("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Qr||(Qr={}));var ao,so=1e3,uo=6e4,co=1.5,lo=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Qr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new oo(e,t,so,co,uo)}return e.prototype.isStarted=function(){return this.state===Qr.Starting||this.state===Qr.Open||this.state===Qr.Backoff},e.prototype.isOpen=function(){return this.state===Qr.Open},e.prototype.start=function(){if(this.state===Qr.Error)return void this.performBackoff();c(this.state===Qr.Initial,"Already started"),this.auth()},e.prototype.stop=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Qr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){c(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Qr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){return this.isOpen()?[2,this.close(Qr.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(n){switch(n.label){case 0:return c(this.isStarted(),"Only started streams should be closed."),c(e===Qr.Error||Y(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Qr.Error?this.backoff.reset():t&&t.code===Ft.RESOURCE_EXHAUSTED?(a(t.toString()),a("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Ft.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;c(this.state===Qr.Initial,"Must be in initial state to auth"),this.state=Qr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new Ut(Ft.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;c(this.state===Qr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return c(t.state===Qr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Qr.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;c(this.state===Qr.Error,"Should only perform backoff when in Error state"),this.state=Qr.Backoff,this.backoff.backoffAndRun(function(){return Ot.__awaiter(e,void 0,void 0,function(){return Ot.__generator(this,function(e){return c(this.state===Qr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Qr.Initial,this.start(),c(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return c(this.isStarted(),"Can't handle server close on non-started stream"),o("PersistentStream","close with error: "+e),this.stream=null,this.close(Qr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(o("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),fo=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Pr.ListenStreamConnectionBackoff,Pr.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return Ot.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(lo),ho=function(e){function t(t,n,r,i,o){var a=e.call(this,t,Pr.WriteStreamConnectionBackoff,Pr.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return Ot.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(c(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return c(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){c(this.isOpen(),"Writing handshake requires an opened stream"),c(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;c(this.isOpen(),"Writing mutations requires an opened stream"),c(this.handshakeComplete_,"Handshake must be complete before writing mutations"),c(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(lo),po=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new ho(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new fo(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=oe();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);c(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===Ft.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===Ft.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),mo=function(){function e(e){this.datastore=e,this.readVersions=ue(),this.mutations=[],this.committed=!1}return e.prototype.recordVersion=function(e){var t;if(e instanceof Zt)t=e.version;else{if(!(e instanceof en))throw u("Document in a transaction was a "+e.constructor.name);t=Bn.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Ut(Ft.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.lookup=function(e){var t=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(e).then(function(e){return e.forEach(function(e){e instanceof en||e instanceof Zt?t.recordVersion(e):u("Document in a transaction was a "+e.constructor.name)}),e})},e.prototype.write=function(e){if(this.committed)throw new Ut(Ft.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(e)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return t?Qn.updateTime(t):Qn.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(t&&t.isEqual(Bn.forDeletedDoc()))throw new Ut(Ft.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return t?Qn.updateTime(t):Qn.exists(!0)},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e)))},e.prototype.update=function(e,t){this.write(t.toMutations(e,this.preconditionForUpdate(e)))},e.prototype.delete=function(e){this.write([new er(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,Bn.forDeletedDoc())},e.prototype.commit=function(){var e=this,t=this.readVersions;return this.mutations.forEach(function(e){t=t.remove(e.key)}),t.isEmpty()?this.datastore.commit(this.mutations).then(function(){e.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(ao||(ao={}));var yo;!function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(yo||(yo={}));var go,vo=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=ao.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(ao.Unknown),c(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Pr.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,c(e.state===ao.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(ao.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===ao.Online?(this.setAndBroadcast(ao.Unknown),c(0===this.watchStreamFailures,"watchStreamFailures must be 0"),c(null===this.onlineStateTimer,"onlineStateTimer must be null")):++this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(ao.Offline))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===ao.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(a(t),this.shouldWarnClientIsOffline=!1):o("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),bo=function(){function e(e,t,n,r){this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new vo(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return Ot.__awaiter(this,void 0,void 0,function(){var e;return Ot.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(ao.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(ao.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(o("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return o("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(ao.Unknown),[2]}})})},e.prototype.listen=function(e){c(!h(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){c(h(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),g(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(ao.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){c(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new _r(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!g(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return Ot.__awaiter(this,void 0,void 0,function(){var e=this;return Ot.__generator(this,function(t){return p(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(t){return void 0===e&&c(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(ao.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return Ot.__awaiter(this,void 0,void 0,function(){var n;return Ot.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(ao.Online),e instanceof Er&&e.state===pr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof br?this.watchChangeAggregator.handleDocumentChange(e):e instanceof wr?this.watchChangeAggregator.handleExistenceFilter(e):(c(e instanceof Er,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Bn.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;c(!e.isEqual(Bn.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return p(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:l()}),t.sendUnwatchRequest(e);var r=new qn(n.query,e,cn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;c(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return Ot.__awaiter(t,void 0,void 0,function(){return Ot.__generator(this,function(t){return h(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return Ot.__awaiter(this,void 0,void 0,function(){var e,t;return Ot.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){c(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){c(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(et)},e.prototype.onMutationResult=function(e,t){var n=this;c(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Gr.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return Ot.__awaiter(this,void 0,void 0,function(){var t,n=this;return Ot.__generator(this,function(r){return void 0===e&&c(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(t=void 0,t=this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e),[2,t.then(function(){n.shouldStartWriteStream()&&n.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(e){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(t){return Z(e.code)?(o("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=l(),[2,this.localStore.setLastStreamToken(l()).catch(et)]):[2]})})},e.prototype.handleWriteError=function(e){return Ot.__awaiter(this,void 0,void 0,function(){var t,n=this;return Ot.__generator(this,function(r){return ee(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2]})})},e.prototype.createTransaction=function(){return new mo(this.datastore)},e.prototype.handleCredentialChange=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(o("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return e.sent(),this.onlineStateTracker.set(ao.Unknown),[4,this.enableNetwork()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.applyPrimaryState=function(e){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(ao.Unknown),t.label=4;case 4:return[2]}})})},e}(),wo=function(){function e(){this.listeners=[]}return e}(),Eo=function(){function e(e){this.syncEngine=e,this.queries=new ni(function(e){return e.canonicalId()}),this.onlineState=ao.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new wo,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return Ot.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return Ot.__generator(this,function(o){return t=e.query,n=!1,r=this.queries.get(t),r&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){s[a].onViewSnapshot(r)}o.viewSnap=r}}},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){var o=i[r];o.onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var r=0,i=n.listeners;r<i.length;r++){i[r].applyOnlineStateChange(e)}})},e}(),To=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=ao.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(c(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==ar.Metadata&&t.push(i)}e=new yr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(c(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==ao.Offline;return this.options.waitForSyncWhenOnline&&n?(c(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===ao.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){c(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),_o=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=ce(),i=ce(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case ar.Added:r=r.add(s.doc.key);break;case ar.Removed:i=i.add(s.doc.key)}}return new e(t,r,i)},e}(),So=function(){function e(e){this.key=e}return e}(),Io=function(){function e(e){this.key=e}return e}(),ko=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=ce(),this.mutatedKeys=ce(),this.documentSet=new hr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new mr,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),f=t instanceof Zt?t:null;f&&(c(e.isEqual(f.key),"Mismatching keys found in document changes: "+e+" != "+f.key),f=n.query.matches(f)?f:null);var h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;if(l&&f){l.data.isEqual(f.data)?h!==d&&(r.track({type:ar.Metadata,doc:f}),p=!0):n.shouldWaitForSyncedDocument(l,f)||(r.track({type:ar.Modified,doc:f}),p=!0,u&&n.query.docComparator(f,u)>0&&(s=!0))}else!l&&f?(r.track({type:ar.Added,doc:f}),p=!0):l&&!f&&(r.track({type:ar.Removed,doc:l}),p=!0,u&&(s=!0));p&&(f?(a=a.add(f),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var l=a.last();a=a.delete(l.key),o=o.delete(l.key),r.track({type:ar.Removed,doc:l})}return c(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;c(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return st(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current,u=s?dr.Synced:dr.Local,l=u!==this.syncState;if(this.syncState=u,0!==o.length||l){return{snapshot:new yr(this.query,e.documentSet,i,o,e.mutatedKeys,u===dr.Local,l,!1),limboChanges:a}}return{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===ao.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new mr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return c(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=ce(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new Io(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new So(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=ce();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return yr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===dr.Local)},e}(),No=function(){function e(e,t,n){this.query=e,this.targetId=t,this.view=n}return e}(),Ao=function(){function e(e){this.key=e}return e}(),xo=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new ni(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new nn(Jt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Hi,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Yr.forSyncEngine(),this.isPrimary=void 0,this.onlineState=ao.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){c(null!==e,"SyncEngine listener cannot be null"),c(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return Ot.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return Ot.__generator(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){var n=this,r=e.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(e.targetId).then(function(o){var a=new ko(r,o),s=a.computeDocChanges(i),u=vr.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&n.onlineState!==ao.Offline),l=a.applyChanges(s,!0===n.isPrimary,u);c(0===l.limboChanges.length,"View returned limbo docs before target ack from the server."),c(!!l.snapshot,"applyChanges for new view should always return a snapshot");var f=new No(r,e.targetId,a);return n.queryViewsByQuery.set(r,f),n.queryViewsByTarget[e.targetId]=f,l.snapshot})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){var t=this;return this.localStore.executeQuery(e.query).then(function(n){return t.localStore.remoteDocumentKeys(e.targetId).then(function(r){return Ot.__awaiter(t,void 0,void 0,function(){var t;return Ot.__generator(this,function(i){return t=e.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(e.targetId,t.limboChanges),[2,t]})})})})},e.prototype.unlisten=function(e){return Ot.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return Ot.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),(t=this.queryViewsByQuery.get(e),c(!!t,"Trying to unlisten on query not found:"+e),this.isPrimary)?(this.sharedClientState.removeLocalQueryTarget(t.targetId),n=this.sharedClientState.isActiveQueryTarget(t.targetId),n?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupQuery(t)}).catch(et)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then(function(e){return n.sharedClientState.addPendingMutation(e.batchId),n.addMutationCallback(e.batchId,t),n.emitNewSnapsAndNotifyLocalStore(e.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},e.prototype.wrapUpdateFunctionError=function(e){return e},e.prototype.runTransaction=function(e,t){var n=this;void 0===t&&(t=5),c(t>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var t=e(r);return!Y(t)&&t.catch&&t.then?t.catch(function(e){return Promise.reject(n.wrapUpdateFunctionError(e))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(e){return Promise.reject(n.wrapUpdateFunctionError(e))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===t?Promise.reject(r):n.runTransaction(e,t-1)})})},e.prototype.applyRemoteEvent=function(e){var t=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(e).then(function(n){return y(e.targetChanges,function(e,n){var r=t.limboResolutionsByTarget[e];r&&(c(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?c(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(c(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),t.emitNewSnapsAndNotifyLocalStore(n,e)}).catch(et)},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===yo.RemoteStore||!this.isPrimary&&t===yo.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);c(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return Ot.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return Ot.__generator(this,function(l){switch(l.label){case 0:return this.assertSubscribed("rejectListens()"),(this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=new nn(Jt.comparator),i=i.insert(r,new en(r,Bn.forDeletedDoc())),o=ce().add(r),a=new gr(Bn.MIN,{},new zn(q),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return s=this.queryViewsByTarget[e],c(!!s,"Unknown targetId: "+e),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return u.removeAndCleanupQuery(s)}).catch(et)];case 2:l.sent(),this.syncEngineListener.onWatchError(s.query,t),l.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return Ot.__awaiter(this,void 0,void 0,function(){var r;return Ot.__generator(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return r=i.sent(),null===r?(o("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):u("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){var t=this;this.assertSubscribed("applySuccessfulWrite()");var n=e.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(e).then(function(e){return t.sharedClientState.updateMutationState(n,"acknowledged"),t.emitNewSnapsAndNotifyLocalStore(e)}).catch(et)},e.prototype.rejectFailedWrite=function(e,t){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.localStore.rejectBatch(e).then(function(r){return n.sharedClientState.updateMutationState(e,"rejected",t),n.emitNewSnapsAndNotifyLocalStore(r)}).catch(et)},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new nn(q)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(c(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof So)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof Io){o("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e);var a=this.limboDocumentRefs.containsKey(i.key);a||this.removeLimboTarget(i.key)}else u("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){o("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=xn.atPath(t.path);this.limboResolutionsByTarget[n]=new Ao(t),this.remoteStore.listen(new qn(r,n,cn.LimboResolution,Rr.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return Ot.__awaiter(this,void 0,void 0,function(){var n,r,i,o=this;return Ot.__generator(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=_o.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){c(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return Ot.__awaiter(this,void 0,void 0,function(){var t,n;return Ot.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?[4,this.localStore.handleUserChange(e)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return Ot.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u=this;return Ot.__generator(this,function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),p(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;p(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new nn(Jt.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){for(var t=this,n=Promise.resolve(),r=[],i=[],o=0,a=e;o<a.length;o++){var s=a[o];!function(e){n=n.then(function(){return Ot.__awaiter(t,void 0,void 0,function(){var t,n,o,a;return Ot.__generator(this,function(s){switch(s.label){case 0:return n=this.queryViewsByTarget[e],n?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return s.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return t=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return o=s.sent(),o.snapshot&&i.push(o.snapshot),[3,8];case 4:return c(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(e)];case 5:return a=s.sent(),c(!!a,"Query data for target "+e+" not found"),[4,this.localStore.allocateQuery(a)];case 6:return t=s.sent(),[4,this.initializeViewAndComputeSnapshot(t,!1)];case 7:s.sent(),s.label=8;case 8:return r.push(t),[2]}})})})}(s)}return n.then(function(){return t.syncEngineListener.onWatchChange(i),r})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return Ot.__awaiter(this,void 0,void 0,function(){var r,i,a=this;return Ot.__generator(this,function(s){switch(s.label){case 0:if(this.isPrimary)return o("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,5];switch(r=t){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return Ot.__awaiter(a,void 0,void 0,function(){var r;return Ot.__generator(this,function(i){switch(i.label){case 0:return r=gr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(e){return Ot.__awaiter(a,void 0,void 0,function(){var t;return Ot.__generator(this,function(n){switch(n.label){case 0:return Pe(e)?(t=[],p(this.queryViewsByTarget,function(e){return t.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw e;case 3:return[2]}})})})];case 2:return i=this.queryViewsByTarget[e],this.removeAndCleanupQuery(i),[4,this.localStore.releaseQuery(i.query,!0)];case 3:return s.sent(),this.syncEngineListener.onWatchError(i.query,n),[3,5];case 4:u("Unexpected target state: "+t),s.label=5;case 5:return[2]}})})},e.prototype.applyActiveTargetsChange=function(e,t){return Ot.__awaiter(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,f,i,h=this;return Ot.__generator(this,function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(i=r[n],c(!this.queryViewsByTarget[i],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(i)]):[3,6];case 2:return o=d.sent(),c(!!o,"Query data for active target "+i+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return a=d.sent(),[4,this.initializeViewAndComputeSnapshot(a,!1)];case 4:d.sent(),this.remoteStore.listen(a),d.label=5;case 5:return n++,[3,1];case 6:s=function(e){var t;return Ot.__generator(this,function(n){switch(n.label){case 0:return t=u.queryViewsByTarget[e],t?[4,u.localStore.releaseQuery(t.query,!1).then(function(){h.remoteStore.unlisten(e),h.removeAndCleanupQuery(t)}).catch(et)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},u=this,l=0,f=t,d.label=7;case 7:return l<f.length?(i=f[l],[5,s(i)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?ce().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:ce()},e}(),Co=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Oo="SharedClientState",Do="firestore_clients",Mo="firestore_mutations",Po="firestore_targets",Ro="firestore_online_state",Lo="firestore_sequence_number",Fo=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,c(void 0!==r===("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"===typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"===typeof i.error),s=void 0;return o&&i.error&&(o="string"===typeof i.error.message&&"string"===typeof i.error.code)&&(s=new Ut(i.error.code,i.error.message)),o?new e(t,n,i.state,s):(a(Oo,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Uo=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,c(void 0!==n===("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"===typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"===typeof r.error),o=void 0;return i&&r.error&&(i="string"===typeof r.error.message&&"string"===typeof r.error.code)&&(o=new Ut(r.error.code,r.error.message)),i?new e(t,r.state,o):(a(Oo,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),jo=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"===typeof r&&r.activeTargetIds instanceof Array,o=le(),s=0;i&&s<r.activeTargetIds.length;++s)i=J(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(a(Oo,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Bo=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"===typeof n&&void 0!==ao[n.onlineState]&&"string"===typeof n.clientId?new e(n.clientId,ao[n.onlineState]):(a(Oo,"Failed to parse online state: "+t),null)},e}(),Vo=function(){function e(){this.activeTargetIds=le()}return e.prototype.addQueryTarget=function(e){c(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),qo=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new Ut(Ft.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Lo+"_"+r,this.activeClients[this.localClientId]=new Vo,this.clientStateKeyRe=new RegExp("^"+Do+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Mo+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Po+"_"+a+"_(\\d+)$"),this.onlineStateKey=Ro+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return Ot.__awaiter(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u,l,f,h=this;return Ot.__generator(this,function(d){switch(d.label){case 0:return c(!this.started,"WebStorageSharedClientState already started"),c(null!==this.syncEngine,"syncEngine property must be set before calling start()"),c(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=d.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=jo.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),a=this.storage.getItem(this.onlineStateKey),a&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,l=this.earlyEvents;u<l.length;u++)f=l[u],this.handleWebStorageEvent(f);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=le();return y(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Uo.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return o(Oo,"READ",e,t),t},e.prototype.setItem=function(e,t){o(Oo,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){o(Oo,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(o(Oo,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void a("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return Ot.__awaiter(t,void 0,void 0,function(){var t,n,r,i,o,a;return Ot.__generator(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(c(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=ut(e.newValue))!==Rr.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Fo(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:ao[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Uo(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return c(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Do+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Po+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Mo+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return c(null!==n,"Cannot parse client state key '"+e+"'"),jo.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);c(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Fo.fromWebStorageEntry(new Co(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);c(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Uo.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Bo.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(o(Oo,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return Ot.__awaiter(n,void 0,void 0,function(){return Ot.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return Ot.__awaiter(n,void 0,void 0,function(){return Ot.__generator(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),zo=function(){function e(){this.localState=new Vo,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Vo,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Wo=function(){function e(e,t){this.cacheSizeBytes=e,this.experimentalTabSynchronization=t}return e.prototype.lruParams=function(){return Li.withCacheSize(this.cacheSizeBytes)},e}(),Go=function(){function e(){}return e}(),Xo=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=jt.newId(),this.isShutdown=!1}return e.prototype.start=function(e){var t=this;this.verifyNotShutdown();var n=new Lr,r=new Lr,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Wo?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof Ut?e.code===Ft.FAILED_PRECONDITION||e.code===Ft.UNIMPLEMENTED:!("undefined"!==typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code)},e.prototype.verifyNotShutdown=function(){if(this.isShutdown)throw new Ut(Ft.FAILED_PRECONDITION,"The client has already been shutdown.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Gi.buildStoragePrefix(this.databaseInfo),i=new Nr(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return Ot.__awaiter(n,void 0,void 0,function(){var n,o;return Ot.__generator(this,function(a){switch(a.label){case 0:if(t.experimentalTabSynchronization&&!qo.isAvailable(this.platform))throw new Ut(Ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=t.lruParams(),t.experimentalTabSynchronization?(this.sharedClientState=new qo(this.asyncQueue,this.platform,r,this.clientId,e),[4,Gi.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new zo,[4,Gi.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=to.createEagerPersistence(this.clientId),this.sharedClientState=new zo,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return o("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return Ot.__awaiter(n,void 0,void 0,function(){var n,i,o,a,s=this;return Ot.__generator(this,function(u){switch(u.label){case 0:return this.localStore=new Yi(this.persistence,e),t&&(this.lruScheduler=new Fi(t,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new po(this.asyncQueue,r,this.credentials,n),o=function(e){return s.syncEngine.applyOnlineStateChange(e,yo.RemoteStore)},a=function(e){return s.syncEngine.applyOnlineStateChange(e,yo.SharedClientState)},this.remoteStore=new bo(this.localStore,i,this.asyncQueue,o),this.syncEngine=new xo(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Eo(this.syncEngine),[4,this.sharedClientState.start()];case 1:return u.sent(),[4,this.remoteStore.start()];case 2:return u.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return Ot.__awaiter(s,void 0,void 0,function(){return Ot.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return u.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),o("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.shutdown=function(){var e=this;return!0===this.isShutdown?Promise.resolve():this.asyncQueue.enqueue(function(){return Ot.__awaiter(e,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),this.isShutdown=!0,[2]}})})})},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotShutdown();var i=new To(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Zt)return e;if(e instanceof en)return null;throw new Ut(Ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=ce(),r=new ko(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotShutdown();var n=new Lr;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.transaction=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return Ot.__awaiter(t,void 0,void 0,function(){return Ot.__generator(this,function(e){return[2]})})}).then(function(){return t.syncEngine.runTransaction(e)})},e}(),Ko=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),Ho=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];_("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(S("FieldPath","string",n,e[n]),0===e[n].length)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(Yt.keyField().canonicalString()),e}(),Qo=new RegExp("[~\\*/\\[\\]]"),Yo=function(){function e(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}}return e}(),Jo=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(Co.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){c(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),$o=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;c(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new Ut(Ft.ABORTED,"getToken aborted due to token change.");return n?(c("string"===typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Yo(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){c(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){c(null!=this.tokenListener,"removeChangeListener() called twice"),c(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return c(null===e||"string"===typeof e,"Received invalid UID: "+e),new Co(e)},e}(),Zo=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Co.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),ea=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Zo(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Co.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}(),ta=function(){function e(e){this._methodName=e}return e.delete=function(){return b("FieldValue.delete",arguments),na.instance},e.serverTimestamp=function(){return b("FieldValue.serverTimestamp",arguments),ra.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return E("FieldValue.arrayUnion",arguments,1),new ia(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return E("FieldValue.arrayRemove",arguments,1),new oa(e)},e.increment=function(e){return S("FieldValue.increment","number",1,e),w("FieldValue.increment",arguments,1),new aa(e)},e.prototype.isEqual=function(e){return this===e},e}(),na=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return Ot.__extends(t,e),t.instance=new t,t}(ta),ra=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return Ot.__extends(t,e),t.instance=new t,t}(ta),ia=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return Ot.__extends(t,e),t}(ta),oa=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return Ot.__extends(t,e),t}(ta),aa=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return Ot.__extends(t,e),t}(ta),sa=f(ta,"Use FieldValue.<field>() instead."),ua=/^__.*__$/,ca=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new $n(e,this.data,this.fieldMask,t)):n.push(new Jn(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new Zn(e,this.fieldTransforms)),n},e}(),la=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new $n(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new Zn(e,this.fieldTransforms)),n},e}();!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument"}(go||(go={}));var fa=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Ut(Ft.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(dt(this.dataSource)&&ua.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),ha=function(){function e(e,t){this.databaseId=e,this.key=t}return e}(),da=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new fa(go.Set,e,Yt.EMPTY_PATH);mt("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new ca(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new fa(go.MergeSet,e,Yt.EMPTY_PATH);mt("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new zn(Yt.comparator),c=0,l=n;c<l.length;c++){var f=l[c],h=void 0;if(f instanceof Ho)h=f._internalPath;else{if("string"!==typeof f)throw u("Expected stringOrFieldPath to be a string or a FieldPath");h=gt(e,f)}if(!r.contains(h))throw new Ut(Ft.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=Gn.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=Gn.fromArray(r.fieldMask),o=r.fieldTransforms;return new ca(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new fa(go.Update,e,Yt.EMPTY_PATH);mt("Data must be an object, but it was:",r,t);var i=new zn(Yt.comparator),o=_n.EMPTY;y(t,function(t,a){var s=gt(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof na)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=Gn.fromSet(i);return new la(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new fa(go.Update,e,Yt.EMPTY_PATH),o=[yt(e,t)],a=[n];if(r.length%2!==0)throw new Ut(Ft.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(yt(e,r[s])),a.push(r[s+1]);for(var u=new zn(Yt.comparator),c=_n.EMPTY,s=0;s<o.length;++s){var l=o[s],f=i.childContextForFieldPath(l),h=this.runPreConverter(a[s],f);if(h instanceof na)u=u.add(l);else{var d=this.parseData(h,f);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=Gn.fromSet(u);return new la(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new fa(go.Argument,e,Yt.EMPTY_PATH),r=this.parseData(t,n);return c(null!=r,"Parsed data should not be null."),c(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=vt(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(e=this.runPreConverter(e,t),pt(e))return mt("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof ta)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new nn(q);return g(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):y(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new _n(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=hn.INSTANCE),n.push(s),r++}return new Sn(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!dt(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof na){if(t.dataSource!==go.MergeSet)throw t.dataSource===go.Update?(c(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof ra)t.fieldTransforms.push(new Xn(t.path,tr.instance));else if(e instanceof ia){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new nr(n);t.fieldTransforms.push(new Xn(t.path,r))}else if(e instanceof oa){var n=this.parseArrayTransformElements(e._methodName,e._elements),i=new rr(n);t.fieldTransforms.push(new Xn(t.path,i))}else if(e instanceof aa){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new ir(o);t.fieldTransforms.push(new Xn(t.path,a))}else u("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return hn.INSTANCE;if("number"===typeof e)return J(e)?new mn(e):new yn(e);if("boolean"===typeof e)return dn.of(e);if("string"===typeof e)return new gn(e);if(e instanceof Date)return new vn(zt.fromDate(e));if(e instanceof zt)return new vn(new zt(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof qt)return new Tn(e);if(e instanceof Bt)return new wn(e);if(e instanceof ha)return new En(e.databaseId,e.key);throw t.createError("Unsupported field value: "+R(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new fa(go.Argument,e,Yt.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}(),pa="firestore.googleapis.com",ma=!0,ya=!0,ga=!1,va=Li.COLLECTION_DISABLED,ba=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Ut(Ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pa,this.ssl=ma}else k("settings","non-empty string","host",e.host),this.host=e.host,N("settings","boolean","ssl",e.ssl),this.ssl=d(e.ssl,ma);if(U("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),N("settings","object","credentials",e.credentials),this.credentials=e.credentials,N("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?a("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&a("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=d(e.timestampsInSnapshots,ya),N("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Li.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==va&&e.cacheSizeBytes<Li.MINIMUM_CACHE_SIZE_BYTES)throw new Ut(Ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Li.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}N("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?ga:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),wa=function(){function e(){}return e}(),Ea=function(){function e(t){var n=this;this._queue=new jr,this.INTERNAL={delete:function(){return Ot.__awaiter(n,void 0,void 0,function(){return Ot.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return e.sent(),this.clientRunning=!1,[2]}})})}},this.clientRunning=!1;var r=new wa;if("object"===typeof t.options){var i=t;r.firebaseApp=i,r.databaseId=e.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new $o(i)}else{var o=t;if(!o.projectId)throw new Ut(Ft.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new Xt(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Jo}r.settings=new ba({}),this._config=r,this._databaseId=r.databaseId}return e.prototype.settings=function(e){if(w("Firestore.settings",arguments,1),S("Firestore.settings","object",1,e),h(e,"persistence"))throw new Ut(Ft.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new ba(e);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new Ut(Ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=t,void 0!==t.credentials&&(this._config.credentials=lt(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Ut(Ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Wo(this._config.settings.cacheSizeBytes,void 0!==e&&d(e.experimentalTabSynchronization,!1)))},e.prototype._clearPersistence=function(){if(this.clientRunning)throw new Ut(Ft.FAILED_PRECONDITION,"Persistence cannot be cleared while the client is running");var e=Gi.buildStoragePrefix(this.makeDatabaseInfo());return Gi.clearPersistence(e)},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Go),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new Wt(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl,this._config.settings.forceLongPolling)},e.prototype.configureClient=function(e){var t=this;c(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),c(!this._firestoreClient,"configureClient() called multiple times"),this.clientRunning=!0;var n=this.makeDatabaseInfo(),r=function(e){if(e instanceof Sa){var n=t._config.databaseId,r=e.firestore._config.databaseId;if(!r.isEqual(n))throw new Ut(Ft.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new ha(t._config.databaseId,e._key)}return e};return this._dataConverter=new da(r),this._firestoreClient=new Xo(Lt.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!h(t,"projectId"))throw new Ut(Ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!==typeof n)throw new Ut(Ft.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Xt(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Ut(Ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return w("Firestore.collection",arguments,1),S("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Ca(Ht.fromString(e),this)},e.prototype.doc=function(e){return w("Firestore.doc",arguments,1),S("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Sa.forPath(Ht.fromString(e),this)},e.prototype._collectionGroup=function(e){if(w("Firestore.collectionGroup",arguments,1),S("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Aa(new xn(Ht.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return w("Firestore.runTransaction",arguments,1),S("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new Ta(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new _a(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(r()){case At.DEBUG:return"debug";case At.ERROR:return"error";case At.SILENT:return"silent";default:return u("Unknown log level: "+r())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(w("Firestore.setLogLevel",arguments,1),S("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":i(At.DEBUG);break;case"error":i(At.ERROR);break;case"silent":i(At.SILENT);break;default:throw new Ut(Ft.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},e}(),Ta=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;w("Transaction.get",arguments,1);var n=_t("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return u("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof en)return new ka(t._firestore,n._key,null,!1,!1);if(r instanceof Zt)return new ka(t._firestore,n._key,r,!1,!1);throw u("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){T("Transaction.set",arguments,2,3);var r=_t("Transaction.set",e,this._firestore);n=wt("Transaction.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a;return"string"===typeof t||t instanceof Ho?(E("Transaction.update",arguments,3),o=_t("Transaction.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,r)):(w("Transaction.update",arguments,2),o=_t("Transaction.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(o._key,a),this},e.prototype.delete=function(e){w("Transaction.delete",arguments,1);var t=_t("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),_a=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){T("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=_t("WriteBatch.set",e,this._firestore);n=wt("WriteBatch.set",n);var i=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,Qn.NONE)),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.verifyNotCommitted();var o,a;return"string"===typeof t||t instanceof Ho?(E("WriteBatch.update",arguments,3),o=_t("WriteBatch.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,r)):(w("WriteBatch.update",arguments,2),o=_t("WriteBatch.update",e,this._firestore),a=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(a.toMutations(o._key,Qn.exists(!0))),this},e.prototype.delete=function(e){w("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=_t("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new er(t._key,Qn.NONE)),this},e.prototype.commit=function(){return Ot.__awaiter(this,void 0,void 0,function(){return Ot.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new Ut(Ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Sa=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!==0)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new Jt(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ca(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(w("DocumentReference.collection",arguments,1),S("DocumentReference.collection","non-empty string",1,e),!e)throw new Ut(Ft.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=Ht.fromString(e);return new Ca(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){T("DocumentReference.set",arguments,1,2),t=wt("DocumentReference.set",t);var n=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Qn.NONE))},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i;return"string"===typeof e||e instanceof Ho?(E("DocumentReference.update",arguments,2),i=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,n)):(w("DocumentReference.update",arguments,1),i=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(i.toMutations(this._key,Qn.exists(!0)))},e.prototype.delete=function(){return w("DocumentReference.delete",arguments,0),this._firestoreClient.write([new er(this._key,Qn.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];T("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!==typeof e[i]||ft(e[i])||(r=e[i],U("DocumentReference.onSnapshot",r,["includeMetadataChanges"]),N("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return ft(e[i])?n=e[i]:(S("DocumentReference.onSnapshot","function",i,e[i]),I("DocumentReference.onSnapshot","function",i+1,e[i+1]),I("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Ko({next:function(e){if(t.next){c(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new ka(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(xn.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return T("DocumentReference.get",arguments,0,1),Tt("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new ka(t.firestore,t._key,e,!0,e instanceof Zt&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new Ut(Ft.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new Ut(Ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),Ia=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),ka=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return T("DocumentSnapshot.data",arguments,0,1),e=Et("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,ln.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(T("DocumentSnapshot.get",arguments,1,2),t=Et("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(yt("DocumentSnapshot.get",e));if(void 0!==n)return this.convertValue(n,ln.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Sa(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Ia(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof _n)return this.convertObject(e,t);if(e instanceof Sn)return this.convertArray(e,t);if(e instanceof En){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||a("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Sa(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),Na=function(e){function t(t,n,r,i,o){return e.call(this,t,n,r,i,o)||this}return Ot.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return c("object"===typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(ka),Aa=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){w("Query.where",arguments,3),F("Query.where",3,r),D("Query.where",["<","<=","==",">=",">","array-contains"],2,n);var i,o=yt("Query.where",t),a=On.fromString(n);if(o.isKeyField()){if(a===On.ARRAY_CONTAINS)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"===typeof r){if(""===r)throw new Ut(Ft.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==r.indexOf("/"))throw new Ut(Ft.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '"+r+"' contains a slash.");var s=this._query.path.child(Ht.fromString(r));if(!Jt.isDocumentKey(s))throw new Ut(Ft.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");i=new En(this.firestore._databaseId,new Jt(s))}else{if(!(r instanceof Sa))throw new Ut(Ft.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+R(r)+".");var u=r;i=new En(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=Cn.create(o,a,i);return this.validateNewFilter(c),new e(this._query.addFilter(c),this.firestore)},e.prototype.orderBy=function(t,n){T("Query.orderBy",arguments,1,2),I("Query.orderBy","non-empty string",2,n);var r;if(void 0===n||"asc"===n)r=Rn.ASCENDING;else{if("desc"!==n)throw new Ut(Ft.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Rn.DESCENDING}if(null!==this._query.startAt)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=yt("Query.orderBy",t),o=new Fn(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(w("Query.limit",arguments,1),S("Query.limit","number",1,t),t<=0)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];E("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(F(e,1,t),t instanceof ka){if(n.length>0)throw new Ut(Ft.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Ut(Ft.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new En(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof bn)throw new Ut(Ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ln(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Ut(Ft.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!==typeof a)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(Ht.fromString(a));if(!Jt.isDocumentKey(s))throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Jt(s);i.push(new En(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Ln(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];T("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!==typeof e[i]||ft(e[i])||(r=e[i],U("Query.onSnapshot",r,["includeMetadataChanges"]),N("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),ft(e[i])?n=e[i]:(S("Query.onSnapshot","function",i,e[i]),I("Query.onSnapshot","function",i+1,e[i+1]),I("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Ko({next:function(e){t.next&&t.next(new xa(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.get=function(e){var t=this;return T("Query.get",arguments,0,1),Tt("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new xa(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new Ut(Ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.validateNewFilter=function(e){if(e instanceof Dn)if(e.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.isEqual(e.field))throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+e.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(e.field,n)}else if(e.op===On.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Ut(Ft.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),xa=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ia(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;T("QuerySnapshot.forEach",arguments,1,2),S("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Aa(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(U("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),N("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Ut(Ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=St(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new Na(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!==typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(xa.prototype.docChanges,e,{get:function(){return bt()}})}catch(e){}});var Ca=function(e){function t(t,n){var r=e.call(this,xn.atPath(t),n)||this;if(t.length%2!==1)throw new Ut(Ft.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return Ot.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Sa(new Jt(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(T("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=jt.newId()),S("CollectionReference.doc","non-empty string",1,e),""===e)throw new Ut(Ft.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=Ht.fromString(e);return Sa.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){w("CollectionReference.add",arguments,1),S("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(Aa),Oa=f(Ea,"Use firebase.firestore() instead."),Da=f(Ta,"Use firebase.firestore().runTransaction() instead."),Ma=f(_a,"Use firebase.firestore().batch() instead."),Pa=f(Sa,"Use firebase.firestore().doc() instead."),Ra=f(ka),La=f(Na),Fa=f(Aa),Ua=f(xa),ja=f(Ca,"Use firebase.firestore().collection() instead."),Ba={Firestore:Oa,GeoPoint:qt,Timestamp:zt,Blob:Vt,Transaction:Da,WriteBatch:Ma,DocumentReference:Pa,DocumentSnapshot:Ra,Query:Fa,QueryDocumentSnapshot:La,QuerySnapshot:Ua,CollectionReference:ja,FieldPath:Ho,FieldValue:sa,setLogLevel:Ea.setLogLevel,CACHE_SIZE_UNLIMITED:va};Nt(xt),t.registerFirestore=Nt},function(e,t,n){"use strict";function r(e){o.forEach(function(t){t.logLevel=e})}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"LogLevel",function(){return i}),n.d(t,"Logger",function(){return u}),n.d(t,"setLogLevel",function(){return r});var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.ERROR].concat(e))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e){return"string"==typeof e}function i(e){return"number"==typeof e}function o(e,t){e=e.split("."),t=t||wn;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function a(){}function s(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function u(e){return"array"==s(e)}function c(e){var t=s(e);return"array"==t||"object"==t&&"number"==typeof e.length}function l(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function f(e,t,n){return e.call.apply(e.bind,arguments)}function h(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function d(e,t,n){return d=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:h,d.apply(null,arguments)}function p(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function m(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.yb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function y(){this.j=this.j,this.i=this.i}function g(e){e:{for(var t=Lt,n=e.length,i=r(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(void 0,i[o],o,e)){t=o;break e}t=-1}return 0>t?null:r(e)?e.charAt(t):e[t]}function v(e){return Array.prototype.concat.apply([],arguments)}function b(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function w(e){return/^[\s\xa0]*$/.test(e)}function E(e,t){return-1!=e.indexOf(t)}function T(e,t){return e<t?-1:e>t?1:0}function _(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function S(e){var t,n={};for(t in e)n[t]=e[t];return n}function I(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<Cn.length;o++)n=Cn[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){return k[" "](e),e}function N(e,t){var n=qn;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function A(){var e=wn.document;return e?e.documentMode:void 0}function x(e){return N(e,function(){for(var t=0,n=Nn(String(On)).split("."),r=Nn(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=T(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||T(0==a[2].length,0==s[2].length)||T(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t})}function C(e,t){this.type=e,this.a=this.target=t,this.Ja=!0}function O(e,t){if(C.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Ln){e:{try{k(t.nodeName);var o=!0;break e}catch(e){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=r(e.pointerType)?e.pointerType:Kn[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}function D(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++Qn,this.X=this.Z=!1}function M(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function P(e){this.src=e,this.a={},this.b=0}function R(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=In(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(M(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function L(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}function F(e,t,n,r,i){if(r&&r.once)return B(e,t,n,r,i);if(u(t)){for(var o=0;o<t.length;o++)F(e,t[o],n,r,i);return null}return n=K(n),e&&e[Hn]?e.Aa(t,n,l(r)?!!r.capture:!!r,i):U(e,t,n,!1,r,i)}function U(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=l(i)?!!i.capture:!!i;if(a&&!Wn)return null;var s=X(e);if(s||(e[Yn]=s=new P(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=j(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xn||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(z(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function j(){var e=G,t=Wn?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}function B(e,t,n,r,i){if(u(t)){for(var o=0;o<t.length;o++)B(e,t[o],n,r,i);return null}return n=K(n),e&&e[Hn]?e.Ba(t,n,l(r)?!!r.capture:!!r,i):U(e,t,n,!0,r,i)}function V(e,t,n,r,i){if(u(t))for(var o=0;o<t.length;o++)V(e,t[o],n,r,i);else r=l(r)?!!r.capture:!!r,n=K(n),e&&e[Hn]?(e=e.c,(t=String(t).toString())in e.a&&(o=e.a[t],-1<(n=L(o,n,r,i))&&(M(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=X(e))&&(t=e.a[t.toString()],e=-1,t&&(e=L(t,n,r,i)),(n=-1<e?t[e]:null)&&q(n))}function q(e){if(!i(e)&&e&&!e.X){var t=e.src;if(t&&t[Hn])R(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(z(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=X(t))?(R(n,e),0==n.b&&(n.src=null,t[Yn]=null)):M(e)}}}function z(e){return e in Jn?Jn[e]:Jn[e]="on"+e}function W(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&q(e),n.call(r,t)}function G(e,t){return!!e.X||(Wn?W(e,new O(t,this)):(t=new O(t||o("window.event"),this),W(e,t)))}function X(e){return e=e[Yn],e instanceof P?e:null}function K(e){return"function"==s(e)?e:(e[$n]||(e[$n]=function(t){return e.handleEvent(t)}),e[$n])}function H(){y.call(this),this.c=new P(this),this.J=this,this.B=null}function Q(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&R(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ja}function Y(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function J(){this.b=this.a=null}function $(){var e=rr,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Z(){this.next=this.b=this.a=null}function ee(e){wn.setTimeout(function(){throw e},0)}function te(e,t){tr||ne(),nr||(tr(),nr=!0),rr.add(e,t)}function ne(){var e=wn.Promise.resolve(void 0);tr=function(){e.then(re)}}function re(){for(var e;e=$();){try{e.a.call(e.b)}catch(e){ee(e)}var t=er;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}nr=!1}function ie(e,t){H.call(this),this.b=e||1,this.a=t||wn,this.f=d(this.gb,this),this.g=_n()}function oe(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function ae(e,t,n){if("function"==s(e))n&&(e=d(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=d(e.handleEvent,e)}return 2147483647<Number(t)?-1:wn.setTimeout(e,t||0)}function se(e,t,n){y.call(this),this.f=null!=n?d(e,n):e,this.c=t,this.b=d(this.ab,this),this.a=[]}function ue(e){e.U=ae(e.b,e.c),e.f.apply(null,e.a)}function ce(e){y.call(this),this.b=e,this.a={}}function le(e,t,n,r){u(n)||(n&&(ir[0]=n.toString()),n=ir);for(var i=0;i<n.length;i++){var o=F(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function fe(e){_(e.a,function(e,t){this.a.hasOwnProperty(t)&&q(e)},e),e.a={}}function he(){}function de(e){C.call(this,"serverreachability",e)}function pe(e){or.dispatchEvent(new de(or,e))}function me(e){C.call(this,"statevent",e)}function ye(e){or.dispatchEvent(new me(or,e))}function ge(e){C.call(this,"timingevent",e)}function ve(e,t){if("function"!=s(e))throw Error("Fn must not be null and must be a function");return wn.setTimeout(function(){e()},t)}function be(){}function we(e){var t;return(t=e.a)||(t=e.a={}),t}function Ee(){}function Te(){C.call(this,"d")}function _e(){C.call(this,"c")}function Se(){}function Ie(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ce(this),this.O=lr,e=Rn?125:void 0,this.P=new ie(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}function ke(e,t,n){e.F=1,e.f=Ze(Xe(t)),e.l=n,e.H=!0,Ae(e,null)}function Ne(e,t,n,r){e.F=1,e.f=Ze(Xe(t)),e.l=null,e.H=n,Ae(e,r)}function Ae(e,t){e.v=_n(),Oe(e),e.D=Xe(e.f),$e(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new se(d(e.Ka,e,e.a),e.J)),le(e.I,e.a,"readystatechange",e.eb),t=e.h?S(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),pe(1)}function xe(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=Ce(e,n);if(i==hr){4==t&&(e.c=4,ye(14),r=!1);break}if(i==fr){e.c=4,ye(15),r=!1;break}Le(e,i)}4==t&&0==n.length&&(e.c=1,ye(16),r=!1),e.b=e.b&&r,r||(Re(e),Pe(e))}function Ce(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?hr:(n=Number(t.substring(n,r)),isNaN(n)?fr:(r+=1)+n>t.length?hr:(t=t.substr(r,n),e.A=r+n,t))}function Oe(e){e.R=_n()+e.O,De(e,e.O)}function De(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=ve(d(e.bb,e),t)}function Me(e){e.i&&(wn.clearTimeout(e.i),e.i=null)}function Pe(e){e.g.Da()||e.m||e.g.na(e)}function Re(e){Me(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,oe(e.P),fe(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Le(e,t){try{e.g.Ga(e,t),pe(4)}catch(e){}}function Fe(e){if(e.C&&"function"==typeof e.C)return e.C();if(r(e))return e.split("");if(c(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}t=[],n=0;for(i in e)t[n++]=e[i];return t}function Ue(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(c(e)||r(e))kn(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(c(e)||r(e)){n=[];for(var i=e.length,o=0;o<i;o++)n.push(o)}else for(o in n=[],i=0,e)n[i++]=o;i=Fe(e),o=i.length;for(var a=0;a<o;a++)t.call(void 0,i[a],n&&n[a],e)}}function je(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof je)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Be(e){e.b={},e.a.length=0,e.c=0}function Ve(e,t){ze(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&qe(e))}function qe(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];ze(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],ze(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function We(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ge(e,t){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1;var n;e instanceof Ge?(this.h=void 0!==t?t:e.h,Ke(this,e.f),this.j=e.j,He(this,e.b),Qe(this,e.i),this.a=e.a,Ye(this,lt(e.c)),this.g=e.g):e&&(n=String(e).match(dr))?(this.h=!!t,Ke(this,n[1]||"",!0),this.j=nt(n[2]||""),He(this,n[3]||"",!0),Qe(this,n[4]),this.a=nt(n[5]||"",!0),Ye(this,n[6]||"",!0),this.g=nt(n[7]||"")):(this.h=!!t,this.c=new ot(null,this.h))}function Xe(e){return new Ge(e)}function Ke(e,t,n){e.f=n?nt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function He(e,t,n){e.b=n?nt(t,!0):t}function Qe(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ye(e,t,n){t instanceof ot?(e.c=t,ht(e.c,e.h)):(n||(t=rt(t,gr)),e.c=new ot(t,e.h))}function Je(e,t,n){e.c.set(t,n)}function $e(e,t,n){u(n)||(n=[String(n)]),ct(e.c,t,n)}function Ze(e){return Je(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_n()).toString(36)),e}function et(e){return e instanceof Ge?Xe(e):new Ge(e,void 0)}function tt(e,t,n,r){var i=new Ge(null,void 0);return e&&Ke(i,e),t&&He(i,t),n&&Qe(i,n),r&&(i.a=r),i}function nt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function rt(e,t,n){return r(e)?(e=encodeURI(e).replace(t,it),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function it(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}function ot(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function at(e){e.a||(e.a=new je,e.b=0,e.c&&We(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function st(e,t){at(e),t=ft(e,t),ze(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Ve(e.a,t))}function ut(e,t){return at(e),t=ft(e,t),ze(e.a.b,t)}function ct(e,t,n){st(e,t),0<n.length&&(e.c=null,e.a.set(ft(e,t),b(n)),e.b+=n.length)}function lt(e){var t=new ot;return t.c=e.c,e.a&&(t.a=new je(e.a),t.b=e.b),t}function ft(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function ht(e,t){t&&!e.f&&(at(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(st(this,t),ct(this,n,e))},e)),e.f=t}function dt(){}function pt(){}function mt(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function yt(e){var t=e.a.F.a;if(null!=t)ye(4),t?(ye(10),rn(e.a,e,!1)):(ye(11),rn(e.a,e,!0));else{e.b=new Ie(e,void 0,void 0),e.b.h=e.h,t=e.a,t=cn(t,t.Y()?e.f:null,e.i),ye(4),$e(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Je(t,n,r),Ne(e.b,t,!1,e.f)}}function gt(){this.a=this.b=null}function vt(){this.a=new je}function bt(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[En]||(e[En]=++Tn)):t.charAt(0)+e}function wt(e,t){this.b=e,this.a=t}function Et(e){this.g=e||br,wn.PerformanceNavigationTiming?(e=wn.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(wn.ka&&wn.ka.Ea&&wn.ka.Ea()&&wn.ka.Ea().zb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new vt),this.b=null,this.c=[]}function Tt(e,t){!e.a&&(E(t,"spdy")||E(t,"quic")||E(t,"h2"))&&(e.f=e.g,e.a=new vt,e.b&&(kt(e,e.b),e.b=null))}function _t(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function St(e){return e.b?1:e.a?e.a.a.c:0}function It(e,t){return e.b?e=e.b==t:e.a?(t=bt(t),e=ze(e.a.a.b,t)):e=!1,e}function kt(e,t){e.a?e.a.add(t):e.b=t}function Nt(e,t){if(e.b&&e.b==t)e.b=null;else{var n;(n=e.a)&&(n=bt(t),n=ze(e.a.a.b,n)),n&&Ve(e.a.a,bt(t))}}function At(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return kn(e.a.C(),function(e){t=t.concat(e.j)}),t}return b(e.c)}function xt(){}function Ct(){this.a=new xt}function Ot(e,t,n){var r=n||"";try{Ue(e,function(e,n){var i=e;l(e)&&(i=Zn(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Dt(e,t){var n=new he;if(wn.Image){var r=new Image;r.onload=p(Mt,n,r,"TestLoadImage: loaded",!0,t),r.onerror=p(Mt,n,r,"TestLoadImage: error",!1,t),r.onabort=p(Mt,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=p(Mt,n,r,"TestLoadImage: timeout",!1,t),wn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Mt(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Pt(e){H.call(this),this.headers=new je,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Er,this.D=this.F=!1}function Rt(e){return Mn&&x(9)&&i(e.timeout)&&void 0!==e.ontimeout}function Lt(e){return"content-type"==e.toLowerCase()}function Ft(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Ut(e),Bt(e)}function Ut(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function jt(e){if(e.b&&"undefined"!=typeof bn&&(!e.s[1]||4!=qt(e)||2!=e.T()))if(e.l&&4==qt(e))ae(e.Fa,0,e);else if(e.dispatchEvent("readystatechange"),4==qt(e)){e.b=!1;try{var t=e.T();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=0===t){var o=String(e.A).match(dr)[1]||null;if(!o&&wn.self&&wn.self.location){var a=wn.self.location.protocol;o=a.substr(0,a.length-1)}i=!Tr.test(o?o.toLowerCase():"")}r=i}r?(e.dispatchEvent("complete"),e.dispatchEvent("success")):(e.h=6,e.f=e.za()+" ["+e.T()+"]",Ut(e))}finally{Bt(e)}}}function Bt(e,t){if(e.a){Vt(e);var n=e.a,r=e.s[0]?a:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Vt(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(wn.clearTimeout(e.m),e.m=null)}function qt(e){return e.a?e.a.readyState:0}function zt(e,t){return e.a?e.a.getResponseHeader(t):null}function Wt(e){var t="";return _(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Gt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}if(i)return e;if(n=Wt(n),r(e)){if(t=encodeURIComponent(String(t)),n=null!=n?"="+encodeURIComponent(String(n)):"",t+=n){if(n=e.indexOf("#"),0>n&&(n=e.length),0>(i=e.indexOf("?"))||i>n){i=n;var o=""}else o=e.substring(i+1,n);e=[e.substr(0,i),o,e.substr(n)],n=e[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Je(e,t,n),e}function Xt(e){this.f=[],this.F=new gt,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!o("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=o("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Sa=o("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Qa=o("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=o("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.La=e&&e.Ab||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new Et(e&&e.concurrentRequestLimit),this.ja=new Ct,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Kt(e){if(Ht(e),3==e.u){var t=e.P++,n=Xe(e.B);Je(n,"SID",e.H),Je(n,"RID",t),Je(n,"TYPE","terminate"),Zt(e,n),t=new Ie(e,t,void 0),t.F=2,t.f=Ze(Xe(n)),n=!1,wn.navigator&&wn.navigator.sendBeacon&&(n=wn.navigator.sendBeacon(t.f.toString(),"")),!n&&wn.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=_n(),Oe(t)}un(e)}function Ht(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(wn.clearTimeout(e.l),e.l=null),on(e),e.b.cancel(),e.h&&(i(e.h)&&wn.clearTimeout(e.h),e.h=null)}function Qt(e,t){e.f.push(new wt(e.Ra++,t)),3==e.u&&Yt(e)}function Yt(e){_t(e.b)||e.h||(e.h=!0,te(e.Ia,e),e.A=0)}function Jt(e,t){return!(St(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Pa?0:e.Qa))&&(e.h=ve(d(e.Ia,e,t),an(e,e.A)),e.A++,!0))}function $t(e,t){var n;n=t?t.W:e.P++;var r=Xe(e.B);Je(r,"SID",e.H),Je(r,"RID",n),Je(r,"AID",e.O),Zt(e,r),e.g&&e.i&&Gt(r,e.g,e.i),n=new Ie(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=en(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),kt(e.b,n),ke(n,r,t)}function Zt(e,t){e.c&&Ue({},function(e,n){Je(t,n,e)})}function en(e,t,n){n=Math.min(e.f.length,n);var r=e.c?d(e.c.Ta,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{Ot(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function tn(e){e.a||e.l||(e.S=1,te(e.Ha,e),e.v=0)}function nn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=ve(d(e.Ha,e),an(e,e.v)),e.v++,!0)}function rn(e,t,n){var r=t.l;r&&Tt(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=cn(e,null,e.ha),Yt(e)}function on(e){null!=e.s&&(wn.clearTimeout(e.s),e.s=null)}function an(e,t){var n=e.Oa+Math.floor(Math.random()*e.Sa);return e.ma()||(n*=2),n*t}function sn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=d(e.fb,e);n||(n=new Ge("//www.google.com/images/cleardot.gif"),wn.location&&"http"==wn.location.protocol||Ke(n,"https"),Ze(n)),Dt(n.toString(),r)}else ye(2);e.u=0,e.c&&e.c.ta(t),un(e),Ht(e)}function un(e){e.u=0,e.m=-1,e.c&&(0==At(e.b).length&&0==e.f.length||(e.b.c.length=0,b(e.f),e.f.length=0),e.c.sa())}function cn(e,t,n){var r=et(n);if(""!=r.b)t&&He(r,t+"."+r.b),Qe(r,r.i);else{var i,o=wn.location;i=t?t+"."+o.hostname:o.hostname,r=tt(o.protocol,i,+o.port,n)}return e.V&&_(e.V,function(e,t){Je(r,t,e)}),t=e.j,n=e.I,t&&n&&Je(r,t,n),Je(r,"VER",e.wa),Zt(e,r),r}function ln(){}function fn(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r=arguments[n];if(0==r.lastIndexOf("/",0))t=r;else{var i;(i=""==t)||(i=t.length-1,i=0<=i&&t.indexOf("/",i)==i),t+=i?r:"/"+r}}return t}function hn(){if(Mn&&!(10<=Number(Vn)))throw Error("Environmental error: no available transport.")}function dn(e,t){H.call(this),this.a=new Xt(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:fn(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!w(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!w(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new yn(this)}function pn(e){Te.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function mn(){_e.call(this),this.status=1}function yn(e){this.a=e}n.d(t,"ErrorCode",function(){return Nr}),n.d(t,"EventType",function(){return Ar}),n.d(t,"WebChannel",function(){return xr}),n.d(t,"XhrIo",function(){return Cr}),n.d(t,"createWebChannelTransport",function(){return kr});var gn,vn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},bn=bn||{},wn=vn,En="closure_uid_"+(1e9*Math.random()>>>0),Tn=0,_n=Date.now||function(){return+new Date};y.prototype.j=!1,y.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),!1)){this[En]||(this[En]=++Tn)}},y.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Sn,In=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(r(e))return r(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},kn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=r(e)?e.split(""):e,a=0;a<i;a++)a in o&&t.call(n,o[a],a,e)},Nn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};e:{var An=wn.navigator;if(An){var xn=An.userAgent;if(xn){Sn=xn;break e}}Sn=""}var Cn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");k[" "]=a;var On,Dn=E(Sn,"Opera"),Mn=E(Sn,"Trident")||E(Sn,"MSIE"),Pn=E(Sn,"Edge"),Rn=Pn||Mn,Ln=E(Sn,"Gecko")&&!(E(Sn.toLowerCase(),"webkit")&&!E(Sn,"Edge"))&&!(E(Sn,"Trident")||E(Sn,"MSIE"))&&!E(Sn,"Edge"),Fn=E(Sn.toLowerCase(),"webkit")&&!E(Sn,"Edge");e:{var Un="",jn=function(){var e=Sn;return Ln?/rv:([^\);]+)(\)|;)/.exec(e):Pn?/Edge\/([\d\.]+)/.exec(e):Mn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fn?/WebKit\/(\S+)/.exec(e):Dn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(jn&&(Un=jn?jn[1]:""),Mn){var Bn=A();if(null!=Bn&&Bn>parseFloat(Un)){On=String(Bn);break e}}On=Un}var Vn,qn={},zn=wn.document;Vn=zn&&Mn?A()||("CSS1Compat"==zn.compatMode?parseInt(On,10):5):void 0;var Wn=!Mn||9<=Number(Vn),Gn=Mn&&!x("9"),Xn=function(){if(!wn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{wn.addEventListener("test",a,t),wn.removeEventListener("test",a,t)}catch(e){}return e}();C.prototype.b=function(){this.Ja=!1},m(O,C);var Kn={2:"touch",3:"pen",4:"mouse"};O.prototype.b=function(){O.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Gn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var Hn="closure_listenable_"+(1e6*Math.random()|0),Qn=0;P.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=L(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new D(t,this.src,o,!!r,i),t.Z=n,e.push(t)),t};var Yn="closure_lm_"+(1e6*Math.random()|0),Jn={},$n="__closure_events_fn_"+(1e9*Math.random()>>>0);m(H,y),H.prototype[Hn]=!0,gn=H.prototype,gn.addEventListener=function(e,t,n,r){F(this,e,t,n,r)},gn.removeEventListener=function(e,t,n,r){V(this,e,t,n,r)},gn.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var i=e.type||e;if(r(e))e=new C(e,n);else if(e instanceof C)e.target=e.target||n;else{var o=e;e=new C(i,n),I(e,o)}if(o=!0,t)for(var a=t.length-1;0<=a;a--){var s=e.a=t[a];o=Q(s,i,!0,e)&&o}if(s=e.a=n,o=Q(s,i,!0,e)&&o,o=Q(s,i,!1,e)&&o,t)for(a=0;a<t.length;a++)s=e.a=t[a],o=Q(s,i,!1,e)&&o;return o},gn.G=function(){if(H.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)M(n[r]);delete t.a[e],t.b--}}this.B=null},gn.Aa=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},gn.Ba=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Zn=wn.JSON.stringify;Y.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var er=new Y(function(){return new Z},function(e){e.reset()});J.prototype.add=function(e,t){var n=er.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Z.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Z.prototype.reset=function(){this.next=this.b=this.a=null};var tr,nr=!1,rr=new J;m(ie,H),gn=ie.prototype,gn.ba=!1,gn.L=null,gn.gb=function(){if(this.ba){var e=_n()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(oe(this),this.start()))}},gn.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_n())},gn.G=function(){ie.N.G.call(this),oe(this),delete this.a},m(se,y),gn=se.prototype,gn.ea=!1,gn.U=null,gn.Ua=function(e){this.a=arguments,this.U?this.ea=!0:ue(this)},gn.G=function(){se.N.G.call(this),this.U&&(wn.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},gn.ab=function(){this.U=null,this.ea&&(this.ea=!1,ue(this))},m(ce,y);var ir=[];ce.prototype.G=function(){ce.N.G.call(this),fe(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var or=new H;m(de,C),m(me,C),m(ge,C);var ar={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},sr={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};be.prototype.a=null;var ur={OPEN:"a",ib:"b",Na:"c",rb:"d"};m(Te,C),m(_e,C);var cr;m(Se,be),cr=new Se;var lr=45e3,fr={},hr={};gn=Ie.prototype,gn.setTimeout=function(e){this.O=e},gn.eb=function(e){e=e.target;var t=this.B;t&&3==qt(e)?t.Ua():this.Ka(e)},gn.Ka=function(e){try{if(e==this.a)e:{var t=qt(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!Rn&&!this.a.aa())){this.m||4!=t||7==n||pe(8==n||0>=r?3:2),Me(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=zt(this.a,"X-HTTP-Initial-Response");if(a&&!w(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,ye(12),Re(this),Pe(this);break e}this.s=!0,Le(this,s)}this.H?(xe(this,t,o),Rn&&this.b&&3==t&&(le(this.I,this.P,"tick",this.cb),this.P.start())):Le(this,o),4==t&&Re(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,Oe(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,ye(12)):(this.c=0,ye(13)),Re(this),Pe(this)}}}catch(e){}},gn.cb=function(){if(this.a){var e=qt(this.a),t=this.a.aa();this.A<t.length&&(Me(this),xe(this,e,t),this.b&&4!=e&&Oe(this))}},gn.cancel=function(){this.m=!0,Re(this)},gn.bb=function(){this.i=null;var e=_n();0<=e-this.R?(2!=this.F&&(pe(3),ye(17)),Re(this),this.c=2,Pe(this)):De(this,this.R-e)},gn=je.prototype,gn.C=function(){qe(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},gn.K=function(){return qe(this),this.a.concat()},gn.get=function(e,t){return ze(this.b,e)?this.b[e]:t},gn.set=function(e,t){ze(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},gn.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var dr=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;Ge.prototype.toString=function(){var e=[],t=this.f;t&&e.push(rt(t,pr,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(rt(t,pr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(rt(n,"/"==n.charAt(0)?yr:mr,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",rt(n,vr)),e.join("")},Ge.prototype.resolve=function(e){var t=Xe(this),n=!!e.f;n?Ke(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?He(t,e.b):n=null!=e.i;var r=e.a;if(n)Qe(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(E(i,"./")||E(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ye(t,lt(e.c)):n=!!e.g,n&&(t.g=e.g),t};var pr=/[#\/\?@]/g,mr=/[#\?:]/g,yr=/[#\?]/g,gr=/[#\?@]/g,vr=/#/g;gn=ot.prototype,gn.add=function(e,t){at(this),this.c=null,e=ft(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},gn.forEach=function(e,t){at(this),this.a.forEach(function(n,r){kn(n,function(n){e.call(t,n,r,this)},this)},this)},gn.K=function(){at(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},gn.C=function(e){at(this);var t=[];if(r(e))ut(this,e)&&(t=v(t,this.a.get(ft(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=v(t,e[n])}return t},gn.set=function(e,t){return at(this),this.c=null,e=ft(this,e),ut(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},gn.get=function(e,t){return e?(e=this.C(e),0<e.length?String(e[0]):t):t},gn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},m(pt,dt),gn=mt.prototype,gn.M=null,gn.$=function(e){return this.a.$(e)},gn.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},gn.Da=function(){return!1},gn.Ga=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=zt(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=zt(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return t=this.a,t.m=this.c,void sn(t,2)}this.f=r[0]}else t=this.a,t.m=this.c,sn(t,2)}else 1==this.M&&(this.g?ye(6):"11111"==t?(ye(5),this.g=!0,(!Mn||10<=Number(Vn))&&(this.c=200,this.b.cancel(),ye(11),rn(this.a,this,!0))):(ye(7),this.g=!1))},gn.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,yt(this)):1==this.M&&(this.g?(ye(11),rn(this.a,this,!0)):(ye(10),rn(this.a,this,!1)));else{0==this.M?ye(8):1==this.M&&ye(9);var e=this.a;e.m=this.c,sn(e,2)}},gn.Y=function(){return this.a.Y()},gn.ma=function(){return this.a.ma()},vt.prototype.add=function(e){this.a.set(bt(e),e)},vt.prototype.C=function(){return this.a.C()};var br=10;Et.prototype.cancel=function(){this.c=At(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(kn(this.a.C(),function(e){e.cancel()}),Be(this.a.a))},xt.prototype.stringify=function(e){return wn.JSON.stringify(e,void 0)},xt.prototype.parse=function(e){return wn.JSON.parse(e,void 0)};var wr=wn.JSON.parse;m(Pt,H);var Er="",Tr=/^https?$/i,_r=["POST","PUT"];gn=Pt.prototype,gn.ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=we(this.H?this.H:cr),this.a.onreadystatechange=d(this.Fa,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Ft(this,e)}e=n||"";var i=new je(this.headers);r&&Ue(r,function(e,t){i.set(t,e)}),r=g(i.K()),n=wn.FormData&&e instanceof wn.FormData,!(0<=In(_r,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Vt(this),0<this.o&&((this.D=Rt(this.a))?(this.a.timeout=this.o,this.a.ontimeout=d(this.Ca,this)):this.m=ae(this.Ca,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Ft(this,e)}},gn.Ca=function(){"undefined"!=typeof bn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},gn.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Bt(this))},gn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Bt(this,!0)),Pt.N.G.call(this)},gn.Fa=function(){this.j||(this.w||this.l||this.g?jt(this):this.$a())},gn.$a=function(){jt(this)},gn.T=function(){try{return 2<qt(this)?this.a.status:-1}catch(e){return-1}},gn.za=function(){try{return 2<qt(this)?this.a.statusText:""}catch(e){return""}},gn.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},gn.Va=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wr(t)}},gn.ya=function(){return this.h},gn.Ya=function(){return r(this.f)?this.f:String(this.f)},gn=Xt.prototype,gn.wa=8,gn.u=1,gn.Da=function(){return 0==this.u},gn.Ia=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random()),e=this.P++;var t=new Ie(this,e,void 0),n=this.i;this.J&&(n?(n=S(n),I(n,this.J)):n=this.J),null===this.g&&(t.h=n);var i;if(this.W)e:{for(var o=i=0;o<this.f.length;o++){var a=this.f[o];if(void 0===(a="__data__"in a.a&&(a=a.a.__data__,r(a))?a.length:void 0))break;if(4096<(i+=a)){i=o;break e}if(4096===i||o===this.f.length-1){i=o+1;break e}}i=1e3}else i=1e3;i=en(this,t,i),o=Xe(this.B),Je(o,"RID",e),Je(o,"CVER",22),this.o&&this.j&&Je(o,"X-HTTP-Session-Id",this.j),Zt(this,o),this.g&&n&&Gt(o,this.g,n),kt(this.b,t),this.W?(Je(o,"$req",i),Je(o,"SID","null"),t.S=!0,ke(t,o,null)):ke(t,o,i),this.u=2}}else 3==this.u&&(e?$t(this,e):0==this.f.length||_t(this.b)||$t(this))},gn.Ha=function(){this.l=null,this.a=new Ie(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Xe(this.pa);Je(e,"RID","rpc"),Je(e,"SID",this.H),Je(e,"CI",this.ia?"0":"1"),Je(e,"AID",this.O),Zt(this,e),Je(e,"TYPE","xmlhttp"),this.g&&this.i&&Gt(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),Ne(this.a,e,!0,this.ga)},gn.Ga=function(e,t){if(0!=this.u&&(this.a==e||It(this.b,e)))if(this.m=e.o,!e.s&&It(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(u(n)&&3==n.length){if(t=n,0==t[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;on(this),this.a.cancel(),this.a=null}nn(this),ye(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ve(d(this.Za,this),6e3));if(1>=St(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else sn(this,11)}else if((e.s||this.a==e)&&on(this),!w(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var o=r[3];null!=o&&(this.wa=o),r=r[5],null!=r&&i(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((o=zt(r,"X-Client-Wire-Protocol"))&&Tt(this.b,o),this.j&&(r=zt(r,"X-HTTP-Session-Id")))&&(this.I=r,Je(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=cn(this,this.Y()?this.ga:null,this.ha),r.s?(Nt(this.b,r),(o=this.D)&&r.setTimeout(o),r.i&&(Me(r),Oe(r)),this.a=r):tn(this),0<this.f.length&&Yt(this)}else"stop"!=r[0]&&"close"!=r[0]||sn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?sn(this,7):Kt(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},gn.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,nn(this),ye(19))},gn.na=function(e){var t=null;if(this.a==e){on(this),this.a=null;var n=2}else{if(!It(this.b,e))return;t=e.j,Nt(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=_n()-e.v,or.dispatchEvent(new ge(or,e.l?e.l.length:0,t,this.A)),Yt(this)):tn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&Jt(this,e)||2==n&&nn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:sn(this,5);break;case 4:sn(this,10);break;case 3:sn(this,6);break;default:sn(this,2)}}},gn.fb=function(e){ye(e?2:1)},gn.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return e=new Pt(this.La),e.F=this.R,e},gn.ma=function(){return!!this.c&&!0},gn.Y=function(){return this.R},gn=ln.prototype,gn.va=function(){},gn.ua=function(){},gn.ta=function(){},gn.sa=function(){},gn.Ta=function(){},hn.prototype.a=function(e,t){return new dn(e,t)},m(dn,H),gn=dn.prototype,gn.addEventListener=function(e,t,n,r){dn.N.addEventListener.call(this,e,t,n,r)},gn.removeEventListener=function(e,t,n,r){dn.N.removeEventListener.call(this,e,t,n,r)},gn.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;ye(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new mt(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Gt(t,e.g,e.i)),e=e.w,e.i=n,t=cn(e.a,null,e.i),ye(3),n=e.a.F.b,null!=n?(e.f=n[0],e.M=1,yt(e)):($e(t,"MODE","init"),!e.a.o&&e.a.j&&$e(t,"X-HTTP-Session-Id",e.a.j),e.b=new Ie(e,void 0,void 0),e.b.h=e.h,Ne(e.b,t,!1,null),e.M=0)},gn.close=function(){Kt(this.a)},gn.Xa=function(e){if(r(e)){var t={};t.__data__=e,Qt(this.a,t)}else this.h?(t={},t.__data__=Zn(e),Qt(this.a,t)):Qt(this.a,e)},gn.G=function(){this.a.c=null,delete this.f,Kt(this.a),delete this.a,dn.N.G.call(this)},m(pn,Te),m(mn,_e),m(yn,ln),yn.prototype.va=function(){this.a.dispatchEvent("a")},yn.prototype.ua=function(e){this.a.dispatchEvent(new pn(e))},yn.prototype.ta=function(e){this.a.dispatchEvent(new mn(e))},yn.prototype.sa=function(){this.a.dispatchEvent("b")};var Sr=p(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},hn);hn.prototype.createWebChannel=hn.prototype.a,dn.prototype.send=dn.prototype.Xa,dn.prototype.open=dn.prototype.Wa,dn.prototype.close=dn.prototype.close,ar.NO_ERROR=0,ar.TIMEOUT=8,ar.HTTP_ERROR=6,sr.COMPLETE="complete",Ee.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",H.prototype.listen=H.prototype.Aa,Pt.prototype.listenOnce=Pt.prototype.Ba,Pt.prototype.getLastError=Pt.prototype.Ya,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.T,Pt.prototype.getStatusText=Pt.prototype.za,Pt.prototype.getResponseJson=Pt.prototype.Va,Pt.prototype.getResponseText=Pt.prototype.aa,Pt.prototype.send=Pt.prototype.ca;var Ir={createWebChannelTransport:Sr,ErrorCode:ar,EventType:sr,WebChannel:Ee,XhrIo:Pt},kr=Ir.createWebChannelTransport,Nr=Ir.ErrorCode,Ar=Ir.EventType,xr=Ir.WebChannel,Cr=Ir.XhrIo;t.default=Ir}.call(t,n(4))},function(e,t,n){"use strict";(function(e){function r(e){return i(void 0,e)}function i(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=i(e[r],t[r]));return e}function o(e,t,n){e[t]=n}function a(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function s(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function u(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function c(){return"object"===typeof self&&self.self===self}function l(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function f(){return!0===S.NODE_CLIENT||!0===S.NODE_ADMIN}function h(e,t){return e.replace(L,function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"})}function d(e){return JSON.parse(e)}function p(e){return JSON.stringify(e)}function m(e,t){var n=new oe(e,t);return n.subscribe.bind(n)}function y(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function g(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}function v(){}function b(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function w(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(b(e,t,r)+"must be a valid firebase namespace.")}function E(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(b(e,t,r)+"must be a valid function.")}function T(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(b(e,t,r)+"must be a valid context object.")}Object.defineProperty(t,"__esModule",{value:!0});var _=n(33),S={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},I=function(e,t){if(!e)throw k(t)},k=function(e){return new Error("Firebase Database ("+S.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},N=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},A=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var o=e[n++],a=e[n++],s=e[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{var o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,f=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(N(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):A(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i;var u=i<e.length,c=u?n[e.charAt(i)]:64;++i;var l=i<e.length,f=l?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==f)throw Error();var h=o<<2|s>>4;if(r.push(h),64!=c){var d=s<<4&240|c>>2;if(r.push(d),64!=f){var p=c<<6&192|f;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},C=function(e){var t=N(e);return x.encodeByteArray(t,!0)},O=function(e){try{return x.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},D=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}(),M="FirebaseError",P=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=M,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,R.prototype.create),i}return _.__extends(t,e),t}(Error),R=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?h(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new P(i,s),c=0,l=Object.keys(r);c<l.length;c++){var f=l[c];"_"!==f.slice(-1)&&(f in u&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),u[f]=r[f])}return u},e}(),L=/\{\$([^}]+)}/g,F=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=d(O(o[0])||""),n=d(O(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},U=function(e){var t,n,r=F(e).claims,i=Math.floor((new Date).getTime()/1e3);return"object"===typeof r&&(r.hasOwnProperty("nbf")?t=r.nbf:r.hasOwnProperty("iat")&&(t=r.iat),n=r.hasOwnProperty("exp")?r.exp:t+86400),i&&t&&n&&i>=t&&i<=n},j=function(e){var t=F(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},B=function(e){var t=F(e),n=t.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},V=function(e){var t=F(e).claims;return"object"===typeof t&&!0===t.admin},q=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},z=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},W=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},G=function(e,t){return W(t,function(t,n){e[t]=n}),e},X=function(e){return G({},e)},K=function(e){return"object"===typeof e&&null!==e},H=function(e){for(var t in e)return!1;return!0},Q=function(e){var t=0;for(var n in e)t++;return t},Y=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r},J=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},$=function(e,t,n){var r=J(e,t,n);return r&&e[r]},Z=function(e){for(var t in e)return t},ee=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},te=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0},ne=function(e){var t=[];return W(e,function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},re=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},ie=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4],r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);var i=(s<<5|s>>>27)+o+f+a+n[r]&4294967295;f=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}(),oe=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=g(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=v),void 0===r.error&&(r.error=v),void 0===r.complete&&(r.complete=v);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}(),ae=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){var o=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}},se=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,I(r<e.length,"Surrogate pair missing trail surrogate.");i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ue=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};t.CONSTANTS=S,t.Deferred=D,t.ErrorFactory=R,t.FirebaseError=P,t.Sha1=ie,t.assert=I,t.assertionError=k,t.async=y,t.base64=x,t.base64Decode=O,t.base64Encode=C,t.clone=X,t.contains=q,t.createSubscribe=m,t.decode=F,t.deepCopy=r,t.deepExtend=i,t.errorPrefix=b,t.every=te,t.extend=G,t.findKey=J,t.findValue=$,t.forEach=W,t.getAnyKey=Z,t.getCount=Q,t.getUA=a,t.getValues=ee,t.isAdmin=V,t.isBrowser=c,t.isEmpty=H,t.isMobileCordova=s,t.isNode=u,t.isNodeSdk=f,t.isNonNullObject=K,t.isReactNative=l,t.isValidFormat=B,t.isValidTimestamp=U,t.issuedAtTime=j,t.jsonEval=d,t.map=Y,t.patchProperty=o,t.querystring=ne,t.querystringDecode=re,t.safeGet=z,t.stringLength=ue,t.stringToByteArray=se,t.stringify=p,t.validateArgCount=ae,t.validateCallback=E,t.validateContextObject=T,t.validateNamespace=w}).call(t,n(4))},function(e,t,n){"use strict";t.a={apiKey:"AIzaSyDHcrVxSLoGA-_t-Ad46Ds1YEvbM2GazQw",authDomain:"chip-player-js.firebaseapp.com",databaseURL:"https://chip-player-js.firebaseio.com",projectId:"chip-player-js",storageBucket:"chip-player-js.appspot.com",messagingSenderId:"762111649253"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(0),o=r(i),a=n(183),s=r(a);t.default=o.default.createContext||s.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function u(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,r){e=n,t.forEach(function(t){return t(e,r)})}}}function c(e){return Array.isArray(e)?e[0]:e}function l(e,t){var n,r,l="__create-react-context-"+(0,m.default)()+"__",h=function(e){function n(){var t,r,a;i(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return t=r=o(this,e.call.apply(e,[this].concat(c))),r.emitter=u(r.props.value),a=t,o(r,a)}return a(n,e),n.prototype.getChildContext=function(){var e;return e={},e[l]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,r=e.value,i=void 0;s(n,r)?i=0:(i="function"===typeof t?t(n,r):g,0!==(i|=0)&&this.emitter.set(e.value,i))}},n.prototype.render=function(){return this.props.children},n}(f.Component);h.childContextTypes=(n={},n[l]=d.default.object.isRequired,n);var p=function(t){function n(){var e,r,a;i(this,n);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return e=r=o(this,t.call.apply(t,[this].concat(u))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!==((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},a=e,o(r,a)}return a(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?g:t},n.prototype.componentDidMount=function(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?g:e},n.prototype.componentWillUnmount=function(){this.context[l]&&this.context[l].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[l]?this.context[l].get():e},n.prototype.render=function(){return c(this.props.children)(this.state.value)},n}(f.Component);return p.contextTypes=(r={},r[l]=d.default.object,r),{Provider:h,Consumer:p}}t.__esModule=!0;var f=n(0),h=(r(f),n(14)),d=r(h),p=n(186),m=r(p),y=n(187),g=(r(y),1073741823);t.default=l,e.exports=t.default},function(e,t,n){"use strict";function r(){}function i(){}var o=n(185);i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(t,n(4))},function(e,t,n){"use strict";var r=n(188),i=r;e.exports=i},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&r(e),s=t&&r(t),u=a||s;if(e&&r(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var c=void 0;if(o.length){var l=o[o.length-1];c="."===l||".."===l||""===l}else c=!1;for(var f=0,h=o.length;h>=0;h--){var d=o[h];"."===d?i(o,h):".."===d?(i(o,h),f++):f&&(i(o,h),f--)}if(!u)for(;f--;f)o.unshift("..");!u||""===o[0]||o[0]&&r(o[0])||o.unshift("");var p=o.join("/");return c&&"/"!==p.substr(-1)&&(p+="/"),p}t.a=o},function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,n){return r(e,t[n])});var n="undefined"===typeof e?"undefined":i(e);if(n!==("undefined"===typeof t?"undefined":i(t)))return!1;if("object"===n){var o=e.valueOf(),a=t.valueOf();if(o!==e||a!==t)return r(o,a);var s=Object.keys(e),u=Object.keys(t);return s.length===u.length&&s.every(function(n){return r(e[n],t[n])})}return!1}var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a=r},function(e,t,n){function r(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=v.exec(e));){var l=n[0],f=n[1],h=n.index;if(a+=e.slice(o,h),o=h+l.length,f)a+=f[1];else{var d=e[o],p=n[2],m=n[3],y=n[4],g=n[5],b=n[6],w=n[7];a&&(r.push(a),a="");var E=null!=p&&null!=d&&d!==p,T="+"===b||"*"===b,_="?"===b||"*"===b,S=n[2]||s,I=y||g;r.push({name:m||i++,prefix:p||"",delimiter:S,optional:_,repeat:T,partial:E,asterisk:!!w,pattern:I?c(I):w?".*":"[^"+u(S)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function i(e,t){return s(r(e,t))}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function a(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var i="",s=n||{},u=r||{},c=u.pretty?o:encodeURIComponent,l=0;l<e.length;l++){var f=e[l];if("string"!==typeof f){var h,d=s[f.name];if(null==d){if(f.optional){f.partial&&(i+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(g(d)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=c(d[p]),!t[l].test(h))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(h)+"`");i+=(0===p?f.prefix:f.delimiter)+h}}else{if(h=f.asterisk?a(d):c(d),!t[l].test(h))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+h+'"');i+=f.prefix+h}}else i+=f}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e.sensitive?"":"i"}function h(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}function d(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(y(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}function p(e,t,n){return m(r(e,n),t,n)}function m(e,t,n){g(t)||(n=t||n,t=[]),n=n||{};for(var r=n.strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"===typeof s)o+=u(s);else{var c=u(s.prefix),h="(?:"+s.pattern+")";t.push(s),s.repeat&&(h+="(?:"+c+h+")*"),h=s.optional?s.partial?c+"("+h+")?":"(?:"+c+"("+h+"))?":c+"("+h+")",o+=h}}var d=u(n.delimiter||"/"),p=o.slice(-d.length)===d;return r||(o=(p?o.slice(0,-d.length):o)+"(?:"+d+"(?=$))?"),o+=i?"$":r&&p?"":"(?="+d+"|$)",l(new RegExp("^"+o,f(n)),t)}function y(e,t,n){return g(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?h(e,t):g(e)?d(e,t,n):p(e,t,n)}var g=n(192);e.exports=y,e.exports.parse=r,e.exports.compile=i,e.exports.tokensToFunction=s,e.exports.tokensToRegExp=m;var v=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case d:case p:case u:case l:case c:case y:return e;default:switch(e=e&&e.$$typeof){case h:case m:case f:return e;default:return t}}case v:case g:case s:return t}}}function i(e){return r(e)===p}Object.defineProperty(t,"__esModule",{value:!0});var o="function"===typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,u=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,f=o?Symbol.for("react.provider"):60109,h=o?Symbol.for("react.context"):60110,d=o?Symbol.for("react.async_mode"):60111,p=o?Symbol.for("react.concurrent_mode"):60111,m=o?Symbol.for("react.forward_ref"):60112,y=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.memo"):60115,v=o?Symbol.for("react.lazy"):60116;t.typeOf=r,t.AsyncMode=d,t.ConcurrentMode=p,t.ContextConsumer=h,t.ContextProvider=f,t.Element=a,t.ForwardRef=m,t.Fragment=u,t.Lazy=v,t.Memo=g,t.Portal=s,t.Profiler=l,t.StrictMode=c,t.Suspense=y,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===u||e===p||e===l||e===c||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===g||e.$$typeof===f||e.$$typeof===h||e.$$typeof===m)},t.isAsyncMode=function(e){return i(e)||r(e)===d},t.isConcurrentMode=i,t.isContextConsumer=function(e){return r(e)===h},t.isContextProvider=function(e){return r(e)===f},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return r(e)===m},t.isFragment=function(e){return r(e)===u},t.isLazy=function(e){return r(e)===v},t.isMemo=function(e){return r(e)===g},t.isPortal=function(e){return r(e)===s},t.isProfiler=function(e){return r(e)===l},t.isStrictMode=function(e){return r(e)===c},t.isSuspense=function(e){return r(e)===y}},function(e,t,n){"use strict";function r(e){return o.isMemo(e)?c:l[e.$$typeof]||a}function i(e,t,n){if("string"!==typeof t){if(y){var o=m(t);o&&o!==y&&i(e,o,n)}var a=h(t);d&&(a=a.concat(d(t)));for(var u=r(e),c=r(t),l=0;l<a.length;++l){var g=a[l];if(!s[g]&&(!n||!n[g])&&(!c||!c[g])&&(!u||!u[g])){var v=p(t,g);try{f(e,g,v)}catch(e){}}}return e}return e}var o=n(78),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},u={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};l[o.ForwardRef]=u;var f=Object.defineProperty,h=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,y=Object.prototype;e.exports=i},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(0),c=n.n(u),l=n(14),f=n.n(l),h=n(196),d=n(198),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.renderChildren=function(e,t,n,i){return"function"===typeof e?e(p({},r.state,{isDragActive:t,isDragAccept:n,isDragReject:i,open:r.open})):e},r.composeHandlers=r.composeHandlers.bind(r),r.onClick=r.onClick.bind(r),r.onDocumentDrop=r.onDocumentDrop.bind(r),r.onDragEnter=r.onDragEnter.bind(r),r.onDragLeave=r.onDragLeave.bind(r),r.onDragOver=r.onDragOver.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrop=r.onDrop.bind(r),r.onFileDialogCancel=r.onFileDialogCancel.bind(r),r.onInputElementClick=r.onInputElementClick.bind(r),r.open=r.open.bind(r),r.setRef=r.setRef.bind(r),r.setRefs=r.setRefs.bind(r),r.isFileDialogActive=!1,r.state={draggedFiles:[],acceptedFiles:[],rejectedFiles:[]},r}return s(t,e),m(t,[{key:"componentDidMount",value:function(){var e=this.props.preventDropOnDocument;this.dragTargets=[],e&&(document.addEventListener("dragover",h.g,!1),document.addEventListener("drop",this.onDocumentDrop,!1)),null!=this.fileInputEl&&this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),window.addEventListener("focus",this.onFileDialogCancel,!1)}},{key:"componentWillUnmount",value:function(){this.props.preventDropOnDocument&&(document.removeEventListener("dragover",h.g),document.removeEventListener("drop",this.onDocumentDrop)),null!=this.fileInputEl&&this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),window.removeEventListener("focus",this.onFileDialogCancel,!1)}},{key:"composeHandlers",value:function(e){return this.props.disabled?null:e}},{key:"onDocumentDrop",value:function(e){this.node&&this.node.contains(e.target)||(e.preventDefault(),this.dragTargets=[])}},{key:"onDragStart",value:function(e){e.persist(),this.props.onDragStart&&Object(h.e)(e)&&this.props.onDragStart.call(this,e)}},{key:"onDragEnter",value:function(e){var t=this;e.preventDefault(),-1===this.dragTargets.indexOf(e.target)&&this.dragTargets.push(e.target),e.persist(),Object(h.e)(e)&&(Promise.resolve(this.props.getDataTransferItems(e)).then(function(n){e.isPropagationStopped()||t.setState({draggedFiles:n,isDragActive:!0})}),this.props.onDragEnter&&this.props.onDragEnter.call(this,e))}},{key:"onDragOver",value:function(e){e.preventDefault(),e.persist();try{e.dataTransfer.dropEffect=this.isFileDialogActive?"none":"copy"}catch(e){}return this.props.onDragOver&&Object(h.e)(e)&&this.props.onDragOver.call(this,e),!1}},{key:"onDragLeave",value:function(e){var t=this;e.preventDefault(),e.persist(),this.dragTargets=this.dragTargets.filter(function(n){return n!==e.target&&t.node.contains(n)}),this.dragTargets.length>0||(this.setState({isDragActive:!1,draggedFiles:[]}),this.props.onDragLeave&&Object(h.e)(e)&&this.props.onDragLeave.call(this,e))}},{key:"onDrop",value:function(e){var t=this,n=this.props,r=n.onDrop,o=n.onDropAccepted,a=n.onDropRejected,s=n.multiple,u=n.accept,c=n.getDataTransferItems;e.preventDefault(),e.persist(),this.dragTargets=[],this.isFileDialogActive=!1,this.draggedFiles=null,this.setState({isDragActive:!1,draggedFiles:[]}),Object(h.e)(e)&&Promise.resolve(c(e)).then(function(n){var c=[],l=[];e.isPropagationStopped()||(n.forEach(function(e){Object(h.b)(e,u)&&Object(h.c)(e,t.props.maxSize,t.props.minSize)?c.push(e):l.push(e)}),!s&&c.length>1&&l.push.apply(l,i(c.splice(0))),t.setState({acceptedFiles:c,rejectedFiles:l},function(){r&&r.call(t,c,l,e),l.length>0&&a&&a.call(t,l,e),c.length>0&&o&&o.call(t,c,e)}))})}},{key:"onClick",value:function(e){var t=this.props,n=t.onClick,r=t.disableClick;n&&n.call(this,e),r||e.isDefaultPrevented()||(e.stopPropagation(),Object(h.f)()?setTimeout(this.open,0):this.open())}},{key:"onInputElementClick",value:function(e){e.stopPropagation(),this.props.inputProps&&this.props.inputProps.onClick&&this.props.inputProps.onClick(e)}},{key:"onFileDialogCancel",value:function(){var e=this,t=this.props.onFileDialogCancel;this.isFileDialogActive&&setTimeout(function(){if(null!=e.fileInputEl){e.fileInputEl.files.length||(e.isFileDialogActive=!1)}"function"===typeof t&&t()},300)}},{key:"setRef",value:function(e){this.node=e}},{key:"setRefs",value:function(e){this.fileInputEl=e}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.acceptClassName,i=e.activeClassName,o=e.children,a=e.disabled,s=e.disabledClassName,u=e.inputProps,l=e.multiple,f=e.name,m=e.rejectClassName,y=r(e,["accept","acceptClassName","activeClassName","children","disabled","disabledClassName","inputProps","multiple","name","rejectClassName"]),g=y.acceptStyle,v=y.activeStyle,b=y.className,w=void 0===b?"":b,E=y.disabledStyle,T=y.rejectStyle,_=y.style,S=r(y,["acceptStyle","activeStyle","className","disabledStyle","rejectStyle","style"]),I=this.state,k=I.isDragActive,N=I.draggedFiles,A=N.length,x=l||A<=1,C=A>0&&Object(h.a)(N,this.props.accept),O=A>0&&(!C||!x),D=!w&&!_&&!v&&!g&&!T&&!E;k&&i&&(w+=" "+i),C&&n&&(w+=" "+n),O&&m&&(w+=" "+m),a&&s&&(w+=" "+s),D&&(_=d.a.default,v=d.a.active,g=d.a.accepted,T=d.a.rejected,E=d.a.disabled);var M=p({position:"relative"},_);v&&k&&(M=p({},M,v)),g&&C&&(M=p({},M,g)),T&&O&&(M=p({},M,T)),E&&a&&(M=p({},M,E));var P={accept:t,disabled:a,type:"file",style:p({position:"absolute",top:0,right:0,bottom:0,left:0,opacity:1e-5,pointerEvents:"none"},u.style),multiple:h.h&&l,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"};f&&f.length&&(P.name=f);var R=(S.acceptedFiles,S.preventDropOnDocument,S.disableClick,S.onDropAccepted,S.onDropRejected,S.onFileDialogCancel,S.maxSize,S.minSize,S.getDataTransferItems,r(S,["acceptedFiles","preventDropOnDocument","disableClick","onDropAccepted","onDropRejected","onFileDialogCancel","maxSize","minSize","getDataTransferItems"]));return c.a.createElement("div",p({className:w,style:M},R,{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onDrop),ref:this.setRef,"aria-disabled":a}),this.renderChildren(o,k,C,O),c.a.createElement("input",p({},u,P)))}}]),t}(c.a.Component);t.a=y,y.propTypes={accept:f.a.oneOfType([f.a.string,f.a.arrayOf(f.a.string)]),children:f.a.oneOfType([f.a.node,f.a.func]),disableClick:f.a.bool,disabled:f.a.bool,preventDropOnDocument:f.a.bool,inputProps:f.a.object,multiple:f.a.bool,name:f.a.string,maxSize:f.a.number,minSize:f.a.number,className:f.a.string,activeClassName:f.a.string,acceptClassName:f.a.string,rejectClassName:f.a.string,disabledClassName:f.a.string,style:f.a.object,activeStyle:f.a.object,acceptStyle:f.a.object,rejectStyle:f.a.object,disabledStyle:f.a.object,getDataTransferItems:f.a.func,onClick:f.a.func,onDrop:f.a.func,onDropAccepted:f.a.func,onDropRejected:f.a.func,onDragStart:f.a.func,onDragEnter:f.a.func,onDragOver:f.a.func,onDragLeave:f.a.func,onFileDialogCancel:f.a.func},y.defaultProps={preventDropOnDocument:!0,disabled:!1,disableClick:!1,inputProps:{},multiple:!0,maxSize:1/0,minSize:0,getDataTransferItems:h.d}},function(e,t,n){"use strict";function r(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;n.files&&n.files.length?t=n.files:n.items&&n.items.length&&(t=n.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}function i(e,t){return"application/x-moz-file"===e.type||d()(e,t)}function o(e,t,n){return e.size<=t&&e.size>=n}function a(e,t){return e.every(function(e){return i(e,t)})}function s(e){return!e.dataTransfer||Array.prototype.every.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e})}function u(e){e.preventDefault()}function c(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function l(e){return-1!==e.indexOf("Edge/")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return c(e)||l(e)}n.d(t,"h",function(){return p}),t.d=r,t.b=i,t.c=o,t.a=a,t.e=s,t.g=u,t.f=f;var h=n(197),d=n.n(h),p=("function"===typeof Symbol&&Symbol.iterator,"undefined"===typeof document||!document||!document.createElement||"multiple"in document.createElement("input"))},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports={version:"2.5.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(32)("wks"),i=n(9),o=n(0).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(0),i=n(2),o=n(8),a=n(22),s=n(10),u=function(e,t,n){var c,l,f,h,d=e&u.F,p=e&u.G,m=e&u.S,y=e&u.P,g=e&u.B,v=p?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),w=b.prototype||(b.prototype={});p&&(n=t);for(c in n)l=!d&&v&&void 0!==v[c],f=(l?v:n)[c],h=g&&l?s(f,r):y&&"function"==typeof f?s(Function.call,f):f,v&&a(v,c,f,e&u.U),b[c]!=f&&o(b,c,h),y&&w[c]!=f&&(w[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(16),i=n(21);e.exports=n(3)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(24);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(28),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=e.type||"",o=i.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t})}return!0},n(14),n(34)},function(e,t,n){n(15),e.exports=n(2).Array.some},function(e,t,n){"use strict";var r=n(7),i=n(25)(3);r(r.P+r.F*!n(33)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(17),i=n(18),o=n(20),a=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(1);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(3)&&!n(4)(function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(1),i=n(0).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(1);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(0),i=n(8),o=n(23),a=n(9)("src"),s=Function.toString,u=(""+s).split("toString");n(2).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(10),i=n(26),o=n(27),a=n(12),s=n(29);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var m,y,g=o(t),v=i(g),b=r(s,p,3),w=a(v.length),E=0,T=n?d(t,w):u?d(t,0):void 0;w>E;E++)if((h||E in v)&&(m=v[E],y=b(m,E,g),e))if(n)T[E]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:T.push(m)}else if(l)return!1;return f?-1:c||l?l:T}}},function(e,t,n){var r=n(5);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(11);e.exports=function(e){return Object(r(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(30);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(1),i=n(31),o=n(6)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(0),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){n(35),e.exports=n(2).String.endsWith},function(e,t,n){"use strict";var r=n(7),i=n(12),o=n(36),a="".endsWith;r(r.P+r.F*n(38)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),u=String(e);return a?a.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,n){var r=n(37),i=n(11);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(1),i=n(5),o=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}}])},function(e,t,n){"use strict";t.a={active:{borderStyle:"solid",backgroundColor:"#eee"},accepted:{borderStyle:"solid",borderColor:"#6c6",backgroundColor:"#eee"},rejected:{borderStyle:"solid",borderColor:"#c66",backgroundColor:"#eee"},default:{width:200,height:200,borderWidth:2,borderColor:"#666",borderStyle:"dashed",borderRadius:5},disabled:{opacity:.5}}},function(e,t,n){(function(e){var n,r,i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(t){function n(e){s(Nt);var t=vt[Nt>>2],n=t+e+15&-16;if(n<=le())vt[Nt>>2]=n;else{if(!de(n))return 0}return t}function r(e){switch(e){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===e[e.length-1])return 4;if("i"===e[0]){var t=parseInt(e.substr(1));return s(t%8===0,"getNativeTypeSize invalid bits "+t+", type "+e),t/8}return 0}}function o(e){o.shown||(o.shown={}),o.shown[e]||(o.shown[e]=1,ct(e))}function a(e,t,n){switch(t=t||"i8","*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return pt[e>>0];case"i16":return yt[e>>1];case"i32":case"i64":return vt[e>>2];case"float":return wt[e>>2];case"double":return Et[e>>3];default:tt("invalid type for getValue: "+t)}return null}function s(e,t){e||tt("Assertion failed: "+t)}function u(e){var t=rt["_"+e];return s(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function c(e,t,n,r,i){var o={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);t=ri(n),m(e,t,n)}return t},array:function(e){var t=ri(e.length);return v(e,t),t}},a=u(e),c=[],l=0;if(s("array"!==t,'Return type should not be "array".'),r)for(var f=0;f<r.length;f++){var h=o[n[f]];h?(0===l&&(l=oi()),c[f]=h(r[f])):c[f]=r[f]}var p=a.apply(null,c);return p=function(e){return"string"===t?d(e):"boolean"===t?Boolean(e):e}(p),0!==l&&ii(l),p}function l(e,t,n,r){switch(n=n||"i8","*"===n.charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":pt[e>>0]=t;break;case"i16":yt[e>>1]=t;break;case"i32":vt[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Pt(tempDouble)>=1?tempDouble>0?(0|jt(+Ut(tempDouble/4294967296),4294967295))>>>0:~~+Ft((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],vt[e>>2]=tempI64[0],vt[e+4>>2]=tempI64[1];break;case"float":wt[e>>2]=t;break;case"double":Et[e>>3]=t;break;default:tt("invalid type for setValue: "+n)}}function f(e,t,i,o){var a,u;"number"===typeof e?(a=!0,u=e):(a=!1,u=e.length);var c,f="string"===typeof t?t:null;if(c=i==St?o:[ni,ri,n][i](Math.max(u,f?1:t.length)),a){var h;for(o=c,s(0==(3&c)),h=c+(-4&u);o<h;o+=4)vt[o>>2]=0;for(h=c+u;o<h;)pt[o++>>0]=0;return c}if("i8"===f)return e.subarray||e.slice?mt.set(e,c):mt.set(new Uint8Array(e),c),c;for(var d,p,m,y=0;y<u;){var g=e[y];d=f||t[y],0!==d?(s(d,"Must know what type to store in allocate!"),"i64"==d&&(d="i32"),l(c+y,g,d),m!==d&&(p=r(d),m=d),y+=p):y++}return c}function h(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&It)return It.decode(e.subarray(t,i));for(var a="";t<i;){var s=e[t++];if(128&s){var u=63&e[t++];if(192!=(224&s)){var c=63&e[t++];if(224==(240&s)?s=(15&s)<<12|u<<6|c:(240!=(248&s)&&o("Invalid UTF-8 leading byte 0x"+s.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),s=(7&s)<<18|u<<12|c<<6|63&e[t++]),s<65536)a+=String.fromCharCode(s);else{var l=s-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&s)<<6|u)}else a+=String.fromCharCode(s)}return a}function d(e,t){return e?h(mt,e,t):""}function p(e,t,n,r){if(!(r>0))return 0;for(var i=n,a=n+r-1,s=0;s<e.length;++s){var u=e.charCodeAt(s);if(u>=55296&&u<=57343){u=65536+((1023&u)<<10)|1023&e.charCodeAt(++s)}if(u<=127){if(n>=a)break;t[n++]=u}else if(u<=2047){if(n+1>=a)break;t[n++]=192|u>>6,t[n++]=128|63&u}else if(u<=65535){if(n+2>=a)break;t[n++]=224|u>>12,t[n++]=128|u>>6&63,t[n++]=128|63&u}else{if(n+3>=a)break;u>=2097152&&o("Invalid Unicode code point 0x"+u.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|u>>18,t[n++]=128|u>>12&63,t[n++]=128|u>>6&63,t[n++]=128|63&u}}return t[n]=0,n-i}function m(e,t,n){return s("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),p(e,mt,t,n)}function y(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function g(e){var t=y(e)+1,n=ni(t);return n&&p(e,pt,n,t),n}function v(e,t){s(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),pt.set(e,t)}function b(e){return o("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function w(e){var t=/__Z[\w\d_]+/g;return e.replace(t,function(e){var t=b(e);return e===t?e:t+" ["+e+"]"})}function E(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function T(){var e=E();return rt.extraStackTrace&&(e+="\n"+rt.extraStackTrace()),w(e)}function _(e,t){return e%t>0&&(e+=t-e%t),e}function S(e){rt.buffer=dt=e}function I(){rt.HEAP8=pt=new Int8Array(dt),rt.HEAP16=yt=new Int16Array(dt),rt.HEAP32=vt=new Int32Array(dt),rt.HEAPU8=mt=new Uint8Array(dt),rt.HEAPU16=gt=new Uint16Array(dt),rt.HEAPU32=bt=new Uint32Array(dt),rt.HEAPF32=wt=new Float32Array(dt),rt.HEAPF64=Et=new Float64Array(dt)}function k(){s(0==(3&kt)),bt[(kt>>2)-1]=34821223,bt[(kt>>2)-2]=2310721022}function N(){if(34821223==bt[(kt>>2)-1]&&2310721022==bt[(kt>>2)-2]||tt("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+bt[(kt>>2)-2].toString(16)+" "+bt[(kt>>2)-1].toString(16)),1668509029!==vt[0])throw"Runtime error: The application has corrupted its heap memory area (address zero)!"}function A(e){tt("Stack overflow! Attempted to allocate "+e+" bytes on the stack, but stack has only "+(kt-oi()+e)+" bytes available!")}function x(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?rt.dynCall_v(n):rt.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}else t()}}function C(){if(rt.preRun)for("function"==typeof rt.preRun&&(rt.preRun=[rt.preRun]);rt.preRun.length;)P(rt.preRun.shift());x(xt)}function O(){N(),Mt||(Mt=!0,rt.noFSInit||tn.init.initialized||tn.init(),Qt.init(),x(Ct))}function D(){N(),tn.ignorePermissions=!1,x(Ot)}function M(){if(N(),rt.postRun)for("function"==typeof rt.postRun&&(rt.postRun=[rt.postRun]);rt.postRun.length;)R(rt.postRun.shift());x(Dt)}function P(e){xt.unshift(e)}function R(e){Dt.unshift(e)}function L(e){for(var t=e;;){if(!zt[e])return e;e=t+Math.random()}return e}function F(e){Bt++,rt.monitorRunDependencies&&rt.monitorRunDependencies(Bt),e?(s(!zt[e]),zt[e]=1,null===Vt&&"undefined"!==typeof setInterval&&(Vt=setInterval(function(){if(Tt)return clearInterval(Vt),void(Vt=null);var e=!1;for(var t in zt)e||(e=!0,ct("still waiting on run dependencies:")),ct("dependency: "+t);e&&ct("(end of list)")},1e4))):ct("warning: run dependency added without ID")}function U(e){if(Bt--,rt.monitorRunDependencies&&rt.monitorRunDependencies(Bt),e?(s(zt[e]),delete zt[e]):ct("warning: run dependency removed without ID"),0==Bt&&(null!==Vt&&(clearInterval(Vt),Vt=null),qt)){var t=qt;qt=null,t()}}function j(e){return String.prototype.startsWith?e.startsWith(Wt):0===e.indexOf(Wt)}function B(){try{if(rt.wasmBinary)return new Uint8Array(rt.wasmBinary);if(rt.readBinary)return rt.readBinary(Gt);throw"both async and sync fetching of the wasm failed"}catch(e){tt(e)}}function V(){return rt.wasmBinary||!ot&&!at||"function"!==typeof fetch?new Promise(function(e,t){e(B())}):fetch(Gt,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Gt+"'";return e.arrayBuffer()}).catch(function(){return B()})}function q(e){function t(e,t){var n=e.exports;rt.asm=n,U("wasm-instantiate")}function n(e){s(rt===o,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),o=null,t(e.instance)}function r(e){V().then(function(e){return WebAssembly.instantiate(e,i)}).then(e,function(e){ct("failed to asynchronously prepare wasm: "+e),tt(e)})}var i={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:lt};if(F("wasm-instantiate"),rt.instantiateWasm)try{return rt.instantiateWasm(i,t)}catch(e){return ct("Module.instantiateWasm callback failed with error: "+e),!1}var o=rt;return rt.wasmBinary||"function"!==typeof WebAssembly.instantiateStreaming||j(Gt)||"function"!==typeof fetch?r(n):WebAssembly.instantiateStreaming(fetch(Gt,{credentials:"same-origin"}),i).then(n,function(e){ct("wasm streaming compile failed: "+e),ct("falling back to ArrayBuffer instantiation"),r(n)}),{}}function z(e,t){return Xt[e](t)}function W(e,t){return Xt[e](t)}function G(e,t,n,r){tt("Assertion failed: "+d(e)+", at: "+[t?d(t):"unknown filename",n,r?d(r):"unknown function"])}function X(e){return ni(e)}function K(e){try{return ti(e)}catch(e){ct("exception during cxa_free_exception: "+e)}}function H(){throw Tt=!0,"Pure virtual function called!"}function Q(e,t,n){throw Kt.infos[e]={ptr:e,adjusted:[e],type:t,destructor:n,refcount:0,caught:!1,rethrown:!1},Kt.last=e,"uncaught_exception"in ei?ei.uncaught_exception++:ei.uncaught_exception=1,e+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function Y(){return!!ei.uncaught_exception}function J(){}function $(e){return rt.___errno_location?vt[rt.___errno_location()>>2]=e:ct("failed to set errno from JS"),e}function Z(e,t){return $(1),-1}function ee(e,t){nn.varargs=t;try{var n=nn.getStreamFromFD(),r=(nn.get(),nn.get()),i=nn.get(),o=nn.get(),a=r;return tn.llseek(n,a,o),vt[i>>2]=n.position,n.getdents&&0===a&&0===o&&(n.getdents=null),0}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function te(e,t){nn.varargs=t;try{var n=nn.getStreamFromFD(),r=nn.get(),i=nn.get();return nn.doReadv(n,r,i)}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function ne(e,t){nn.varargs=t;try{var n=nn.getStreamFromFD(),r=nn.get(),i=nn.get();return nn.doWritev(n,r,i)}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function re(e,t){nn.varargs=t;try{var n=nn.getStreamFromFD();switch(nn.get()){case 0:var r=nn.get();if(r<0)return-en.EINVAL;var i;return i=tn.open(n.path,n.flags,0,r),i.fd;case 1:case 2:return 0;case 3:return n.flags;case 4:var r=nn.get();return n.flags|=r,0;case 12:var r=nn.get();return yt[r+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-en.EINVAL;case 9:return $(en.EINVAL),-1;default:return-en.EINVAL}}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function ie(e,t){nn.varargs=t;try{var n=nn.getStr(),r=nn.get(),i=nn.get();return tn.open(n,r,i).fd}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function oe(e,t){nn.varargs=t;try{var n=nn.getStreamFromFD(),r=nn.get();switch(r){case 21509:case 21505:return n.tty?0:-en.ENOTTY;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-en.ENOTTY;case 21519:if(!n.tty)return-en.ENOTTY;var i=nn.get();return vt[i>>2]=0,0;case 21520:return n.tty?-en.EINVAL:-en.ENOTTY;case 21531:var i=nn.get();return tn.ioctl(n,r,i);case 21523:case 21524:return n.tty?0:-en.ENOTTY;default:tt("bad ioctl syscall "+r)}}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function ae(e,t){nn.varargs=t;try{var n=nn.getStreamFromFD();return tn.close(n),0}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function se(e,t){nn.varargs=t;try{var n=nn.get(),r=nn.get(),i=nn.mappings[n];if(!i)return 0;if(r===i.len){var o=tn.getStream(i.fd);nn.doMsync(n,o,r,i.flags),tn.munmap(o),nn.mappings[n]=null,i.allocated&&ti(i.malloc)}return 0}catch(e){return"undefined"!==typeof tn&&e instanceof tn.ErrnoError||tt(e),-e.errno}}function ue(){}function ce(){rt.abort()}function le(){return At}function fe(e){tt("Cannot enlarge memory arrays to size "+e+" bytes (OOM). Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+At+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function he(e){e=_(e,65536);var t=rt.buffer,n=t.byteLength;try{return-1!==ft.grow((e-n)/65536)?rt.buffer=ft.buffer:null}catch(t){return console.error("emscripten_realloc_buffer: Attempted to grow from "+n+" bytes to "+e+" bytes, but got error: "+t),null}}function de(e){var t=le();s(e>t);if(e>2147418112)return ct("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147418112 bytes!"),!1;for(var n=Math.max(t,16777216);n<e;)n<=536870912?n=_(2*n,65536):(n=Math.min(_((3*n+2147483648)/4,65536),2147418112))===t&&o("Cannot ask for more memory since we reached the practical limit in browsers (which is just below 2GB), so the request would have failed. Requesting only "+At);var r=(Date.now(),he(n));return r&&r.byteLength==n?(S(r),I(),At=n,bt[Nt>>2]=e,!0):(ct("Failed to grow the heap from "+t+" bytes to "+n+" bytes, not enough memory!"),r&&ct("Expected to get back a buffer of size "+n+" bytes, but instead got back a buffer of size "+r.byteLength),!1)}function pe(e){return 0===e?0:(e=d(e),rn.hasOwnProperty(e)?(pe.ret&&ti(pe.ret),pe.ret=g(rn[e]),pe.ret):0)}function me(e){return Math.pow(2,e)}function ye(e){return me(e)}function ge(e){var t=ve,n=t.LLVM_SAVEDSTACKS[e];t.LLVM_SAVEDSTACKS.splice(e,1),ii(n)}function ve(){var e=ve;return e.LLVM_SAVEDSTACKS||(e.LLVM_SAVEDSTACKS=[]),e.LLVM_SAVEDSTACKS.push(oi()),e.LLVM_SAVEDSTACKS.length-1}function be(){tt("trap!")}function we(e,t,n){mt.set(mt.subarray(t,t+n),e)}function Ee(){return 0}function Te(e){return e%4===0&&(e%100!==0||e%400===0)}function _e(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}function Se(e,t){for(var n=new Date(e.getTime());t>0;){var r=Te(n.getFullYear()),i=n.getMonth(),o=(r?sn:un)[i];if(!(t>o-n.getDate()))return n.setDate(n.getDate()+t),n;t-=o-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function Ie(e,t,n,r){function i(e,t,n){for(var r="number"===typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function o(e,t){return i(e,t,"0")}function a(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=Se(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=s(n),o=s(r);return a(i,t)<=0?a(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=vt[r+40>>2],l={tm_sec:vt[r>>2],tm_min:vt[r+4>>2],tm_hour:vt[r+8>>2],tm_mday:vt[r+12>>2],tm_mon:vt[r+16>>2],tm_year:vt[r+20>>2],tm_wday:vt[r+24>>2],tm_yday:vt[r+28>>2],tm_isdst:vt[r+32>>2],tm_gmtoff:vt[r+36>>2],tm_zone:c?d(c):""},f=d(n),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S"};for(var p in h)f=f.replace(new RegExp(p,"g"),h[p]);var m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],g={"%a":function(e){return m[e.tm_wday].substring(0,3)},"%A":function(e){return m[e.tm_wday]},"%b":function(e){return y[e.tm_mon].substring(0,3)},"%B":function(e){return y[e.tm_mon]},"%C":function(e){return o((e.tm_year+1900)/100|0,2)},"%d":function(e){return o(e.tm_mday,2)},"%e":function(e){return i(e.tm_mday,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),o(t,2)},"%j":function(e){return o(e.tm_mday+_e(Te(e.tm_year+1900)?sn:un,e.tm_mon-1),3)},"%m":function(e){return o(e.tm_mon+1,2)},"%M":function(e){return o(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return o(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return new Date(e.tm_year+1900,e.tm_mon+1,e.tm_mday,0,0,0,0).getDay()||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:Se(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(a(n,r)<0){var i=_e(Te(r.getFullYear())?sn:un,r.getMonth()-1)-31,s=31-n.getDate(),u=s+i+r.getDate();return o(Math.ceil(u/7),2)}return 0===a(n,t)?"01":"00"},"%V":function(e){var t=new Date(e.tm_year+1900,0,4),n=new Date(e.tm_year+1901,0,4),r=s(t),i=s(n),u=Se(new Date(e.tm_year+1900,0,1),e.tm_yday);if(a(u,r)<0)return"53";if(a(i,u)<=0)return"01";var c;return c=r.getFullYear()<e.tm_year+1900?e.tm_yday+32-r.getDate():e.tm_yday+1-r.getDate(),o(Math.ceil(c/7),2)},"%w":function(e){return new Date(e.tm_year+1900,e.tm_mon+1,e.tm_mday,0,0,0,0).getDay()},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:Se(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(a(n,r)<0){var i=_e(Te(r.getFullYear())?sn:un,r.getMonth()-1)-31,s=31-n.getDate(),u=s+i+r.getDate();return o(Math.ceil(u/7),2)}return 0===a(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=Math.abs(t)/60,t=t/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var p in g)f.indexOf(p)>=0&&(f=f.replace(new RegExp(p,"g"),g[p](l)));var b=Ne(f,!1);return b.length>t?0:(v(b,e),b.length-1)}function ke(e,t,n,r){return Ie(e,t,n,r)}function Ne(e,t,n){var r=n>0?n:y(e)+1,i=new Array(r),o=p(e,i,0,i.length);return t&&(i.length=o),i}function Ae(e){ct("Invalid function pointer called with signature 'i'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function xe(e){ct("Invalid function pointer called with signature 'ii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Ce(e){ct("Invalid function pointer called with signature 'iid'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Oe(e){ct("Invalid function pointer called with signature 'iii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function De(e){ct("Invalid function pointer called with signature 'iiid'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Me(e){ct("Invalid function pointer called with signature 'iiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Pe(e){ct("Invalid function pointer called with signature 'iiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Re(e){ct("Invalid function pointer called with signature 'iiiiid'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Le(e){ct("Invalid function pointer called with signature 'iiiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Fe(e){ct("Invalid function pointer called with signature 'iiiiiid'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Ue(e){ct("Invalid function pointer called with signature 'iiiiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function je(e){ct("Invalid function pointer called with signature 'iiiiiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Be(e){ct("Invalid function pointer called with signature 'iiiiiiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Ve(e){ct("Invalid function pointer called with signature 'iiiiij'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function qe(e){ct("Invalid function pointer called with signature 'v'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function ze(e){ct("Invalid function pointer called with signature 'vi'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function We(e){ct("Invalid function pointer called with signature 'vid'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Ge(e){ct("Invalid function pointer called with signature 'vii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Xe(e){ct("Invalid function pointer called with signature 'viii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Ke(e){ct("Invalid function pointer called with signature 'viiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function He(e){ct("Invalid function pointer called with signature 'viiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Qe(e){ct("Invalid function pointer called with signature 'viiiiid'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Ye(e){ct("Invalid function pointer called with signature 'viiiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Je(e){ct("Invalid function pointer called with signature 'viiiiiiiii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function $e(e){ct("Invalid function pointer called with signature 'viijii'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this)"),ct("Build with ASSERTIONS=2 for more info."),tt(e)}function Ze(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function et(e){function t(){rt.calledRun||(rt.calledRun=!0,Tt||(O(),D(),rt.onRuntimeInitialized&&rt.onRuntimeInitialized(),s(!rt._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),M()))}e=e||rt.arguments,Bt>0||(k(),C(),Bt>0||rt.calledRun||(rt.setStatus?(rt.setStatus("Running..."),setTimeout(function(){setTimeout(function(){rt.setStatus("")},1),t()},1)):t(),N()))}function tt(e){rt.onAbort&&rt.onAbort(e),void 0!==e?(ut(e),ct(e),e=JSON.stringify(e)):e="",Tt=!0,_t=1;var t="abort("+e+") at "+T();throw ai&&ai.forEach(function(n){t=n(t,e)}),t}t=t||{};var nt,rt="undefined"!==typeof t?t:{},it={};for(nt in rt)rt.hasOwnProperty(nt)&&(it[nt]=rt[nt]);rt.arguments=[],rt.thisProgram="./this.program",rt.quit=function(e,t){throw t},rt.preRun=[],rt.postRun=[];var ot=!0,at=!1;if(rt.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var st="";if(!ot&&!at)throw new Error("environment detection error");if(at?st=self.location.href:document.currentScript&&(st=document.currentScript.src),e&&(st=e),st=0!==st.indexOf("blob:")?st.substr(0,st.lastIndexOf("/")+1):"","object"!==("undefined"===typeof window?"undefined":i(window))&&"function"!==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");rt.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},at&&(rt.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),rt.readAsync=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)return void t(r.response);n()},r.onerror=n,r.send(null)},rt.setWindowTitle=function(e){document.title=e};var ut=rt.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),ct=rt.printErr||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||ut);for(nt in it)it.hasOwnProperty(nt)&&(rt[nt]=it[nt]);it=void 0,s("undefined"===typeof rt.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),s("undefined"===typeof rt.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),s("undefined"===typeof rt.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),s("undefined"===typeof rt.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),oi=ii=ri=function(){tt("cannot use the stack before compiled code is ready to run, and has provided stack access")};var lt={"f64-rem":function(e,t){return e%t},debugger:function(){}};new Array(0);"object"!==("undefined"===typeof WebAssembly?"undefined":i(WebAssembly))&&tt("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");var ft,ht,dt,pt,mt,yt,gt,vt,bt,wt,Et,Tt=!1,_t=0,St=3,It="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0,kt=("undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le"),7331152),Nt=2088016;s(!0,"stack must start aligned"),s(!0,"heap must start aligned");rt.TOTAL_STACK&&s(5242880===rt.TOTAL_STACK,"the stack size can no longer be determined at runtime");var At=rt.TOTAL_MEMORY||16777216;if(At<5242880&&ct("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+At+"! (TOTAL_STACK=5242880)"),s("undefined"!==typeof Int32Array&&"undefined"!==typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),rt.buffer?(dt=rt.buffer,s(dt.byteLength===At,"provided buffer should be "+At+" bytes, but it is "+dt.byteLength)):("object"===("undefined"===typeof WebAssembly?"undefined":i(WebAssembly))&&"function"===typeof WebAssembly.Memory?(s(At%65536===0),ft=new WebAssembly.Memory({initial:At/65536}),dt=ft.buffer):dt=new ArrayBuffer(At),s(dt.byteLength===At),rt.buffer=dt),I(),vt[Nt>>2]=7331152,vt[0]=1668509029,yt[1]=25459,115!==mt[2]||99!==mt[3])throw"Runtime error: expected the system to be little-endian!";var xt=[],Ct=[],Ot=[],Dt=[],Mt=!1;s(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),s(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),s(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),s(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var Pt=Math.abs,Rt=Math.cos,Lt=Math.sin,Ft=Math.ceil,Ut=Math.floor,jt=Math.min,Bt=0,Vt=null,qt=null,zt={};rt.preloadedImages={},rt.preloadedAudios={};var Wt="data:application/octet-stream;base64,",Gt="chip-core.wasm";j(Gt)||(Gt=function(e){return rt.locateFile?rt.locateFile(e,st):st+e}(Gt)),rt.asm=function(e,t,n){t.memory=ft,t.table=ht=new WebAssembly.Table({initial:1367,maximum:1367,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0;var r=q(t);return s(r,"binaryen setup failed (no wasm support?)"),r};var Xt=[function(e){console.log("Tiny MIDI Player loaded %d bytes.",e)},function(e){console.log("First note appears at %d ms.",e)}];s(!0);var Kt={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||Kt.infos[e])return e;for(var t in Kt.infos)for(var n=+t,r=Kt.infos[n].adjusted,i=r.length,o=0;o<i;o++)if(r[o]===e)return n;return e},addRef:function(e){if(e){Kt.infos[e].refcount++}},decRef:function(e){if(e){var t=Kt.infos[e];s(t.refcount>0),t.refcount--,0!==t.refcount||t.rethrown||(t.destructor&&rt.dynCall_vi(t.destructor,e),delete Kt.infos[e],K(e))}},clearRef:function(e){if(e){Kt.infos[e].refcount=0}}},Ht={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return e=Ht.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Ht.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return Ht.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Ht.normalize(e.join("/"))},join2:function(e,t){return Ht.normalize(e+"/"+t)},resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:tn.cwd();if("string"!==typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return e=Ht.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Ht.resolve(e).substr(1),t=Ht.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),o=Math.min(r.length,i.length),a=o,s=0;s<o;s++)if(r[s]!==i[s]){a=s;break}for(var u=[],s=a;s<r.length;s++)u.push("..");return u=u.concat(i.slice(a)),u.join("/")}},Qt={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Qt.ttys[e]={input:[],output:[],ops:t},tn.registerDevice(e,Qt.stream_ops)},stream_ops:{open:function(e){var t=Qt.ttys[e.node.rdev];if(!t)throw new tn.ErrnoError(en.ENODEV);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new tn.ErrnoError(en.ENXIO);for(var o=0,a=0;a<r;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new tn.ErrnoError(en.EIO)}if(void 0===s&&0===o)throw new tn.ErrnoError(en.EAGAIN);if(null===s||void 0===s)break;o++,t[n+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new tn.ErrnoError(en.ENXIO);try{for(var o=0;o<r;o++)e.tty.ops.put_char(e.tty,t[n+o])}catch(e){throw new tn.ErrnoError(en.EIO)}return r&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=Ne(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(ut(h(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(ut(h(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(ct(h(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(ct(h(e.output,0)),e.output=[])}}},Yt={ops_table:null,mount:function(e){return Yt.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(tn.isBlkdev(n)||tn.isFIFO(n))throw new tn.ErrnoError(en.EPERM);Yt.ops_table||(Yt.ops_table={dir:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr,lookup:Yt.node_ops.lookup,mknod:Yt.node_ops.mknod,rename:Yt.node_ops.rename,unlink:Yt.node_ops.unlink,rmdir:Yt.node_ops.rmdir,readdir:Yt.node_ops.readdir,symlink:Yt.node_ops.symlink},stream:{llseek:Yt.stream_ops.llseek}},file:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr},stream:{llseek:Yt.stream_ops.llseek,read:Yt.stream_ops.read,write:Yt.stream_ops.write,allocate:Yt.stream_ops.allocate,mmap:Yt.stream_ops.mmap,msync:Yt.stream_ops.msync}},link:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr,readlink:Yt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Yt.node_ops.getattr,setattr:Yt.node_ops.setattr},stream:tn.chrdev_stream_ops}});var i=tn.createNode(e,t,n,r);return tn.isDir(i.mode)?(i.node_ops=Yt.ops_table.dir.node,i.stream_ops=Yt.ops_table.dir.stream,i.contents={}):tn.isFile(i.mode)?(i.node_ops=Yt.ops_table.file.node,i.stream_ops=Yt.ops_table.file.stream,i.usedBytes=0,i.contents=null):tn.isLink(i.mode)?(i.node_ops=Yt.ops_table.link.node,i.stream_ops=Yt.ops_table.link.stream):tn.isChrdev(i.mode)&&(i.node_ops=Yt.ops_table.chrdev.node,i.stream_ops=Yt.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],n=0;n<e.usedBytes;++n)t.push(e.contents[n]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)|0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var n=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=tn.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,tn.isDir(e.mode)?t.size=4096:tn.isFile(e.mode)?t.size=e.usedBytes:tn.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Yt.resizeFileStorage(e,t.size)},lookup:function(e,t){throw tn.genericErrors[en.ENOENT]},mknod:function(e,t,n,r){return Yt.createNode(e,t,n,r)},rename:function(e,t,n){if(tn.isDir(e.mode)){var r;try{r=tn.lookupNode(t,n)}catch(e){}if(r)for(var i in r.contents)throw new tn.ErrnoError(en.ENOTEMPTY)}delete e.parent.contents[e.name],e.name=n,t.contents[n]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var n=tn.lookupNode(e,t);for(var r in n.contents)throw new tn.ErrnoError(en.ENOTEMPTY);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=Yt.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!tn.isLink(e.mode))throw new tn.ErrnoError(en.EINVAL);return e.link}},stream_ops:{read:function(e,t,n,r,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-i,r);if(s(a>=0),a>8&&o.subarray)t.set(o.subarray(i,i+a),n);else for(var u=0;u<a;u++)t[n+u]=o[i+u];return a},write:function(e,t,n,r,i,a){if(a&&o("file packager has copied file data into memory, but in memory growth we are forced to copy it again (see --no-heap-copy)"),a=!1,!r)return 0;var u=e.node;if(u.timestamp=Date.now(),t.subarray&&(!u.contents||u.contents.subarray)){if(a)return s(0===i,"canOwn must imply no weird position inside the file"),u.contents=t.subarray(n,n+r),u.usedBytes=r,r;if(0===u.usedBytes&&0===i)return u.contents=new Uint8Array(t.subarray(n,n+r)),u.usedBytes=r,r;if(i+r<=u.usedBytes)return u.contents.set(t.subarray(n,n+r),i),r}if(Yt.expandFileStorage(u,i+r),u.contents.subarray&&t.subarray)u.contents.set(t.subarray(n,n+r),i);else for(var c=0;c<r;c++)u.contents[i+c]=t[n+c];return u.usedBytes=Math.max(u.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&tn.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new tn.ErrnoError(en.EINVAL);return r},allocate:function(e,t,n){Yt.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i,o,a){if(!tn.isFile(e.node.mode))throw new tn.ErrnoError(en.ENODEV);var s,u,c=e.node.contents;if(2&a||c.buffer!==t&&c.buffer!==t.buffer){if((i>0||i+r<e.node.usedBytes)&&(c=c.subarray?c.subarray(i,i+r):Array.prototype.slice.call(c,i,i+r)),u=!0,!(s=ni(r)))throw new tn.ErrnoError(en.ENOMEM);t.set(c,s)}else u=!1,s=c.byteOffset;return{ptr:s,allocated:u}},msync:function(e,t,n,r,i){if(!tn.isFile(e.node.mode))throw new tn.ErrnoError(en.ENODEV);if(2&i)return 0;Yt.stream_ops.write(e,t,0,r,n,!1);return 0}}},Jt={dbs:{},indexedDB:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){if("undefined"!==typeof indexedDB)return indexedDB;var e=null;return"object"===("undefined"===typeof window?"undefined":i(window))&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),s(e,"IDBFS used, but indexedDB not supported"),e}),DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return Yt.mount.apply(null,arguments)},syncfs:function(e,t,n){Jt.getLocalSet(e,function(r,i){if(r)return n(r);Jt.getRemoteSet(e,function(e,r){if(e)return n(e);var o=t?r:i,a=t?i:r;Jt.reconcile(o,a,n)})})},getDB:function(e,t){var n=Jt.dbs[e];if(n)return t(null,n);var r;try{r=Jt.indexedDB().open(e,Jt.DB_VERSION)}catch(e){return t(e)}if(!r)return t("Unable to connect to IndexedDB");r.onupgradeneeded=function(e){var t,n=e.target.result,r=e.target.transaction;t=n.objectStoreNames.contains(Jt.DB_STORE_NAME)?r.objectStore(Jt.DB_STORE_NAME):n.createObjectStore(Jt.DB_STORE_NAME),t.indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},r.onsuccess=function(){n=r.result,Jt.dbs[e]=n,t(null,n)},r.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){function n(e){return"."!==e&&".."!==e}function r(e){return function(t){return Ht.join2(e,t)}}for(var i={},o=tn.readdir(e.mountpoint).filter(n).map(r(e.mountpoint));o.length;){var a,s=o.pop();try{a=tn.stat(s)}catch(e){return t(e)}tn.isDir(a.mode)&&o.push.apply(o,tn.readdir(s).filter(n).map(r(s))),i[s]={timestamp:a.mtime}}return t(null,{type:"local",entries:i})},getRemoteSet:function(e,t){var n={};Jt.getDB(e.mountpoint,function(e,r){if(e)return t(e);try{var i=r.transaction([Jt.DB_STORE_NAME],"readonly");i.onerror=function(e){t(this.error),e.preventDefault()};i.objectStore(Jt.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(e){var i=e.target.result;if(!i)return t(null,{type:"remote",db:r,entries:n});n[i.primaryKey]={timestamp:i.key},i.continue()}}catch(e){return t(e)}})},loadLocalEntry:function(e,t){var n,r;try{r=tn.lookupPath(e).node,n=tn.stat(e)}catch(e){return t(e)}return tn.isDir(n.mode)?t(null,{timestamp:n.mtime,mode:n.mode}):tn.isFile(n.mode)?(r.contents=Yt.getFileDataAsTypedArray(r),t(null,{timestamp:n.mtime,mode:n.mode,contents:r.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,n){try{if(tn.isDir(t.mode))tn.mkdir(e,t.mode);else{if(!tn.isFile(t.mode))return n(new Error("node type not supported"));tn.writeFile(e,t.contents,{canOwn:!0})}tn.chmod(e,t.mode),tn.utime(e,t.timestamp,t.timestamp)}catch(e){return n(e)}n(null)},removeLocalEntry:function(e,t){try{var n=(tn.lookupPath(e),tn.stat(e));tn.isDir(n.mode)?tn.rmdir(e):tn.isFile(n.mode)&&tn.unlink(e)}catch(e){return t(e)}t(null)},loadRemoteEntry:function(e,t,n){var r=e.get(t);r.onsuccess=function(e){n(null,e.target.result)},r.onerror=function(e){n(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,n,r){var i=e.put(n,t);i.onsuccess=function(){r(null)},i.onerror=function(e){r(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,n){var r=e.delete(t);r.onsuccess=function(){n(null)},r.onerror=function(e){n(this.error),e.preventDefault()}},reconcile:function(e,t,n){function r(e){if(e){if(!r.errored)return r.errored=!0,n(e)}else if(++s>=i)return n(null)}var i=0,o=[];Object.keys(e.entries).forEach(function(n){var r=e.entries[n],a=t.entries[n];(!a||r.timestamp>a.timestamp)&&(o.push(n),i++)});var a=[];if(Object.keys(t.entries).forEach(function(n){t.entries[n];e.entries[n]||(a.push(n),i++)}),!i)return n(null);var s=0,u="remote"===e.type?e.db:t.db,c=u.transaction([Jt.DB_STORE_NAME],"readwrite"),l=c.objectStore(Jt.DB_STORE_NAME);c.onerror=function(e){r(this.error),e.preventDefault()},o.sort().forEach(function(e){"local"===t.type?Jt.loadRemoteEntry(l,e,function(t,n){if(t)return r(t);Jt.storeLocalEntry(e,n,r)}):Jt.loadLocalEntry(e,function(t,n){if(t)return r(t);Jt.storeRemoteEntry(l,e,n,r)})}),a.sort().reverse().forEach(function(e){"local"===t.type?Jt.removeLocalEntry(e,r):Jt.removeRemoteEntry(l,e,r)})}},$t={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){function t(e){for(var t=e.split("/"),n=r,o=0;o<t.length-1;o++){var a=t.slice(0,o+1).join("/");i[a]||(i[a]=$t.createNode(n,t[o],$t.DIR_MODE,0)),n=i[a]}return n}function n(e){var t=e.split("/");return t[t.length-1]}s(at),$t.reader||($t.reader=new FileReaderSync);var r=$t.createNode(null,"/",$t.DIR_MODE,0),i={};return Array.prototype.forEach.call(e.opts.files||[],function(e){$t.createNode(t(e.name),n(e.name),$t.FILE_MODE,0,e,e.lastModifiedDate)}),(e.opts.blobs||[]).forEach(function(e){$t.createNode(t(e.name),n(e.name),$t.FILE_MODE,0,e.data)}),(e.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(r){var i=r.filename.substr(1);$t.createNode(t(i),n(i),$t.FILE_MODE,0,e.blob.slice(r.start,r.end))})}),r},createNode:function(e,t,n,r,i,o){var a=tn.createNode(e,t,n);return a.mode=n,a.node_ops=$t.node_ops,a.stream_ops=$t.stream_ops,a.timestamp=(o||new Date).getTime(),s($t.FILE_MODE!==$t.DIR_MODE),n===$t.FILE_MODE?(a.size=i.size,a.contents=i):(a.size=4096,a.contents={}),e&&(e.contents[t]=a),a},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){throw new tn.ErrnoError(en.ENOENT)},mknod:function(e,t,n,r){throw new tn.ErrnoError(en.EPERM)},rename:function(e,t,n){throw new tn.ErrnoError(en.EPERM)},unlink:function(e,t){throw new tn.ErrnoError(en.EPERM)},rmdir:function(e,t){throw new tn.ErrnoError(en.EPERM)},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){throw new tn.ErrnoError(en.EPERM)},readlink:function(e){throw new tn.ErrnoError(en.EPERM)}},stream_ops:{read:function(e,t,n,r,i){if(i>=e.node.size)return 0;var o=e.node.contents.slice(i,i+r),a=$t.reader.readAsArrayBuffer(o);return t.set(new Uint8Array(a),n),o.size},write:function(e,t,n,r,i){throw new tn.ErrnoError(en.EIO)},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&tn.isFile(e.node.mode)&&(r+=e.node.size),r<0)throw new tn.ErrnoError(en.EINVAL);return r}}},Zt={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},en={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86},tn={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof tn.ErrnoError))throw e+" : "+T();return $(e.errno)},lookupPath:function(e,t){if(e=Ht.resolve(tn.cwd(),e),t=t||{},!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new tn.ErrnoError(40);for(var i=Ht.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),o=tn.root,a="/",s=0;s<i.length;s++){var u=s===i.length-1;if(u&&t.parent)break;if(o=tn.lookupNode(o,i[s]),a=Ht.join2(a,i[s]),tn.isMountpoint(o)&&(!u||u&&t.follow_mount)&&(o=o.mounted.root),!u||t.follow)for(var c=0;tn.isLink(o.mode);){var l=tn.readlink(a);a=Ht.resolve(Ht.dirname(a),l);var f=tn.lookupPath(a,{recurse_count:t.recurse_count});if(o=f.node,c++>40)throw new tn.ErrnoError(40)}}return{path:a,node:o}},getPath:function(e){for(var t;;){if(tn.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%tn.nameTable.length},hashAddNode:function(e){var t=tn.hashName(e.parent.id,e.name);e.name_next=tn.nameTable[t],tn.nameTable[t]=e},hashRemoveNode:function(e){var t=tn.hashName(e.parent.id,e.name);if(tn.nameTable[t]===e)tn.nameTable[t]=e.name_next;else for(var n=tn.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=tn.mayLookup(e);if(n)throw new tn.ErrnoError(n,e);for(var r=tn.hashName(e.id,t),i=tn.nameTable[r];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===t)return i}return tn.lookup(e,t)},createNode:function(e,t,n,r){if(!tn.FSNode){tn.FSNode=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=tn.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},tn.FSNode.prototype={};Object.defineProperties(tn.FSNode.prototype,{read:{get:function(){return 365===(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146===(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return tn.isDir(this.mode)}},isDevice:{get:function(){return tn.isChrdev(this.mode)}}})}var i=new tn.FSNode(e,t,n,r);return tn.hashAddNode(i),i},destroyNode:function(e){tn.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768===(61440&e)},isDir:function(e){return 16384===(61440&e)},isLink:function(e){return 40960===(61440&e)},isChrdev:function(e){return 8192===(61440&e)},isBlkdev:function(e){return 24576===(61440&e)},isFIFO:function(e){return 4096===(61440&e)},isSocket:function(e){return 49152===(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=tn.flagModes[e];if("undefined"===typeof t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return tn.ignorePermissions?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:13},mayLookup:function(e){var t=tn.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:13)},mayCreate:function(e,t){try{tn.lookupNode(e,t);return 17}catch(e){}return tn.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=tn.lookupNode(e,t)}catch(e){return e.errno}var i=tn.nodePermissions(e,"wx");if(i)return i;if(n){if(!tn.isDir(r.mode))return 20;if(tn.isRoot(r)||tn.getPath(r)===tn.cwd())return 16}else if(tn.isDir(r.mode))return 21;return 0},mayOpen:function(e,t){return e?tn.isLink(e.mode)?40:tn.isDir(e.mode)&&("r"!==tn.flagsToPermissionString(t)||512&t)?21:tn.nodePermissions(e,tn.flagsToPermissionString(t)):2},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||tn.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!tn.streams[n])return n;throw new tn.ErrnoError(24)},getStream:function(e){return tn.streams[e]},createStream:function(e,t,n){tn.FSStream||(tn.FSStream=function(){},tn.FSStream.prototype={},Object.defineProperties(tn.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!==(2097155&this.flags)}},isWrite:{get:function(){return 0!==(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var r=new tn.FSStream;for(var i in e)r[i]=e[i];e=r;var o=tn.nextfd(t,n);return e.fd=o,tn.streams[o]=e,e},closeStream:function(e){tn.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=tn.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new tn.ErrnoError(29)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){tn.devices[e]={stream_ops:t}},getDevice:function(e){return tn.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){function n(e){return s(tn.syncFSRequests>0),tn.syncFSRequests--,t(e)}function r(e){if(e){if(!r.errored)return r.errored=!0,n(e)}else++o>=i.length&&n(null)}"function"===typeof e&&(t=e,e=!1),++tn.syncFSRequests>1&&console.log("warning: "+tn.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var i=tn.getMounts(tn.root.mount),o=0;i.forEach(function(t){if(!t.type.syncfs)return r(null);t.type.syncfs(t,e,r)})},mount:function(e,t,n){var r,i="/"===n,o=!n;if(i&&tn.root)throw new tn.ErrnoError(16);if(!i&&!o){var a=tn.lookupPath(n,{follow_mount:!1});if(n=a.path,r=a.node,tn.isMountpoint(r))throw new tn.ErrnoError(16);if(!tn.isDir(r.mode))throw new tn.ErrnoError(20)}var s={type:e,opts:t,mountpoint:n,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,i?tn.root=u:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),u},unmount:function(e){var t=tn.lookupPath(e,{follow_mount:!1});if(!tn.isMountpoint(t.node))throw new tn.ErrnoError(22);var n=t.node,r=n.mounted,i=tn.getMounts(r);Object.keys(tn.nameTable).forEach(function(e){for(var t=tn.nameTable[e];t;){var n=t.name_next;-1!==i.indexOf(t.mount)&&tn.destroyNode(t),t=n}}),n.mounted=null;var o=n.mount.mounts.indexOf(r);s(-1!==o),n.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=tn.lookupPath(e,{parent:!0}),i=r.node,o=Ht.basename(e);if(!o||"."===o||".."===o)throw new tn.ErrnoError(22);var a=tn.mayCreate(i,o);if(a)throw new tn.ErrnoError(a);if(!i.node_ops.mknod)throw new tn.ErrnoError(1);return i.node_ops.mknod(i,o,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,tn.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,tn.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{tn.mkdir(r,t)}catch(e){if(17!=e.errno)throw e}}},mkdev:function(e,t,n){return"undefined"===typeof n&&(n=t,t=438),t|=8192,tn.mknod(e,t,n)},symlink:function(e,t){if(!Ht.resolve(e))throw new tn.ErrnoError(2);var n=tn.lookupPath(t,{parent:!0}),r=n.node;if(!r)throw new tn.ErrnoError(2);var i=Ht.basename(t),o=tn.mayCreate(r,i);if(o)throw new tn.ErrnoError(o);if(!r.node_ops.symlink)throw new tn.ErrnoError(1);return r.node_ops.symlink(r,i,e)},rename:function(e,t){var n,r,i,o=Ht.dirname(e),a=Ht.dirname(t),s=Ht.basename(e),u=Ht.basename(t);try{n=tn.lookupPath(e,{parent:!0}),r=n.node,n=tn.lookupPath(t,{parent:!0}),i=n.node}catch(e){throw new tn.ErrnoError(16)}if(!r||!i)throw new tn.ErrnoError(2);if(r.mount!==i.mount)throw new tn.ErrnoError(18);var c=tn.lookupNode(r,s),l=Ht.relative(e,a);if("."!==l.charAt(0))throw new tn.ErrnoError(22);if(l=Ht.relative(t,o),"."!==l.charAt(0))throw new tn.ErrnoError(39);var f;try{f=tn.lookupNode(i,u)}catch(e){}if(c!==f){var h=tn.isDir(c.mode),d=tn.mayDelete(r,s,h);if(d)throw new tn.ErrnoError(d);if(d=f?tn.mayDelete(i,u,h):tn.mayCreate(i,u))throw new tn.ErrnoError(d);if(!r.node_ops.rename)throw new tn.ErrnoError(1);if(tn.isMountpoint(c)||f&&tn.isMountpoint(f))throw new tn.ErrnoError(16);if(i!==r&&(d=tn.nodePermissions(r,"w")))throw new tn.ErrnoError(d);try{tn.trackingDelegate.willMovePath&&tn.trackingDelegate.willMovePath(e,t)}catch(n){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}tn.hashRemoveNode(c);try{r.node_ops.rename(c,i,u)}catch(e){throw e}finally{tn.hashAddNode(c)}try{tn.trackingDelegate.onMovePath&&tn.trackingDelegate.onMovePath(e,t)}catch(n){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=tn.lookupPath(e,{parent:!0}),n=t.node,r=Ht.basename(e),i=tn.lookupNode(n,r),o=tn.mayDelete(n,r,!0);if(o)throw new tn.ErrnoError(o);if(!n.node_ops.rmdir)throw new tn.ErrnoError(1);if(tn.isMountpoint(i))throw new tn.ErrnoError(16);try{tn.trackingDelegate.willDeletePath&&tn.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}n.node_ops.rmdir(n,r),tn.destroyNode(i);try{tn.trackingDelegate.onDeletePath&&tn.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=tn.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new tn.ErrnoError(20);return n.node_ops.readdir(n)},unlink:function(e){var t=tn.lookupPath(e,{parent:!0}),n=t.node,r=Ht.basename(e),i=tn.lookupNode(n,r),o=tn.mayDelete(n,r,!1);if(o)throw new tn.ErrnoError(o);if(!n.node_ops.unlink)throw new tn.ErrnoError(1);if(tn.isMountpoint(i))throw new tn.ErrnoError(16);try{tn.trackingDelegate.willDeletePath&&tn.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}n.node_ops.unlink(n,r),tn.destroyNode(i);try{tn.trackingDelegate.onDeletePath&&tn.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=tn.lookupPath(e),n=t.node;if(!n)throw new tn.ErrnoError(2);if(!n.node_ops.readlink)throw new tn.ErrnoError(22);return Ht.resolve(tn.getPath(n.parent),n.node_ops.readlink(n))},stat:function(e,t){var n=tn.lookupPath(e,{follow:!t}),r=n.node;if(!r)throw new tn.ErrnoError(2);if(!r.node_ops.getattr)throw new tn.ErrnoError(1);return r.node_ops.getattr(r)},lstat:function(e){return tn.stat(e,!0)},chmod:function(e,t,n){var r;if("string"===typeof e){r=tn.lookupPath(e,{follow:!n}).node}else r=e;if(!r.node_ops.setattr)throw new tn.ErrnoError(1);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){tn.chmod(e,t,!0)},fchmod:function(e,t){var n=tn.getStream(e);if(!n)throw new tn.ErrnoError(9);tn.chmod(n.node,t)},chown:function(e,t,n,r){var i;if("string"===typeof e){i=tn.lookupPath(e,{follow:!r}).node}else i=e;if(!i.node_ops.setattr)throw new tn.ErrnoError(1);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,n){tn.chown(e,t,n,!0)},fchown:function(e,t,n){var r=tn.getStream(e);if(!r)throw new tn.ErrnoError(9);tn.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new tn.ErrnoError(22);var n;if("string"===typeof e){n=tn.lookupPath(e,{follow:!0}).node}else n=e;if(!n.node_ops.setattr)throw new tn.ErrnoError(1);if(tn.isDir(n.mode))throw new tn.ErrnoError(21);if(!tn.isFile(n.mode))throw new tn.ErrnoError(22);var r=tn.nodePermissions(n,"w");if(r)throw new tn.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=tn.getStream(e);if(!n)throw new tn.ErrnoError(9);if(0===(2097155&n.flags))throw new tn.ErrnoError(22);tn.truncate(n.node,t)},utime:function(e,t,n){var r=tn.lookupPath(e,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(t,n)})},open:function(e,t,n,r,o){if(""===e)throw new tn.ErrnoError(2);t="string"===typeof t?tn.modeStringToFlags(t):t,n="undefined"===typeof n?438:n,n=64&t?4095&n|32768:0;var a;if("object"===("undefined"===typeof e?"undefined":i(e)))a=e;else{e=Ht.normalize(e);try{a=tn.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var s=!1;if(64&t)if(a){if(128&t)throw new tn.ErrnoError(17)}else a=tn.mknod(e,n,0),s=!0;if(!a)throw new tn.ErrnoError(2);if(tn.isChrdev(a.mode)&&(t&=-513),65536&t&&!tn.isDir(a.mode))throw new tn.ErrnoError(20);if(!s){var u=tn.mayOpen(a,t);if(u)throw new tn.ErrnoError(u)}512&t&&tn.truncate(a,0),t&=-641;var c=tn.createStream({node:a,path:tn.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},r,o);c.stream_ops.open&&c.stream_ops.open(c),!rt.logReadFiles||1&t||(tn.readFiles||(tn.readFiles={}),e in tn.readFiles||(tn.readFiles[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{if(tn.trackingDelegate.onOpenFile){var l=0;1!==(2097155&t)&&(l|=tn.tracking.openFlags.READ),0!==(2097155&t)&&(l|=tn.tracking.openFlags.WRITE),tn.trackingDelegate.onOpenFile(e,l)}}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return c},close:function(e){if(tn.isClosed(e))throw new tn.ErrnoError(9);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{tn.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(tn.isClosed(e))throw new tn.ErrnoError(9);if(!e.seekable||!e.stream_ops.llseek)throw new tn.ErrnoError(29);if(0!=n&&1!=n&&2!=n)throw new tn.ErrnoError(22);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,i){if(r<0||i<0)throw new tn.ErrnoError(22);if(tn.isClosed(e))throw new tn.ErrnoError(9);if(1===(2097155&e.flags))throw new tn.ErrnoError(9);if(tn.isDir(e.node.mode))throw new tn.ErrnoError(21);if(!e.stream_ops.read)throw new tn.ErrnoError(22);var o="undefined"!==typeof i;if(o){if(!e.seekable)throw new tn.ErrnoError(29)}else i=e.position;var a=e.stream_ops.read(e,t,n,r,i);return o||(e.position+=a),a},write:function(e,t,n,r,i,o){if(r<0||i<0)throw new tn.ErrnoError(22);if(tn.isClosed(e))throw new tn.ErrnoError(9);if(0===(2097155&e.flags))throw new tn.ErrnoError(9);if(tn.isDir(e.node.mode))throw new tn.ErrnoError(21);if(!e.stream_ops.write)throw new tn.ErrnoError(22);1024&e.flags&&tn.llseek(e,0,2);var a="undefined"!==typeof i;if(a){if(!e.seekable)throw new tn.ErrnoError(29)}else i=e.position;var s=e.stream_ops.write(e,t,n,r,i,o);a||(e.position+=s);try{e.path&&tn.trackingDelegate.onWriteToFile&&tn.trackingDelegate.onWriteToFile(e.path)}catch(t){console.log("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,n){if(tn.isClosed(e))throw new tn.ErrnoError(9);if(t<0||n<=0)throw new tn.ErrnoError(22);if(0===(2097155&e.flags))throw new tn.ErrnoError(9);if(!tn.isFile(e.node.mode)&&!tn.isDir(e.node.mode))throw new tn.ErrnoError(19);if(!e.stream_ops.allocate)throw new tn.ErrnoError(95);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,i,o,a){if(1===(2097155&e.flags))throw new tn.ErrnoError(13);if(!e.stream_ops.mmap)throw new tn.ErrnoError(19);return e.stream_ops.mmap(e,t,n,r,i,o,a)},msync:function(e,t,n,r,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new tn.ErrnoError(25);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if(t=t||{},t.flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=tn.open(e,t.flags),i=tn.stat(e),o=i.size,a=new Uint8Array(o);return tn.read(r,a,0,o,0),"utf8"===t.encoding?n=h(a,0):"binary"===t.encoding&&(n=a),tn.close(r),n},writeFile:function(e,t,n){n=n||{},n.flags=n.flags||"w";var r=tn.open(e,n.flags,n.mode);if("string"===typeof t){var i=new Uint8Array(y(t)+1),o=p(t,i,0,i.length);tn.write(r,i,0,o,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");tn.write(r,t,0,t.byteLength,void 0,n.canOwn)}tn.close(r)},cwd:function(){return tn.currentPath},chdir:function(e){var t=tn.lookupPath(e,{follow:!0});if(null===t.node)throw new tn.ErrnoError(2);if(!tn.isDir(t.node.mode))throw new tn.ErrnoError(20);var n=tn.nodePermissions(t.node,"x");if(n)throw new tn.ErrnoError(n);tn.currentPath=t.path},createDefaultDirectories:function(){tn.mkdir("/tmp"),tn.mkdir("/home"),tn.mkdir("/home/web_user")},createDefaultDevices:function(){tn.mkdir("/dev"),tn.registerDevice(tn.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,i){return r}}),tn.mkdev("/dev/null",tn.makedev(1,3)),Qt.register(tn.makedev(5,0),Qt.default_tty_ops),Qt.register(tn.makedev(6,0),Qt.default_tty1_ops),tn.mkdev("/dev/tty",tn.makedev(5,0)),tn.mkdev("/dev/tty1",tn.makedev(6,0));var e;if("object"===("undefined"===typeof crypto?"undefined":i(crypto))&&"function"===typeof crypto.getRandomValues){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else e=function(){tt("random_device")};tn.createDevice("/dev","random",e),tn.createDevice("/dev","urandom",e),tn.mkdir("/dev/shm"),tn.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){tn.mkdir("/proc"),tn.mkdir("/proc/self"),tn.mkdir("/proc/self/fd"),tn.mount({mount:function(){var e=tn.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var n=+t,r=tn.getStream(n);if(!r)throw new tn.ErrnoError(9);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return i.parent=i,i}},e}},{},"/proc/self/fd")},createStandardStreams:function(){rt.stdin?tn.createDevice("/dev","stdin",rt.stdin):tn.symlink("/dev/tty","/dev/stdin"),rt.stdout?tn.createDevice("/dev","stdout",null,rt.stdout):tn.symlink("/dev/tty","/dev/stdout"),rt.stderr?tn.createDevice("/dev","stderr",null,rt.stderr):tn.symlink("/dev/tty1","/dev/stderr");var e=tn.open("/dev/stdin","r"),t=tn.open("/dev/stdout","w"),n=tn.open("/dev/stderr","w");s(0===e.fd,"invalid handle for stdin ("+e.fd+")"),s(1===t.fd,"invalid handle for stdout ("+t.fd+")"),s(2===n.fd,"invalid handle for stderr ("+n.fd+")")},ensureErrnoError:function(){tn.ErrnoError||(tn.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e;for(var t in en)if(en[t]===e){this.code=t;break}},this.setErrno(e),this.message=Zt[e],this.stack&&Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack&&(this.stack=w(this.stack))},tn.ErrnoError.prototype=new Error,tn.ErrnoError.prototype.constructor=tn.ErrnoError,[2].forEach(function(e){tn.genericErrors[e]=new tn.ErrnoError(e),tn.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){tn.ensureErrnoError(),tn.nameTable=new Array(4096),tn.mount(Yt,{},"/"),tn.createDefaultDirectories(),tn.createDefaultDevices(),tn.createSpecialDirectories(),tn.filesystems={MEMFS:Yt,IDBFS:Jt,WORKERFS:$t}},init:function(e,t,n){s(!tn.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),tn.init.initialized=!0,tn.ensureErrnoError(),rt.stdin=e||rt.stdin,rt.stdout=t||rt.stdout,rt.stderr=n||rt.stderr,tn.createStandardStreams()},quit:function(){tn.init.initialized=!1;var e=rt._fflush;e&&e(0);for(var t=0;t<tn.streams.length;t++){var n=tn.streams[t];n&&tn.close(n)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},joinPath:function(e,t){var n=Ht.join.apply(null,e);return t&&"/"==n[0]&&(n=n.substr(1)),n},absolutePath:function(e,t){return Ht.resolve(t,e)},standardizePath:function(e){return Ht.normalize(e)},findObject:function(e,t){var n=tn.analyzePath(e,t);return n.exists?n.object:($(n.error),null)},analyzePath:function(e,t){try{var n=tn.lookupPath(e,{follow:!t});e=n.path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=tn.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=Ht.basename(e),n=tn.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createFolder:function(e,t,n,r){var i=Ht.join2("string"===typeof e?e:tn.getPath(e),t),o=tn.getMode(n,r);return tn.mkdir(i,o)},createPath:function(e,t,n,r){e="string"===typeof e?e:tn.getPath(e);for(var i=t.split("/").reverse();i.length;){var o=i.pop();if(o){var a=Ht.join2(e,o);try{tn.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,t,n,r,i){var o=Ht.join2("string"===typeof e?e:tn.getPath(e),t),a=tn.getMode(r,i);return tn.create(o,a)},createDataFile:function(e,t,n,r,i,o){var a=t?Ht.join2("string"===typeof e?e:tn.getPath(e),t):e,s=tn.getMode(r,i),u=tn.create(a,s);if(n){if("string"===typeof n){for(var c=new Array(n.length),l=0,f=n.length;l<f;++l)c[l]=n.charCodeAt(l);n=c}tn.chmod(u,146|s);var h=tn.open(u,"w");tn.write(h,n,0,n.length,0,o),tn.close(h),tn.chmod(u,s)}return u},createDevice:function(e,t,n,r){var i=Ht.join2("string"===typeof e?e:tn.getPath(e),t),o=tn.getMode(!!n,!!r);tn.createDevice.major||(tn.createDevice.major=64);var a=tn.makedev(tn.createDevice.major++,0);return tn.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,i,o){for(var a=0,s=0;s<i;s++){var u;try{u=n()}catch(e){throw new tn.ErrnoError(5)}if(void 0===u&&0===a)throw new tn.ErrnoError(11);if(null===u||void 0===u)break;a++,t[r+s]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,i,o){for(var a=0;a<i;a++)try{r(t[n+a])}catch(e){throw new tn.ErrnoError(5)}return i&&(e.node.timestamp=Date.now()),a}}),tn.mkdev(i,o,a)},createLink:function(e,t,n,r,i){var o=Ht.join2("string"===typeof e?e:tn.getPath(e),t);return tn.symlink(n,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!==typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!rt.read)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Ne(rt.read(e.url),!0),e.usedBytes=e.contents.length}catch(e){t=!1}return t||$(5),t},createLazyFile:function(e,t,n,r,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;i||(a=r);var s=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==a&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):Ne(i.responseText||"",!0)},u=this;u.setDataGetter(function(e){var t=e*a,n=(e+1)*a-1;if(n=Math.min(n,r-1),"undefined"===typeof u.chunks[e]&&(u.chunks[e]=s(t,n)),"undefined"===typeof u.chunks[e])throw new Error("doXHR failed!");return u.chunks[e]}),!o&&r||(a=r=1,r=this.getter(0).length,a=r,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0},"undefined"!==typeof XMLHttpRequest){if(!at)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var u={isDevice:!1,contents:a}}else var u={isDevice:!1,url:n};var c=tn.createFile(e,t,u,r,i);u.contents?c.contents=u.contents:u.url&&(c.contents=null,c.url=u.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(c.stream_ops).forEach(function(e){var t=c.stream_ops[e];l[e]=function(){if(!tn.forceLoadFile(c))throw new tn.ErrnoError(5);return t.apply(null,arguments)}}),l.read=function(e,t,n,r,i){if(!tn.forceLoadFile(c))throw new tn.ErrnoError(5);var o=e.node.contents;if(i>=o.length)return 0;var a=Math.min(o.length-i,r);if(s(a>=0),o.slice)for(var u=0;u<a;u++)t[n+u]=o[i+u];else for(var u=0;u<a;u++)t[n+u]=o.get(i+u);return a},c.stream_ops=l,c},createPreloadedFile:function(e,t,n,r,i,o,a,s,u,c){function l(n){function l(n){c&&c(),s||tn.createDataFile(e,t,n,r,i,u),o&&o(),U(h)}var d=!1;rt.preloadPlugins.forEach(function(e){d||e.canHandle(f)&&(e.handle(n,f,l,function(){a&&a(),U(h)}),d=!0)}),d||l(n)}Browser.init();var f=t?Ht.resolve(Ht.join2(e,t)):e,h=L("cp "+f);F(h),"string"==typeof n?Browser.asyncLoad(n,function(e){l(e)},a):l(n)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=tn.indexedDB();try{var i=r.open(tn.DB_NAME(),tn.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=function(){console.log("creating db"),i.result.createObjectStore(tn.DB_STORE_NAME)},i.onsuccess=function(){function r(){0==c?t():n()}var o=i.result,a=o.transaction([tn.DB_STORE_NAME],"readwrite"),s=a.objectStore(tn.DB_STORE_NAME),u=0,c=0,l=e.length;e.forEach(function(e){var t=s.put(tn.analyzePath(e).object.contents,e);t.onsuccess=function(){++u+c==l&&r()},t.onerror=function(){c++,u+c==l&&r()}}),a.onerror=n},i.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=tn.indexedDB();try{var i=r.open(tn.DB_NAME(),tn.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=n,i.onsuccess=function(){function r(){0==c?t():n()}var o=i.result;try{var a=o.transaction([tn.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var s=a.objectStore(tn.DB_STORE_NAME),u=0,c=0,l=e.length;e.forEach(function(e){var t=s.get(e);t.onsuccess=function(){tn.analyzePath(e).exists&&tn.unlink(e),tn.createDataFile(Ht.dirname(e),Ht.basename(e),t.result,!0,!0,!0),++u+c==l&&r()},t.onerror=function(){c++,u+c==l&&r()}}),a.onerror=n},i.onerror=n}},nn={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var n;if(-100===e)n=tn.cwd();else{var r=tn.getStream(e);if(!r)throw new tn.ErrnoError(en.EBADF);n=r.path}t=Ht.join2(n,t)}return t},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&Ht.normalize(t)!==Ht.normalize(tn.getPath(e.node)))return-en.ENOTDIR;throw e}return vt[n>>2]=r.dev,vt[n+4>>2]=0,vt[n+8>>2]=r.ino,vt[n+12>>2]=r.mode,vt[n+16>>2]=r.nlink,vt[n+20>>2]=r.uid,vt[n+24>>2]=r.gid,vt[n+28>>2]=r.rdev,vt[n+32>>2]=0,vt[n+36>>2]=r.size,vt[n+40>>2]=4096,vt[n+44>>2]=r.blocks,vt[n+48>>2]=r.atime.getTime()/1e3|0,vt[n+52>>2]=0,vt[n+56>>2]=r.mtime.getTime()/1e3|0,vt[n+60>>2]=0,vt[n+64>>2]=r.ctime.getTime()/1e3|0,vt[n+68>>2]=0,vt[n+72>>2]=r.ino,0},doMsync:function(e,t,n,r){var i=new Uint8Array(mt.subarray(e,e+n));tn.msync(t,i,0,n,r)},doMkdir:function(e,t){return e=Ht.normalize(e),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),tn.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-en.EINVAL}return tn.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-en.EINVAL;var r=tn.readlink(e),i=Math.min(n,y(r)),o=pt[t+i];return m(r,t,n+1),pt[t+i]=o,i},doAccess:function(e,t){if(-8&t)return-en.EINVAL;var n;n=tn.lookupPath(e,{follow:!0}).node;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&tn.nodePermissions(n,r)?-en.EACCES:0},doDup:function(e,t,n){var r=tn.getStream(n);return r&&tn.close(r),tn.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=vt[t+8*o>>2],s=vt[t+(8*o+4)>>2],u=tn.read(e,pt,a,s,r);if(u<0)return-1;if(i+=u,u<s)break}return i},doWritev:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=vt[t+8*o>>2],s=vt[t+(8*o+4)>>2],u=tn.write(e,pt,a,s,r);if(u<0)return-1;i+=u}return i},varargs:0,get:function(e){return nn.varargs+=4,vt[nn.varargs-4>>2]},getStr:function(){return d(nn.get())},getStreamFromFD:function(){var e=tn.getStream(nn.get());if(!e)throw new tn.ErrnoError(en.EBADF);return e},getSocketFromFD:function(){var e=SOCKFS.getSocket(nn.get());if(!e)throw new tn.ErrnoError(en.EBADF);return e},getSocketAddress:function(e){var t=nn.get(),n=nn.get();if(e&&0===t)return null;var r=__read_sockaddr(t,n);if(r.errno)throw new tn.ErrnoError(r.errno);return r.addr=DNS.lookup_addr(r.addr)||r.addr,r},get64:function(){var e=nn.get(),t=nn.get();return s(e>=0?0===t:-1===t),e},getZero:function(){s(0===nn.get())}},rn={},on=Rt,an=Lt,sn=[31,29,31,30,31,30,31,31,30,31,30,31],un=[31,28,31,30,31,30,31,31,30,31,30,31];tn.staticInit();var cn={},ln={b:A,Q:Ae,K:xe,D:Ce,y:Oe,v:De,u:Me,t:Pe,ga:Re,fa:Le,ea:Fe,da:Ue,ca:je,ba:Be,aa:Ve,$:qe,_:ze,Z:We,Y:Ge,X:Xe,W:Ke,V:He,U:Qe,T:Ye,S:Je,R:$e,c:G,g:X,P:H,f:Q,O:Y,m:J,N:Z,s:$,M:ee,L:te,r:ne,q:re,J:ie,p:oe,o:ae,I:se,k:ue,d:ce,H:z,G:W,F:le,E:we,C:de,l:pe,n:on,B:me,e:ye,j:an,i:ge,h:ve,A:be,z:Ee,x:ke,w:fe,a:Nt},fn=rt.asm(cn,ln,dt),hn=fn.ha;fn.ha=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),hn.apply(null,arguments)};var dn=fn.ia;fn.ia=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),dn.apply(null,arguments)};var pn=fn.ja;fn.ja=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),pn.apply(null,arguments)};var mn=fn.ka;fn.ka=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),mn.apply(null,arguments)};var yn=fn.la;fn.la=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),yn.apply(null,arguments)};var gn=fn.ma;fn.ma=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),gn.apply(null,arguments)};var vn=fn.na;fn.na=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),vn.apply(null,arguments)};var bn=fn.oa;fn.oa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),bn.apply(null,arguments)};var wn=fn.pa;fn.pa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),wn.apply(null,arguments)};var En=fn.qa;fn.qa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),En.apply(null,arguments)};var Tn=fn.ra;fn.ra=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Tn.apply(null,arguments)};var _n=fn.sa;fn.sa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),_n.apply(null,arguments)};var Sn=fn.ta;fn.ta=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Sn.apply(null,arguments)};var In=fn.ua;fn.ua=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),In.apply(null,arguments)};var kn=fn.va;fn.va=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),kn.apply(null,arguments)};var Nn=fn.wa;fn.wa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Nn.apply(null,arguments)};var An=fn.xa;fn.xa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),An.apply(null,arguments)};var xn=fn.ya;fn.ya=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),xn.apply(null,arguments)};var Cn=fn.za;fn.za=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Cn.apply(null,arguments)};var On=fn.Aa;fn.Aa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),On.apply(null,arguments)};var Dn=fn.Ba;fn.Ba=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Dn.apply(null,arguments)};var Mn=fn.Ca;fn.Ca=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Mn.apply(null,arguments)};var Pn=fn.Da;fn.Da=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Pn.apply(null,arguments)};var Rn=fn.Ea;fn.Ea=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Rn.apply(null,arguments)};var Ln=fn.Fa;fn.Fa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ln.apply(null,arguments)};var Fn=fn.Ga;fn.Ga=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Fn.apply(null,arguments)};var Un=fn.Ha;fn.Ha=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Un.apply(null,arguments)};var jn=fn.Ia;fn.Ia=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),jn.apply(null,arguments)};var Bn=fn.Ja;fn.Ja=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Bn.apply(null,arguments)};var Vn=fn.Ka;fn.Ka=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Vn.apply(null,arguments)};var qn=fn.La;fn.La=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),qn.apply(null,arguments)};var zn=fn.Ma;fn.Ma=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),zn.apply(null,arguments)};var Wn=fn.Na;fn.Na=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Wn.apply(null,arguments)};var Gn=fn.Oa;fn.Oa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Gn.apply(null,arguments)};var Xn=fn.Pa;fn.Pa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Xn.apply(null,arguments)};var Kn=fn.Qa;fn.Qa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Kn.apply(null,arguments)};var Hn=fn.Ra;fn.Ra=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Hn.apply(null,arguments)};var Qn=fn.Sa;fn.Sa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Qn.apply(null,arguments)};var Yn=fn.Ta;fn.Ta=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Yn.apply(null,arguments)};var Jn=fn.Ua;fn.Ua=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Jn.apply(null,arguments)};var $n=fn.Va;fn.Va=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),$n.apply(null,arguments)};var Zn=fn.Wa;fn.Wa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Zn.apply(null,arguments)};var er=fn.Xa;fn.Xa=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),er.apply(null,arguments)};var tr=fn.Ya;fn.Ya=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),tr.apply(null,arguments)};var nr=fn.Za;fn.Za=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),nr.apply(null,arguments)};var rr=fn._a;fn._a=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rr.apply(null,arguments)};var ir=fn.$a;fn.$a=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ir.apply(null,arguments)};var or=fn.ab;fn.ab=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),or.apply(null,arguments)};var ar=fn.bb;fn.bb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ar.apply(null,arguments)};var sr=fn.cb;fn.cb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),sr.apply(null,arguments)};var ur=fn.db;fn.db=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ur.apply(null,arguments)};var cr=fn.eb;fn.eb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),cr.apply(null,arguments)};var lr=fn.fb;fn.fb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),lr.apply(null,arguments)};var fr=fn.gb;fn.gb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),fr.apply(null,arguments)};var hr=fn.hb;fn.hb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),hr.apply(null,arguments)};var dr=fn.ib;fn.ib=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),dr.apply(null,arguments)};var pr=fn.jb;fn.jb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),pr.apply(null,arguments)};var mr=fn.kb;fn.kb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),mr.apply(null,arguments)};var yr=fn.lb;fn.lb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),yr.apply(null,arguments)};var gr=fn.mb;fn.mb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),gr.apply(null,arguments)};var vr=fn.nb;fn.nb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),vr.apply(null,arguments)};var br=fn.ob;fn.ob=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),br.apply(null,arguments)};var wr=fn.pb;fn.pb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),wr.apply(null,arguments)};var Er=fn.qb;fn.qb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Er.apply(null,arguments)};var Tr=fn.rb;fn.rb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Tr.apply(null,arguments)};var _r=fn.sb;fn.sb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),_r.apply(null,arguments)};var Sr=fn.tb;fn.tb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Sr.apply(null,arguments)};var Ir=fn.ub;fn.ub=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ir.apply(null,arguments)};var kr=fn.vb;fn.vb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),kr.apply(null,arguments)};var Nr=fn.wb;fn.wb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Nr.apply(null,arguments)};var Ar=fn.xb;fn.xb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ar.apply(null,arguments)};var xr=fn.yb;fn.yb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),xr.apply(null,arguments)};var Cr=fn.zb;fn.zb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Cr.apply(null,arguments)};var Or=fn.Ab;fn.Ab=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Or.apply(null,arguments)};var Dr=fn.Bb;fn.Bb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Dr.apply(null,arguments)};var Mr=fn.Cb;fn.Cb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Mr.apply(null,arguments)};var Pr=fn.Db;fn.Db=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Pr.apply(null,arguments)};var Rr=fn.Eb;fn.Eb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Rr.apply(null,arguments)};var Lr=fn.Fb;fn.Fb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Lr.apply(null,arguments)};var Fr=fn.Gb;fn.Gb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Fr.apply(null,arguments)};var Ur=fn.Hb;fn.Hb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ur.apply(null,arguments)};var jr=fn.Ib;fn.Ib=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),jr.apply(null,arguments)};var Br=fn.Jb;fn.Jb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Br.apply(null,arguments)};var Vr=fn.Kb;fn.Kb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Vr.apply(null,arguments)};var qr=fn.Lb;fn.Lb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),qr.apply(null,arguments)};var zr=fn.Mb;fn.Mb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),zr.apply(null,arguments)};var Wr=fn.Nb;fn.Nb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Wr.apply(null,arguments)};var Gr=fn.Ob;fn.Ob=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Gr.apply(null,arguments)};var Xr=fn.Pb;fn.Pb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Xr.apply(null,arguments)};var Kr=fn.Qb;fn.Qb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Kr.apply(null,arguments)};var Hr=fn.Rb;fn.Rb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Hr.apply(null,arguments)};var Qr=fn.Sb;fn.Sb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Qr.apply(null,arguments)};var Yr=fn.Vb;fn.Vb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Yr.apply(null,arguments)};var Jr=fn.Wb;fn.Wb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Jr.apply(null,arguments)};var $r=fn.Xb;fn.Xb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),$r.apply(null,arguments)};var Zr=fn.Yb;fn.Yb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Zr.apply(null,arguments)},rt.asm=fn;var ei=rt.__ZSt18uncaught_exceptionv=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ha.apply(null,arguments)},ti=(rt.___cxa_can_catch=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ia.apply(null,arguments)},rt.___cxa_is_pointer_type=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ja.apply(null,arguments)},rt.___errno_location=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ka.apply(null,arguments)},rt._adl_generate=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.la.apply(null,arguments)},rt._adl_getBankNames=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ma.apply(null,arguments)},rt._adl_getBanksCount=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.na.apply(null,arguments)},rt._adl_getNumChips=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.oa.apply(null,arguments)},rt._adl_init=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.pa.apply(null,arguments)},rt._adl_panic=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.qa.apply(null,arguments)},rt._adl_rt_channelAfterTouch=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ra.apply(null,arguments)},rt._adl_rt_controllerChange=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.sa.apply(null,arguments)},rt._adl_rt_noteOff=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ta.apply(null,arguments)},rt._adl_rt_noteOn=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ua.apply(null,arguments)},rt._adl_rt_patchChange=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.va.apply(null,arguments)},rt._adl_rt_pitchBend=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.wa.apply(null,arguments)},rt._adl_rt_resetState=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.xa.apply(null,arguments)},rt._adl_setBank=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ya.apply(null,arguments)},rt._adl_setNumChips=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.za.apply(null,arguments)},rt._adl_setSoftPanEnabled=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Aa.apply(null,arguments)},rt._cqt_bin_to_freq=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ba.apply(null,arguments)},rt._cqt_calc=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ca.apply(null,arguments)},rt._cqt_init=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Da.apply(null,arguments)},rt._cqt_render_line=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ea.apply(null,arguments)},rt._fflush=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Fa.apply(null,arguments)},rt._fluid_settings_setint=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ga.apply(null,arguments)},rt._fluid_settings_setnum=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ha.apply(null,arguments)},rt._fluid_settings_setstr=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ia.apply(null,arguments)},rt._fluid_synth_all_notes_off=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ja.apply(null,arguments)},rt._fluid_synth_all_sounds_off=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ka.apply(null,arguments)},rt._fluid_synth_noteoff=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.La.apply(null,arguments)},rt._fluid_synth_noteon=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ma.apply(null,arguments)},rt._fluid_synth_set_reverb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Na.apply(null,arguments)},rt._fluid_synth_sfload=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Oa.apply(null,arguments)},rt._fluid_synth_write_float=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Pa.apply(null,arguments)},rt._free=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Qa.apply(null,arguments)}),ni=(rt._gme_delete=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ra.apply(null,arguments)},rt._gme_ignore_silence=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Sa.apply(null,arguments)},rt._gme_mute_voices=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ta.apply(null,arguments)},rt._gme_open_data=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ua.apply(null,arguments)},rt._gme_play=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Va.apply(null,arguments)},rt._gme_seek_scaled=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Wa.apply(null,arguments)},rt._gme_set_fade=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Xa.apply(null,arguments)},rt._gme_set_tempo=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ya.apply(null,arguments)},rt._gme_start_track=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Za.apply(null,arguments)},rt._gme_tell_scaled=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm._a.apply(null,arguments)},rt._gme_track_count=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.$a.apply(null,arguments)},rt._gme_track_ended=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ab.apply(null,arguments)},rt._gme_track_info=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.bb.apply(null,arguments)},rt._gme_voice_count=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.cb.apply(null,arguments)},rt._gme_voice_name=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.db.apply(null,arguments)},rt._llvm_bswap_i32=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.eb.apply(null,arguments)},rt._llvm_maxnum_f64=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.fb.apply(null,arguments)},rt._llvm_minnum_f64=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.gb.apply(null,arguments)},rt._llvm_round_f64=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.hb.apply(null,arguments)},rt._malloc=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ib.apply(null,arguments)}),ri=(rt._memmove=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.jb.apply(null,arguments)},rt._new_fluid_settings=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.kb.apply(null,arguments)},rt._new_fluid_synth=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.lb.apply(null,arguments)},rt._pthread_cond_broadcast=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.mb.apply(null,arguments)},rt._sbrk=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.nb.apply(null,arguments)},rt._tp_add_soundfont=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ob.apply(null,arguments)},rt._tp_get_channel_in_use=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.pb.apply(null,arguments)},rt._tp_get_channel_program=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.qb.apply(null,arguments)},rt._tp_get_duration_ms=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.rb.apply(null,arguments)},rt._tp_get_position_ms=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.sb.apply(null,arguments)},rt._tp_init=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.tb.apply(null,arguments)},rt._tp_load_soundfont=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.ub.apply(null,arguments)},rt._tp_open=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.vb.apply(null,arguments)},rt._tp_seek=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.wb.apply(null,arguments)},rt._tp_set_bank=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.xb.apply(null,arguments)},rt._tp_set_channel_mute=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.yb.apply(null,arguments)},rt._tp_set_reverb=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.zb.apply(null,arguments)},rt._tp_set_speed=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ab.apply(null,arguments)},rt._tp_set_synth_engine=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Bb.apply(null,arguments)},rt._tp_stop=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Cb.apply(null,arguments)},rt._tp_unload_soundfont=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Db.apply(null,arguments)},rt._tp_write_audio=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Eb.apply(null,arguments)},rt._xmp_channel_mute=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Fb.apply(null,arguments)},rt._xmp_create_context=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Gb.apply(null,arguments)},rt._xmp_end_player=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Hb.apply(null,arguments)},rt._xmp_get_format_list=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ib.apply(null,arguments)},rt._xmp_get_frame_info=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Jb.apply(null,arguments)},rt._xmp_get_module_info=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Kb.apply(null,arguments)},rt._xmp_get_player=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Lb.apply(null,arguments)},rt._xmp_inject_event=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Mb.apply(null,arguments)},rt._xmp_load_module_from_memory=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Nb.apply(null,arguments)},rt._xmp_play_buffer=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ob.apply(null,arguments)},rt._xmp_restart_module=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Pb.apply(null,arguments)},rt._xmp_seek_time=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Qb.apply(null,arguments)},rt._xmp_start_player=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Rb.apply(null,arguments)},rt._xmp_stop_module=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Sb.apply(null,arguments)},rt.establishStackSpace=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Vb.apply(null,arguments)},rt.stackAlloc=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Wb.apply(null,arguments)}),ii=rt.stackRestore=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Xb.apply(null,arguments)},oi=rt.stackSave=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Yb.apply(null,arguments)};rt.dynCall_v=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Tb.apply(null,arguments)},rt.dynCall_vi=function(){return s(Mt,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),s(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),rt.asm.Ub.apply(null,arguments)};rt.asm=fn,rt.intArrayFromString||(rt.intArrayFromString=function(){tt("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.intArrayToString||(rt.intArrayToString=function(){tt("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.ccall=c,rt.cwrap||(rt.cwrap=function(){tt("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.setValue=l,rt.getValue=a,rt.allocate=f,rt.getMemory||(rt.getMemory=function(){tt("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.AsciiToString||(rt.AsciiToString=function(){tt("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stringToAscii||(rt.stringToAscii=function(){tt("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.UTF8ArrayToString||(rt.UTF8ArrayToString=function(){tt("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.UTF8ToString=d,rt.stringToUTF8Array||(rt.stringToUTF8Array=function(){tt("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stringToUTF8||(rt.stringToUTF8=function(){tt("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.lengthBytesUTF8||(rt.lengthBytesUTF8=function(){tt("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.UTF16ToString||(rt.UTF16ToString=function(){tt("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stringToUTF16||(rt.stringToUTF16=function(){tt("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.lengthBytesUTF16||(rt.lengthBytesUTF16=function(){tt("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.UTF32ToString||(rt.UTF32ToString=function(){tt("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stringToUTF32||(rt.stringToUTF32=function(){tt("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.lengthBytesUTF32||(rt.lengthBytesUTF32=function(){tt("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.allocateUTF8||(rt.allocateUTF8=function(){tt("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stackTrace||(rt.stackTrace=function(){tt("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.addOnPreRun||(rt.addOnPreRun=function(){tt("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.addOnInit||(rt.addOnInit=function(){tt("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.addOnPreMain||(rt.addOnPreMain=function(){tt("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.addOnExit||(rt.addOnExit=function(){tt("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.addOnPostRun||(rt.addOnPostRun=function(){tt("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.writeStringToMemory||(rt.writeStringToMemory=function(){tt("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.writeArrayToMemory||(rt.writeArrayToMemory=function(){tt("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.writeAsciiToMemory||(rt.writeAsciiToMemory=function(){tt("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.addRunDependency||(rt.addRunDependency=function(){tt("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.removeRunDependency||(rt.removeRunDependency=function(){tt("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.ENV||(rt.ENV=function(){tt("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.FS=tn,rt.FS_createFolder||(rt.FS_createFolder=function(){tt("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.FS_createPath||(rt.FS_createPath=function(){tt("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.FS_createDataFile||(rt.FS_createDataFile=function(){tt("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.FS_createPreloadedFile||(rt.FS_createPreloadedFile=function(){tt("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.FS_createLazyFile||(rt.FS_createLazyFile=function(){tt("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.FS_createLink||(rt.FS_createLink=function(){tt("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.FS_createDevice||(rt.FS_createDevice=function(){tt("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.FS_unlink||(rt.FS_unlink=function(){tt("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),rt.GL||(rt.GL=function(){tt("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.dynamicAlloc||(rt.dynamicAlloc=function(){tt("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.warnOnce||(rt.warnOnce=function(){tt("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.loadDynamicLibrary||(rt.loadDynamicLibrary=function(){tt("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.loadWebAssemblyModule||(rt.loadWebAssemblyModule=function(){tt("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.getLEB||(rt.getLEB=function(){tt("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.getFunctionTables||(rt.getFunctionTables=function(){tt("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.alignFunctionTables||(rt.alignFunctionTables=function(){tt("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.registerFunctions||(rt.registerFunctions=function(){tt("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.addFunction||(rt.addFunction=function(){tt("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.removeFunction||(rt.removeFunction=function(){tt("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.getFuncWrapper||(rt.getFuncWrapper=function(){tt("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.prettyPrint||(rt.prettyPrint=function(){tt("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.makeBigInt||(rt.makeBigInt=function(){tt("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.dynCall||(rt.dynCall=function(){tt("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.getCompilerSetting||(rt.getCompilerSetting=function(){tt("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stackSave||(rt.stackSave=function(){tt("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stackRestore||(rt.stackRestore=function(){tt("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.stackAlloc||(rt.stackAlloc=function(){tt("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.establishStackSpace||(rt.establishStackSpace=function(){tt("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.print||(rt.print=function(){tt("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.printErr||(rt.printErr=function(){tt("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.getTempRet0||(rt.getTempRet0=function(){tt("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.setTempRet0||(rt.setTempRet0=function(){tt("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.Pointer_stringify||(rt.Pointer_stringify=function(){tt("'Pointer_stringify' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.writeStackCookie||(rt.writeStackCookie=function(){tt("'writeStackCookie' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.checkStackCookie||(rt.checkStackCookie=function(){tt("'checkStackCookie' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.abortStackOverflow||(rt.abortStackOverflow=function(){tt("'abortStackOverflow' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),rt.ALLOC_NORMAL=0,rt.ALLOC_STACK||Object.defineProperty(rt,"ALLOC_STACK",{get:function(){tt("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),rt.ALLOC_DYNAMIC||Object.defineProperty(rt,"ALLOC_DYNAMIC",{get:function(){tt("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),rt.ALLOC_NONE||Object.defineProperty(rt,"ALLOC_NONE",{get:function(){tt("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),rt.then=function(e){if(rt.calledRun)e(rt);else{var t=rt.onRuntimeInitialized;rt.onRuntimeInitialized=function(){t&&t(),e(rt)}}return rt},Ze.prototype=new Error,Ze.prototype.constructor=Ze,qt=function e(){rt.calledRun||et(),rt.calledRun||(qt=e)},rt.run=et;var ai=[];if(rt.abort=tt,rt.preInit)for("function"==typeof rt.preInit&&(rt.preInit=[rt.preInit]);rt.preInit.length>0;)rt.preInit.pop()();return rt.noExitRuntime=!0,et(),t}}();"object"===i(t)&&"object"===i(e)?e.exports=o:(n=[],void 0!==(r=function(){return o}.apply(t,n))&&(e.exports=r))}).call(t,n(80)(e))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(54),s=n(59),u=n(201),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=null,f=null,h=["nsf","nsfe","spc","gym","vgm","vgz","ay","sgc","kss"],d=function(e){function t(e,n,o,a){r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a));return s.setParameter=s.setParameter.bind(s),s.getParameter=s.getParameter.bind(s),s.getParamDefs=s.getParamDefs.bind(s),f=o,s.paused=!1,s.fileExtensions=h,s.subtune=0,s.tempo=1,s.params={subbass:1},s.buffer=f.allocate(16*s.bufferSize,"i16",f.ALLOC_NORMAL),s.emuPtr=f.allocate(1,"i32",f.ALLOC_NORMAL),s.subBass=new u.a(e.sampleRate),s.setAudioProcess(s.gmeAudioProcess),s}return o(t,e),c(t,[{key:"gmeAudioProcess",value:function(e){var t=void 0,n=void 0,r=[];for(n=0;n<e.outputBuffer.numberOfChannels;n++)r[n]=e.outputBuffer.getChannelData(n);if(this.paused)for(n=0;n<r.length;n++)r[n].fill(0);else if(this.getPositionMs()>=this.getDurationMs()&&!1===this.fadingOut&&(console.log("Fading out at %d ms.",this.getPositionMs()),this.setFadeout(this.getPositionMs()),this.fadingOut=!0),1!==f._gme_track_ended(l)){for(f._gme_play(l,2*this.bufferSize,this.buffer),n=0;n<r.length;n++)for(t=0;t<this.bufferSize;t++)r[n][t]=f.getValue(this.buffer+2*t*2+2*n,"i16")/65535;if(this.params.subbass>0)for(t=0;t<this.bufferSize;t++){var i=this.subBass.process(r[0][t])*this.params.subbass;r[0][t]+=i,r[1][t]+=i}}else(++this.subtune>=f._gme_track_count(l)||0!==this.playSubtune(this.subtune))&&(this.suspend(),console.debug("GMEPlayer.gmeAudioProcess(): _gme_track_ended == %s and subtune (%s) > _gme_track_count (%s).",f._gme_track_ended(l),this.subtune,f._gme_track_count(l)),this.onPlayerStateUpdate(!0))}},{key:"restart",value:function(){this.fadingOut=!1,f._gme_seek(l,0),this.resume()}},{key:"playSubtune",value:function(e){return this.fadingOut=!1,this.subtune=e,this.metadata=this._parseMetadata(e),console.debug("GMEPlayer.playSubtune(subtune=%s)",e),this.onPlayerStateUpdate(!1),f._gme_start_track(l,e)}},{key:"loadData",value:function(e,t){this.subtune=0,this.fadingOut=!1,this.filepathMeta=a.a.metadataFromFilepath(t);var n=t.match(/(\.sgc$|\.kss$|\.nsfe?$|\.ay$|Master System|Game Gear)/i);if(this.params.subbass=n?1:0,0!==f.ccall("gme_open_data","number",["array","number","number","number"],[e,e.length,this.emuPtr,this.audioCtx.sampleRate]))throw console.error("gme_open_data failed."),this.stop(),Error("Unable to load this file!");if(l=f.getValue(this.emuPtr,"i32"),this.connect(),this.resume(),0!==this.playSubtune(this.subtune))throw console.error("gme_start_track failed."),Error("Unable to play this subtune!")}},{key:"_parseMetadata",value:function(e){var t=f.allocate(1,"i32",f.ALLOC_NORMAL);0!==f._gme_track_info(l,t,e)&&console.error("could not load metadata");var n=f.getValue(t,"*"),r=0,i=function(){var e=f.getValue(n+r,"i32");return r+=4,e},o=function(){for(var e="",t=f.getValue(n+r,"i8*"),i=0;i<255;i++){var o=f.getValue(t+i,"i8");if(0===o)break;o<0&&(o=1+(255^Math.abs(o))),e+=String.fromCharCode(o)}return r+=4,e},a={};return a.length=i(),a.intro_length=i(),a.loop_length=i(),a.play_length=i(),r+=48,a.system=o(),a.game=o(),a.title=o()||a.game||this.filepathMeta.title,a.artist=o()||this.filepathMeta.artist,a.copyright=o(),a.comment=o(),a.formatted={title:a.game===a.title?a.title:s.a.allOrNone(a.game," - ")+a.title,subtitle:[a.artist,a.system].filter(function(e){return e}).join(" - ")+s.a.allOrNone(" (",a.copyright,")")},a}},{key:"getVoiceName",value:function(e){if(l)return f.UTF8ToString(f._gme_voice_name(l,e))}},{key:"getNumVoices",value:function(){if(l)return f._gme_voice_count(l)}},{key:"getNumSubtunes",value:function(){if(l)return f._gme_track_count(l)}},{key:"getSubtune",value:function(){return this.subtune}},{key:"getPositionMs",value:function(){return l?f._gme_tell_scaled(l):0}},{key:"getDurationMs",value:function(){return l?this.metadata.play_length:0}},{key:"getMetadata",value:function(){return this.metadata}},{key:"getParameter",value:function(e){return this.params[e]}},{key:"getParamDefs",value:function(){return[{id:"subbass",label:"Sub Bass",type:"number",min:0,max:2,step:.01,value:1}]}},{key:"setParameter",value:function(e,t){switch(e){case"subbass":this.params[e]=t;break;default:console.warn('GMEPlayer has no parameter with id "%s".',e)}}},{key:"isPlaying",value:function(){return!this.isPaused()&&1!==f._gme_track_ended(l)}},{key:"setTempo",value:function(e){this.tempo=e,l&&f._gme_set_tempo(l,e)}},{key:"setFadeout",value:function(e){l&&f._gme_set_fade(l,e,4e3)}},{key:"setVoices",value:function(e){var t=0;e.forEach(function(e,n){e||(t+=1<<n)}),l&&f._gme_mute_voices(l,t)}},{key:"seekMs",value:function(e){l&&this.muteAudioDuringCall(this.audioNode,function(){return f._gme_seek_scaled(l,e)})}},{key:"stop",value:function(){this.suspend(),l&&f._gme_delete(l),l=null,console.debug("GMEPlayer.stop()"),this.onPlayerStateUpdate(!0)}}]),t}(a.a);t.a=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(202),o=(n.n(i),function e(t){function n(e){return y=g*y+(1-g)*e,e-y}function o(e){return e=n(e),1.414*(v=b*v+(1-b)*Math.abs(e))}r(this,e);var a=new i.CalcCascades,s=a.lowpass({order:5,characteristic:"butterworth",Fs:t,Fc:200,gain:0}),u=a.lowpass({order:3,characteristic:"butterworth",Fs:t,Fc:120,gain:0}),c=a.highpass({order:3,characteristic:"butterworth",Fs:t,Fc:25,gain:0}),l=new i.IirFilter(s),f=new i.IirFilter(u),h=new i.IirFilter(c),d=0,p=0,m=0,y=0,g=Math.exp(-1/(.16*t)),v=0,b=Math.exp(-1/(.016*t));this.process=function(e){var t=l.singleStep(e),n=o(t);p=d,d=t,p<0&&d>=0&&(m=(m+1)%Math.pow(2,1));for(var r=0,i=0;i<1;i++){r+=m&1<<i?1:-1}return h.singleStep(f.singleStep(r))*n}});t.a=o},function(e,t,n){var r,r;!function(t){e.exports=t()}(function(){return function e(t,n,i){function o(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof r&&r;if(!u&&c)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){return o(t[s][1][e]||e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";t.exports={CalcCascades:e("./src/calcCascades"),Fft:e("./src/fft"),FirCoeffs:e("./src/firCoeffs"),FirFilter:e("./src/firFilter"),IirCoeffs:e("./src/iirCoeffs"),IirFilter:e("./src/iirFilter"),TestFilter:e("./src/testFilter")}},{"./src/calcCascades":2,"./src/fft":3,"./src/firCoeffs":4,"./src/firFilter":5,"./src/iirCoeffs":6,"./src/iirFilter":7,"./src/testFilter":8}],2:[function(e,t,n){"use strict";var r=e("./iirCoeffs"),i=new r,o={bessel:{q:[[.57735026919],[.805538281842,.521934581669],[1.02331395383,.611194546878,.510317824749],[1.22566942541,.710852074442,.559609164796,.505991069397],[1.41530886916,.809790964842,.620470155556,.537552151325,.503912727276],[1.59465693507,.905947107025,.684008068137,.579367238641,.525936202016,.502755558204],[1.76552743493,.998998442993,.747625068271,.624777082395,.556680772868,.519027293158,.502045428643],[1.9292718407,1.08906376917,.810410302962,.671382379377,.591144659703,.542678365981,.514570953471,.501578400482],[2.08691792612,1.17637337045,.872034231424,.718163551101,.627261751983,.569890924765,.533371782078,.511523796759,.50125489338],[2.23926560629,1.26117120993,.932397288146,.764647810579,.664052481472,.598921924986,.555480327396,.526848630061,.509345928377,.501021580965],[2.38695091667,1.34368488961,.991497755204,.81060830488,.701011199665,.628878390935,.57943181849,.545207253735,.52208637596,.507736060535,.500847111042],[2.53048919562,1.42411783481,1.04937620183,.85593899901,.737862159044,.659265671705,.604435823473,.565352679646,.537608804383,.51849505465,.506508536474,.500715908905]],f3dB:[[1.27201964951],[1.60335751622,1.43017155999],[1.9047076123,1.68916826762,1.60391912877],[2.18872623053,1.95319575902,1.8320926012,1.77846591177],[2.45062684305,2.20375262593,2.06220731793,1.98055310881,1.94270419166],[2.69298925084,2.43912611431,2.28431825401,2.18496722634,2.12472538477,2.09613322542],[2.91905714471,2.66069088948,2.49663434571,2.38497976939,2.30961462222,2.26265746534,2.24005716132],[3.13149167404,2.87016099416,2.69935018044,2.57862945683,2.49225505119,2.43227707449,2.39427710712,2.37582307687],[3.33237300564,3.06908580184,2.89318259511,2.76551588399,2.67073340527,2.60094950474,2.55161764546,2.52001358804,2.50457164552],[3.52333123464,3.25877569704,3.07894353744,2.94580435024,2.84438325189,2.76691082498,2.70881411245,2.66724655259,2.64040228249,2.62723439989],[3.70566068548,3.44032173223,3.2574059854,3.11986367838,3.01307175388,2.92939234605,2.86428726094,2.81483068055,2.77915465405,2.75596888377,2.74456638588],[3.88040469682,3.61463243697,3.4292654707,3.28812274966,3.17689762788,3.08812364257,3.01720732972,2.96140104561,2.91862858495,2.88729479473,2.8674198668,2.8570800015]],f1dB:[[2.16477559371],[2.70320928596,2.41122332505],[3.25676581436,2.88822569572,2.74246238837],[3.76153580353,3.35675411406,3.14862673032,3.05646412475],[4.22174260104,3.79644757806,3.55260471864,3.41193742197,3.34673435508],[4.64584812552,4.20789257981,3.94082363122,3.76942681446,3.66549975744,3.61617359345],[5.04060395196,4.5944592201,4.3111677248,4.11836351827,3.98822359814,3.90713836715,3.86811234525],[5.41107948467,4.95951159709,4.66435804468,4.45575796102,4.30650679478,4.20286750045,4.13720522991,4.10531748119],[5.76110791853,5.30592898465,5.00182215701,4.7811081045,4.61724509926,4.49660100894,4.41131378918,4.35667671372,4.32997951075],[6.09364309488,5.63609116014,5.32506930789,5.09480346139,4.91939504255,4.78540258409,4.68493280536,4.61302286993,4.56661931366,4.54382759952],[6.41100731543,5.95195558182,5.63550073656,5.39754464742,5.21278891332,5.06801430334,4.95539684456,4.8697869429,4.80814951843,4.76793469612,4.74828032403],[6.71506056052,6.25514029778,5.9343616072,5.69011422355,5.49763642361,5.34401973764,5.22125973611,5.12485045619,5.05037962112,4.99699982231,4.96155789635,4.94441828777]]}},a={bessel:{as:[[1.3617],[1.3397,.7743],[1.2217,.9686,.5131],[1.1112,.9754,.7202,.3728],[1.0215,.9393,.7815,.5604,.2883]],bs:[[.618],[.4889,.389],[.3887,.3505,.2756],[.3162,.2979,.2621,.2087],[.265,.2549,.2351,.2059,.1665]]},butterworth:{as:[[1.4142],[1.8478,.7654],[1.9319,1.4142,.5176],[1.9616,1.6629,1.1111,.3902],[1.9754,1.782,1.4142,.908,.3129]],bs:[[1],[1,1],[1,1,1],[1,1,1,1],[1,1,1,1,1]]},tschebyscheff05:{as:[[1.3614],[2.6282,.3648],[3.8645,.7528,.1589],[5.1117,1.0639,.3439,.0885],[6.3648,1.3582,.4822,.1994,.0563]],bs:[[1.3827],[3.4341,1.1509],[6.9797,1.8573,1.0711],[11.9607,2.9365,1.4206,1.0407],[18.3695,4.3453,1.944,1.252,1.0263]]},tschebyscheff1:{as:[[1.3022],[2.5904,.3039],[3.8437,.6292,.1296],[5.1019,.8916,.2806,.0717],[6.3634,1.1399,.3939,.1616,.0455]],bs:[[1.5515],[4.1301,1.1697],[8.5529,1.9124,1.0766],[14.7608,3.0426,1.4334,1.0432],[22.7468,4.5167,1.9665,1.2569,1.0277]]},tschebyscheff2:{as:[[1.1813],[2.4025,.2374],[3.588,.4925,.0995],[4.7743,.6991,.2153,.0547],[5.9618,.8947,.3023,.1233,.0347]],bs:[[1.7775],[4.9862,1.1896],[10.4648,1.9622,1.0826],[18.151,3.1353,1.4449,1.0461],[28.0376,4.6644,1.9858,1.2614,1.0294]]},tschebyscheff3:{as:[[1.065],[2.1853,.1964],[3.2721,.4077,.0815],[4.3583,.5791,.1765,.0448],[5.4449,.7414,.2479,.1008,.0283]],bs:[[1.9305],[5.5339,1.2009],[11.6773,1.9873,1.0861],[20.2948,3.1808,1.4507,1.0478],[31.3788,4.7363,1.9952,1.2638,1.0304]]},allpass:{as:[[1.6278],[2.337,1.3506],[2.6117,2.0706,1.0967],[2.7541,2.4174,1.785,.9239],[2.8406,2.612,2.1733,1.5583,.8018]],bs:[[.8832],[1.4878,1.1837],[1.7763,1.6015,1.2596],[1.942,1.83,1.6101,1.2822],[2.049,1.9714,1.8184,1.5923,1.2877]]}},s=function(e,t){var n=[],r=0;if("fromPZ"!==t)for(e.order>12&&(e.order=12),r=0;r<e.order;r++){var s,u,c;"matchedZ"===e.transform?n.push(i.lowpassMZ({Fs:e.Fs,Fc:e.Fc,preGain:e.preGain,as:a[e.characteristic].as[e.order-1][r],bs:a[e.characteristic].bs[e.order-1][r]})):("butterworth"===e.characteristic?(s=.5/Math.sin(Math.PI/(2*e.order)*(r+.5)),u=1):(s=o[e.characteristic].q[e.order-1][r],u=e.oneDb?o[e.characteristic].f1dB[e.order-1][r]:o[e.characteristic].f3dB[e.order-1][r]),c="highpass"===t?e.Fc/u:e.Fc*u,"bandpass"!==t&&"bandstop"!==t||"bessel"===e.characteristic&&(c=Math.sqrt(e.order)*c/e.order),n.push(i[t]({Fs:e.Fs,Fc:c,Q:s,BW:e.BW||0,gain:e.gain||0,preGain:e.preGain||!1})))}else for(r=0;r<e.length;r++)n.push(i[t](e[r]));return n},u=function(e){return function(t){return s(t,e)}},c={},l=function(){var e=[];for(var t in i)c[t]=u(t),e.push(t);return c.available=function(){return e},c};t.exports=l},{"./iirCoeffs":6}],3:[function(e,t,n){"use strict";var r=function(e){if(!function(e){return!(e&e-1)}(e))return!1;var t={};t.length=e,t.buffer=new Float64Array(e),t.re=new Float64Array(e),t.im=new Float64Array(e),t.reI=new Float64Array(e),t.imI=new Float64Array(e),t.twiddle=new Int32Array(e),t.sinTable=new Float64Array(e-1),t.cosTable=new Float64Array(e-1);var n=2*Math.PI,r=Math.floor(Math.log(e)/Math.LN2);for(o=t.sinTable.length;o--;)t.sinTable[o]=Math.sin(n*(o/e)),t.cosTable[o]=Math.cos(n*(o/e));for(var i=e>>1,o=0,a=0;t.twiddle[o]=a,!(++o>=e);){for(r=i;r<=a;)a-=r,r>>=1;a+=r}var s=Math.PI,u=2*Math.PI,c=Math.abs,l=Math.pow,f=Math.cos,h=Math.sin,d=function(e){return h(s*e)/(s*e)},p=Math.E,m={rectangular:{calc:function(){return 1},values:[],correction:1},none:{calc:function(){return 1},values:[],correction:1},hanning:{calc:function(e,t){return.5*(1-f(u*e/(t-1)))},values:[],correction:2},hamming:{calc:function(e,t){return.54-.46*f(u*e/(t-1))},values:[],correction:1.8518999946875638},tukery:{calc:function(e,t,n){return e<n*(t-1)/2?.5*(1+f(s*(2*e/(n*(t-1))-1))):(t-1)*(1-n/2)<e?.5*(1+f(s*(2*e/(n*(t-1))-2/n+1))):1},values:[],correction:4/3},cosine:{calc:function(e,t){return h(s*e/(t-1))},values:[],correction:1.570844266360796},lanczos:{calc:function(e,t){return d(2*e/(t-1)-1)},values:[],correction:1.6964337576195783},triangular:{calc:function(e,t){return 2/(t+1)*((t+1)/2-c(e-(t-1)/2))},values:[],correction:2},bartlett:{calc:function(e,t){return 2/(t-1)*((t-1)/2-c(e-(t-1)/2))},values:[],correction:2},gaussian:{calc:function(e,t,n){return l(p,-.5*l((e-(t-1)/2)/(n*(t-1)/2),2))},values:[],correction:5/3},bartlettHanning:{calc:function(e,t){var n=u*e/(t-1);return.62-.48*c(e/(t-1)-.5)-.38*f(n)},values:[],correction:2},blackman:{calc:function(e,t,n){var r=(1-n)/2,i=n/2,o=u*e/(t-1);return r-.5*f(o)+i*f(2*o)},values:[],correction:4/3},blackmanHarris:{calc:function(e,t){var n=u*e/(t-1);return.35875-.48829*f(n)+.14128*f(2*n)-.01168*f(3*n)},values:[],correction:1.5594508635},nuttall3:{calc:function(e,t){var n=u*e/(t-1);return.375-.5*f(n)+.125*f(2*n)},values:[],correction:1.56},nuttall3a:{calc:function(e,t){var n=u*e/(t-1);return.40897-.5*f(n)+.09103*f(2*n)},values:[],correction:1.692},nuttall3b:{calc:function(e,t){var n=u*e/(t-1);return.4243801-.4973406*f(n)+.078793*f(2*n)},values:[],correction:1.7372527},nuttall4:{calc:function(e,t){var n=u*e/(t-1);return.3125-.46875*f(n)+.1875*f(2*n)-.03125*f(3*n)},values:[],correction:1.454543},nuttall4a:{calc:function(e,t){var n=u*e/(t-1);return.338946-.481973*f(n)+.161054*f(2*n)-.018027*f(3*n)},values:[],correction:1.512732763},nuttall4b:{calc:function(e,t){var n=u*e/(t-1);return.355768-.481973*f(n)+.144232*f(2*n)-.012604*f(3*n)},values:[],correction:1.55223262},nuttall4c:{calc:function(e,t){var n=u*e/(t-1);return.3635819-.4891775*f(n)+.1365995*f(2*n)-.0106411*f(3*n)},values:[],correction:1.57129067},sft3f:{calc:function(e,t){var n=u*e/(t-1);return.26526-.5*f(n)+.23474*f(2*n)},values:[],correction:1.3610238},sft4f:{calc:function(e,t){var n=u*e/(t-1);return.21706-.42103*f(n)+.28294*f(2*n)-.07897*f(3*n)},values:[],correction:1.2773573},sft5f:{calc:function(e,t){var n=u*e/(t-1);return.1881-.36923*f(n)+.28702*f(2*n)-.13077*f(3*n)+.02488*f(4*n)},values:[],correction:1.23167769},sft3m:{calc:function(e,t){var n=u*e/(t-1);return.28235-.52105*f(n)+.19659*f(2*n)},values:[],correction:1.39343451},sft4m:{calc:function(e,t){var n=u*e/(t-1);return.241906-.460841*f(n)+.2552381*f(2*n)-.041872*f(3*n)},values:[],correction:1.3190596},sft5m:{calc:function(e,t){var n=u*e/(t-1);return.209671-.407331*f(n)+.281225*f(2*n)-.092669*f(3*n)+.0091036*f(4*n)},values:[],correction:1.26529456464},nift:{calc:function(e,t){var n=u*e/(t-1);return.2810639-.5208972*f(n)+.1980399*f(2*n)},values:[],correction:1.39094182},hpft:{calc:function(e,t){var n=u*e/(t-1);return(1-1.912510941*f(n)+1.079173272*f(2*n)-.1832630879*f(3*n))/t},values:[],correction:1},srft:{calc:function(e,t){var n=u*e/(t-1);return(1-1.93*f(n)+1.29*f(2*n)-.388*f(3*n)+.028*f(4*n))/t},values:[],correction:1},hft70:{calc:function(e,t){var n=u*e/(t-1);return(1-1.90796*f(n)+1.07349*f(2*n)-.18199*f(3*n))/t},values:[],correction:1},hft95:{calc:function(e,t){var n=u*e/(t-1);return(1-1.9383379*f(n)+1.3045202*f(2*n)-.402827*f(3*n)+.0350665*f(4*n))/t},values:[],correction:1},hft90d:{calc:function(e,t){var n=u*e/(t-1);return(1-1.942604*f(n)+1.340318*f(2*n)-.440811*f(3*n)+.043097*f(4*n))/t},values:[],correction:1},hft116d:{calc:function(e,t){var n=u*e/(t-1);return(1-1.9575375*f(n)+1.4780705*f(2*n)-.6367431*f(3*n)+.1228389*f(4*n)-.0066288*f(5*n))/t},values:[],correction:1},hft144d:{calc:function(e,t){var n=u*e/(t-1);return(1-1.96760033*f(n)+1.57983607*f(2*n)-.81123644*f(3*n)+.22583558*f(4*n)-.02773848*f(5*n)+9036e-7*f(6*n))/t},values:[],correction:1},hft196d:{calc:function(e,t){var n=u*e/(t-1);return(1-1.97441842*f(n)+1.65409888*f(2*n)-.95788186*f(3*n)+.3367342*f(4*n)-.06364621*f(5*n)+.00521942*f(6*n)-10599e-8*f(7*n))/t},values:[],correction:1},hft223d:{calc:function(e,t){var n=u*e/(t-1);return(1-1.98298997309*f(n)+1.75556083063*f(2*n)-1.19037717712*f(3*n)+.56155440797*f(4*n)-.17296769663*f(5*n)+.03233247087*f(6*n)-.00324954578*f(7*n)+.0001380104*f(8*n)-132725e-11*f(9*n))/t},values:[],correction:1},hft248d:{calc:function(e,t){var n=u*e/(t-1);return(1-1.985844164102*f(n)+1.791176438506*f(2*n)-1.282075284005*f(3*n)+.667777530266*f(4*n)-.240160796576*f(5*n)+.056656381764*f(6*n)-.008134974479*f(7*n)+.00062454465*f(8*n)-19808998e-12*f(9*n)+1.32974e-7*f(10*n))/t},values:[],correction:1}},y=function(e){return m[e.name].values.length!==e.N?(0===e.n&&(m[e.name].values.length=0),m[e.name].values[e.n]=m[e.name].correction*m[e.name].calc(e.n,e.N,e.a),m[e.name].values[e.n]):m[e.name].values};return{forward:function(e,n){var r,i,o,a,s,u,c,l,f,h,d,p;o=t.buffer.length;var m={name:n,N:o,a:.5,n:0},g=y(m);if("number"==typeof g)for(r=0;r<o;++r)m.n=r,t.buffer[r]=e[r]*y(m);else for(r=0;r<o;++r)t.buffer[r]=e[r]*g[r];for(r=o;r--;)t.re[r]=t.buffer[t.twiddle[r]],t.im[r]=0;for(a=1;a<o;a=s)for(u=0,s=a+a,c=o/s,i=0;i<a;i++){for(l=t.cosTable[u],f=t.sinTable[u],r=i;r<o;r+=s)h=r+a,d=f*t.im[h]+l*t.re[h],p=l*t.im[h]-f*t.re[h],t.re[h]=t.re[r]-d,t.re[r]+=d,t.im[h]=t.im[r]-p,t.im[r]+=p;u+=c}return{re:t.re,im:t.im}},inverse:function(e,n){var r,i,o,a,s,u,c,l,f,h,d,p;for(o=e.length,r=o;r--;)i=t.twiddle[r],t.reI[r]=e[i],t.imI[r]=-n[i];for(a=1;a<o;a=s)for(u=0,s=a+a,c=o/s,i=0;i<a;i++){for(l=t.cosTable[u],f=t.sinTable[u],r=i;r<o;r+=s)h=r+a,d=f*t.imI[h]+l*t.reI[h],p=l*t.imI[h]-f*t.reI[h],t.reI[h]=t.reI[r]-d,t.reI[r]+=d,t.imI[h]=t.imI[r]-p,t.imI[r]+=p;u+=c}for(r=o;r--;)t.buffer[r]=t.reI[r]/o;return t.buffer},magnitude:function(e){for(var t=[],n=0;n<e.re.length;n++)t.push(Math.sqrt(e.re[n]*e.re[n]+e.im[n]*e.im[n]));return t},magToDb:function(e){for(var t=[],n=0;n<e.length;n++)t.push(20*Math.log(e[n])*Math.LOG10E);return t},phase:function(e){for(var t=[],n=0;n<e.re.length;n++)t.push(Math.atan2(e.im[n],e.re[n]));return t},windows:function(){var e=[];for(var t in m)e.push(t);return e}}};t.exports=r},{}],4:[function(e,t,n){"use strict";var r=function(){var e=function(e){var t=e.Fs,n=e.Fa,r=e.Fb,i=e.order||51,o=e.Att||100,a=function(e){for(var t=0,n=1,r=1;n>1e-6*r;)t+=2,n*=e*e/(t*t),r+=n;return r};i/2-Math.floor(i/2)==0&&i++;var s,u=(i-1)/2,c=[],l=0,f=0,h=[];for(c[0]=2*(r-n)/t,f=1;f<=u;f++)c[f]=(Math.sin(2*f*Math.PI*r/t)-Math.sin(2*f*Math.PI*n/t))/(f*Math.PI);for(l=o<21?0:o>50?.1102*(o-8.7):.5842*Math.pow(o-21,.4)+.07886*(o-21),s=a(l),f=0;f<=u;f++)h[u+f]=c[f]*a(l*Math.sqrt(1-f*f/(u*u)))/s;for(f=0;f<u;f++)h[f]=h[i-1-f];return h},t=function(e){var t=e.Fs,n=e.Fc,r=e.order,i=2*Math.PI*n/t,o=0,a=0,s=[];for(o=0;o<=r;o++)o-r/2==0?s[o]=i:(s[o]=Math.sin(i*(o-r/2))/(o-r/2),s[o]*=.54-.46*Math.cos(2*Math.PI*o/r)),a+=s[o];for(o=0;o<=r;o++)s[o]/=a;return s},n=function(e){var t;for(t=0;t<e.length;t++)e[t]=-e[t];return e[(e.length-1)/2]++,e},r=function(e){for(var r=t({order:e.order,Fs:e.Fs,Fc:e.F2}),i=n(t({order:e.order,Fs:e.Fs,Fc:e.F1})),o=[],a=0;a<r.length;a++)o.push(r[a]+i[a]);return o};return{lowpass:function(e){return t(e)},highpass:function(e){return n(t(e))},bandstop:function(e){return r(e)},bandpass:function(e){return n(r(e))},kbFilter:function(t){return e(t)},available:function(){return["lowpass","highpass","bandstop","bandpass","kbFilter"]}}};t.exports=r},{}],5:[function(e,t,n){"use strict";var r=e("./utils"),i=r.runMultiFilter,o=r.runMultiFilterReverse,a=r.complex,s=r.evaluatePhase,u=function(e){var t=e,n=[],r=0;for(r=0;r<t.length;r++)n[r]={re:t[r],im:0};var u=function(e){var t,n=[];for(t=0;t<e;t++)n.push(0);return{buf:n,pointer:0}},c=u(t.length-1),l=function(e,n){n.buf[n.pointer]=e;var i=0;for(r=0;r<n.buf.length;r++)i+=t[r]*n.buf[(n.pointer+r)%n.buf.length];return n.pointer=(n.pointer+1)%n.buf.length,i},f=function(e){var n=u(t.length-1);return i(e,n,l)},h=function(e){for(var r=e.Fs,i=e.Fr,o=-Math.PI*(i/r)*2,s={re:0,im:0},u=0;u<t.length-1;u++)s=a.add(s,a.mul(n[u],{re:Math.cos(o*u),im:Math.sin(o*u)}));var c=a.magnitude(s);return{magnitude:c,phase:a.phase(s),dBmagnitude:20*Math.log(c)*Math.LOG10E}};return{responsePoint:function(e){return h(e)},response:function(e){e=e||100;var t=[],n=0,r=2*e;for(n=0;n<e;n++)t[n]=h({Fs:r,Fr:n});return s(t),t},simulate:function(e){return f(e)},singleStep:function(e){return l(e,c)},multiStep:function(e,t){return i(e,c,l,t)},filtfilt:function(e,t){return o(i(e,c,l,t),c,l,!0)},reinit:function(){c=u(t.length-1)}}};t.exports=u},{"./utils":9}],6:[function(e,t,n){"use strict";var r=function(){var e=function(e,t){var n=e.Q,r=e.Fc,i=e.Fs,o={},a=2*Math.PI*r/i;return e.BW?o.alpha=Math.sin(a)*Math.sinh(Math.log(2)/2*e.BW*a/Math.sin(a)):o.alpha=Math.sin(a)/(2*n),o.cw=Math.cos(a),o.a0=1+o.alpha,t.a0=o.a0,t.a.push(-2*o.cw/o.a0),t.k=1,t.a.push((1-o.alpha)/o.a0),o},t=function(e){var t=e.Q,n=e.Fc,r=e.Fs,i={},o=2*Math.PI*n/r;return i.alpha=Math.sin(o)/(2*t),i.cw=Math.cos(o),i.A=Math.pow(10,e.gain/40),i},n=function(){var e={};return e.z=[0,0],e.a=[],e.b=[],e};return{fromPZ:function(e){var t=n();return t.a0=1,t.b.push(1),t.b.push(-e.z0.re-e.z1.re),t.b.push(e.z0.re*e.z1.re-e.z0.im*e.z1.im),t.a.push(-e.p0.re-e.p1.re),t.a.push(e.p0.re*e.p1.re-e.p0.im*e.p1.im),"lowpass"===e.type?t.k=(1+t.a[0]+t.a[1])/(1+t.b[1]+t.b[2]):t.k=(1-t.a[0]+t.a[1])/(1-t.b[1]+t.b[2]),t},lowpassMZ:function(e){var t=n();t.a0=1;var r=e.as,i=e.bs,o=2*Math.PI*e.Fc/e.Fs,a=-r/(2*i);return t.a.push(2*-Math.pow(Math.E,a*o)*Math.cos(-o*Math.sqrt(Math.abs(Math.pow(r,2)/(4*Math.pow(i,2))-1/i)))),t.a.push(Math.pow(Math.E,2*a*o)),e.preGain?(t.b.push(1),t.k=t.a0+t.a[0]+t.a[1]):(t.b.push(t.a0+t.a[0]+t.a[1]),t.k=1),t.b.push(0),t.b.push(0),t},lowpassBT:function(e){var t=n();return e.Q=1,t.wp=Math.tan(2*Math.PI*e.Fc/(2*e.Fs)),t.wp2=t.wp*t.wp,e.BW&&delete e.BW,t.k=1,t.a0=3*t.wp+3*t.wp2+1,t.b.push(3*t.wp2*e.Q/t.a0),t.b.push(2*t.b[0]),t.b.push(t.b[0]),t.a.push((6*t.wp2-2)/t.a0),t.a.push((3*t.wp2-3*t.wp+1)/t.a0),t},highpassBT:function(e){var t=n();return e.Q=1,t.wp=Math.tan(2*Math.PI*e.Fc/(2*e.Fs)),t.wp2=t.wp*t.wp,e.BW&&delete e.BW,t.k=1,t.a0=t.wp+t.wp2+3,t.b.push(3*e.Q/t.a0),t.b.push(2*t.b[0]),t.b.push(t.b[0]),t.a.push((2*t.wp2-6)/t.a0),t.a.push((t.wp2-t.wp+3)/t.a0),t},lowpass:function(t){var r=n();t.BW&&delete t.BW;var i=e(t,r);return t.preGain?(r.k=.5*(1-i.cw),r.b.push(1/i.a0)):(r.k=1,r.b.push((1-i.cw)/(2*i.a0))),r.b.push(2*r.b[0]),r.b.push(r.b[0]),r},highpass:function(t){var r=n();t.BW&&delete t.BW;var i=e(t,r);return t.preGain?(r.k=.5*(1+i.cw),r.b.push(1/i.a0)):(r.k=1,r.b.push((1+i.cw)/(2*i.a0))),r.b.push(-2*r.b[0]),r.b.push(r.b[0]),r},allpass:function(t){var r=n();t.BW&&delete t.BW;var i=e(t,r);return r.k=1,r.b.push((1-i.alpha)/i.a0),r.b.push(-2*i.cw/i.a0),r.b.push((1+i.alpha)/i.a0),r},bandpassQ:function(t){var r=n(),i=e(t,r);return r.k=1,r.b.push(i.alpha*t.Q/i.a0),r.b.push(0),r.b.push(-r.b[0]),r},bandpass:function(t){var r=n(),i=e(t,r);return r.k=1,r.b.push(i.alpha/i.a0),r.b.push(0),r.b.push(-r.b[0]),r},bandstop:function(t){var r=n(),i=e(t,r);return r.k=1,r.b.push(1/i.a0),r.b.push(-2*i.cw/i.a0),r.b.push(r.b[0]),r},peak:function(e){var r=n(),i=t(e);return r.k=1,r.a0=1+i.alpha/i.A,r.a.push(-2*i.cw/r.a0),r.a.push((1-i.alpha/i.A)/r.a0),r.b.push((1+i.alpha*i.A)/r.a0),r.b.push(-2*i.cw/r.a0),r.b.push((1-i.alpha*i.A)/r.a0),r},lowshelf:function(e){var r=n();e.BW&&delete e.BW;var i=t(e);r.k=1;var o=2*Math.sqrt(i.A)*i.alpha;return r.a0=i.A+1+(i.A-1)*i.cw+o,r.a.push(-2*(i.A-1+(i.A+1)*i.cw)/r.a0),r.a.push((i.A+1+(i.A-1)*i.cw-o)/r.a0),r.b.push(i.A*(i.A+1-(i.A-1)*i.cw+o)/r.a0),r.b.push(2*i.A*(i.A-1-(i.A+1)*i.cw)/r.a0),r.b.push(i.A*(i.A+1-(i.A-1)*i.cw-o)/r.a0),r},highshelf:function(e){var r=n();e.BW&&delete e.BW;var i=t(e);r.k=1;var o=2*Math.sqrt(i.A)*i.alpha;return r.a0=i.A+1-(i.A-1)*i.cw+o,r.a.push(2*(i.A-1-(i.A+1)*i.cw)/r.a0),r.a.push((i.A+1-(i.A-1)*i.cw-o)/r.a0),r.b.push(i.A*(i.A+1+(i.A-1)*i.cw+o)/r.a0),r.b.push(-2*i.A*(i.A-1+(i.A+1)*i.cw)/r.a0),r.b.push(i.A*(i.A+1+(i.A-1)*i.cw-o)/r.a0),r},aweighting:function(e){var t=n();t.k=1;var r=2*Math.PI*e.Fc/e.Fs,i=2*Math.tan(r/2),o=e.Q,a=Math.pow(i,2);return t.a0=4*o+a*o+2*i,t.a.push(2*a*o-8*o),t.a.push(4*o+a*o-2*i),t.b.push(a*o),t.b.push(2*a*o),t.b.push(a*o),t}}};t.exports=r},{}],7:[function(e,t,n){"use strict";var r=e("./utils"),i=r.complex,o=r.runMultiFilter,a=r.runMultiFilterReverse,s=r.evaluatePhase,u=function(e){for(var t=e,n={re:1,im:0},r=[],u=[],c=0;c<t.length;c++){r[c]={};var l=t[c];r[c].b0={re:l.b[0],im:0},r[c].b1={re:l.b[1],im:0},r[c].b2={re:l.b[2],im:0},r[c].a1={re:l.a[0],im:0},r[c].a2={re:l.a[1],im:0},r[c].k={re:l.k,im:0},r[c].z=[0,0],u[c]={},u[c].b1=l.b[1]/l.b[0],u[c].b2=l.b[2]/l.b[0],u[c].a1=l.a[0],u[c].a2=l.a[1]}var f=function(e,t){var n=t*e.k.re-e.a1.re*e.z[0]-e.a2.re*e.z[1],r=e.b0.re*n+e.b1.re*e.z[0]+e.b2.re*e.z[1];return e.z[1]=e.z[0],e.z[0]=n,r},h=function(e,t){var n=e,r=0;for(r=0;r<t.length;r++)n=f(t[r],n);return n},d=function(e,t){var r=e.Fs,o=e.Fr,a=-Math.PI*(o/r)*2,s={re:Math.cos(a),im:Math.sin(a)},u=i.mul(t.k,i.add(t.b0,i.mul(s,i.add(t.b1,i.mul(t.b2,s))))),c=i.add(n,i.mul(s,i.add(t.a1,i.mul(t.a2,s)))),l=i.div(u,c);return{magnitude:i.magnitude(l),phase:i.phase(l)}},p=function(e){var t=0,n={magnitude:1,phase:0};for(t=0;t<r.length;t++){var i=d(e,r[t]);n.magnitude*=i.magnitude,n.phase+=i.phase}return n.dBmagnitude=20*Math.log(n.magnitude)*Math.LOG10E,n},m=function(){for(var e=[],n=0;n<t.length;n++)e[n]={b0:{re:l.b[0],im:0},b1:{re:l.b[1],im:0},b2:{re:l.b[2],im:0},a1:{re:l.a[0],im:0},a2:{re:l.a[1],im:0},k:{re:l.k,im:0},z:[0,0]};return e},y=function(e){var t=m();return o(e,t,h)},g=function(e,t){var n={},r=[],i=0;for(i=0;i<t;i++)r.push(e(i));n.out=y(r);var o=!1,a=!1;for(i=0;i<t-1;i++)if(n.out[i]>n.out[i+1]&&!o&&(o=!0,n.max={sample:i,value:n.out[i]}),o&&!a&&n.out[i]<n.out[i+1]){a=!0,n.min={sample:i,value:n.out[i]};break}return n},v=function(e,t){var n=Math.pow(e/2,2)-t;return n<0?[{re:-e/2,im:Math.sqrt(Math.abs(n))},{re:-e/2,im:-Math.sqrt(Math.abs(n))}]:[{re:-e/2+Math.sqrt(n),im:0},{re:-e/2-Math.sqrt(n),im:0}]},b=function(){for(var e=[],t=0;t<u.length;t++)e[t]={},e[t].z=v(u[t].b1,u[t].b2),e[t].p=v(u[t].a1,u[t].a2);return e};return{singleStep:function(e){return h(e,r)},multiStep:function(e,t){return o(e,r,h,t)},filtfilt:function(e,t){return a(o(e,r,h,t),r,h,!0)},simulate:function(e){return y(e)},stepResponse:function(e){return g(function(){return 1},e)},impulseResponse:function(e){return g(function(e){return 0===e?1:0},e)},responsePoint:function(e){return p(e)},response:function(e){e=e||100;var t=[],n=0,r=2*e;for(n=0;n<e;n++)t[n]=p({Fs:r,Fr:n});return s(t),t},polesZeros:function(){return b()},reinit:function(){for(c=0;c<r.length;c++)r[c].z=[0,0]}}};t.exports=u},{"./utils":9}],8:[function(e,t,n){"use strict";var r=function(e){var t,n=e,r=[],i=function(e){for(t=0;t<e.steps;t++)r.push(n.singleStep((Math.random()-.5)*e.pp+e.offset))},o=function(e){var i=e.offset+e.pp,o=e.offset-e.pp;for(t=0;t<e.steps;t++)t%200<100?r.push(n.singleStep(i)):r.push(n.singleStep(o))},a=function(e){var i=e.offset+e.pp,o=e.offset-e.pp;for(t=0;t<e.steps;t++)t%100==0?r.push(n.singleStep(i)):r.push(n.singleStep(o))},s=function(e){var i=e.offset+e.pp,o=e.offset-e.pp,a=o,s=(i-o)/100;for(t=0;t<e.steps;t++)t%200<100?a+=s:a-=s,r.push(n.singleStep(a))};return{randomStability:function(e){for(n.reinit(),r.length=0,i(e),t=e.setup;t<r.length;t++)if(r[t]>e.maxStable||r[t]<e.minStable)return r[t];return!0},directedRandomStability:function(e){n.reinit(),r.length=0;var u;for(u=0;u<e.tests;u++){var c=Math.random();c<.25?i(e):c<.5?o(e):c<.75?a(e):s(e)}for(i(e),t=e.setup;t<r.length;t++)if(r[t]>e.maxStable||r[t]<e.minStable)return r[t];return!0},evaluateBehavior:function(){}}};t.exports=r},{}],9:[function(e,t,n){"use strict";n.evaluatePhase=function(e){var t=0,n=0,r=Math.PI,i=2*r,o=[];for(n=0;n<e.length;n++)o.push(e[n].phase);for(e[0].unwrappedPhase=e[0].phase,e[0].groupDelay=0,n=1;n<o.length;n++){var a=o[n]-o[n-1];if(a>r)for(t=n;t<o.length;t++)o[t]-=i;else if(a<-r)for(t=n;t<o.length;t++)o[t]+=i;o[n]<0?e[n].unwrappedPhase=-o[n]:e[n].unwrappedPhase=o[n],e[n].phaseDelay=e[n].unwrappedPhase/(n/e.length),e[n].groupDelay=(e[n].unwrappedPhase-e[n-1].unwrappedPhase)/(r/e.length),e[n].groupDelay<0&&(e[n].groupDelay=-e[n].groupDelay)}0!==e[0].magnitude?(e[0].phaseDelay=e[1].phaseDelay,e[0].groupDelay=e[1].groupDelay):(e[0].phaseDelay=e[2].phaseDelay,e[0].groupDelay=e[2].groupDelay,e[1].phaseDelay=e[2].phaseDelay,e[1].groupDelay=e[2].groupDelay)},n.runMultiFilter=function(e,t,n,r){var i=[];r&&(i=e);var o;for(o=0;o<e.length;o++)i[o]=n(e[o],t);return i},n.runMultiFilterReverse=function(e,t,n,r){var i=[];r&&(i=e);var o;for(o=e.length-1;o>=0;o--)i[o]=n(e[o],t);return i};var r=function(e,t){for(var n=!0;n;){var r=e,i=t;if(n=!1,i||(i=1),r!==Math.floor(r)||i!==Math.floor(i))return 1;if(0===r||1===r)return i;e=r-1,t=i*r,n=!0}};n.besselFactors=function(e){for(var t=[],n=0;n<e+1;n++){var i=r(2*e-n),o=Math.pow(2,e-n)*r(n)*r(e-n);t.unshift(Math.floor(i/o))}return t};var i=function(e,t){for(var n=0,r=0;r<t;r++){var i=1/Math.pow(2,r+1);e>i&&(e-=i,n+=i)}return n},o=function(e,t){return e&Math.pow(2,t)},a=function(e,t,n){var r=Math.abs(e),a=e-r;return{number:o(r,t).toString(),fraction:i(a,n).toString(),numberBits:t,fractionBits:n}};n.fixedPoint={convert:function(e,t,n){return a(e,t,n)},add:function(e,t){},sub:function(e,t){},mul:function(e,t){},div:function(e,t){}},n.complex={div:function(e,t){var n=e.re,r=e.im,i=t.re,o=t.im,a=i*i+o*o;return{re:(n*i+r*o)/a,im:(r*i-n*o)/a}},mul:function(e,t){var n=e.re,r=e.im,i=t.re,o=t.im;return{re:n*i-r*o,im:(n+r)*(i+o)-n*i-r*o}},add:function(e,t){return{re:e.re+t.re,im:e.im+t.im}},sub:function(e,t){return{re:e.re-t.re,im:e.im-t.im}},phase:function(e){return Math.atan2(e.im,e.re)},magnitude:function(e){return Math.sqrt(e.re*e.re+e.im*e.im)}}},{}]},{},[1])(1)})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(54),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=Math.pow(2,16)-1,c=["it","mod","s3m","xm"],l=function(e){function t(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a));return s.lib=o,s.xmpCtx=o._xmp_create_context(),s.xmp_frame_infoPtr=o._malloc(2048),s.fileExtensions=c,s.initialBPM=125,s.tempoScale=1,s._positionMs=0,s._durationMs=1e3,s.buffer=o.allocate(16*s.bufferSize,"i16",o.ALLOC_NORMAL),s.setAudioProcess(s.xmpAudioProcess),s}return o(t,e),s(t,[{key:"xmpAudioProcess",value:function(e){var t=void 0,n=void 0,r=void 0,i=this.xmp_frame_infoPtr,o=[];for(r=0;r<e.outputBuffer.numberOfChannels;r++)o[r]=e.outputBuffer.getChannelData(r);if(this.paused)for(r=0;r<o.length;r++)o[r].fill(0);else{if(-1===(t=this.lib._xmp_play_buffer(this.xmpCtx,this.buffer,4*this.bufferSize,1)))this.stop();else if(0!==t)throw this.suspend(),console.error("xmp_play_buffer failed. error code: %d",t),Error("Unable to play this file!");this.lib._xmp_get_frame_info(this.xmpCtx,i);var a=this.lib.getValue(i+24,"i32");for(this._positionMs=this.lib.getValue(i+28,"i32"),this._maybeInjectTempo(a),r=0;r<o.length;r++)for(n=0;n<this.bufferSize;n++)o[r][n]=this.lib.getValue(this.buffer+2*n*2+2*r,"i16")/u}}},{key:"_parseMetadata",value:function(){var e=this.lib,t={},n=e._malloc(2048);e._xmp_get_module_info(this.xmpCtx,n);var r=e.getValue(n+20,"*");t.title=e.UTF8ToString(r,256),t.system=e.UTF8ToString(r+64,256),t.comment=e.UTF8ToString(e.getValue(n+24,"*"),512);var i=this.xmp_frame_infoPtr;return e._xmp_get_frame_info(this.xmpCtx,i),this._durationMs=e.getValue(i+32,"i32"),t.patterns=e.getValue(r+128+0,"i32"),t.tracks=e.getValue(r+128+4,"i32"),t.numChannels=e.getValue(r+128+8,"i32"),t.numInstruments=e.getValue(r+128+12,"i32"),t.numSamples=e.getValue(r+128+16,"i32"),t.initialSpeed=e.getValue(r+128+20,"i32"),t.initialBPM=e.getValue(r+128+24,"i32"),t.moduleLength=e.getValue(r+128+28,"i32"),t.restartPosition=e.getValue(r+128+32,"i32"),t.title||(t.title=this.filepathMeta.title),this.initialBPM=t.initialBPM,t}},{key:"restart",value:function(){this.lib._xmp_restart_module(this.xmpCtx),this.resume()}},{key:"loadData",value:function(e,t){var n=void 0;if(this.filepathMeta=a.a.metadataFromFilepath(t),0!==(n=this.lib.ccall("xmp_load_module_from_memory","number",["number","array","number"],[this.xmpCtx,e,e.length])))throw console.error("xmp_load_module_from_memory failed. error code: %d",n),Error("Unable to load this file!");n=this.lib._xmp_start_player(this.xmpCtx,this.audioCtx.sampleRate,0),0!==n&&console.error("xmp_start_player failed. error code: %d",n),this.metadata=this._parseMetadata(t),this.connect(),this.resume(),this.onPlayerStateUpdate(!1)}},{key:"setVoices",value:function(e){var t=this;e.forEach(function(e,n){t.lib._xmp_channel_mute(t.xmpCtx,n,e?0:1)})}},{key:"setTempo",value:function(e){if(!this.metadata.initialSpeed)return void console.error("Unable to set speed for this file format.");this.tempoScale=e}},{key:"_maybeInjectTempo",value:function(e){var t=this.lib,n=Math.floor(Math.max(Math.min(this.metadata.initialBPM*this.tempoScale,255),20));if(n!==e){console.log("Injecting %d BPM into libxmp. (Initial: %d)",n,this.metadata.initialBPM);for(var r=t._malloc(8),i=0;i<8;i++)t.setValue(r+i,0,"i8");t.setValue(r+3,135,"i8"),t.setValue(r+4,n,"i32"),t._xmp_inject_event(this.xmpCtx,0,r)}}},{key:"getVoiceName",value:function(e){return"Ch "+(e+1)}},{key:"getNumVoices",value:function(){return this.metadata.numChannels}},{key:"getNumSubtunes",value:function(){return 0}},{key:"getPositionMs",value:function(){return this._positionMs}},{key:"getDurationMs",value:function(){return this._durationMs}},{key:"getMetadata",value:function(){return this.metadata}},{key:"isPlaying",value:function(){var e=this.lib._xmp_get_player(this.xmpCtx,8);return!this.isPaused()&&2===e}},{key:"seekMs",value:function(e){this.lib._xmp_seek_time(this.xmpCtx,e)}},{key:"stop",value:function(){this.suspend(),this.lib._xmp_stop_module(this.xmpCtx),console.debug("XMPPlayer.stop()"),this.onPlayerStateUpdate(!0)}}]),t}(a.a);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(54),s=n(205),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=null,l="/soundfonts",f=[{label:"Small Soundfonts",items:[{label:"GMGSx Plus (6.2 MB)",value:"gmgsx-plus.sf2"},{label:"Roland SC-55 (3.3 MB)",value:"Roland SC-55.sf2"},{label:"Roland SCC1 (3.3 MB)",value:"Scc1t2.sf2"},{label:"Yamaha DB50XG (3.9 MB)",value:"Yamaha DB50XG.sf2"},{label:"Tim GM (6 MB)",value:"TimGM6mb.sf2"},{label:"2MBGMGS (2.1 MB)",value:"2MBGMGS.SF2"},{label:"5MBGMGS (4.9 MB)",value:"5MBGMGS.SF2"},{label:"8MBGMGS (8.2 MB)",value:"8MBGMGS.SF2"}]},{label:"Large Soundfonts",items:[{label:"Masquerade 55 v006 (18.4 MB)",value:"masquerade55v006.sf2"},{label:"GeneralUser GS v1.471 (31.3 MB)",value:"generaluser.sf2"},{label:"Chorium Revision A (28.9 MB)",value:"choriumreva.sf2"},{label:"Unison (29.3 MB)",value:"Unison.SF2"},{label:"Musica Theoria 2 (30.5 MB)",value:"mustheory2.sf2"},{label:"Personal Copy Lite (31.4 MB)",value:"PCLite.sf2"},{label:"NTONYX 32Mb GM Stereo (32.5 MB)",value:"32MbGMStereo.sf2"},{label:"Weeds GM 3 (54.9 MB)",value:"weedsgm3.sf2"}]},{label:"Novelty Soundfonts",items:[{label:"PC Beep (31 KB)",value:"pcbeep.sf2"},{label:"Nokia 6230i (227 KB)",value:"Nokia_6230i_RM-72_.sf2"},{label:"Kirby's Dream Land (271 KB)",value:"Kirby's_Dream_Land_3.sf2"},{label:"Vintage Waves v2 (315 KB)",value:"Vintage Dreams Waves v2.sf2"},{label:"Setzer's SPC Soundfont (1.2 MB)",value:"Setzer's_SPC_Soundfont.sf2"},{label:"SNES GM (1.9 MB)",value:"Super_Nintendo_Unofficial_update.sf2"},{label:"Nokia 30 (2.2 MB)",value:"Nokia_30.sf2"},{label:"LG Wink/Motorola ROKR (3.3 MB)",value:"LG_Wink_Style_T310_Soundfont.sf2"},{label:"Kururin Paradise GM (7.6 MB)",value:"Kururin_Paradise_GM_Soundfont.sf2"},{label:"Diddy Kong Racing DS (13.7 MB)",value:"Diddy_Kong_Racing_DS_Soundfont.sf2"},{label:"Regression FM v1.99g (14.4 MB)",value:"R_FM_v1.99g-beta.sf2"},{label:"Ultimate Megadrive (63.2 MB)",value:"The Ultimate Megadrive Soundfont.sf2"}]},{label:"SF3 Compressed Soundfonts",items:[{label:"Fluid R3 Mono SF3 (14.6 MB)",value:"FluidR3Mono_GM.sf3"},{label:"MuseScore SF3 (37.7 MB)",value:"MuseScore_General.sf3"}]}],h=["mid","midi"],d=function(e){function t(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a));s.paramDefs=[{id:"synthengine",label:"Synth Engine",type:"enum",options:[{label:"MIDI Synthesis Engine",items:[{label:"SoundFont (libFluidLite)",value:0},{label:"Adlib/OPL3 (libADLMIDI)",value:1}]}],defaultValue:0},{id:"autoengine",label:"Auto Synth Engine Switching",hint:'Switch synth engine based on filenames. Files containing "FM" will play through Adlib/OPL3 synth.',type:"toggle",defaultValue:!0},{id:"soundfont",label:"Soundfont",type:"enum",options:f,defaultValue:f[0].items[0].value,dependsOn:{param:"synthengine",value:0}},{id:"reverb",label:"Reverb",type:"number",min:0,max:1,step:.01,defaultValue:.33,dependsOn:{param:"synthengine",value:0}},{id:"opl3bank",label:"OPL3 Bank",type:"enum",options:[],defaultValue:0,dependsOn:{param:"synthengine",value:1}}],s.setParameter=s.setParameter.bind(s),s.getParameter=s.getParameter.bind(s),s.getParamDefs=s.getParamDefs.bind(s),c=o,c._tp_init(e.sampleRate),c.FS.mkdir(l),c.FS.mount(c.FS.filesystems.IDBFS,{},l),c.FS.syncfs(!0,function(e){e&&console.log("Error populating FS from indexeddb.",e),s.paramDefs.forEach(function(e){return s.setParameter(e.id,e.defaultValue)})}),s.fileExtensions=h,s.activeChannels=[],s.params={},s.buffer=c.allocate(8*s.bufferSize,"i32",c.ALLOC_NORMAL),s.filepathMeta={};for(var u=c._adl_getBanksCount(),d=c._adl_getBankNames(),p=[],m=0;m<u;m++)p.push({label:c.UTF8ToString(c.getValue(d+4*m,"*")),value:m});return s.paramDefs.find(function(e){return"opl3bank"===e.id}).options=[{label:"OPL3 Bank",items:p}],s.setAudioProcess(s.midiAudioProcess),s}return o(t,e),u(t,[{key:"midiAudioProcess",value:function(e){var t=void 0,n=void 0,r=[];for(n=0;n<e.outputBuffer.numberOfChannels;n++)r[n]=e.outputBuffer.getChannelData(n);if(this.paused)for(n=0;n<r.length;n++)r[n].fill(0);else if(c._tp_write_audio(this.buffer,this.bufferSize))for(n=0;n<r.length;n++)for(t=0;t<this.bufferSize;t++)r[n][t]=c.getValue(this.buffer+4*t*2+4*n,"float");else this.stop()}},{key:"metadataFromFilepath",value:function(e){var t=e.split("/"),n=t.length,r={};return t.length>=3?r.formatted={title:t[1]+" - "+t[n-1],subtitle:t[0]}:2===t.length?r.formatted={title:t[1],subtitle:t[0]}:r.formatted={title:t[0],subtitle:"MIDI"},r}},{key:"loadData",value:function(e,t){this.activeChannels=[],this.filepathMeta=this.metadataFromFilepath(t),c.ccall("tp_open","number",["array","number"],[e,e.byteLength]);for(var n=0;n<16;n++)c._tp_get_channel_in_use(n)&&this.activeChannels.push(n);if(this.getParameter("autoengine")){t.match(/FM\b/i)?this.setParameter("synthengine",1):this.setParameter("synthengine",0);var r=t.toLowerCase(),i=this.paramDefs.find(function(e){return"opl3bank"===e.id});if(i){var o=i.options[0].items,a=function(e){return o.findIndex(function(t){return t.label.indexOf(e)>-1})},s=0;r.indexOf("[rick]")>-1?s=a("Descent: Rick"):r.indexOf("[ham]")>-1?s=a("Descent: Ham"):r.indexOf("[int]")>-1?s=a("Descent: Int"):r.indexOf("magic carpet")>-1?s=a("Magic Carpet"):r.indexOf("wacky wheels")>-1?s=a("Apogee IMF"):r.indexOf("warcraft 2")>-1?s=a("Warcraft 2"):r.indexOf("warcraft")>-1?s=a("Warcraft"):r.indexOf("system shock")>-1&&(s=a("System Shock")),s>-1&&this.setParameter("opl3bank",s)}}this.connect(),this.resume(),this.onPlayerStateUpdate(!1)}},{key:"isPlaying",value:function(){return c&&!this.paused}},{key:"restart",value:function(){c._tp_seek(0),this.resume()}},{key:"stop",value:function(){this.suspend(),c._tp_stop(),console.debug("MIDIPlayer.stop()"),this.onPlayerStateUpdate(!0)}},{key:"getDurationMs",value:function(){return c._tp_get_duration_ms()}},{key:"getPositionMs",value:function(){return c._tp_get_position_ms()}},{key:"seekMs",value:function(e){c._tp_seek(e)}},{key:"setTempo",value:function(e){c._tp_set_speed(e)}},{key:"getNumVoices",value:function(){return this.activeChannels.length}},{key:"getVoiceName",value:function(e){var t=this.activeChannels[e];return 9===t?"Drums":s.a[c._tp_get_channel_program(t)]}},{key:"setVoices",value:function(e){var t=this;e.forEach(function(e,n){c._tp_set_channel_mute(t.activeChannels[n],!e)})}},{key:"getMetadata",value:function(){return this.filepathMeta}},{key:"getParameter",value:function(e){return this.params[e]}},{key:"getParamDefs",value:function(){return this.paramDefs}},{key:"setParameter",value:function(e,t){var n=this;switch(e){case"synthengine":t=parseInt(t,10),c._tp_set_synth_engine(t);break;case"soundfont":var r="/chip-player-js/soundfonts/"+t;this._ensureFile(l+"/"+t,r).then(function(e){return n._loadSoundfont(e)});break;case"reverb":t=parseFloat(t),c._tp_set_reverb(t);break;case"opl3bank":t=parseInt(t,10),c._tp_set_bank(t);break;case"autoengine":t=!!t;break;default:console.warn('MIDIPlayer has no parameter with id "%s".',e)}this.params[e]=t}},{key:"_ensureFile",value:function(e,t){return c.FS.analyzePath(e).exists?(console.log(e+" exists in Emscripten file system."),Promise.resolve(e)):(console.log("Downloading "+e+"..."),fetch(t).then(function(e){return e.arrayBuffer()}).then(function(t){var n=new Uint8Array(t);return console.log("Writing "+e+" to Emscripten file system..."),c.FS.writeFile(e,n),c.FS.syncfs(!1,function(t){t?console.log("Error synchronizing to indexeddb.",t):console.log("Synchronized "+e+" to indexeddb.")}),e}))}},{key:"_loadSoundfont",value:function(e){console.log("Loading soundfont..."),this.muteAudioDuringCall(this.audioNode,function(){-1!==c.ccall("tp_load_soundfont","number",["string"],[e])&&console.log("Loaded soundfont.")})}}]),t}(a.a);t.a=d},function(e,t,n){"use strict";t.a=["Piano         ","Bright Piano  ","Electric Piano","Honky-tonk    ","Rhodes Piano  ","FM Piano      ","Harpsichord   ","Clavinet      ","Celesta       ","Glockenspiel  ","Music Box     ","Vibraphone    ","Marimba       ","Xylophone     ","Tubular Bells ","Dulcimer      ","Drawbar Organ ","Perc Organ    ","Rock Organ    ","Church Organ  ","Reed Organ    ","Accordion     ","Harmonica     ","Accordion     ","Steel Guitar  ","Nylon Guitar  ","Jazz Guitar   ","Clean Guitar  ","Muted Guitar  ","Overdrive Guit","Distort Guitar","Guit Harmonics","Acoustic Bass ","Finger Bass   ","Picked Bass   ","Fretless Bass ","Slap Bass 1   ","Slap Bass 2   ","Synth Bass 1  ","Synth Bass 2  ","Violin        ","Viola         ","Cello         ","Contrabass    ","Trem Strings  ","Pizz Strings  ","Harp          ","Timpani       ","String Ens 1  ","String Ens 2  ","Syn Strings 1 ","Syn Strings 2 ","Choir Aahs    ","Voice Oohs    ","Synth Voice   ","Orchestra Hit ","Trumpet       ","Trombone      ","Tuba          ","Muted Trumpet ","French Horn   ","Brass Section ","SynthBrass 1  ","SynthBrass 2  ","Soprano Sax   ","Alto Sax      ","Tenor Sax     ","Baritone Sax  ","Oboe          ","English Horn  ","Bassoon       ","Clarinet      ","Piccolo       ","Flute         ","Recorder      ","Pan Flute     ","Blown Bottle  ","Shakuhachi    ","Whistle       ","Ocarina       ","Lead: Square  ","Lead: Sawtooth","Lead: Calliope","Lead: Chiff   ","Lead: Charang ","Lead: Voice   ","Lead: Fifths  ","Lead: Bass    ","Pad: New Age  ","Pad: Warm     ","Pad: Polysynth","Pad: Choir    ","Pad: Bowed    ","Pad: Metallic ","Pad: Halo     ","Pad: Sweep    ","FX: Rain      ","FX: Soundtrack","FX: Crystal   ","FX: Atmosphere","FX: Brightness","FX: Goblins   ","FX: Echoes    ","FX: Sci-fi    ","Sitar         ","Banjo         ","Shamisen      ","Koto          ","Kalimba       ","Bag pipe      ","Fiddle        ","Shanai        ","Tinkle Bell   ","Agogo         ","Steel Drums   ","Woodblock     ","Taiko Drum    ","Melodic Tom   ","Synth Drum    ","Reverse Cymbal","Fret Noise    ","Breath Noise  ","Seashore      ","Bird Tweet    ","Telephone Ring","Helicopter    ","Applause      ","Gunshot       "]},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),u=n.n(s),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleVoiceToggle=n.handleVoiceToggle.bind(n),n}return a(t,e),c(t,[{key:"handleVoiceToggle",value:function(e,t){var n=this.props.voices;e=e.nativeEvent||{},e.altKey||e.shiftKey||e.metaKey?n.every(function(e,n){return n===t===e})?n.fill(!0):(n.fill(!1),n[t]=!0):n[t]=!n[t],this.props.handleSetVoices(n)}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"PlayerParams"},"Speed:"," ",u.a.createElement("input",{disabled:this.props.ejected,type:"range",value:this.props.tempo,min:"0.3",max:"2.0",step:"0.05",onInput:this.props.handleTempoChange,onChange:this.props.handleTempoChange})," ",this.props.tempo.toFixed(2),u.a.createElement("br",null),"Voices:"," ",u.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",marginRight:"-8px"}},[].concat(r(Array(this.props.numVoices))).map(function(t,n){return u.a.createElement("label",{className:"App-voice-label inline",key:n},u.a.createElement("input",{title:"Alt+click to solo. Alt+click again to unmute all.",type:"checkbox",onChange:function(t){return e.handleVoiceToggle(t,n)},checked:e.props.voices[n]}),e.props.voiceNames[n])})),this.props.paramDefs.map(function(t){var n=e.props.getParameter(t.id),r=t.dependsOn;if(r&&e.props.getParameter(r.param)!==r.value)return null;switch(t.type){case"enum":return u.a.createElement("label",{key:t.id,title:t.hint,style:f.paramLabel},t.label,":"," ",u.a.createElement("select",{onChange:function(n){e.props.setParameter(t.id,n.target.value),e.forceUpdate()},value:n},t.options.map(function(e){return u.a.createElement("optgroup",{key:e.label,label:e.label},e.items.map(function(e){return u.a.createElement("option",{key:e.value,value:e.value},e.label)}))})));case"number":return u.a.createElement("label",{key:t.id,title:t.hint,style:f.paramLabel},t.label,":"," ",u.a.createElement("input",{type:"range",title:t.hint,min:t.min,max:t.max,step:t.step,onChange:function(n){e.props.setParameter(t.id,n.target.value),e.forceUpdate()},value:n})," ",void 0!==n&&n.toFixed(2));case"toggle":return u.a.createElement("label",{key:t.id,title:t.hint,style:f.paramLabel},u.a.createElement("input",{type:"checkbox",onChange:function(n){e.props.setParameter(t.id,n.target.checked),e.forceUpdate()},checked:n}),t.label);default:return null}}))}}]),t}(s.PureComponent);t.a=l;var f={paramLabel:{display:"block"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return fetch(m.a+"/total").then(function(e){return e.json()})}var s=n(0),u=n.n(s),c=n(61),l=n.n(c),f=n(35),h=n(208),d=n.n(h),p=n(55),m=n(34),y=n(56),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.doSearch=n.doSearch.bind(n),n.debouncedDoSearch=d()(n.doSearch,150),n.onChange=n.onChange.bind(n),n.onSearchInputChange=n.onSearchInputChange.bind(n),n.handleSearchResults=n.handleSearchResults.bind(n),n.handleClear=n.handleClear.bind(n),n.renderResultItem=n.renderResultItem.bind(n),n.textInput=u.a.createRef(),n.state={searching:!1,results:{},resultsCount:0,totalSongs:0,query:null},a().then(function(e){return n.setState({totalSongs:e.total})}).catch(function(e){return n.setState({totalSongs:99999})}),n}return o(t,e),g(t,[{key:"componentDidMount",value:function(){var e=l.a.parse(window.location.search.substr(1)),t=e.q;t&&(this.setState({query:t}),this.doSearch(t))}},{key:"onChange",value:function(e){this.onSearchInputChange(e.target.value)}},{key:"onSearchInputChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setState({query:e});var n={q:e?e.trim():void 0},r="?"+l.a.stringify(n).replace(/%20/g,"+");window.history.replaceState(null,"",r),e.length?t?this.doSearch(e):this.debouncedDoSearch(e):this.showEmptyState()}},{key:"doSearch",value:function(e){var t=this,n=encodeURIComponent(e),r=m.a+"/search?query="+n+"&limit=100";this.searchRequest&&this.searchRequest.abort(),this.searchRequest=Object(p.a)(new XMLHttpRequest),this.searchRequest.open("GET",r),this.searchRequest.send().then(function(e){return t.searchRequest=null,JSON.parse(e.responseText)}).then(function(e){return t.handleSearchResults(e)})}},{key:"handleSearchResults",value:function(e){var t=e.items,n=e.total,r=t.map(function(e){return e.file}).map(function(e){return e.replace("%","%25").replace("#","%23")}).sort();this.setState({searching:!0,resultsCount:n,results:r,resultsHeadings:this.extractHeadings(r)})}},{key:"handleClear",value:function(){window.history.replaceState(null,"","./"),this.setState({query:null,searching:!1,resultsCount:0,results:{}}),this.textInput.current.focus()}},{key:"showEmptyState",value:function(){this.setState({searching:!1,results:{}})}},{key:"extractHeadings",value:function(e){var t={},n=null;return e.forEach(function(e,r){var i=e.substring(0,e.lastIndexOf("/")+1);i!==n&&(n=i,t[r]=n)}),t}},{key:"renderResultItem",value:function(e,t){var n=null;if(this.state.resultsHeadings[t]){var r=this.state.resultsHeadings[t];n=u.a.createElement(y.a,{dim:!0,to:"/browse/"+r},decodeURI(r))}var i=m.b+e,o=decodeURI(e.substring(e.lastIndexOf("/")+1)),a=this.props.currContext===this.state.results&&this.props.currIdx===t;return u.a.createElement(s.Fragment,{key:t},n,u.a.createElement("div",{className:a?"Song-now-playing":""},this.props.favorites&&u.a.createElement(f.a,{favorites:this.props.favorites,toggleFavorite:this.props.toggleFavorite,href:i}),u.a.createElement("a",{onClick:this.props.onSongClick(i,this.state.results,t),href:i},o)))}},{key:"render",value:function(){var e=this.state.totalSongs?this.state.totalSongs+" tunes":"Loading catalog...";return u.a.createElement(s.Fragment,null,u.a.createElement("div",null,u.a.createElement("label",{className:"Search-label"},"Search:"," ",u.a.createElement("input",{type:"text",placeholder:e,spellCheck:"false",autoComplete:"off",autoCorrect:"false",autoCapitalize:"none",ref:this.textInput,style:b.textInput,value:this.state.totalSongs?this.state.query||"":"",onChange:this.onChange}),this.state.searching&&u.a.createElement(s.Fragment,null,u.a.createElement("button",{className:"Search-button-clear",onClick:this.handleClear})," ",u.a.createElement("span",{style:b.resultsLabel},this.state.resultsCount," result",1!==this.state.resultsCount&&"s")))),this.state.searching?u.a.createElement("div",{style:b.searchResults},this.state.results.map(this.renderResultItem)):this.props.children)}}]),t}(s.PureComponent);t.a=v;var b={searchResults:{marginTop:"var(--charH)"},resultsLabel:{whiteSpace:"nowrap"},textInput:{width:"calc(var(--charW) * 20)"}}},function(e,t,n){function r(e,t,n){function r(t){var n=v,r=b;return v=b=void 0,S=t,E=e.apply(r,n)}function l(e){return S=e,T=setTimeout(d,t),I?r(e):E}function f(e){var n=e-_,r=e-S,i=t-n;return k?c(i,w-r):i}function h(e){var n=e-_,r=e-S;return void 0===_||n>=t||n<0||k&&r>=w}function d(){var e=o();if(h(e))return p(e);T=setTimeout(d,f(e))}function p(e){return T=void 0,N&&v?r(e):(v=b=void 0,E)}function m(){void 0!==T&&clearTimeout(T),S=0,v=_=b=T=void 0}function y(){return void 0===T?E:p(o())}function g(){var e=o(),n=h(e);if(v=arguments,b=this,_=e,n){if(void 0===T)return l(_);if(k)return T=setTimeout(d,t),r(_)}return void 0===T&&(T=setTimeout(d,t)),E}var v,b,w,E,T,_,S=0,I=!1,k=!1,N=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(n)&&(I=!!n.leading,k="maxWait"in n,w=k?u(a(n.maxWait)||0,t):w,N="trailing"in n?!!n.trailing:N),g.cancel=m,g.flush=y,g}var i=n(81),o=n(209),a=n(211),s="Expected a function",u=Math.max,c=Math.min;e.exports=r},function(e,t,n){var r=n(82),i=function(){return r.Date.now()};e.exports=i},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(4))},function(e,t,n){function r(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||l.test(e)?f(e.slice(2),n?2:8):u.test(e)?a:+e}var i=n(81),o=n(212),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&i(e)==a}var i=n(213),o=n(216),a="[object Symbol]";e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?u:s:c&&c in Object(e)?o(e):a(e)}var i=n(83),o=n(214),a=n(215),s="[object Null]",u="[object Undefined]",c=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[u]=n:delete e[u]),i}var i=n(83),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAATCAMAAAC9bj0JAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDgzQ0Q3ODE2NEUwMTFFOUIxMjI5QTFCQkU0MjcwNUEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDgzQ0Q3ODA2NEUwMTFFOUIxMjI5QTFCQkU0MjcwNUEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjYxOTNDRDg0RTRBMTI4MDE3N0E5RTJDMUY3RjMyNDYwIiBzdFJlZjpkb2N1bWVudElEPSI2MTkzQ0Q4NEU0QTEyODAxNzdBOUUyQzFGN0YzMjQ2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnW/qMQAAAAGUExURf//AP///4t5850AAAACdFJOU/8A5bcwSgAAADFJREFUeNpiYMQBGPBJMAABNgkGrDoZYEIMMICQQOHD9TJgM2RoSmAAwqFLJQmAAAMAcCwBjy0KuLoAAAAASUVORK5CYII="},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(219),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getSongPos=n.getSongPos.bind(n),n.getTimeLabel=n.getTimeLabel.bind(n),n.handlePositionDrag=n.handlePositionDrag.bind(n),n.handlePositionDrop=n.handlePositionDrop.bind(n),n.state={draggedSongPositionMs:-1,currentSongPositionMs:0},n.timer=null,n}return o(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval(function(){var t=e.props,n=t.getCurrentPositionMs,r=t.currentSongDurationMs;e.setState({currentSongPositionMs:Math.min(n(),r)})},46)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"getSongPos",value:function(){return this.state.currentSongPositionMs/this.props.currentSongDurationMs}},{key:"getTimeLabel",value:function(){var e=this.state.draggedSongPositionMs>=0?this.state.draggedSongPositionMs:this.state.currentSongPositionMs;return this.getTime(e)}},{key:"getTime",value:function(e){var t=Math.floor(e/6e4),n=(Math.floor(e%6e4/100)/10).toFixed(1);return t+":"+function(e){return e<10?"0"+e:e}(n)}},{key:"handlePositionDrag",value:function(e){var t=e.target?e.target.value:e;this.setState({draggedSongPositionMs:t*this.props.currentSongDurationMs})}},{key:"handlePositionDrop",value:function(e){this.setState({draggedSongPositionMs:-1}),this.props.onChange(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"TimeSlider"},s.a.createElement(u.a,{pos:this.getSongPos(),onDrag:this.handlePositionDrag,onChange:this.handlePositionDrop}),s.a.createElement("div",{className:"TimeSlider-time"},s.a.createElement("div",{className:"TimeSlider-elapsed"},this.getTimeLabel()),s.a.createElement("div",{className:"TimeSlider-total"},this.getTime(this.props.currentSongDurationMs))))}}]),t}(a.Component);t.a=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(220),c=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),l=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseDown=n.onMouseDown.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.node=s.a.createRef(),n.state={dragging:!1,draggedPos:null},n}return o(t,e),c(t,[{key:"onMouseMove",value:function(e){if(this.state.dragging){var t=this.node.current,n=Math.max(Math.min((e.clientX-t.offsetLeft)/t.offsetWidth,1),0);this.setState({draggedPos:n}),this.props.onDrag(n)}}},{key:"onMouseDown",value:function(e){var t=this;e.preventDefault(),e.persist(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),this.setState({dragging:!0},function(){return t.onMouseMove(e)})}},{key:"onMouseUp",value:function(e){var t=this;document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),setTimeout(function(){t.setState({dragging:!1})},150),this.props.onChange(this.state.draggedPos)}},{key:"render",value:function(){var e=100*Math.max(Math.min(this.state.dragging?this.state.draggedPos:this.props.pos,1),0)+"%";return s.a.createElement("div",{ref:this.node,className:"Slider",onMouseDown:this.onMouseDown},s.a.createElement("div",{className:"Slider-rail"}),s.a.createElement("div",{className:"Slider-knob",style:{left:e}}))}}]),t}(a.PureComponent);t.a=l},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(222),s=n.n(a),u=n(223),c=n(0),l=n.n(c),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=["Linear FFT","Log FFT","Constant Q"],d=[{label:"None",description:"No attenuation"},{label:"A-Weighting",description:"Darkens low and high frequencies to approximate sensitivity of human hearing."}],p=[512,1024,2048,4096,8192],m=["512","1K","2K","4K","8K","16K"],y=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleModeClick=function(e){var t=parseInt(e.target.value,10);n.setState({vizMode:t}),n.spectrogram.setMode(t)},n.handleWeightingModeClick=function(e){var t=parseInt(e.target.value,10);n.setState({weightingMode:t}),n.spectrogram.setWeighting(t)},n.handleFFTSizeClick=function(e){var t=parseInt(e.target.value,10);n.setState({fftSize:t}),n.spectrogram.setFFTSize(t)},n.handleToggleVisualizer=function(e){var t="true"===e.target.value;n.setState({enabled:t})},n.state={vizMode:2,weightingMode:1,fftSize:2048,enabled:!1},n.freqCanvasRef=l.a.createRef(),n.specCanvasRef=l.a.createRef(),n.pianoKeysRef=l.a.createRef(),n}return o(t,e),f(t,[{key:"componentDidMount",value:function(){this.spectrogram=new u.a(this.props.chipCore,this.props.audioCtx,this.props.sourceNode,this.freqCanvasRef.current,this.specCanvasRef.current,this.pianoKeysRef.current),this.spectrogram.setMode(this.state.vizMode),this.spectrogram.setWeighting(this.state.weightingMode)}},{key:"componentDidUpdate",value:function(e){this.spectrogram.setPaused(!this.state.enabled||this.props.paused)}},{key:"render",value:function(){var e=this,t={display:this.state.enabled?"block":"none"};return l.a.createElement("div",{className:"Visualizer"},l.a.createElement("h3",{className:"Visualizer-toggle"},"Visualizer"," ",l.a.createElement("label",{className:"inline"},l.a.createElement("input",{onClick:this.handleToggleVisualizer,type:"radio",value:!0,defaultChecked:!0===this.state.enabled,name:"visualizer-enabled"}),"On"),l.a.createElement("label",{className:"inline"},l.a.createElement("input",{onClick:this.handleToggleVisualizer,type:"radio",value:!1,defaultChecked:!1===this.state.enabled,name:"visualizer-enabled"}),"Off")),l.a.createElement("div",{className:"Visualizer-options",style:t},l.a.createElement("div",null,"Mode:"," ",h.map(function(t,n){return l.a.createElement("label",{key:"m_"+n,className:"inline"},l.a.createElement("input",{onClick:e.handleModeClick,type:"radio",name:"spectrogram-mode",defaultChecked:e.state.vizMode===n,value:n}),t)})),2===this.state.vizMode?l.a.createElement("div",null,"Weighting:"," ",d.map(function(t,n){return l.a.createElement("label",{title:t.description,key:"w_"+n,className:"inline"},l.a.createElement("input",{onClick:e.handleWeightingModeClick,type:"radio",name:"weighting-mode",defaultChecked:e.state.weightingMode===n,value:n}),t.label)})):l.a.createElement("div",null,"FFT Size:"," ",p.map(function(t,n){return l.a.createElement("label",{key:"f_"+n,className:"inline"},l.a.createElement("input",{onClick:e.handleFFTSizeClick,type:"radio",name:"fft-size",defaultChecked:e.state.fftSize===t,value:t}),m[n])}))),l.a.createElement("canvas",{style:t,className:"Visualizer-analyzer",width:448,height:60,ref:this.freqCanvasRef}),l.a.createElement("canvas",{style:t,className:"Visualizer-spectrogram",width:448,height:400,ref:this.specCanvasRef}),l.a.createElement("img",{src:s.a,className:"Visualizer-overlay",ref:this.pianoKeysRef,alt:"Piano keys",style:{display:this.state.enabled&&2===this.state.vizMode?"block":"none"}}))}}]),t}(c.PureComponent);t.a=y},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcAAAAA3CAYAAACbxZpmAAAACXBIWXMAAAsSAAALEgHS3X78AAAClElEQVR42u3c7W2jMAAGYLdikq6QCW6ZssUpui2Y5jpAs8LtcBP4fkXq0SQYsB0MzyNValIgvLj0rd2PlxhjCCGEvr+ch+F0DiN9f/kZQvgzevptGE6/Rtt923/Gvlt6DXnllVdeeXeW99bHXwMAHJACBEABAoACBAAFCAAKEAAUIAAoQABQgACgAAFAAQKAAgQABQgAChAAFCAAKEAAUIAAoAABQAECgAIEAAUIgAIEAAUIAAoQAHarS9jmbwjh7cZzIeO+W3oNeeWVV15595f3uxhjiDGG9/fP8/X9W2/P/nitY9Q6F3nllVdeeZ+b1xIoAIekAAFQgACgAAFAAQKAAgQABQgAChAAFCAAbFdX4qB9f/l9fX8YTj/2fhHllVdeeeVtL2/3aKdbF2fq4t3bb87+Xx8v3SZ1oHOc75r9U/LUylvjem0pb0vjm/pFq4W8OTO7f43vmryLZoDXA04dfOn+Kcec2mbpuT0jb0qeWnnXZm0tbwvjmzPrVvLWzHyk+9f4zjvm66OTG7f4HqfGR8gpr7zyyitvphng9YRKrR/PnYaXXscunTd1Kl8jb42sW8p7tPHdSt69fU4b3zbHt0sJmHuKvWbqPPeCTl2clO8uSufNsYSSK2+NrFvK29L4ptzoreTNldn9a3zX5O3uTTvvPW7NvSn03nLKu/+8j5aDjK+88s6XfQl0HOjRckDJqXPOtePSeXNkzpV36lz3lreF8c39c5AjfT7LK++sP4MYbzD1eO7UN8dSQeoFn3MepX7bKUeeWnlLvM6W87Y0vnOPseW8Jc7D/Wt8l7yO/wQDwCG9xBi/TiXPLgkAO/cxDKeP/woQAI7CEigAChAAFCAAKEAAUIAAoAABQAECQCP+AX8PMLpfoKkaAAAAAElFTkSuQmCC"},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=e*e;return 281061254.916*t*t/((t+424.36)*Math.sqrt((t+11599.29)*(t+544496.41))*(t+14884e4))}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(224),s=0,u=0,c=new a.scale(["#000000","#0000a0","#6000a0","#962761","#dd1440","#f0b000","#ffffa0","#ffffff"]).domain([0,255]),l=-1!==window.location.search.indexOf("debug=true"),f=void 0,h=0,d=0,p=0,m=0,y=function(){function e(t,n,o,a,c,l){var h=this,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-90,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-30;r(this,e),this.updateFrame=this.updateFrame.bind(this),this.setPaused=this.setPaused.bind(this),this.lib=t;var m=a.width,y=this.lib._cqt_init(n.sampleRate,m,32,25.95,4504,0);if(console.log("cqtSize:",y),!y)throw Error("Error initializing constant Q transform.");this.cqtSize=y,this.cqtFreqs=Array(m).fill().map(function(e,t){return h.lib._cqt_bin_to_freq(t)}),f=this.cqtFreqs.map(function(e){return.5+.5*i(e)}),this.dataPtr=this.lib._malloc(4*y),this.paused=!0,this.mode=s,this.weighting=u,this.analyserNode=n.createAnalyser(),o.connect(this.analyserNode),this.analyserNode.minDecibels=d,this.analyserNode.maxDecibels=p,this.analyserNode.smoothingTimeConstant=0,this.analyserNode.fftSize=this.fftSize=2048,this.byteFrequencyData=new Uint8Array(this.analyserNode.frequencyBinCount),this.freqCanvas=a,this.specCanvas=c,this.tempCanvas=document.createElement("canvas"),this.tempCanvas.width=this.specCanvas.width,this.tempCanvas.height=this.specCanvas.height,this.freqCtx=this.freqCanvas.getContext("2d",{alpha:!1}),this.specCtx=this.specCanvas.getContext("2d",{alpha:!1}),this.tempCtx=this.tempCanvas.getContext("2d",{alpha:!1}),this.pianoKeysImage=l,this.updateFrame()}return o(e,[{key:"setPaused",value:function(e){this.paused=e}},{key:"setMode",value:function(e){this.mode=e,this.analyserNode.fftSize=2===e?this.cqtSize:this.fftSize}},{key:"setFFTSize",value:function(e){this.fftSize=e,this.analyserNode.fftSize=e}},{key:"setWeighting",value:function(e){this.weighting=e}},{key:"updateFrame",value:function(){if(requestAnimationFrame(this.updateFrame),!this.paused){var e=this.freqCanvas.height,t=this.freqCanvas.width,n=e/256,r=this.byteFrequencyData,i=this.analyserNode,o=this.freqCtx,a=this.tempCtx;o.fillStyle="black",o.fillRect(0,0,this.freqCanvas.width,this.freqCanvas.height),a.fillStyle="#000033",a.fillRect(0,0,this.tempCanvas.width,2);var u=performance.now(),y=new Float32Array(this.lib.HEAPF32.buffer,this.dataPtr,this.cqtSize),g=this.fftSize/2;if(this.mode===s){i.getByteFrequencyData(r);for(var v=0;v<g&&v<t;++v){var b=c(r[v]).hex(),w=r[v]*n|0;o.fillStyle=b,o.fillRect(v,e-w,1,w),a.fillStyle=b,a.fillRect(v,0,1,2)}}else if(1===this.mode){i.getByteFrequencyData(r);for(var E=Math.log(g),T=0;T<g;T++){var _=Math.log(T+1)/E*t|0,S=Math.log(T+2)/E*t-_|0,I=r[T]*n|0,k=c(r[T]||0).hex();o.fillStyle=k,o.fillRect(_,e-I,S,I),a.fillStyle=k,a.fillRect(_,0,S,2)}}else if(2===this.mode&&(i.getFloatTimeDomainData(y),!y.every(function(e){return 0===e}))){this.lib._cqt_calc(this.dataPtr,this.dataPtr),this.lib._cqt_render_line(this.dataPtr);for(var N=0;N<t;N++){var A=1===this.weighting?f[N]:1,x=255*A*y[N]|0,C=x*n|0,O=c(x).hex();o.fillStyle=O,o.fillRect(N,e-C,1,C),a.fillStyle=O,a.fillRect(N,0,1,2)}}var D=performance.now();a.translate(0,2),a.drawImage(this.tempCanvas,0,0),a.setTransform(1,0,0,1,0,0),this.specCtx.drawImage(this.tempCanvas,0,0);var M=performance.now();l&&(h+=D-u,d+=M-u,++p>=200&&(console.log("[Viz] %s ms analysis, %s ms total (%s fps) (%s% utilization)",(h/p).toFixed(2),(d/p).toFixed(2),(1e3*p/(u-m)).toFixed(1),(100*d/(M-m)).toFixed(1)),h=0,p=0,d=0,m=u))}}}]),e}();if(t.a=y,e.AnalyserNode&&!e.AnalyserNode.prototype.getFloatTimeDomainData){var g=new Uint8Array(32768);e.AnalyserNode.prototype.getFloatTimeDomainData=function(e){this.getByteTimeDomainData(g);for(var t=0,n=e.length;t<n;t++)e[t]=.0078125*(g[t]-128)}}}).call(t,n(4))},function(e,t,n){(function(e){var n,r;(function(){var i,o,a,s,u,c,l,f,h,d,p,m,y,g,v,b,w,E,T,_,S,I,k,N,A,x,C,O,D,M,P,R,L,F,U,j,B,V,q,z,W,G,X,K,H,Q,Y,J,$,Z,ee,te,ne,re,ie,oe,ae,se,ue,ce,le,fe,he,de,pe,me,ye,ge,ve,be,we,Ee,Te,_e,Se,Ie,ke,Ne,Ae,xe,Ce,Oe=[].slice;ke=function(){var e,t,n,r,i;for(e={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,t=i.length;r<t;r++)n=i[r],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),Y=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),e>n&&(e=n),e},Ne=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},S=function(e){var t,n;for(e._clipped=!1,e._unclipped=e.slice(0),t=n=0;n<3;t=++n)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},s=Math.PI,Ee=Math.round,k=Math.cos,O=Math.floor,oe=Math.pow,J=Math.log,_e=Math.sin,Se=Math.sqrt,g=Math.atan2,ee=Math.max,y=Math.abs,l=2*s,u=s/3,o=s/180,c=180/s,_=function(){return arguments[0]instanceof i?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,arguments,function(){})},_.default=_,m=[],"undefined"!==typeof e&&null!==e&&null!=e.exports&&(e.exports=_),n=[],void 0!==(r=function(){return _}.apply(t,n))&&(e.exports=r),_.version="1.4.1",p={},h=[],d=!1,i=function(){function e(){var e,t,n,r,i,o,a,s,u;for(o=this,t=[],s=0,r=arguments.length;s<r;s++)null!=(e=arguments[s])&&t.push(e);if(t.length>1&&(a=t[t.length-1]),null!=p[a])o._rgb=S(p[a](Ne(t.slice(0,-1))));else{for(d||(h=h.sort(function(e,t){return t.p-e.p}),d=!0),u=0,i=h.length;u<i&&(n=h[u],!(a=n.test.apply(n,t)));u++);a&&(o._rgb=S(p[a].apply(p,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e}(),_._input=p,_.brewer=E={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;t=[];for(e in E)t.push(E[e.toLowerCase()]=E[e])}(),Ae={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_.colors=Ae,G=function(){var e,t,n,r,i,o,s,u,c;return t=Ne(arguments),i=t[0],e=t[1],n=t[2],u=(i+16)/116,s=isNaN(e)?u:u+e/500,c=isNaN(n)?u:u-n/200,u=a.Yn*X(u),s=a.Xn*X(s),c=a.Zn*X(c),o=Ce(3.2404542*s-1.5371385*u-.4985314*c),r=Ce(-.969266*s+1.8760108*u+.041556*c),n=Ce(.0556434*s-.2040259*u+1.0572252*c),[o,r,n,t.length>3?t[3]:1]},Ce=function(e){return 255*(e<=.00304?12.92*e:1.055*oe(e,1/2.4)-.055)},X=function(e){return e>a.t1?e*e*e:a.t2*(e-a.t0)},a={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},de=function(){var e,t,n,r,i,o,a,s;return r=Ne(arguments),n=r[0],t=r[1],e=r[2],i=ve(n,t,e),o=i[0],a=i[1],s=i[2],[116*a-16,500*(o-a),200*(a-s)]},be=function(e){return(e/=255)<=.04045?e/12.92:oe((e+.055)/1.055,2.4)},xe=function(e){return e>a.t3?oe(e,1/3):e/a.t2+a.t0},ve=function(){var e,t,n,r,i,o,s;return r=Ne(arguments),n=r[0],t=r[1],e=r[2],n=be(n),t=be(t),e=be(e),i=xe((.4124564*n+.3575761*t+.1804375*e)/a.Xn),o=xe((.2126729*n+.7151522*t+.072175*e)/a.Yn),s=xe((.0193339*n+.119192*t+.9503041*e)/a.Zn),[i,o,s]},_.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["lab"]),function(){})},p.lab=G,i.prototype.lab=function(){return de(this._rgb)},v=function(e){var t,n,r,i,o,a,s,u,c,l,f;return e=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(_(i));return r}(),2===e.length?(c=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=c[0],a=c[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push(o[t]+e*(a[t]-o[t]));return r}(),_.lab.apply(_,n)}):3===e.length?(l=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=l[0],a=l[1],s=l[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*o[t]+2*(1-e)*e*a[t]+e*e*s[t]);return r}(),_.lab.apply(_,n)}):4===e.length?(f=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)i=e[n],r.push(i.lab());return r}(),o=f[0],a=f[1],s=f[2],u=f[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*s[t]+e*e*e*u[t]);return r}(),_.lab.apply(_,n)}):5===e.length&&(n=v(e.slice(0,3)),r=v(e.slice(2,5)),t=function(e){return e<.5?n(2*e):r(2*(e-.5))}),t},_.bezier=function(e){var t;return t=v(e),t.scale=function(){return _.scale(t)},t},_.cubehelix=function(e,t,n,r,i){var o,a,s;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==r&&(r=1),null==i&&(i=[0,1]),o=0,"array"===ke(i)?a=i[1]-i[0]:(a=0,i=[i,i]),s=function(s){var u,c,f,h,d,p,m,y,g;return u=l*((e+120)/360+t*s),m=oe(i[0]+a*s,r),p=0!==o?n[0]+s*o:n,c=p*m*(1-m)/2,h=k(u),g=_e(u),y=m+c*(-.14861*h+1.78277*g),d=m+c*(-.29227*h-.90649*g),f=m+c*(1.97294*h),_(S([255*y,255*d,255*f,1]))},s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:(n=e,"array"===ke(n)?0===(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(e){return null==e?i:("array"===ke(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),s)},s.scale=function(){return _.scale(s)},s.hue(n),s},_.random=function(){var e,t,n;for(t="0123456789abcdef",e="#",n=0;n<6;++n)e+=t.charAt(O(16*Math.random()));return new i(e)},m=[],U=function(e,t,n,r){var i,o,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==ke(e)&&(e=_(e)),"object"!==ke(t)&&(t=_(t)),a=0,o=m.length;a<o;a++)if(i=m[a],r===i[0]){s=i[1](e,t,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(e.alpha()+n*(t.alpha()-e.alpha()))},_.interpolate=U,i.prototype.interpolate=function(e,t,n){return U(this,e,t,n)},_.mix=U,i.prototype.mix=i.prototype.interpolate,p.rgb=function(){var e,t,n,r;t=Ne(arguments),n=[];for(e in t)r=t[e],n.push(r);return n},_.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["rgb"]),function(){})},i.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},i.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},h.push({p:3,test:function(e){var t;return t=Ne(arguments),"array"===ke(t)&&3===t.length?"rgb":4===t.length&&"number"===ke(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),p.lrgb=p.rgb,V=function(e,t,n,r){var o,a;return o=e._rgb,a=t._rgb,new i(Se(oe(o[0],2)*(1-n)+oe(a[0],2)*n),Se(oe(o[1],2)*(1-n)+oe(a[1],2)*n),Se(oe(o[2],2)*(1-n)+oe(a[2],2)*n),r)},f=function(e){var t,n,r,o,a,s;for(n=1/e.length,s=[0,0,0,0],o=0,r=e.length;o<r;o++)t=e[o],a=t._rgb,s[0]+=oe(a[0],2)*n,s[1]+=oe(a[1],2)*n,s[2]+=oe(a[2],2)*n,s[3]+=a[3]*n;return s[0]=Se(s[0]),s[1]=Se(s[1]),s[2]=Se(s[2]),s[3]>1&&(s[3]=1),new i(S(s))},m.push(["lrgb",V]),_.average=function(e,t){var n,r,i,o,a,u,c,l,h,d,p,m,y;if(null==t&&(t="rgb"),h=e.length,e=e.map(function(e){return _(e)}),c=e.splice(0,1)[0],"lrgb"===t)return f(e);m=c.get(t),o=[],a=0,u=0;for(l in m)m[l]=m[l]||0,o.push(isNaN(m[l])?0:1),"h"!==t.charAt(l)||isNaN(m[l])||(n=m[l]/180*s,a+=k(n),u+=_e(n));for(r=c.alpha(),p=0,d=e.length;p<d;p++){i=e[p],y=i.get(t),r+=i.alpha();for(l in m)isNaN(y[l])||(o[l]+=1,"h"===t.charAt(l)?(n=y[l]/180*s,a+=k(n),u+=_e(n)):m[l]+=y[l])}for(l in m)if("h"===t.charAt(l)){for(n=g(u/o[l],a/o[l])/s*180;n<0;)n+=360;for(;n>=360;)n-=360;m[l]=n}else m[l]=m[l]/o[l];return _(m,t).alpha(r/h)},M=function(e){var t,n,r,i,o,a;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),a=parseInt(e,16),i=a>>16,r=a>>8&255,n=255&a,[i,r,n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),a=parseInt(e,16),i=a>>24&255,r=a>>16&255,n=a>>8&255,t=Ee((255&a)/255*100)/100,[i,r,n,t];if(null!=p.css&&(o=p.css(e)))return o;throw"unknown color: "+e},ce=function(e,t){var n,r,i,o,a,s,u;return null==t&&(t="auto"),a=e[0],i=e[1],r=e[2],n=e[3],"auto"===t&&(t=n<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),r=Math.round(r),u=a<<16|i<<8|r,s="000000"+u.toString(16),s=s.substr(s.length-6),o="0"+Ee(255*n).toString(16),o=o.substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},p.hex=function(e){return M(e)},_.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["hex"]),function(){})},i.prototype.hex=function(e){return null==e&&(e="auto"),ce(this._rgb,e)},h.push({p:4,test:function(e){if(1===arguments.length&&"string"===ke(e))return"hex"}}),L=function(){var e,t,n,r,i,o,a,s,u,c,l,f,h,d;if(e=Ne(arguments),i=e[0],l=e[1],a=e[2],0===l)u=r=t=255*a;else{for(d=[0,0,0],n=[0,0,0],h=a<.5?a*(1+l):a+l-a*l,f=2*a-h,i/=360,d[0]=i+1/3,d[1]=i,d[2]=i-1/3,o=s=0;s<=2;o=++s)d[o]<0&&(d[o]+=1),d[o]>1&&(d[o]-=1),6*d[o]<1?n[o]=f+6*(h-f)*d[o]:2*d[o]<1?n[o]=h:3*d[o]<2?n[o]=f+(h-f)*(2/3-d[o])*6:n[o]=f;c=[Ee(255*n[0]),Ee(255*n[1]),Ee(255*n[2])],u=c[0],r=c[1],t=c[2]}return e.length>3?[u,r,t,e[3]]:[u,r,t]},fe=function(e,t,n){var r,i,o,a,s;return void 0!==e&&e.length>=3&&(a=e,e=a[0],t=a[1],n=a[2]),e/=255,t/=255,n/=255,o=Math.min(e,t,n),ee=Math.max(e,t,n),i=(ee+o)/2,ee===o?(s=0,r=Number.NaN):s=i<.5?(ee-o)/(ee+o):(ee-o)/(2-ee-o),e===ee?r=(t-n)/(ee-o):t===ee?r=2+(n-e)/(ee-o):n===ee&&(r=4+(e-t)/(ee-o)),r*=60,r<0&&(r+=360),[r,s,i]},_.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["hsl"]),function(){})},p.hsl=L,i.prototype.hsl=function(){return fe(this._rgb)},F=function(){var e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,m,y,g;if(e=Ne(arguments),i=e[0],m=e[1],g=e[2],g*=255,0===m)u=r=t=g;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),i/=60,o=O(i),n=i-o,a=g*(1-m),s=g*(1-m*n),y=g*(1-m*(1-n)),o){case 0:c=[g,y,a],u=c[0],r=c[1],t=c[2];break;case 1:l=[s,g,a],u=l[0],r=l[1],t=l[2];break;case 2:f=[a,g,y],u=f[0],r=f[1],t=f[2];break;case 3:h=[a,s,g],u=h[0],r=h[1],t=h[2];break;case 4:d=[y,a,g],u=d[0],r=d[1],t=d[2];break;case 5:p=[g,a,s],u=p[0],r=p[1],t=p[2]}return[u,r,t,e.length>3?e[3]:1]},he=function(){var e,t,n,r,i,o,a,s,u;return a=Ne(arguments),o=a[0],n=a[1],e=a[2],i=Math.min(o,n,e),ee=Math.max(o,n,e),t=ee-i,u=ee/255,0===ee?(r=Number.NaN,s=0):(s=t/ee,o===ee&&(r=(n-e)/t),n===ee&&(r=2+(e-o)/t),e===ee&&(r=4+(o-n)/t),(r*=60)<0&&(r+=360)),[r,s,u]},_.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["hsv"]),function(){})},p.hsv=F,i.prototype.hsv=function(){return he(this._rgb)},re=function(e){var t,n,r;return"number"===ke(e)&&e>=0&&e<=16777215?(r=e>>16,n=e>>8&255,t=255&e,[r,n,t,1]):(console.warn("unknown num color: "+e),[0,0,0,1])},ye=function(){var e,t,n,r;return r=Ne(arguments),n=r[0],t=r[1],e=r[2],(n<<16)+(t<<8)+e},_.num=function(e){return new i(e,"num")},i.prototype.num=function(e){return null==e&&(e="rgb"),ye(this._rgb,e)},p.num=re,h.push({p:1,test:function(e){if(1===arguments.length&&"number"===ke(e)&&e>=0&&e<=16777215)return"num"}}),D=function(){var e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,m,y,g,v,b;if(n=Ne(arguments),s=n[0],i=n[1],t=n[2],i/=100,a=a/100*255,e=255*i,0===i)f=a=r=t;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),s/=60,u=O(s),o=s-u,c=t*(1-i),l=c+e*(1-o),v=c+e*o,b=c+e,u){case 0:h=[b,v,c],f=h[0],a=h[1],r=h[2];break;case 1:d=[l,b,c],f=d[0],a=d[1],r=d[2];break;case 2:p=[c,b,v],f=p[0],a=p[1],r=p[2];break;case 3:m=[c,l,b],f=m[0],a=m[1],r=m[2];break;case 4:y=[v,c,b],f=y[0],a=y[1],r=y[2];break;case 5:g=[b,c,l],f=g[0],a=g[1],r=g[2]}return[f,a,r,n.length>3?n[3]:1]},ue=function(){var e,t,n,r,i,o,a,s,u;return u=Ne(arguments),s=u[0],i=u[1],t=u[2],a=Math.min(s,i,t),ee=Math.max(s,i,t),r=ee-a,n=100*r/255,e=a/(255-r)*100,0===r?o=Number.NaN:(s===ee&&(o=(i-t)/r),i===ee&&(o=2+(t-s)/r),t===ee&&(o=4+(s-i)/r),(o*=60)<0&&(o+=360)),[o,n,e]},_.hcg=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["hcg"]),function(){})},p.hcg=D,i.prototype.hcg=function(){return ue(this._rgb)},N=function(e){var t,n,r,i,o,a,s,u;if(e=e.toLowerCase(),null!=_.colors&&_.colors[e])return M(_.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=u=0;u<=3;i=++u)s[i]=+s[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=t=0;t<=2;i=++t)s[i]=Ee(2.55*s[i]);s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=n=0;n<=2;i=++n)s[i]=Ee(2.55*s[i]);s[3]=+s[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,s=L(r),s[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,s=L(r),s[3]=+o[4]);return s},se=function(e){var t;return t=e[3]<1?"rgba":"rgb","rgb"===t?t+"("+e.slice(0,3).map(Ee).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(Ee).join(",")+","+e[3]+")":void 0},we=function(e){return Ee(100*e)/100},R=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=we(e[0]||0),e[1]=we(100*e[1])+"%",e[2]=we(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},p.css=function(e){return N(e)},_.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["css"]),function(){})},i.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?se(this._rgb):"hsl"===e.slice(0,3)?R(this.hsl(),this.alpha()):void 0},p.named=function(e){return M(Ae[e])},h.push({p:5,test:function(e){if(1===arguments.length&&null!=Ae[e])return"named"}}),i.prototype.name=function(e){var t,n;arguments.length&&(Ae[e]&&(this._rgb=M(Ae[e])),this._rgb[3]=1),t=this.hex("rgb");for(n in Ae)if(t===Ae[n])return n;return t},K=function(){var e,t,n,r;return r=Ne(arguments),n=r[0],e=r[1],t=r[2],t*=o,[n,k(t)*e,_e(t)*e]},H=function(){var e,t,n,r,i,o,a,s,u,c,l;return n=Ne(arguments),s=n[0],i=n[1],a=n[2],c=K(s,i,a),e=c[0],t=c[1],r=c[2],l=G(e,t,r),u=l[0],o=l[1],r=l[2],[u,o,r,n.length>3?n[3]:1]},W=function(){var e,t,n,r,i,o;return o=Ne(arguments),i=o[0],e=o[1],t=o[2],n=Se(e*e+t*t),r=(g(t,e)*c+360)%360,0===Ee(1e4*n)&&(r=Number.NaN),[i,n,r]},pe=function(){var e,t,n,r,i,o,a;return o=Ne(arguments),i=o[0],n=o[1],t=o[2],a=de(i,n,t),r=a[0],e=a[1],t=a[2],W(r,e,t)},_.lch=function(){var e;return e=Ne(arguments),new i(e,"lch")},_.hcl=function(){var e;return e=Ne(arguments),new i(e,"hcl")},p.lch=H,p.hcl=function(){var e,t,n,r;return r=Ne(arguments),t=r[0],e=r[1],n=r[2],H([n,e,t])},i.prototype.lch=function(){return pe(this._rgb)},i.prototype.hcl=function(){return pe(this._rgb).reverse()},ae=function(e){var t,n,r,i,o,a,s,u,c;return null==e&&(e="rgb"),u=Ne(arguments),s=u[0],i=u[1],t=u[2],s/=255,i/=255,t/=255,o=1-Math.max(s,Math.max(i,t)),r=o<1?1/(1-o):0,n=(1-s-o)*r,a=(1-i-o)*r,c=(1-t-o)*r,[n,a,c,o]},I=function(){var e,t,n,r,i,o,a,s,u;return t=Ne(arguments),r=t[0],a=t[1],u=t[2],o=t[3],e=t.length>4?t[4]:1,1===o?[0,0,0,e]:(s=r>=1?0:255*(1-r)*(1-o),i=a>=1?0:255*(1-a)*(1-o),n=u>=1?0:255*(1-u)*(1-o),[s,i,n,e])},p.cmyk=function(){return I(Ne(arguments))},_.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["cmyk"]),function(){})},i.prototype.cmyk=function(){return ae(this._rgb)},p.gl=function(){var e,t,n,r,i;for(r=function(){var e,n;e=Ne(arguments),n=[];for(t in e)i=e[t],n.push(i);return n}.apply(this,arguments),e=n=0;n<=2;e=++n)r[e]*=255;return r},_.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["gl"]),function(){})},i.prototype.gl=function(){var e;return e=this._rgb,[e[0]/255,e[1]/255,e[2]/255,e[3]]},me=function(e,t,n){var r;return r=Ne(arguments),e=r[0],t=r[1],n=r[2],e=$(e),t=$(t),n=$(n),.2126*e+.7152*t+.0722*n},$=function(e){return e/=255,e<=.03928?e/12.92:oe((e+.055)/1.055,2.4)},z=function(e,t,n,r){var o,a;return o=e._rgb,a=t._rgb,new i(o[0]+n*(a[0]-o[0]),o[1]+n*(a[1]-o[1]),o[2]+n*(a[2]-o[2]),r)},m.push(["rgb",z]),i.prototype.luminance=function(e,t){var n,r,i,o,a;return null==t&&(t="rgb"),arguments.length?(o=this._rgb,0===e?o=[0,0,0,this._rgb[3]]:1===e?o=[255,255,255,this[3]]:(n=me(this._rgb),r=1e-7,i=20,a=function(n,o){var s,u;return u=n.interpolate(o,.5,t),s=u.luminance(),Math.abs(e-s)<r||!i--?u:s>e?a(n,u):a(u,o)},o=n>e?a(_("black"),this).rgba():a(this,_("white")).rgba()),_(o).alpha(this.alpha())):me(this._rgb)},Ie=function(e){var t,n,r,i;return i=e/100,i<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*J(n),t=i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*J(t)):(r=351.97690566805693+.114206453784165*(r=i-55)-40.25366309332127*J(r),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*J(n),t=255),[r,n,t]},ge=function(){var e,t,n,r,i,o,a,s;for(o=Ne(arguments),i=o[0],o[1],e=o[2],r=1e3,n=4e4,t=.4;n-r>t;)s=.5*(n+r),a=Ie(s),a[2]/a[0]>=e/i?n=s:r=s;return Ee(s)},_.temperature=_.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["temperature"]),function(){})},p.temperature=p.kelvin=p.K=Ie,i.prototype.temperature=function(){return ge(this._rgb)},i.prototype.kelvin=i.prototype.temperature,_.contrast=function(e,t){var n,r,o,a;return"string"!==(o=ke(e))&&"number"!==o||(e=new i(e)),"string"!==(a=ke(t))&&"number"!==a||(t=new i(t)),n=e.luminance(),r=t.luminance(),n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},_.distance=function(e,t,n){var r,o,a,s,u,c,l;null==n&&(n="lab"),"string"!==(u=ke(e))&&"number"!==u||(e=new i(e)),"string"!==(c=ke(t))&&"number"!==c||(t=new i(t)),a=e.get(n),s=t.get(n),l=0;for(o in a)r=(a[o]||0)-(s[o]||0),l+=r*r;return Math.sqrt(l)},_.deltaE=function(e,t,n,r){var o,a,u,c,l,f,h,d,p,m,v,b,w,E,T,_,S,I,N,A,x,C,O,D,M,P,R;for(null==n&&(n=1),null==r&&(r=1),"string"!==(S=ke(e))&&"number"!==S||(e=new i(e)),"string"!==(I=ke(t))&&"number"!==I||(t=new i(t)),N=e.lab(),o=N[0],u=N[1],l=N[2],A=t.lab(),a=A[0],c=A[1],f=A[2],h=Se(u*u+l*l),d=Se(c*c+f*f),O=o<16?.511:.040975*o/(1+.01765*o),x=.0638*h/(1+.0131*h)+.638,_=h<1e-6?0:180*g(l,u)/s;_<0;)_+=360;for(;_>=360;)_-=360;return D=_>=164&&_<=345?.56+y(.2*k(s*(_+168)/180)):.36+y(.4*k(s*(_+35)/180)),p=h*h*h*h,T=Se(p/(p+1900)),C=x*(T*D+1-T),E=o-a,w=h-d,v=u-c,b=l-f,m=v*v+b*b-w*w,M=E/(n*O),P=w/(r*x),R=C,Se(M*M+P*P+m/(R*R))},i.prototype.get=function(e){var t,n,r,i,o,a;return r=this,o=e.split("."),i=o[0],t=o[1],a=r[i](),t?(n=i.indexOf(t),n>-1?a[n]:console.warn("unknown channel "+t+" in mode "+i)):a},i.prototype.set=function(e,t){var n,r,i,o,a,s;if(i=this,a=e.split("."),o=a[0],n=a[1],n)if(s=i[o](),(r=o.indexOf(n))>-1)if("string"===ke(t))switch(t.charAt(0)){case"+":case"-":s[r]+=+t;break;case"*":s[r]*=+t.substr(1);break;case"/":s[r]/=+t.substr(1);break;default:s[r]=+t}else s[r]=t;else console.warn("unknown channel "+n+" in mode "+o);else s=t;return _(s,o).alpha(i.alpha())},i.prototype.clipped=function(){return this._rgb._clipped||!1},i.prototype.alpha=function(e){return arguments.length?_.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},i.prototype.darken=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lab(),t[0]-=a.Kn*e,_.lab(t).alpha(n.alpha())},i.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},i.prototype.darker=i.prototype.darken,i.prototype.brighter=i.prototype.brighten,i.prototype.saturate=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lch(),t[1]+=e*a.Kn,t[1]<0&&(t[1]=0),_.lch(t).alpha(n.alpha())},i.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},i.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),_(t[0]*e,t[1]*e,t[2]*e,e)},b=function(e,t,n){if(!b[n])throw"unknown blend mode "+n;return b[n](e,t)},w=function(e){return function(t,n){var r,i;return r=_(n).rgb(),i=_(t).rgb(),_(e(r,i),"rgb")}},C=function(e){return function(t,n){var r,i,o;for(o=[],r=i=0;i<=3;r=++i)o[r]=e(t[r],n[r]);return o}},ne=function(e,t){return e},te=function(e,t){return e*t/255},A=function(e,t){return e>t?t:e},Q=function(e,t){return e>t?e:t},Te=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},ie=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},T=function(e,t){return 255*(1-(1-t/255)/(e/255))},x=function(e,t){return 255===e?255:(e=t/255*255/(1-e/255),e>255?255:e)},b.normal=w(C(ne)),b.multiply=w(C(te)),b.screen=w(C(Te)),b.overlay=w(C(ie)),b.darken=w(C(A)),b.lighten=w(C(Q)),b.dodge=w(C(x)),b.burn=w(C(T)),_.blend=b,_.analyze=function(e){var t,n,r,i;for(r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)null==(i=e[n])||isNaN(i)||(r.values.push(i),r.sum+=i,i<r.min&&(r.min=i),i>r.max&&(r.max=i),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return _.limits(r,e,t)},r},_.scale=function(e,t){var n,r,i,o,a,s,u,c,l,f,h,d,p,m,y,g,v,b,w,E,T;return l="rgb",f=_("#ccc"),m=0,!1,a=[0,1],p=[],d=[0,0],n=!1,i=[],h=!1,c=0,u=1,o=!1,r={},y=!0,s=1,E=function(e){var t,n,r,o,a,s;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===ke(e)&&null!=_.brewer&&(e=_.brewer[e]||_.brewer[e.toLowerCase()]||e),"array"===ke(e)){for(1===e.length&&(e=[e[0],e[0]]),e=e.slice(0),t=r=0,o=e.length-1;0<=o?r<=o:r>=o;t=0<=o?++r:--r)n=e[t],"string"===ke(n)&&(e[t]=_(n));for(p.length=0,t=s=0,a=e.length-1;0<=a?s<=a:s>=a;t=0<=a?++s:--s)p.push(t/(e.length-1))}return w(),i=e},v=function(e){var t,r;if(null!=n){for(r=n.length-1,t=0;t<r&&e>=n[t];)t++;return t-1}return 0},T=function(e){return e},function(e){var t,r,i,o,a;return a=e,n.length>2&&(o=n.length-1,t=v(e),i=n[0]+(n[1]-n[0])*(0+.5*m),r=n[o-1]+(n[o]-n[o-1])*(1-.5*m),a=c+(n[t]+.5*(n[t+1]-n[t])-i)/(r-i)*(u-c)),a},b=function(e,t){var o,a,h,m,g,b,w,E;if(null==t&&(t=!1),isNaN(e)||null===e)return f;if(t?E=e:n&&n.length>2?(o=v(e),E=o/(n.length-2)):E=u!==c?(e-c)/(u-c):1,t||(E=T(E)),1!==s&&(E=oe(E,s)),E=d[0]+E*(1-d[0]-d[1]),E=Math.min(1,Math.max(0,E)),m=Math.floor(1e4*E),y&&r[m])a=r[m];else{if("array"===ke(i))for(h=g=0,w=p.length-1;0<=w?g<=w:g>=w;h=0<=w?++g:--g){if(b=p[h],E<=b){a=i[h];break}if(E>=b&&h===p.length-1){a=i[h];break}if(E>b&&E<p[h+1]){E=(E-b)/(p[h+1]-b),a=_.interpolate(i[h],i[h+1],E,l);break}}else"function"===ke(i)&&(a=i(E));y&&(r[m]=a)}return a},w=function(){return r={}},E(e),g=function(e){var t;return t=_(b(e)),h&&t[h]?t[h]():t},g.classes=function(e){var t;return null!=e?("array"===ke(e)?(n=e,a=[e[0],e[e.length-1]]):(t=_.analyze(a),n=0===e?[t.min,t.max]:_.limits(t,"e",e)),g):n},g.domain=function(e){var t,n,r,o,s,l,f;if(!arguments.length)return a;if(c=e[0],u=e[e.length-1],p=[],r=i.length,e.length===r&&c!==u)for(s=0,o=e.length;s<o;s++)n=e[s],p.push((n-c)/(u-c));else for(t=f=0,l=r-1;0<=l?f<=l:f>=l;t=0<=l?++f:--f)p.push(t/(r-1));return a=[c,u],g},g.mode=function(e){return arguments.length?(l=e,w(),g):l},g.range=function(e,t){return E(e,t),g},g.out=function(e){return h=e,g},g.spread=function(e){return arguments.length?(m=e,g):m},g.correctLightness=function(e){return null==e&&(e=!0),o=e,w(),T=o?function(e){var t,n,r,i,o,a,s,u,c;for(t=b(0,!0).lab()[0],n=b(1,!0).lab()[0],s=t>n,r=b(e,!0).lab()[0],o=t+(n-t)*e,i=r-o,u=0,c=1,a=20;Math.abs(i)>.01&&a-- >0;)!function(){s&&(i*=-1),i<0?(u=e,e+=.5*(c-e)):(c=e,e+=.5*(u-e)),r=b(e,!0).lab()[0],i=r-o}();return e}:function(e){return e},g},g.padding=function(e){return null!=e?("number"===ke(e)&&(e=[e,e]),d=e,g):d},g.colors=function(t,r){var o,s,u,c,l,f,h,d;if(arguments.length<2&&(r="hex"),l=[],0===arguments.length)l=i.slice(0);else if(1===t)l=[g(.5)];else if(t>1)s=a[0],o=a[1]-s,l=function(){f=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)f.push(e);return f}.apply(this).map(function(e){return g(s+e/(t-1)*o)});else{if(e=[],h=[],n&&n.length>2)for(u=d=1,c=n.length;1<=c?d<c:d>c;u=1<=c?++d:--d)h.push(.5*(n[u-1]+n[u]));else h=a;l=h.map(function(e){return g(e)})}return _[r]&&(l=l.map(function(e){return e[r]()})),l},g.cache=function(e){return null!=e?(y=e,g):y},g.gamma=function(e){return null!=e?(s=e,g):s},g.nodata=function(e){return null!=e?(f=_(e),g):f},g},null==_.scales&&(_.scales={}),_.scales.cool=function(){return _.scale([_.hsl(180,1,.9),_.hsl(250,.7,.4)])},_.scales.hot=function(){return _.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},_.analyze=function(e,t,n){var r,i,o,a,s,u,c;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},c=function(e,i){if(n(e,i))return r(null!=t&&"function"===ke(t)?t(e):null!=t&&"string"===ke(t)||"number"===ke(t)?e[t]:e)},"array"===ke(e))for(a=0,o=e.length;a<o;a++)u=e[a],c(u);else for(i in e)u=e[i],c(u,i);return s.domain=[s.min,s.max],s.limits=function(e,t){return _.limits(s,e,t)},s},_.limits=function(e,t,n){var r,i,o,a,s,u,c,l,f,h,d,p,m,g,v,b,w,E,T,S,I,k,N,A,x,C,D,M,P,R,L,F,U,j,B,V,q,z,W,G,X,K,H,Q,Y,$,Z,te,ne,re,ie,ae,se,ue,ce;if(null==t&&(t="equal"),null==n&&(n=7),"array"===ke(e)&&(e=_.analyze(e)),x=e.min,ee=e.max,e.sum,ue=e.values.sort(function(e,t){return e-t}),1===n)return[x,ee];if(N=[],"c"===t.substr(0,1)&&(N.push(x),N.push(ee)),"e"===t.substr(0,1)){for(N.push(x),S=L=1,B=n-1;1<=B?L<=B:L>=B;S=1<=B?++L:--L)N.push(x+S/n*(ee-x));N.push(ee)}else if("l"===t.substr(0,1)){if(x<=0)throw"Logarithmic scales are only possible for values > 0";for(C=Math.LOG10E*J(x),A=Math.LOG10E*J(ee),N.push(x),S=ce=1,V=n-1;1<=V?ce<=V:ce>=V;S=1<=V?++ce:--ce)N.push(oe(10,C+S/n*(A-C)));N.push(ee)}else if("q"===t.substr(0,1)){for(N.push(x),S=r=1,K=n-1;1<=K?r<=K:r>=K;S=1<=K?++r:--r)F=(ue.length-1)*S/n,U=O(F),U===F?N.push(ue[U]):(j=F-U,N.push(ue[U]*(1-j)+ue[U+1]*j));N.push(ee)}else if("k"===t.substr(0,1)){for(M=ue.length,g=new Array(M),E=new Array(n),re=!0,P=0,b=null,b=[],b.push(x),S=i=1,H=n-1;1<=H?i<=H:i>=H;S=1<=H?++i:--i)b.push(x+S/n*(ee-x));for(b.push(ee);re;){for(I=o=0,Q=n-1;0<=Q?o<=Q:o>=Q;I=0<=Q?++o:--o)E[I]=0;for(S=a=0,Y=M-1;0<=Y?a<=Y:a>=Y;S=0<=Y?++a:--a){for(se=ue[S],D=Number.MAX_VALUE,I=s=0,$=n-1;0<=$?s<=$:s>=$;I=0<=$?++s:--s)(T=y(b[I]-se))<D&&(D=T,v=I);E[v]++,g[S]=v}for(R=new Array(n),I=u=0,Z=n-1;0<=Z?u<=Z:u>=Z;I=0<=Z?++u:--u)R[I]=null;for(S=c=0,te=M-1;0<=te?c<=te:c>=te;S=0<=te?++c:--c)w=g[S],null===R[w]?R[w]=ue[S]:R[w]+=ue[S];for(I=l=0,ne=n-1;0<=ne?l<=ne:l>=ne;I=0<=ne?++l:--l)R[I]*=1/E[I];for(re=!1,I=f=0,q=n-1;0<=q?f<=q:f>=q;I=0<=q?++f:--f)if(R[I]!==b[S]){re=!0;break}b=R,P++,P>200&&(re=!1)}for(k={},I=h=0,z=n-1;0<=z?h<=z:h>=z;I=0<=z?++h:--h)k[I]=[];for(S=d=0,W=M-1;0<=W?d<=W:d>=W;S=0<=W?++d:--d)w=g[S],k[w].push(ue[S]);for(ie=[],I=p=0,G=n-1;0<=G?p<=G:p>=G;I=0<=G?++p:--p)ie.push(k[I][0]),ie.push(k[I][k[I].length-1]);for(ie=ie.sort(function(e,t){return e-t}),N.push(ie[0]),S=m=1,X=ie.length-1;m<=X;S=m+=2)ae=ie[S],isNaN(ae)||-1!==N.indexOf(ae)||N.push(ae)}return N},P=function(e,t,n){var r,i,o,a;return r=Ne(arguments),e=r[0],t=r[1],n=r[2],isNaN(e)&&(e=0),e/=360,e<1/3?(i=(1-t)/3,a=(1+t*k(l*e)/k(u-l*e))/3,o=1-(i+a)):e<2/3?(e-=1/3,a=(1-t)/3,o=(1+t*k(l*e)/k(u-l*e))/3,i=1-(a+o)):(e-=2/3,o=(1-t)/3,i=(1+t*k(l*e)/k(u-l*e))/3,a=1-(o+i)),a=Y(n*a*3),o=Y(n*o*3),i=Y(n*i*3),[255*a,255*o,255*i,r.length>3?r[3]:1]},le=function(){var e,t,n,r,i,o,a,s;return a=Ne(arguments),o=a[0],t=a[1],e=a[2],l=2*Math.PI,o/=255,t/=255,e/=255,i=Math.min(o,t,e),r=(o+t+e)/3,s=1-i/r,0===s?n=0:(n=(o-t+(o-e))/2,n/=Math.sqrt((o-t)*(o-t)+(o-e)*(t-e)),n=Math.acos(n),e>t&&(n=l-n),n/=l),[360*n,s,r]},_.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return Object(i)===i?i:r}(i,Oe.call(arguments).concat(["hsi"]),function(){})},p.hsi=P,i.prototype.hsi=function(){return le(this._rgb)},j=function(e,t,n,r){var i,o,a,s,u,c,l,f,h,d,p,m;return"hsl"===r?(p=e.hsl(),m=t.hsl()):"hsv"===r?(p=e.hsv(),m=t.hsv()):"hcg"===r?(p=e.hcg(),m=t.hcg()):"hsi"===r?(p=e.hsi(),m=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",p=e.hcl(),m=t.hcl()),"h"===r.substr(0,1)&&(a=p[0],h=p[1],c=p[2],s=m[0],d=m[1],l=m[2]),isNaN(a)||isNaN(s)?isNaN(a)?isNaN(s)?o=Number.NaN:(o=s,1!==c&&0!==c||"hsv"===r||(f=d)):(o=a,1!==l&&0!==l||"hsv"===r||(f=h)):(i=s>a&&s-a>180?s-(a+360):s<a&&a-s>180?s+360-a:s-a,o=a+n*i),null==f&&(f=h+n*(d-h)),u=c+n*(l-c),_[r](o,f,u)},m=m.concat(function(){var e,t,n,r;for(n=["hsv","hsl","hsi","hcl","lch","hcg"],r=[],t=0,e=n.length;t<e;t++)Z=n[t],r.push([Z,j]);return r}()),q=function(e,t,n,r){var i,o;return i=e.num(),o=t.num(),_.num(i+(o-i)*n,"num")},m.push(["num",q]),B=function(e,t,n,r){var o,a;return o=e.lab(),a=t.lab(),new i(o[0]+n*(a[0]-o[0]),o[1]+n*(a[1]-o[1]),o[2]+n*(a[2]-o[2]),r)},m.push(["lab",B])}).call(this)}).call(t,n(80)(e))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("header",{className:"App-header"},s.a.createElement("a",{className:"App-title",href:"./"},"Chip Player JS")," ",this.props.user?s.a.createElement("span",null,"\u2022 Logged in as ",this.props.user.displayName,"."," ",s.a.createElement("a",{href:"#",onClick:this.props.handleLogout},"Logout")):s.a.createElement("span",null,"\u2022 ",s.a.createElement("a",{href:"#",onClick:this.props.handleLogin},"Login/Sign Up")," to Save Favorites"),!this.props.isPhone&&s.a.createElement("p",{className:"App-subtitle"},s.a.createElement("span",{className:"App-byline"},"Feedback:"," ",s.a.createElement("a",{href:"https://twitter.com/matthewmontag",target:"_blank",rel:"noopener noreferrer"},"@matthewmontag")),"Powered by"," ",s.a.createElement("a",{href:"https://bitbucket.org/mpyne/game-music-emu/wiki/Home"},"Game Music Emu"),","," ",s.a.createElement("a",{href:"https://github.com/cmatsuoka/libxmp"},"LibXMP"),", and"," ",s.a.createElement("a",{href:"https://github.com/schellingb/TinySoundFont"},"TinySoundFont"),"."))}}]),t}(a.PureComponent);t.a=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(35),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.favorites,n=e.currContext,r=e.currIdx,i=e.onSongClick,o=e.toggleFavorite,a=e.user,c=e.loadingUser,l=e.handleLogin;return c?s.a.createElement("p",null,"Loading user data..."):s.a.createElement("div",null,s.a.createElement("h3",null,"Favorite Songs ",s.a.createElement("span",null,"(",t.length,")")),a?t.length>0?s.a.createElement("div",null,t.map(function(e,a){var c=decodeURIComponent(e.split("/").pop()),l=n===t&&r===a;return s.a.createElement("div",{className:l?"Song-now-playing":"",key:a},s.a.createElement(u.a,{favorites:t,toggleFavorite:o,href:e}),s.a.createElement("a",{onClick:i(e,t,a),href:e},c))})):s.a.createElement("div",null,"You don't have any favorites yet.",s.a.createElement("br",null),"Click the \x03 heart icon next to any song to save a favorite."):s.a.createElement("span",null,"You must ",s.a.createElement("a",{href:"#",onClick:l},"login or signup")," to save favorites."))}}]),t}(a.PureComponent);t.a=l},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=n(55),a=n(34),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t,n,r){i(this,e),this.playSong=this.playSong.bind(this),this.playSongBuffer=this.playSongBuffer.bind(this),this.playSongFile=this.playSongFile.bind(this),this.getPlayer=this.getPlayer.bind(this),this.onPlayerStateUpdate=this.onPlayerStateUpdate.bind(this),this.playContext=this.playContext.bind(this),this.advanceSong=this.advanceSong.bind(this),this.nextSong=this.nextSong.bind(this),this.prevSong=this.prevSong.bind(this),this.prevSubtune=this.prevSubtune.bind(this),this.nextSubtune=this.nextSubtune.bind(this),this.toggleShuffle=this.toggleShuffle.bind(this),this.getCurrUrl=this.getCurrUrl.bind(this),this.getCurrContext=this.getCurrContext.bind(this),this.getCurrIdx=this.getCurrIdx.bind(this),this.setPlayers=this.setPlayers.bind(this),this.setShuffle=this.setShuffle.bind(this),this.player=null,this.players=t,this.onSequencerStateUpdate=n,this.onPlayerError=r,this.currIdx=0,this.context=null,this.currUrl=null,this.tempo=1,this.shuffle=!1,this.songRequest=null}return s(e,[{key:"setPlayers",value:function(e){var t=this;this.players=e,this.players.forEach(function(e){e.setOnPlayerStateUpdate(t.onPlayerStateUpdate)})}},{key:"onPlayerStateUpdate",value:function(e){console.debug("Sequencer.onPlayerStateUpdate(isStopped=%s)",e),e?(this.currUrl=null,this.context&&this.nextSong()):this.onSequencerStateUpdate(!1)}},{key:"playContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.currIdx=t,this.context=e,this.playSong(e[t])}},{key:"playSonglist",value:function(e){this.playContext(e,0)}},{key:"toggleShuffle",value:function(){this.setShuffle(!this.shuffle)}},{key:"setShuffle",value:function(e){this.shuffle=!!e}},{key:"advanceSong",value:function(e){this.currIdx+=e,this.currIdx<0||this.currIdx>=this.context.length?(console.debug("Sequencer.advanceSong(direction=%s) %s passed end of context length %s",e,this.currIdx,this.context.length),this.currIdx=0,this.context=null,this.player.suspend(),this.onSequencerStateUpdate(!0)):this.playSong(this.context[this.currIdx])}},{key:"nextSong",value:function(){this.advanceSong(1)}},{key:"prevSong",value:function(){this.advanceSong(-1)}},{key:"playSubtune",value:function(e){this.player.playSubtune(e)}},{key:"prevSubtune",value:function(){var e=this.player.getSubtune()-1;e<0||this.playSubtune(e)}},{key:"nextSubtune",value:function(){var e=this.player.getSubtune()+1;e>=this.player.getNumSubtunes()||this.playSubtune(e)}},{key:"getPlayer",value:function(){return this.player}},{key:"getCurrContext",value:function(){return this.context}},{key:"getCurrIdx",value:function(){return this.currIdx}},{key:"getCurrUrl",value:function(){return this.currUrl}},{key:"playSong",value:function(e){var t=this;null!==this.player&&this.player.suspend(),e=e.startsWith("http")?e:a.b+e;for(var n=e.replace(a.b,""),r=e.split(".").pop().toLowerCase(),i=0;i<this.players.length;i++)if(this.players[i].canPlay(r)){this.player=this.players[i];break}if(null===this.player)return void this.onPlayerError('The file format ".'+r+'" was not recognized.');this.songRequest&&this.songRequest.abort(),this.songRequest=Object(o.a)(new XMLHttpRequest),this.songRequest.responseType="arraybuffer",this.songRequest.open("GET",e),this.songRequest.send().then(function(e){return e.response}).then(function(r){t.currUrl=e,t.playSongBuffer(n,r)})}},{key:"playSongFile",value:function(e,t){null!==this.player&&this.player.suspend();for(var n=e.split(".").pop().toLowerCase(),r=0;r<this.players.length;r++)if(this.players[r].canPlay(n)){this.player=this.players[r];break}if(null===this.player)return void this.onPlayerError('The file format ".'+n+'" was not recognized.');this.context=[],this.currUrl=null,this.playSongBuffer(e,t)}},{key:"playSongBuffer",value:function(e,t){var n=void 0;n=new Uint8Array(t);try{this.player.loadData(n,e)}catch(e){return void this.onPlayerError(e.message)}this.onPlayerError(null);var i=this.player.getNumVoices();this.player.setTempo(this.tempo),this.player.setVoices([].concat(r(Array(i))).fill(!0)),console.debug("Sequencer.playSong(...) song request completed")}}]),e}();t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(0),s=n.n(a),u=n(229),c=n.n(u),l=n(235),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e,t){var n=e.items,r=e.itemHeight,i=t.firstItemIndex,o=t.lastItemIndex,a=o>-1?n.slice(i,o+1):[],s=n.length*r,u=i*r;return Object.assign({},e,{virtual:{items:a,style:{paddingTop:u,minHeight:s,height:s,boxSizing:"border-box"}}})},d=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.VirtualDirectoryListing=c()({container:n.props.scrollContainerRef.current},h)(l.a),n.navigate=n.navigate.bind(n),n.contexts={},n}return o(t,e),f(t,[{key:"componentDidMount",value:function(){this.navigate()}},{key:"componentDidUpdate",value:function(){this.navigate()}},{key:"navigate",value:function(){var e=this.props.browsePath,t=this.props.directories,n=this.props.fetchDirectory;t[e]||n(e),t[e]&&!this.contexts[e]&&(this.contexts[e]=t[e].map(function(e){return e.path.replace("%","%25").replace("#","%23").replace(/^\//,"")}))}},{key:"render",value:function(){var e=this.props,t=e.directories,n=e.browsePath,r=t[n]||[];return s.a.createElement(a.Fragment,null,s.a.createElement("div",null,"/",n),s.a.createElement(this.VirtualDirectoryListing,Object.assign({key:n},this.props,{contexts:this.contexts,items:r,itemHeight:19})))}}]),t}(a.PureComponent);t.a=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),l=r(c),f=n(58),h=r(f),d=n(14),p=r(d),m=n(230),y=r(m),g=n(233),v=r(g),b=n(234),w=r(b),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.default;return function(n){var r,f;return f=r=function(r){function c(t){i(this,c);var n=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t));return n._isMounted=!1,n.options=s({container:"undefined"!==typeof window?window:void 0},e),n.state={firstItemIndex:0,lastItemIndex:-1},e&&e.initialState&&(n.state=s({},n.state,e.initialState)),n.refreshState=n.refreshState.bind(n),"undefined"!==typeof window&&"requestAnimationFrame"in window&&(n.refreshState=(0,v.default)(n.refreshState)),n}return a(c,r),u(c,[{key:"setStateIfNeeded",value:function(e,t,n,r,i){var o=(0,y.default)(e,t,n,r,i);void 0!==o&&(o.firstItemIndex>o.lastItemIndex||o.firstItemIndex===this.state.firstItemIndex&&o.lastItemIndex===this.state.lastItemIndex||this.setState(o))}},{key:"refreshState",value:function(){if(this._isMounted){var e=this.props,t=e.itemHeight,n=e.items,r=e.itemBuffer;this.setStateIfNeeded(this.domNode,this.options.container,n,t,r)}}},{key:"componentWillMount",value:function(){this._isMounted=!0}},{key:"componentDidMount",value:function(){this.domNode=h.default.findDOMNode(this),this.refreshState(),this.options.container.addEventListener("scroll",this.refreshState),this.options.container.addEventListener("resize",this.refreshState)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.options.container.removeEventListener("scroll",this.refreshState),this.options.container.removeEventListener("resize",this.refreshState)}},{key:"componentWillReceiveProps",value:function(e){var t=e.itemHeight,n=e.items,r=e.itemBuffer;this.setStateIfNeeded(this.domNode,this.options.container,n,t,r)}},{key:"render",value:function(){return l.default.createElement(n,s({},this.props,t(this.props,this.state)))}}]),c}(c.PureComponent),r.propTypes={items:p.default.array.isRequired,itemHeight:p.default.number.isRequired,itemBuffer:p.default.number},r.defaultProps={itemBuffer:0},f}};t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(231),o=r(i),a=n(232),s=r(a),u=function(e,t,n,r,i){if(t&&r&&n&&0!==n.length){var a=t.innerHeight,u=t.clientHeight,c=a||u;if(c){var l=(0,s.default)(t),f=l+c,h=(0,o.default)(e)-(0,o.default)(t),d=r*n.length,p=Math.max(0,l-h),m=Math.max(0,Math.min(d,f-h));return{firstItemIndex:Math.max(0,Math.floor(p/r)-i),lastItemIndex:Math.min(n.length,Math.ceil(m/r)+i)-1}}}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){return"undefined"!==typeof t&&t?(t.offsetTop||0)+e(t.offsetParent):0};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e.pageYOffset?e.pageYOffset:e.document?e.document.documentElement&&e.document.documentElement.scrollTop?e.document.documentElement.scrollTop:e.document.body&&e.document.body.scrollTop?e.document.body.scrollTop:0:e.scrollY||e.scrollTop||0};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=arguments;t.default=function(e){var t=!1;return function(){t||(t=!0,window.requestAnimationFrame(function(){e.apply(void 0,r),t=!1}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){var n=e.items,r=e.itemHeight,i=t.firstItemIndex,o=t.lastItemIndex;return{virtual:{items:o>-1?n.slice(i,o+1):[],style:{height:n.length*r,paddingTop:i*r,boxSizing:"border-box"}}}};t.default=r},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e){var t=e.virtual,n=r(e,["virtual"]),i=n.currContext,o=n.currIdx,s=n.favorites,p=n.toggleFavorite,m=n.handleSongClick,y=n.browsePath,g=n.contexts,v=y.substr(0,y.lastIndexOf("/"));return a.a.createElement("div",{style:{position:"relative"}},a.a.createElement("div",{key:y,style:d.row},a.a.createElement("div",{style:d.colName},a.a.createElement(l.a,{to:"/browse/"+v},"..")),a.a.createElement("div",{style:d.colDir},h),a.a.createElement("div",{style:d.colSize})),a.a.createElement("div",{style:t.style},t.items.map(function(e){var t=e.path.replace("%","%25").replace("#","%23").replace(/^\//,""),n=e.path.split("/").pop(),r=i===g[y]&&o===e.idx;if("directory"===e.type)return a.a.createElement("div",{key:n,style:d.row},a.a.createElement("div",{style:d.colName},a.a.createElement(l.a,{to:"/browse/"+t},n)),a.a.createElement("div",{style:d.colDir},h),a.a.createElement("div",{style:d.colSize},u()(e.size,{unitSeparator:" "})));var v=c.b+t;return a.a.createElement("div",{key:n,style:d.row,className:r?"Song-now-playing":""},a.a.createElement("div",{style:d.colName},s&&a.a.createElement(f.a,{favorites:s,href:v,toggleFavorite:p}),a.a.createElement("a",{onClick:function(t){return m(v,g[y],e.idx)(t)},href:"#"},n)),a.a.createElement("div",{style:d.colSize},u()(e.size,{unitSeparator:" "})))})))}t.a=i;var o=n(0),a=n.n(o),s=n(236),u=n.n(s),c=n(34),l=n(56),f=n(35),h=a.a.createElement(o.Fragment,null,"\xa0\xa0<DIR>\xa0\xa0"),d={row:{display:"flex"},colName:{overflowX:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flexGrow:1},colDir:{flexShrink:0},colSize:{textAlign:"right",textTransform:"uppercase",whiteSpace:"nowrap",flexShrink:0,minWidth:"80px"}}},function(e,t,n){"use strict";function r(e,t){return"string"===typeof e?o(e):"number"===typeof e?i(e,t):null}function i(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),r=t&&t.thousandsSeparator||"",i=t&&t.unitSeparator||"",o=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,c=Boolean(t&&t.fixedDecimals),l=t&&t.unit||"";l&&u[l.toLowerCase()]||(l=n>=u.pb?"PB":n>=u.tb?"TB":n>=u.gb?"GB":n>=u.mb?"MB":n>=u.kb?"KB":"B");var f=e/u[l.toLowerCase()],h=f.toFixed(o);return c||(h=h.replace(s,"$1")),r&&(h=h.replace(a,r)),h+i+l}function o(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,n=c.exec(e),r="b";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r="b"),Math.floor(u[r]*t)}e.exports=r,e.exports.format=i,e.exports.parse=o;var a=/\B(?=(\d{3})+(?!\d))/g,s=/(?:\.0*|(\.[^0]+)0+)$/,u={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},c=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAATCAMAAAC9bj0JAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDk4NUEzRDY2NjdGMTFFOUIxMjI5QTFCQkU0MjcwNUEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDk4NUEzRDU2NjdGMTFFOUIxMjI5QTFCQkU0MjcwNUEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjYxOTNDRDg0RTRBMTI4MDE3N0E5RTJDMUY3RjMyNDYwIiBzdFJlZjpkb2N1bWVudElEPSI2MTkzQ0Q4NEU0QTEyODAxNzdBOUUyQzFGN0YzMjQ2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pps2iakAAAAGUExURf//AP///4t5850AAAACdFJOU/8A5bcwSgAAADxJREFUeNqckUEKACAMw+L/Py27CNIWqblm5NCxArwEh1sgp2gQJ6bUCZ+CVvgUtMKn4iR5xI9/CFuAAQByRgGRs8sF3AAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e){return o.a.createElement("div",{hidden:!e.dropzoneProps.isDragActive,className:"drop-message-outer"},o.a.createElement("div",{hidden:!e.dropzoneProps.isDragActive,className:"drop-message"},o.a.createElement("div",{className:"drop-message-inner"},"Drop files to play!",o.a.createElement("br",null),"Formats: .ay .it .kss .mid .mod ",o.a.createElement("br",null),".nsf .nsfe .sgc .spc .s3m .vgm .vgz .xm")))}t.a=r;var i=n(0),o=n.n(i)}]);
//# sourceMappingURL=main.165c7a14.js.map